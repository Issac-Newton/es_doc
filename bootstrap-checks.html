<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Bootstrap Checks | Elasticsearch Guide | Elastic</title>
<meta class="elastic" name="content" content="Bootstrap Checks | Elasticsearch Guide">

<link rel="home" href="index.html" title="Elasticsearch Guide"/>
<link rel="up" href="setup.html" title="Set up Elasticsearch"/>
<link rel="prev" href="system-config.html" title="Important system configuration"/>
<link rel="next" href="bootstrap-checks-xpack.html" title="Bootstrap Checks for X-Pack"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="system-config.html">« Important system configuration</a>
</span>
<span class="next">
<a href="bootstrap-checks-xpack.html">Bootstrap Checks for X-Pack »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="bootstrap-checks"></a>Bootstrap Checks<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>Collectively, we have a lot of experience with users suffering
unexpected issues because they have not configured
<a class="xref" href="settings.html#important-settings" title="Important Elasticsearch configuration">important settings</a>. In previous versions of
Elasticsearch, misconfiguration of some of these settings were logged
as warnings. Understandably, users sometimes miss these log messages.
To ensure that these settings receive the attention that they deserve,
Elasticsearch has bootstrap checks upon startup.</p>
<p>These bootstrap checks inspect a variety of Elasticsearch and system
settings and compare them to values that are safe for the operation of
Elasticsearch. If Elasticsearch is in development mode, any bootstrap
checks that fail appear as warnings in the Elasticsearch log. If
Elasticsearch is in production mode, any bootstrap checks that fail will
cause Elasticsearch to refuse to start.</p>
<p>There are some bootstrap checks that are always enforced to prevent
Elasticsearch from running with incompatible settings. These checks are
documented individually.</p>
<h3><a id="dev-vs-prod-mode"></a>Development vs. production mode<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h3>
<p>By default, Elasticsearch binds to loopback addresses for
<a class="xref" href="settings.html#modules-network" title="Networking">HTTP and transport (internal) communication</a>. This is fine
for downloading and playing with Elasticsearch as well as everyday development,
but it&#8217;s useless for production systems. To join a cluster, an Elasticsearch
node must be reachable via transport communication. To join a cluster via a
non-loopback address, a node must bind transport to a non-loopback address and
not be using <a class="xref" href="bootstrap-checks.html#single-node-discovery" title="Single-node discovery">single-node discovery</a>. Thus, we consider
an Elasticsearch node to be in development mode if it can not form a cluster
with another machine via a non-loopback address, and is otherwise in production
mode if it can join a cluster via non-loopback addresses.</p>
<p>Note that HTTP and transport can be configured independently via
<a class="xref" href="settings.html#http-settings" title="Advanced HTTP settings"><code class="literal">http.host</code></a> and <a class="xref" href="settings.html#transport-settings" title="Advanced transport settings"><code class="literal">transport.host</code></a>; this
can be useful for configuring a single node to be reachable via HTTP for testing
purposes without triggering production mode.</p>
<h3><a id="single-node-discovery"></a>Single-node discovery<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h3>
<p>We recognize that some users need to bind the transport to an external
interface for testing a remote-cluster configuration. For this situation, we
provide the discovery type <code class="literal">single-node</code> (configure it by setting
<code class="literal">discovery.type</code> to <code class="literal">single-node</code>); in this situation, a node will elect itself
master and will not join a cluster with any other node.</p>
<h3><a id="_forcing_the_bootstrap_checks"></a>Forcing the bootstrap checks<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h3>
<p>If you are running a single node in production, it is possible to evade the
bootstrap checks (either by not binding transport to an external interface, or
by binding transport to an external interface and setting the discovery type to
<code class="literal">single-node</code>). For this situation, you can force execution of the bootstrap
checks by setting the system property <code class="literal">es.enforce.bootstrap.checks</code> to <code class="literal">true</code>
in the <a class="xref" href="settings.html#set-jvm-options" title="Set JVM options">JVM options</a>. We strongly encourage you to do
this if you are in this specific situation. This system property can be used to
force execution of the bootstrap checks independent of the node configuration.</p>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_heap_size_check"></a>Heap size check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>By default, Elasticsearch automatically sizes JVM heap based on a node&#8217;s
<a class="xref" href="settings.html#node-roles" title="Node roles">roles</a> and total memory. If you manually override the default
sizing and start the JVM with different initial and max heap sizes, the JVM may
pause as it resizes the heap during system usage. If you enable
<a class="xref" href="system-config.html#bootstrap-memory_lock" title="Enable bootstrap.memory_lock"><code class="literal">bootstrap.memory_lock</code></a>, the JVM locks the initial heap
size on startup. If the initial heap size is not equal to the maximum heap size,
some JVM heap may not be locked after a resize. To avoid these issues, start the
JVM with an initial heap size equal to the maximum heap size.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_file_descriptor_check"></a>File descriptor check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>File descriptors are a Unix construct for tracking open "files". In Unix
though, <a href="https://en.wikipedia.org/wiki/Everything_is_a_file" class="ulink" target="_top">everything is
a file</a>. For example, "files" could be a physical file, a virtual file
(e.g., <code class="literal">/proc/loadavg</code>), or network sockets. Elasticsearch requires
lots of file descriptors (e.g., every shard is composed of multiple
segments and other files, plus connections to other nodes, etc.). This
bootstrap check is enforced on OS X and Linux. To pass the file
descriptor check, you might have to configure <a class="xref" href="system-config.html#file-descriptors" title="File Descriptors">file
descriptors</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_memory_lock_check"></a>Memory lock check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>When the JVM does a major garbage collection it touches every page of
the heap. If any of those pages are swapped out to disk they will have
to be swapped back in to memory. That causes lots of disk thrashing that
Elasticsearch would much rather use to service requests. There are
several ways to configure a system to disallow swapping. One way is by
requesting the JVM to lock the heap in memory through <code class="literal">mlockall</code> (Unix)
or virtual lock (Windows). This is done via the Elasticsearch setting
<a class="xref" href="system-config.html#bootstrap-memory_lock" title="Enable bootstrap.memory_lock"><code class="literal">bootstrap.memory_lock</code></a>. However, there are
cases where this setting can be passed to Elasticsearch but
Elasticsearch is not able to lock the heap (e.g., if the <code class="literal">elasticsearch</code>
user does not have <code class="literal">memlock unlimited</code>). The memory lock check verifies
that <span class="strong strong"><strong>if</strong></span> the <code class="literal">bootstrap.memory_lock</code> setting is enabled, that the JVM
was successfully able to lock the heap. To pass the memory lock check,
you might have to configure <a class="xref" href="system-config.html#bootstrap-memory_lock" title="Enable bootstrap.memory_lock"><code class="literal">bootstrap.memory_lock</code></a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="max-number-threads-check"></a>Maximum number of threads check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch executes requests by breaking the request down into stages
and handing those stages off to different thread pool executors. There
are different <a class="xref" href="settings.html#modules-threadpool" title="Thread pools">thread pool executors</a> for a variety
of tasks within Elasticsearch. Thus, Elasticsearch needs the ability to
create a lot of threads. The maximum number of threads check ensures
that the Elasticsearch process has the rights to create enough threads
under normal use. This check is enforced only on Linux. If you are on
Linux, to pass the maximum number of threads check, you must configure
your system to allow the Elasticsearch process the ability to create at
least 4096 threads. This can be done via <code class="literal">/etc/security/limits.conf</code>
using the <code class="literal">nproc</code> setting (note that you might have to increase the
limits for the <code class="literal">root</code> user too).</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_max_file_size_check"></a>Max file size check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>The segment files that are the components of individual shards and the translog
generations that are components of the translog can get large (exceeding
multiple gigabytes). On systems where the max size of files that can be created
by the Elasticsearch process is limited, this can lead to failed
writes. Therefore, the safest option here is that the max file size is unlimited
and that is what the max file size bootstrap check enforces. To pass the max
file check, you must configure your system to allow the Elasticsearch process
the ability to write files of unlimited size. This can be done via
<code class="literal">/etc/security/limits.conf</code> using the <code class="literal">fsize</code> setting to <code class="literal">unlimited</code> (note that
you might have to increase the limits for the <code class="literal">root</code> user too).</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="max-size-virtual-memory-check"></a>Maximum size virtual memory check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch and Lucene use <code class="literal">mmap</code> to great effect to map portions of
an index into the Elasticsearch address space. This keeps certain index
data off the JVM heap but in memory for blazing fast access. For this to
be effective, the Elasticsearch should have unlimited address space. The
maximum size virtual memory check enforces that the Elasticsearch
process has unlimited address space and is enforced only on Linux. To
pass the maximum size virtual memory check, you must configure your
system to allow the Elasticsearch process the ability to have unlimited
address space. This can be done via adding <code class="literal">&lt;user&gt; - as unlimited</code>
to <code class="literal">/etc/security/limits.conf</code>. This may require you to increase the limits
for the <code class="literal">root</code> user too.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_maximum_map_count_check"></a>Maximum map count check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>Continuing from the previous <a class="xref" href="bootstrap-checks.html#max-size-virtual-memory-check" title="Maximum size virtual memory check">point</a>, to
use <code class="literal">mmap</code> effectively, Elasticsearch also requires the ability to
create many memory-mapped areas. The maximum map count check checks that
the kernel allows a process to have at least 262,144 memory-mapped areas
and is enforced on Linux only. To pass the maximum map count check, you
must configure <code class="literal">vm.max_map_count</code> via <code class="literal">sysctl</code> to be at least <code class="literal">262144</code>.</p>
<p>Alternatively, the maximum map count check is only needed if you are using
<code class="literal">mmapfs</code> or <code class="literal">hybridfs</code> as the <a class="xref" href="index-modules-store.html" title="Store">store type</a> for your
indices. If you <a class="xref" href="index-modules-store.html#allow-mmap">do not allow</a> the use of <code class="literal">mmap</code> then this
bootstrap check will not be enforced.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_client_jvm_check"></a>Client JVM check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>There are two different JVMs provided by OpenJDK-derived JVMs: the
client JVM and the server JVM. These JVMs use different compilers for
producing executable machine code from Java bytecode. The client JVM is
tuned for startup time and memory footprint while the server JVM is
tuned for maximizing performance. The difference in performance between
the two VMs can be substantial. The client JVM check ensures that
Elasticsearch is not running inside the client JVM. To pass the client
JVM check, you must start Elasticsearch with the server VM. On modern
systems and operating systems, the server VM is the
default.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_use_serial_collector_check"></a>Use serial collector check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>There are various garbage collectors for the OpenJDK-derived JVMs
targeting different workloads. The serial collector in particular is
best suited for single logical CPU machines or extremely small heaps,
neither of which are suitable for running Elasticsearch. Using the
serial collector with Elasticsearch can be devastating for performance.
The serial collector check ensures that Elasticsearch is not configured
to run with the serial collector. To pass the serial collector check,
you must not start Elasticsearch with the serial collector (whether it&#8217;s
from the defaults for the JVM that you&#8217;re using, or you&#8217;ve explicitly
specified it with <code class="literal">-XX:+UseSerialGC</code>). Note that the default JVM
configuration that ships with Elasticsearch configures Elasticsearch to
use the G1GC garbage collector with JDK14 and later versions. For earlier
JDK versions, the configuration defaults to the CMS collector.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_system_call_filter_check"></a>System call filter check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch installs system call filters of various flavors depending
on the operating system (e.g., seccomp on Linux). These system call
filters are installed to prevent the ability to execute system calls
related to forking as a defense mechanism against arbitrary code
execution attacks on Elasticsearch. The system call filter check ensures
that if system call filters are enabled, then they were successfully
installed. To pass the system call filter check you must fix any
configuration errors on your system that prevented system call filters
from installing (check your logs).</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_onerror_and_onoutofmemoryerror_checks"></a>OnError and OnOutOfMemoryError checks<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>The JVM options <code class="literal">OnError</code> and <code class="literal">OnOutOfMemoryError</code> enable executing
arbitrary commands if the JVM encounters a fatal error (<code class="literal">OnError</code>) or an
<code class="literal">OutOfMemoryError</code> (<code class="literal">OnOutOfMemoryError</code>). However, by default,
Elasticsearch system call filters (seccomp) are enabled and these
filters prevent forking. Thus, using <code class="literal">OnError</code> or <code class="literal">OnOutOfMemoryError</code>
and system call filters are incompatible. The <code class="literal">OnError</code> and
<code class="literal">OnOutOfMemoryError</code> checks prevent Elasticsearch from starting if
either of these JVM options are used and system call filters are
enabled. This check is always enforced. To pass this check do not enable
<code class="literal">OnError</code> nor <code class="literal">OnOutOfMemoryError</code>; instead, upgrade to Java 8u92 and
use the JVM flag <code class="literal">ExitOnOutOfMemoryError</code>. While this does not have the
full capabilities of <code class="literal">OnError</code> nor <code class="literal">OnOutOfMemoryError</code>, arbitrary
forking will not be supported with seccomp enabled.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_early_access_check"></a>Early-access check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>The OpenJDK project provides early-access snapshots of upcoming releases. These
releases are not suitable for production. The early-access check detects these
early-access snapshots. To pass this check, you must start Elasticsearch on a
release build of the JVM.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_g1gc_check"></a>G1GC check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>Early versions of the HotSpot JVM that shipped with JDK 8 are known to
have issues that can lead to index corruption when the G1GC collector is
enabled. The versions impacted are those earlier than the version of
HotSpot that shipped with JDK 8u40. The G1GC check detects these early
versions of the HotSpot JVM.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_all_permission_check"></a>All permission check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>The all permission check ensures that the security policy used during bootstrap
does not grant the <code class="literal">java.security.AllPermission</code> to Elasticsearch. Running with
the all permission granted is equivalent to disabling the security manager.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_discovery_configuration_check"></a>Discovery configuration check<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>By default, when Elasticsearch first starts up it will try and discover other
nodes running on the same host. If no elected master can be discovered within a
few seconds then Elasticsearch will form a cluster that includes any other
nodes that were discovered. It is useful to be able to form this cluster
without any extra configuration in development mode, but this is unsuitable for
production because it&#8217;s possible to form multiple clusters and lose data as a
result.</p>
<p>This bootstrap check ensures that discovery is not running with the default
configuration. It can be satisfied by setting at least one of the following
properties:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">discovery.seed_hosts</code>
</li>
<li class="listitem">
<code class="literal">discovery.seed_providers</code>
</li>
<li class="listitem">
<code class="literal">cluster.initial_master_nodes</code>
</li>
</ul>
</div>
<p>Note that you should remove <code class="literal">cluster.initial_master_nodes</code> from the
configuration after the cluster has started for the first time. Do not use this
setting when restarting nodes or when adding new nodes to an existing cluster.
Instead, configure <code class="literal">discovery.seed_hosts</code> or <code class="literal">discovery.seed_providers</code>. If you
do not need any discovery configuration, for instance if running a single-node
cluster, set <code class="literal">discovery.seed_hosts: []</code> to disable discovery and satisfy this
bootstrap check.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="system-config.html">« Important system configuration</a>
</span>
<span class="next">
<a href="bootstrap-checks-xpack.html">Bootstrap Checks for X-Pack »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
