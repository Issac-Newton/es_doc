<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="keywords" content="hot-spotting, hotspot, hot-spot, hot spot, hotspots, hotspotting">
<title>Data stream APIs | Elasticsearch Guide | Elastic</title>
<meta class="elastic" name="content" content="Data stream APIs | Elasticsearch Guide">

<link rel="home" href="index.html" title="Elasticsearch Guide"/>
<link rel="up" href="rest-apis.html" title="REST APIs"/>
<link rel="prev" href="ccr-apis.html" title="Cross-cluster replication APIs"/>
<link rel="next" href="docs.html" title="Document APIs"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ccr-apis.html">« Cross-cluster replication APIs</a>
</span>
<span class="next">
<a href="docs.html">Document APIs »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="data-stream-apis"></a>Data stream APIs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/data-streams/data-stream-apis.asciidoc">edit</a></h2>
</div></div></div>
<p>The following APIs are available for managing <a class="xref" href="data-streams.html" title="Data streams">data streams</a>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="data-stream-apis.html#indices-create-data-stream" title="Create data stream API">Create data stream</a>
</li>
<li class="listitem">
<a class="xref" href="data-stream-apis.html#indices-delete-data-stream" title="Delete data stream API">Delete data stream</a>
</li>
<li class="listitem">
<a class="xref" href="data-stream-apis.html#indices-get-data-stream" title="Get data stream API">Get data stream</a>
</li>
<li class="listitem">
<a class="xref" href="data-stream-apis.html#indices-migrate-to-data-stream" title="Migrate to data stream API">Migrate to data stream</a>
</li>
<li class="listitem">
<a class="xref" href="data-stream-apis.html#data-stream-stats-api" title="Data stream stats API">Data stream stats</a>
</li>
<li class="listitem">
<a class="xref" href="data-stream-apis.html#promote-data-stream-api" title="Promote data stream API">Promote data stream</a>
</li>
<li class="listitem">
<a class="xref" href="data-stream-apis.html#modify-data-streams-api" title="Modify data streams API">Modify data streams</a>
</li>
</ul>
</div>
<p>The following API is available for <a class="xref" href="tsds.html" title="Time series data stream (TSDS)">time series data streams</a>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="data-stream-apis.html#indices-downsample-data-stream" title="Downsample index API">Downsample</a>
</li>
</ul>
</div>
<p>For concepts and tutorials, see <a class="xref" href="data-streams.html" title="Data streams"><em>Data streams</em></a>.</p>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-create-data-stream"></a>Create data stream API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/create-data-stream.asciidoc">edit</a></h2>
</div></div></div>

<p>Creates a new <a class="xref" href="data-streams.html" title="Data streams">data stream</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_data_stream/my-data-stream</pre>
</div>
<div class="console_widget" data-snippet="snippets/2230.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-create-data-stream-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/create-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT /_data_stream/&lt;data-stream&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-create-data-stream-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/create-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">create_index</code>
or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the data stream.
</li>
<li class="listitem">
A matching <a class="xref" href="index-templates.html" title="Index templates">index template</a> with data stream enabled.
See <a class="xref" href="set-up-a-data-stream.html" title="Set up a data stream"><em>Set up a data stream</em></a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-create-data-stream-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/create-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;data-stream&gt;</code>
</span>
</dt>
<dd>
<p>(Required, string) Name of the data stream to create. Data stream names must
meet the following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Lowercase only
</li>
<li class="listitem">
Cannot include <code class="literal">\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, <code class="literal">,</code>, <code class="literal">#</code>, <code class="literal">:</code>, or a
space character
</li>
<li class="listitem">
Cannot start with <code class="literal">-</code>, <code class="literal">_</code>, <code class="literal">+</code>, or <code class="literal">.ds-</code>
</li>
<li class="listitem">
Cannot be <code class="literal">.</code> or <code class="literal">..</code>
</li>
<li class="listitem">
Cannot be longer than 255 bytes. Multi-byte characters
count towards this limit faster.
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-delete-data-stream"></a>Delete data stream API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/delete-data-stream.asciidoc">edit</a></h2>
</div></div></div>

<p>Deletes one or more <a class="xref" href="data-streams.html" title="Data streams">data streams</a> and their backing
indices. See <a class="xref" href="set-up-a-data-stream.html#delete-data-stream" title="Delete a data stream">Delete a data stream</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">DELETE /_data_stream/my-data-stream</pre>
</div>
<div class="console_widget" data-snippet="snippets/2231.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-data-stream-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/delete-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">DELETE /_data_stream/&lt;data-stream&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-data-stream-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/delete-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">delete_index</code>
or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the data stream.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-data-stream-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/delete-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;data-stream&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Comma-separated list of data streams to delete.
Wildcard (<code class="literal">*</code>) expressions are supported.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-data-stream-api-query-parms"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/delete-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Type of data stream that wildcard patterns can match. Supports
comma-separated values, such as <code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>, <code class="literal">hidden</code>
</span>
</dt>
<dd>
Match any data stream, including <a class="xref" href="api-conventions.html#multi-hidden" title="Hidden data streams and indices">hidden</a> ones.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>, <code class="literal">closed</code>
</span>
</dt>
<dd>
Matches any non-hidden data stream. Data streams cannot be closed.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard patterns are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
</dl>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-get-data-stream"></a>Get data stream API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/get-data-stream.asciidoc">edit</a></h2>
</div></div></div>

<p>Retrieves information about one or more <a class="xref" href="data-streams.html" title="Data streams">data streams</a>.
See <a class="xref" href="set-up-a-data-stream.html#get-info-about-data-stream" title="Get information about a data stream">Get information about a data stream</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_data_stream/my-data-stream</pre>
</div>
<div class="console_widget" data-snippet="snippets/2232.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-data-stream-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/get-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_data_stream/&lt;data-stream&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-data-stream-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/get-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a>
for the data stream.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-data-stream-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/get-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;data-stream&gt;</code>
</span>
</dt>
<dd>
(Optional, string)
Comma-separated list of data stream names used to limit the request. Wildcard
(<code class="literal">*</code>) expressions are supported. If omitted, all data streams will be
returned.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-data-stream-api-query-parms"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/get-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Type of data stream that wildcard patterns can match. Supports
comma-separated values, such as <code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>, <code class="literal">hidden</code>
</span>
</dt>
<dd>
Match any data stream, including <a class="xref" href="api-conventions.html#multi-hidden" title="Hidden data streams and indices">hidden</a> ones.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>, <code class="literal">closed</code>
</span>
</dt>
<dd>
Matches any non-hidden data stream. Data streams cannot be closed.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard patterns are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">include_defaults</code>
</span>
</dt>
<dd>
(Optional, Boolean) Functionality in <span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span>. If <code class="literal">true</code>, return all default settings in the response.
Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-data-stream-api-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/get-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">data_streams</code>
</span>
</dt>
<dd>
<p>
(array of objects)
Contains information about retrieved data streams.
</p>
<details open>
<summary class="title">Properties of objects in <code class="literal">data_streams</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(string)
Name of the data stream.
</dd>
<dt>
<span class="term">
<code class="literal">timestamp_field</code>
</span>
</dt>
<dd>
<p>
(object)
Contains information about the data stream&#8217;s <code class="literal">@timestamp</code> field.
</p>
<details open>
<summary class="title">Properties of <code class="literal">timestamp_field</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(string)
Name of the data stream&#8217;s timestamp field, which must be <code class="literal">@timestamp</code>. The
<code class="literal">@timestamp</code> field must be included in every document indexed to the data
stream.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">indices</code>
</span>
</dt>
<dd>
<p>
(array of objects)
Array of objects containing information about the data stream&#8217;s backing
indices.
</p>
<p>The last item in this array contains information about the stream&#8217;s current
<a class="xref" href="data-streams.html#data-stream-write-index" title="Write index">write index</a>.</p>
<details open>
<summary class="title">Properties of <code class="literal">indices</code> objects</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index_name</code>
</span>
</dt>
<dd>
(string)
Name of the backing index. For naming conventions, see
<a class="xref" href="data-streams.html#data-streams-generation" title="Generation">Generation</a>.
</dd>
<dt>
<span class="term">
<code class="literal">index_uuid</code>
</span>
</dt>
<dd>
(string)
Universally unique identifier (UUID) for the index.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">generation</code>
</span>
</dt>
<dd>
(integer)
Current <a class="xref" href="data-streams.html#data-streams-generation" title="Generation">generation</a> for the data stream. This number
acts as a cumulative count of the stream&#8217;s rollovers, starting at <code class="literal">1</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_meta</code>
</span>
</dt>
<dd>
(object)
Custom metadata for the stream, copied from the <code class="literal">_meta</code> object of the
stream&#8217;s matching <a class="xref" href="set-up-a-data-stream.html#create-index-template" title="Create an index template">index template</a>. If empty,
the response omits this property.
</dd>
<dt>
<span class="term">
<code class="literal">status</code>
</span>
</dt>
<dd>
<p>
(string)
<a class="xref" href="cluster.html#cluster-health" title="Cluster health API">Health status</a> of the data stream.
</p>
<p>This health status is based on the state of the primary and replica shards of
the stream&#8217;s backing indices.</p>
<details open>
<summary class="title">Values for <code class="literal">status</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">GREEN</code>
</span>
</dt>
<dd>
All shards are assigned.
</dd>
<dt>
<span class="term">
<code class="literal">YELLOW</code>
</span>
</dt>
<dd>
All primary shards are assigned, but one or more replica shards are
unassigned.
</dd>
<dt>
<span class="term">
<code class="literal">RED</code>
</span>
</dt>
<dd>
One or more primary shards are unassigned, so some data is unavailable.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
<p>
(string)
Name of the index template used to create the data stream&#8217;s backing indices.
</p>
<p>The template&#8217;s index pattern must match the name of this data stream. See
<a class="xref" href="set-up-a-data-stream.html#create-index-template" title="Create an index template">create an index template</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ilm_policy</code>
</span>
</dt>
<dd>
<p>
(string)
Name of the current ILM lifecycle policy in the stream&#8217;s matching index
template. This lifecycle policy is set in the <code class="literal">index.lifecycle.name</code> setting.
</p>
<p>If the template does not include a lifecycle policy, this property is not
included in the response.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>A data stream&#8217;s backing indices may be assigned different lifecycle
policies. To retrieve the lifecycle policy for individual backing indices,
use the <a class="xref" href="indices.html#indices-get-settings" title="Get index settings API">get index settings API</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
(Boolean) If <code class="literal">true</code>, the data stream is <a class="xref" href="api-conventions.html#multi-hidden" title="Hidden data streams and indices">hidden</a>.
</dd>
<dt>
<span class="term">
<code class="literal">system</code>
</span>
</dt>
<dd>
(Boolean)
If <code class="literal">true</code>, the data stream is created and managed by an Elastic stack component
and cannot be modified through normal user interaction.
</dd>
<dt>
<span class="term">
<code class="literal">allow_custom_routing</code>
</span>
</dt>
<dd>
(Boolean)
If <code class="literal">true</code>, the data stream this data stream allows custom routing on write request.
</dd>
<dt>
<span class="term">
<code class="literal">replicated</code>
</span>
</dt>
<dd>
(Boolean)
If <code class="literal">true</code>, the data stream is created and managed by cross-cluster replication and the local
cluster can not write into this data stream or change its mappings.
</dd>
<dt>
<span class="term">
<code class="literal">lifecycle</code>
</span>
</dt>
<dd>
<p>
(object)
Functionality in <span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span>. Contains the configuration for the data lifecycle management of this data stream.
</p>
<details open>
<summary class="title">Properties of <code class="literal">lifecycle</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">data_retention</code>
</span>
</dt>
<dd>
(string)
If defined, every document added to this data stream will be stored at least for this time frame. Any time after this
duration the document could be deleted. When empty, every document in this data stream will be stored indefinitely.
</dd>
<dt>
<span class="term">
<code class="literal">rollover</code>
</span>
</dt>
<dd>
(object)
The conditions which will trigger the rollover of a backing index as configured by the cluster setting
<code class="literal">cluster.lifecycle.default.rollover</code>. This property is an implementation detail and it will only be retrieved when the query
param <code class="literal">include_defaults</code> is set to <code class="literal">true</code>. The contents of this field are subject to change.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-data-stream-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/get-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET _data_stream/my-data-stream*</pre>
</div>
<div class="console_widget" data-snippet="snippets/2233.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "data_streams": [
    {
      "name": "my-data-stream",
      "timestamp_field": {
        "name": "@timestamp"
      },
      "indices": [
        {
          "index_name": ".ds-my-data-stream-2099.03.07-000001",
          "index_uuid": "xCEhwsp8Tey0-FLNFYVwSg"
        },
        {
          "index_name": ".ds-my-data-stream-2099.03.08-000002",
          "index_uuid": "PA_JquKGSiKcAKBA8DJ5gw"
        }
      ],
      "generation": 2,
      "_meta": {
        "my-meta-field": "foo"
      },
      "status": "GREEN",
      "template": "my-index-template",
      "ilm_policy": "my-lifecycle-policy",
      "hidden": false,
      "system": false,
      "allow_custom_routing": false,
      "replicated": false
    },
    {
      "name": "my-data-stream-two",
      "timestamp_field": {
        "name": "@timestamp"
      },
      "indices": [
        {
          "index_name": ".ds-my-data-stream-two-2099.03.08-000001",
          "index_uuid": "3liBu2SYS5axasRt6fUIpA"
        }
      ],
      "generation": 1,
      "_meta": {
        "my-meta-field": "foo"
      },
      "status": "YELLOW",
      "template": "my-index-template",
      "ilm_policy": "my-lifecycle-policy",
      "hidden": false,
      "system": false,
      "allow_custom_routing": false,
      "replicated": false
    }
  ]
}</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-migrate-to-data-stream"></a>Migrate to data stream API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/migrate-to-data-stream.asciidoc">edit</a></h2>
</div></div></div>

<p>Converts an <a class="xref" href="aliases.html" title="Aliases">index alias</a> to a <a class="xref" href="data-streams.html" title="Data streams">data stream</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_data_stream/_migrate/my-logs</pre>
</div>
<div class="console_widget" data-snippet="snippets/2234.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-migrate-to-data-stream-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/migrate-to-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_data_stream/_migrate/&lt;alias&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-migrate-to-data-stream-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/migrate-to-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the index alias.
</li>
<li class="listitem">
A matching <a class="xref" href="index-templates.html" title="Index templates">index template</a> with data stream enabled.
See <a class="xref" href="set-up-a-data-stream.html" title="Set up a data stream"><em>Set up a data stream</em></a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-migrate-to-data-stream-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/migrate-to-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;alias&gt;</code>
</span>
</dt>
<dd>
<p>(Required, string)
Name of the index alias to convert to a data stream. The alias must meet the
following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The alias must have a <a class="xref" href="aliases.html#write-index" title="Write index">write index</a>.
</li>
<li class="listitem">
All indices for the alias have a <code class="literal">@timestamp</code> field mapping of a <code class="literal">date</code> or <code class="literal">date_nanos</code> field type.
</li>
<li class="listitem">
The alias must not have any <a class="xref" href="aliases.html#filter-alias" title="Filter an alias">filters</a>.
</li>
<li class="listitem">
The alias must not use <a class="xref" href="aliases.html#alias-routing" title="Routing">custom routing</a>.
</li>
</ul>
</div>
<p>If successful, the request removes the alias and creates a data stream with the
same name. The alias&#8217;s indices become hidden backing indices for the stream. The
alias&#8217;s write index becomes the stream&#8217;s write index.</p>
</dd>
</dl>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="data-stream-stats-api"></a>Data stream stats API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/data-stream-stats.asciidoc">edit</a></h2>
</div></div></div>

<p>Retrieves statistics for one or more <a class="xref" href="data-streams.html" title="Data streams">data streams</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_data_stream/my-data-stream/_stats</pre>
</div>
<div class="console_widget" data-snippet="snippets/2235.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-stream-stats-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/data-stream-stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">monitor</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a>
for the data stream.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-stream-stats-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/data-stream-stats.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_data_stream/&lt;data-stream&gt;/_stats</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-stream-stats-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/data-stream-stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;data-stream&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams used to limit the request. Wildcard
expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams in a cluster, omit this parameter or use <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-stream-stats-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/data-stream-stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Type of data stream that wildcard patterns can match. Supports
comma-separated values, such as <code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>, <code class="literal">hidden</code>
</span>
</dt>
<dd>
Match any data stream, including <a class="xref" href="api-conventions.html#multi-hidden" title="Hidden data streams and indices">hidden</a> ones.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>, <code class="literal">closed</code>
</span>
</dt>
<dd>
Matches any non-hidden data stream. Data streams cannot be closed.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard patterns are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">human</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>, the response includes statistics in human-readable <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte
values</a>. Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-stream-stats-api-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/data-stream-stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">_shards</code>
</span>
</dt>
<dd>
<p>
(object)
Contains information about shards that attempted to execute the request.
</p>
<details open>
<summary class="title">Properties of <code class="literal">_shards</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">total</code>
</span>
</dt>
<dd>
(integer)
Total number of shards that attempted to execute the request.
</dd>
<dt>
<span class="term">
<code class="literal">successful</code>
</span>
</dt>
<dd>
(integer)
Number of shards that successfully executed the request.
</dd>
<dt>
<span class="term">
<code class="literal">failed</code>
</span>
</dt>
<dd>
(integer)
Number of shards that failed to execute the request.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">data_stream_count</code>
</span>
</dt>
<dd>
(integer)
Total number of selected data streams.
</dd>
<dt>
<span class="term">
<code class="literal">backing_indices</code>
</span>
</dt>
<dd>
(integer)
Total number of backing indices for the selected data streams.
</dd>
<dt>
<span class="term">
<code class="literal">total_store_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
Total size of all shards for the selected data streams.
This property is included only if the <code class="literal">human</code> query parameter is <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">total_store_size_bytes</code>
</span>
</dt>
<dd>
(integer)
Total size, in bytes, of all shards for the selected data streams.
</dd>
<dt>
<span class="term">
<code class="literal">data_streams</code>
</span>
</dt>
<dd>
<p>
(array of objects)
Contains statistics for the selected data streams.
</p>
<details open>
<summary class="title">Properties of objects in <code class="literal">data_streams</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">data_stream</code>
</span>
</dt>
<dd>
(string)
Name of the data stream.
</dd>
<dt>
<span class="term">
<code class="literal">backing_indices</code>
</span>
</dt>
<dd>
(integer)
Current number of backing indices for the data stream.
</dd>
<dt>
<span class="term">
<code class="literal">store_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
Total size of all shards for the data stream&#8217;s backing indices.
This parameter is only returned if the <code class="literal">human</code> query parameter is <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">store_size_bytes</code>
</span>
</dt>
<dd>
(integer)
Total size, in bytes, of all shards for the data stream&#8217;s backing indices.
</dd>
<dt>
<span class="term">
<code class="literal">maximum_timestamp</code>
</span>
</dt>
<dd>
<p>
(integer)
The data stream&#8217;s highest <code class="literal">@timestamp</code> value, converted to milliseconds since
the <a href="https://en.wikipedia.org/wiki/Unix_time" class="ulink" target="_top">Unix epoch</a>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This timestamp is provided as a best effort. The data stream may contain
<code class="literal">@timestamp</code> values higher than this if one or more of the following conditions
are met:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The stream contains <a class="xref" href="indices.html#indices-open-close" title="Open index API">closed</a> backing indices.
</li>
<li class="listitem">
Backing indices with a <a class="xref" href="data-streams.html#data-streams-generation" title="Generation">lower generation</a> contain
higher <code class="literal">@timestamp</code> values.
</li>
</ul>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-stream-stats-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/data-stream-stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_data_stream/my-data-stream*/_stats?human=true</pre>
</div>
<div class="console_widget" data-snippet="snippets/2236.console"></div>
<p>The API returns the following response.</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "_shards": {
    "total": 10,
    "successful": 5,
    "failed": 0
  },
  "data_stream_count": 2,
  "backing_indices": 5,
  "total_store_size": "7kb",
  "total_store_size_bytes": 7268,
  "data_streams": [
    {
      "data_stream": "my-data-stream",
      "backing_indices": 3,
      "store_size": "3.7kb",
      "store_size_bytes": 3772,
      "maximum_timestamp": 1607512028000
    },
    {
      "data_stream": "my-data-stream-two",
      "backing_indices": 2,
      "store_size": "3.4kb",
      "store_size_bytes": 3496,
      "maximum_timestamp": 1607425567000
    }
  ]
}</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="promote-data-stream-api"></a>Promote data stream API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/data-streams/promote-data-stream-api.asciidoc">edit</a></h2>
</div></div></div>

<p>The purpose of the promote data stream api is to turn
a data stream that is replicated by CCR into a regular
data stream.</p>
<p>Via CCR Auto Following, a data stream from a remote cluster
can be replicated to the local cluster. These data streams
can&#8217;t be rolled over in the local cluster. Only if the upstream
data stream rolls over then these replicated data streams roll
over as well. In the event that the remote cluster is no longer
available, the data stream in the local cluster can be promoted
to a regular data stream, which allows these data streams to
be rolled over in the local cluster.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_data_stream/_promote/my-data-stream</pre>
</div>
<div class="console_widget" data-snippet="snippets/2237.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="promote-data-stream-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/data-streams/promote-data-stream-api.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_data_stream/_promote/&lt;data-stream&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="promote-data-stream-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/data-streams/promote-data-stream-api.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage_follow_index</code>
<a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="promote-data-stream-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/data-streams/promote-data-stream-api.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;data-stream&gt;</code>
</span>
</dt>
<dd>
(Required, string)
The name of the data stream to promote.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modify-data-streams-api"></a>Modify data streams API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/data-streams/modify-data-streams-api.asciidoc">edit</a></h2>
</div></div></div>

<p>Performs one or more data stream modification actions in a single atomic
operation.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST _data_stream/_modify
{
  "actions": [
    {
      "remove_backing_index": {
        "data_stream": "my-logs",
        "index": ".ds-my-logs-2099.01.01-000001"
      }
    },
    {
      "add_backing_index": {
        "data_stream": "my-logs",
        "index": "index-to-add"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2238.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="modify-data-streams-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/data-streams/modify-data-streams-api.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_data_stream/_modify</code></p>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="modify-data-streams-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/data-streams/modify-data-streams-api.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">actions</code>
</span>
</dt>
<dd>
<p>
(Required, array of objects) Actions to perform.
</p>
<details open>
<summary class="title">Properties of <code class="literal">actions</code> objects</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;action&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, object) The key is the action type. At least one action is required.
</p>
<details open>
<summary class="title">Valid <code class="literal">&lt;action&gt;</code> keys</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">add_backing_index</code>
</span>
</dt>
<dd>
Adds an existing index as a backing index for a data stream. The index is
hidden as part of this operation.
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Adding indices with the <code class="literal">add_backing_index</code> action
can potentially result in improper data stream behavior.
This should be considered an expert level API.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">remove_backing_index</code>
</span>
</dt>
<dd>
Removes a backing index from a data stream. The index is unhidden
as part of this operation. A data stream&#8217;s write index cannot be removed.
</dd>
</dl>
</div>
</div>
</details>
<p>The object body contains options for the action.</p>
<details open>
<summary class="title">Properties of <code class="literal">&lt;action&gt;</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">data_stream</code>
</span>
</dt>
<dd>
(Required*, string) Data stream targeted by the action.
</dd>
<dt>
<span class="term">
<code class="literal">index</code>
</span>
</dt>
<dd>
(Required*, string) Index for the action.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-downsample-data-stream"></a>Downsample index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/downsample-data-stream.asciidoc">edit</a></h2>
</div></div></div>

<p>Aggregates a time series (TSDS) index and stores
pre-computed statistical summaries (<code class="literal">min</code>, <code class="literal">max</code>, <code class="literal">sum</code>, <code class="literal">value_count</code> and
<code class="literal">avg</code>) for each metric field grouped by a configured time interval. For example,
a TSDS index that contains metrics sampled every 10 seconds can be downsampled
to an hourly index. All documents within an hour interval are summarized and
stored as a single document in the downsample index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-time-series-index/_downsample/my-downsampled-time-series-index
{
    "fixed_interval": "1d"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2239.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="downsample-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/downsample-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;source-index&gt;/_downsample/&lt;output-downsampled-index&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="downsample-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/downsample-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Only indices in a <a class="xref" href="tsds.html" title="Time series data stream (TSDS)">time series data stream</a> are supported.
</li>
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">all</code>
or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the data stream.
</li>
<li class="listitem">
Neither <a class="xref" href="authorization.html#field-and-document-access-control" title="Setting up field and document level security">field nor document level security</a> can be defined on the source index.
</li>
<li class="listitem">
The source index must be read only (<code class="literal">index.blocks.write: true</code>).
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="downsample-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/downsample-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;source-index&gt;</code>
</span>
</dt>
<dd>
(Optional, string) Name of the time series index to downsample.
</dd>
<dt>
<span class="term">
<code class="literal">&lt;output-downsampled_index&gt;</code>
</span>
</dt>
<dd>
<p>(Required, string) Name of the index to create.</p>
<p>Index names must meet the following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Lowercase only
</li>
<li class="listitem">
Cannot include <code class="literal">\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, ` ` (space character), <code class="literal">,</code>, <code class="literal">#</code>
</li>
<li class="listitem">
Indices prior to 7.0 could contain a colon (<code class="literal">:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+
</li>
<li class="listitem">
Cannot start with <code class="literal">-</code>, <code class="literal">_</code>, <code class="literal">+</code>
</li>
<li class="listitem">
Cannot be <code class="literal">.</code> or <code class="literal">..</code>
</li>
<li class="listitem">
Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)
</li>
<li class="listitem">
Names starting with <code class="literal">.</code> are deprecated, except for <a class="xref" href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="downsample-api-query-parms"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/downsample-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">fixed_interval</code>
</span>
</dt>
<dd>
<p>
(Required, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>) The interval at which
to aggregate the original time series index. For example, <code class="literal">60m</code> produces a
document for each 60 minute (hourly) interval. This follows standard time
formatting syntax as used elsewhere in Elasticsearch.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Smaller, more granular intervals take up proportionally more space.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="downsample-api-process"></a>The downsampling process<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/downsample-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<p>The downsampling operation traverses the source TSDS index and performs the
following steps:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Creates a new document for each value of the <code class="literal">_tsid</code> field and each
<code class="literal">@timestamp</code> value, rounded to the <code class="literal">fixed_interval</code> defined in the downsample
configuration.
</li>
<li class="listitem">
For each new document, copies all <a class="xref" href="tsds.html#time-series-dimension" title="Dimensions">time
series dimensions</a> from the source index to the target index. Dimensions in a
TSDS are constant, so this is done only once per bucket.
</li>
<li class="listitem">
<p>For each <a class="xref" href="tsds.html#time-series-metric" title="Metrics">time series metric</a> field, computes aggregations
for all documents in the bucket. Depending on the metric type of each metric
field a different set of pre-aggregated results is stored:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">gauge</code>: The <code class="literal">min</code>, <code class="literal">max</code>, <code class="literal">sum</code>, and <code class="literal">value_count</code> are stored; <code class="literal">value_count</code>
is stored as type <code class="literal">aggregate_metric_double</code>.
</li>
<li class="listitem">
<code class="literal">counter</code>: The <code class="literal">last_value</code> is stored.
</li>
</ul>
</div>
</li>
<li class="listitem">
For all other fields, the most recent value is copied to the target index.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="downsample-api-mappings"></a>Source and target index field mappings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/indices/downsample-data-stream.asciidoc">edit</a></h3>
</div></div></div>
<p>Fields in the target, downsampled index are created based on fields in the
original source index, as follows:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
All fields mapped with the <code class="literal">time-series-dimension</code> parameter are created in
the target downsample index with the same mapping as in the source index.
</li>
<li class="listitem">
All fields mapped with the <code class="literal">time_series_metric</code> parameter are created
in the target downsample index with the same mapping as in the source
index. An exception is that for fields mapped as <code class="literal">time_series_metric: gauge</code>
the field type is changed to <code class="literal">aggregate_metric_double</code>.
</li>
<li class="listitem">
All other fields that are neither dimensions nor metrics (that is, label
fields), are created in the target downsample index with the same mapping
that they had in the source index.
</li>
</ol>
</div>
<p>Check the <a class="xref" href="tsds.html#downsampling" title="Downsampling a time series data stream">Downsampling</a> documentation for an overview and
examples of running downsampling manually and as part of an ILM policy.</p>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="ccr-apis.html">« Cross-cluster replication APIs</a>
</span>
<span class="next">
<a href="docs.html">Document APIs »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
