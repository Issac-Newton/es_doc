<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Remote clusters | Elasticsearch Guide | Elastic</title>
<meta class="elastic" name="content" content="Remote clusters | Elasticsearch Guide">

<link rel="home" href="index.html" title="Elasticsearch Guide"/>
<link rel="up" href="setup.html" title="Set up Elasticsearch"/>
<link rel="prev" href="restart-cluster.html" title="Full-cluster restart and rolling restart"/>
<link rel="next" href="modules-plugins.html" title="Plugins"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="restart-cluster.html">« Full-cluster restart and rolling restart</a>
</span>
<span class="next">
<a href="modules-plugins.html">Plugins »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="remote-clusters"></a>Remote clusters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/remote-clusters.asciidoc">edit</a></h2>
</div></div></div>
<p>You can connect a local cluster to other Elasticsearch clusters, known as <em>remote
clusters</em>. Remote clusters can be located in different datacenters or
geographic regions, and contain indices or data streams that can be replicated
with cross-cluster replication or searched by a local cluster using cross-cluster search.</p>
<p>With <a class="xref" href="xpack-ccr.html" title="Cross-cluster replication">cross-cluster replication</a>, you ingest data to an index on a remote cluster. This
<em>leader</em> index is replicated to one or more read-only <em>follower</em> indices on your local cluster. Creating a multi-cluster architecture with cross-cluster replication enables you to
configure disaster recovery, bring data closer to your users, or establish a
centralized reporting cluster to process reports locally.</p>
<p><a class="xref" href="modules-cross-cluster-search.html" title="Search across clusters">Cross-cluster search</a> enables you to run a search request
against one or more remote clusters. This capability provides each region with a
global view of all clusters, allowing you to send a search request from a local
cluster and return results from all connected remote clusters. For full cross-cluster search
capabilities, the local and remote cluster must be on the same
<a href="https://www.elastic.co/subscriptions" class="ulink" target="_top">subscription level</a>.</p>
<p>Enabling and configuring security is important on both local and remote
clusters. When connecting a local cluster to remote clusters, an Elasticsearch superuser
(such as the <code class="literal">elastic</code> user) on the local cluster gains total read access to the
remote clusters. To use cross-cluster replication and cross-cluster search safely,
<a class="xref" href="remote-clusters.html#remote-clusters-security" title="Configure remote clusters with security">enable security</a> on all connected clusters
and configure Transport Layer Security (TLS) on at least the transport level on
every node.</p>
<p>Furthermore, a local administrator at the operating system level
with sufficient access to Elasticsearch configuration files and private keys can
potentially take over a remote cluster. Ensure that your security strategy
includes securing local <em>and</em> remote clusters at the operating system level.</p>
<p>To register a remote cluster,
<a class="xref" href="remote-clusters.html#remote-clusters-connect" title="Connect to remote clusters">connect the local cluster</a> to nodes in the
remote cluster using sniff mode (default) or proxy mode. After registering
remote clusters, <a class="xref" href="remote-clusters.html#remote-clusters-privileges" title="Configure roles and users for remote clusters">configure privileges</a> for cross-cluster replication
and cross-cluster search.</p>
<h3><a id="sniff-mode"></a>Sniff mode<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/remote-clusters.asciidoc">edit</a></h3>
<p>In sniff mode, a cluster is created using a name and a list of seed nodes. When
a remote cluster is registered, its cluster state is retrieved from one of the
seed nodes and up to three <em>gateway nodes</em> are selected as part of remote
cluster requests. This mode requires that the gateway node&#8217;s publish addresses
are accessible by the local cluster.</p>
<p>Sniff mode is the default connection mode.</p>
<p><a id="gateway-nodes-selection"></a>The <em>gateway nodes</em> selection depends on the following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>version</strong></span>: Remote nodes must be compatible with the cluster they are
registered to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Any node can communicate with another node on the same
major version. For example, 7.0 can talk to any 7.x node.
</li>
<li class="listitem">
Only nodes on the last minor version of a certain major version can
communicate with nodes on the following major version. In the 6.x series, 6.8
can communicate with any 7.x node, while 6.7 can only communicate with 7.0.
</li>
<li class="listitem">
<p>Version compatibility is
symmetric, meaning that if 6.7 can communicate with 7.0, 7.0 can also
communicate with 6.7. The following table depicts version compatibility between
local and remote nodes.</p>
<details open>
<summary class="title">Version compatibility table</summary>
<div class="content">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
<col class="col_6"/>
<col class="col_7"/>
<col class="col_8"/>
<col class="col_9"/>
<col class="col_10"/>
</colgroup>
<tbody>
<tr>
<td align="center" valign="top"><p></p></td>
<td align="center" colspan="9" valign="top"><p><span class="strong strong"><strong>Local cluster</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>Remote cluster</strong></span></p></td>
<td align="center" valign="top"><p>5.0–5.5</p></td>
<td align="center" valign="top"><p>5.6</p></td>
<td align="center" valign="top"><p>6.0–6.6</p></td>
<td align="center" valign="top"><p>6.7</p></td>
<td align="center" valign="top"><p>6.8</p></td>
<td align="center" valign="top"><p>7.0</p></td>
<td align="center" valign="top"><p>7.1–7.16</p></td>
<td align="center" valign="top"><p>7.17</p></td>
<td align="center" valign="top"><p>8.0–8.9</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>5.0–5.5</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>5.6</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>6.0–6.6</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>6.7</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>6.8</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>7.0</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>7.1–7.16</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>7.17</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.0–8.9</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic only supports cross-cluster search on a subset of these configurations. See
<a class="xref" href="modules-cross-cluster-search.html#ccs-supported-configurations" title="Supported cross-cluster search configurations">Supported cross-cluster search configurations</a>.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>role</strong></span>: By default, any non-<a class="xref" href="settings.html#master-node" title="Master-eligible node">master-eligible</a> node can act as a
gateway node. Dedicated master nodes are never selected as gateway nodes.
</li>
<li class="listitem">
<span class="strong strong"><strong>attributes</strong></span>: You can define the gateway nodes for a cluster by setting
<a class="xref" href="remote-clusters.html#cluster-remote-node-attr"><code class="literal">cluster.remote.node.attr.gateway</code></a> to <code class="literal">true</code>.
However, such nodes still have to satisfy the two above requirements.
</li>
</ul>
</div>
<h3><a id="proxy-mode"></a>Proxy mode<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/remote-clusters.asciidoc">edit</a></h3>
<p>In proxy mode, a cluster is created using a name and a single proxy address.
When you register a remote cluster, a configurable number of socket connections
are opened to the proxy address. The proxy is required to route those
connections to the remote cluster. Proxy mode does not require remote cluster
nodes to have accessible publish addresses.</p>
<p>The proxy mode is not the default connection mode and must be configured.
Proxy mode has the same <a class="xref" href="remote-clusters.html#gateway-nodes-selection">version compatibility
requirements</a> as sniff mode.</p>
<details id="proxy-mode-version-compatibility">
<summary class="title">Version compatibility matrix</summary>
<div class="content">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
<col class="col_6"/>
<col class="col_7"/>
<col class="col_8"/>
<col class="col_9"/>
<col class="col_10"/>
</colgroup>
<tbody>
<tr>
<td align="center" valign="top"><p></p></td>
<td align="center" colspan="9" valign="top"><p><span class="strong strong"><strong>Local cluster</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>Remote cluster</strong></span></p></td>
<td align="center" valign="top"><p>5.0–5.5</p></td>
<td align="center" valign="top"><p>5.6</p></td>
<td align="center" valign="top"><p>6.0–6.6</p></td>
<td align="center" valign="top"><p>6.7</p></td>
<td align="center" valign="top"><p>6.8</p></td>
<td align="center" valign="top"><p>7.0</p></td>
<td align="center" valign="top"><p>7.1–7.16</p></td>
<td align="center" valign="top"><p>7.17</p></td>
<td align="center" valign="top"><p>8.0–8.9</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>5.0–5.5</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>5.6</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>6.0–6.6</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>6.7</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>6.8</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>7.0</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>7.1–7.16</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>7.17</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.0–8.9</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic only supports cross-cluster search on a subset of these configurations. See
<a class="xref" href="modules-cross-cluster-search.html#ccs-supported-configurations" title="Supported cross-cluster search configurations">Supported cross-cluster search configurations</a>.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="remote-clusters-security"></a>Configure remote clusters with security<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/remote-clusters-security.asciidoc">edit</a></h2>
</div></div></div>
<p>To use cross-cluster replication or cross-cluster search safely with remote clusters, enable security on all
connected clusters and configure Transport Layer Security (TLS) on every node.
Configuring TLS security on the transport interface is minimally required for
remote clusters. For additional security, configure TLS on the
<a class="xref" href="manually-configure-security.html#security-basic-setup-https" title="Set up basic security for the Elastic Stack plus secured HTTPS traffic">HTTP interface</a> as well.</p>
<p>All connected clusters must trust one another and be mutually authenticated
with TLS on the transport interface. This means that the local cluster
trusts the certificate  authority (CA) of the remote cluster, and the remote
cluster trusts the CA of the local cluster. When establishing a connection, all
nodes will verify certificates from nodes on the other side. This mutual trust
is required to securely connect a remote cluster, because all connected nodes
effectively form a single security domain.</p>
<p>User authentication is performed on the local cluster and the user and user’s
roles names are passed to the remote clusters. A remote cluster checks the user’s
role names against its local role definitions to determine which indices the user is
allowed to access.</p>
<p>Before using cross-cluster replication or cross-cluster search with secured Elasticsearch clusters, complete the following
configuration tasks:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Enable the Elasticsearch security features on every node in each connected cluster by
setting <code class="literal">xpack.security.enabled</code> to <code class="literal">true</code> in <code class="literal">elasticsearch.yml</code>. Refer to the
<a class="xref" href="settings.html#general-security-settings" title="General security settings">Elasticsearch security settings</a>.
</li>
<li class="listitem">
<p>Configure Transport Layer Security (TLS) on every node to encrypt internode
traffic and authenticate nodes in the local cluster with nodes in all remote
clusters. Refer to
<a class="xref" href="manually-configure-security.html#security-basic-setup" title="Set up basic security for the Elastic Stack">set up basic security for the Elastic Stack</a> for the required
steps to configure security.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This procedure uses the same CA to generate certificates for all nodes.
Alternatively, you can add the certificates from the local cluster as a
trusted CA in each remote cluster. You must also add the certificates from
remote clusters as a trusted CA on the local cluster. Using the same CA to
generate certificates for all nodes simplifies this task.</p>
</div>
</div>
</li>
</ol>
</div>
<p>After enabling and configuring security, you can
<a class="xref" href="remote-clusters.html#remote-clusters-connect" title="Connect to remote clusters">connect remote clusters</a> from a local cluster.</p>
<p>With your clusters connected, you&#8217;ll need to
<a class="xref" href="remote-clusters.html#remote-clusters-privileges" title="Configure roles and users for remote clusters">configure users and privileges</a> on both the local
and remote clusters.</p>
<p>If you&#8217;re configuring a remote cluster for cross-cluster replication, you need to
<a class="xref" href="xpack-ccr.html#ccr-getting-started-follower-index" title="Create a follower index to replicate a specific index">configure a follower index</a> on your local
cluster to replicate the leader index on a remote cluster.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="remote-clusters-connect"></a>Connect to remote clusters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/remote-clusters-connect.asciidoc">edit</a></h2>
</div></div></div>
<p>Your local cluster uses the <a class="xref" href="settings.html#modules-network" title="Networking">transport interface</a> to establish
communication with remote clusters. The coordinating nodes in the local cluster
establish <a class="xref" href="settings.html#long-lived-connections" title="Long-lived idle connections">long-lived</a> TCP connections with specific
nodes in the remote cluster. Elasticsearch requires these connections to remain open,
even if the connections are idle for an extended period.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You must have the <code class="literal">manage</code> cluster privilege to connect remote clusters.</p>
</div>
</div>
<p>To add a remote cluster from Stack Management in Kibana:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Select <span class="strong strong"><strong>Remote Clusters</strong></span> from the side navigation.
</li>
<li class="listitem">
Specify the Elasticsearch endpoint URL, or the IP address or host name of the remote
cluster followed by the transport port (defaults to <code class="literal">9300</code>). For example,
<code class="literal">cluster.es.eastus2.staging.azure.foundit.no:9400</code> or <code class="literal">192.168.1.1:9300</code>.
</li>
</ol>
</div>
<p>Alternatively, use the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a>
to add a remote cluster. You can also use this API to
<a class="xref" href="remote-clusters.html#configure-remote-clusters-dynamic" title="Dynamically configure remote clusters">dynamically configure</a> remote clusters for
<em>every</em> node in the local cluster. To configure remote clusters on individual
nodes in the local cluster, define
<a class="xref" href="remote-clusters.html#configure-remote-clusters-static" title="Statically configure remote clusters">static settings</a> in <code class="literal">elasticsearch.yml</code> for
each node.</p>
<p>After connecting remote clusters,
<a class="xref" href="remote-clusters.html#remote-clusters-privileges" title="Configure roles and users for remote clusters">configure roles and users for remote clusters</a>.</p>
<p>The following request adds a remote cluster with an alias of <code class="literal">cluster_one</code>. This
<em>cluster alias</em> is a unique identifier that represents the connection to the
remote cluster and is used to distinguish between local and remote indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
  "persistent" : {
    "cluster" : {
      "remote" : {
        "cluster_one" : {    <a id="CO22-1"></a><i class="conum" data-value="1"></i>
          "seeds" : [
            "127.0.0.1:9300" <a id="CO22-2"></a><i class="conum" data-value="2"></i>
          ]
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/48.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The cluster alias of this remote cluster is <code class="literal">cluster_one</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specifies the hostname and transport port of a seed node in the remote
cluster.</p>
</td>
</tr>
</table>
</div>
<p>You can use the <a class="xref" href="cluster.html#cluster-remote-info" title="Remote cluster info API">remote cluster info API</a> to verify that
the local cluster is successfully connected to the remote cluster:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_remote/info</pre>
</div>
<div class="console_widget" data-snippet="snippets/49.console"></div>
<p>The API response indicates that the local cluster is connected to the remote
cluster with the cluster alias <code class="literal">cluster_one</code>:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "cluster_one" : {
    "seeds" : [
      "127.0.0.1:9300"
    ],
    "connected" : true,
    "num_nodes_connected" : 1,  <a id="CO23-1"></a><i class="conum" data-value="1"></i>
    "max_connections_per_cluster" : 3,
    "initial_connect_timeout" : "30s",
    "skip_unavailable" : false, <a id="CO23-2"></a><i class="conum" data-value="2"></i>
    "mode" : "sniff"
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The number of nodes in the remote cluster the local cluster is
connected to.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Indicates whether to skip the remote cluster if searched through cross-cluster search but
no nodes are available.</p>
</td>
</tr>
</table>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="configure-remote-clusters-dynamic"></a>Dynamically configure remote clusters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/remote-clusters-connect.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a> to dynamically
configure remote settings on every node in the cluster. The following request
adds three remote clusters: <code class="literal">cluster_one</code>, <code class="literal">cluster_two</code>, and <code class="literal">cluster_three</code>.</p>
<p>The <code class="literal">seeds</code> parameter specifies the hostname and
<a class="xref" href="settings.html#transport-settings" title="Advanced transport settings">transport port</a> (default <code class="literal">9300</code>) of a seed node in the
remote cluster.</p>
<p>The <code class="literal">mode</code> parameter determines the configured connection mode, which defaults
to <a class="xref" href="remote-clusters.html#sniff-mode" title="Sniff mode"><code class="literal">sniff</code></a>. Because <code class="literal">cluster_one</code> doesn&#8217;t specify a <code class="literal">mode</code>, it
uses the default. Both <code class="literal">cluster_two</code> and <code class="literal">cluster_three</code> explicitly use
different modes.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster": {
      "remote": {
        "cluster_one": {
          "seeds": [
            "127.0.0.1:9300"
          ]
        },
        "cluster_two": {
          "mode": "sniff",
          "seeds": [
            "127.0.0.1:9301"
          ],
          "transport.compress": true,
          "skip_unavailable": true
        },
        "cluster_three": {
          "mode": "proxy",
          "proxy_address": "127.0.0.1:9302"
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/50.console"></div>
<p>You can dynamically update settings for a remote cluster after the initial configuration. The following request updates the
compression settings for <code class="literal">cluster_two</code>, and the compression and ping schedule
settings for <code class="literal">cluster_three</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When the compression or ping schedule settings change, all existing
node connections must close and re-open, which can cause in-flight requests to
fail.</p>
</div>
</div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster": {
      "remote": {
        "cluster_two": {
          "transport.compress": false
        },
        "cluster_three": {
          "transport.compress": true,
          "transport.ping_schedule": "60s"
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/51.console"></div>
<p>You can delete a remote cluster from the cluster settings by passing <code class="literal">null</code>
values for each remote cluster setting. The following request removes
<code class="literal">cluster_two</code> from the cluster settings, leaving <code class="literal">cluster_one</code> and
<code class="literal">cluster_three</code> intact:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster": {
      "remote": {
        "cluster_two": {
          "mode": null,
          "seeds": null,
          "skip_unavailable": null,
          "transport.compress": null
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/52.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="configure-remote-clusters-static"></a>Statically configure remote clusters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/remote-clusters-connect.asciidoc">edit</a></h3>
</div></div></div>
<p>If you specify settings in <code class="literal">elasticsearch.yml</code>, only the nodes with
those settings can connect to the remote cluster and serve remote cluster
requests.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Remote cluster settings that are specified using the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a> take precedence over
settings that you specify in <code class="literal">elasticsearch.yml</code> for individual nodes.</p>
</div>
</div>
<p>In the following example, <code class="literal">cluster_one</code>, <code class="literal">cluster_two</code>, and <code class="literal">cluster_three</code> are
arbitrary cluster aliases representing the connection to each cluster. These
names are subsequently used to distinguish between local and remote indices.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cluster:
    remote:
        cluster_one:
            seeds: 127.0.0.1:9300
        cluster_two:
            mode: sniff
            seeds: 127.0.0.1:9301
            transport.compress: true      <a id="CO24-1"></a><i class="conum" data-value="1"></i>
            skip_unavailable: true        <a id="CO24-2"></a><i class="conum" data-value="2"></i>
        cluster_three:
            mode: proxy
            proxy_address: 127.0.0.1:9302 <a id="CO24-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO24-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Compression is explicitly enabled for requests to <code class="literal">cluster_two</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO24-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Disconnected remote clusters are optional for <code class="literal">cluster_two</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO24-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The address for the proxy endpoint used to connect to <code class="literal">cluster_three</code>.</p>
</td>
</tr>
</table>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="remote-clusters-privileges"></a>Configure roles and users for remote clusters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/x-pack/docs/en/security/authentication/remote-clusters-privileges.asciidoc">edit</a></h2>
</div></div></div>
<p>After <a class="xref" href="remote-clusters.html#remote-clusters-connect" title="Connect to remote clusters">connecting remote clusters</a>, you create a
user role on both the local and remote clusters and assign necessary privileges.
These roles are required to use cross-cluster replication and cross-cluster search.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>You must use the same role names on both the local
and remote clusters. For example, the following configuration for cross-cluster replication uses the
<code class="literal">remote-replication</code> role name on both the local and remote clusters. However,
you can specify different role definitions on each cluster.</p>
</div>
</div>
<p>You can manage users and roles from Stack Management in Kibana by selecting
<span class="strong strong"><strong>Security &gt; Roles</strong></span> from the side navigation. You can also use the
<a class="xref" href="security-api.html#security-role-mapping-apis" title="Role mappings">role management APIs</a> to add, update, remove, and
retrieve roles dynamically. When you use the APIs to manage roles in the
<code class="literal">native</code> realm, the roles are stored in an internal Elasticsearch index.</p>
<p>The following requests use the
<a class="xref" href="security-api.html#security-api-put-role" title="Create or update roles API">create or update roles API</a>. You must have at least the
<code class="literal">manage_security</code> cluster privilege to use this API.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-clusters-privileges-ccr"></a>Configure privileges for cross-cluster replication<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/x-pack/docs/en/security/authentication/remote-clusters-privileges.asciidoc">edit</a></h3>
</div></div></div>
<p>The cross-cluster replication user requires different cluster and index privileges on the remote
cluster and local cluster. Use the following requests to create separate roles
on the local and remote clusters, and then create a user with the required
roles.</p>
<h5><a id="_remote_cluster"></a>Remote cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/x-pack/docs/en/security/authentication/remote-clusters-privileges.asciidoc">edit</a></h5>
<p>On the remote cluster that contains the leader index, the cross-cluster replication role requires
the <code class="literal">read_ccr</code> cluster privilege, and <code class="literal">monitor</code> and <code class="literal">read</code> privileges on the
leader index.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If requests are authenticated with an <a class="xref" href="security-api.html#security-api-create-api-key" title="Create API key API">API key</a>, the API key
requires the above privileges on the <span class="strong strong"><strong>local</strong></span> cluster, instead of the remote.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If requests are issued <a class="xref" href="authorization.html#run-as-privilege" title="Submitting requests on behalf of other users">on behalf of other users</a>,
then the authenticating user must have the <code class="literal">run_as</code> privilege on the remote
cluster.</p>
</div>
</div>
<p>The following request creates a <code class="literal">remote-replication</code> role on the remote cluster:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_security/role/remote-replication
{
  "cluster": [
    "read_ccr"
  ],
  "indices": [
    {
      "names": [
        "leader-index-name"
      ],
      "privileges": [
        "monitor",
        "read"
      ]
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/53.console"></div>
<h5><a id="_local_cluster"></a>Local cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/x-pack/docs/en/security/authentication/remote-clusters-privileges.asciidoc">edit</a></h5>
<p>On the local cluster that contains the follower index, the <code class="literal">remote-replication</code>
role requires the <code class="literal">manage_ccr</code> cluster privilege, and <code class="literal">monitor</code>, <code class="literal">read</code>, <code class="literal">write</code>,
and <code class="literal">manage_follow_index</code> privileges on the follower index.</p>
<p>The following request creates a <code class="literal">remote-replication</code> role on the local cluster:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_security/role/remote-replication
{
  "cluster": [
    "manage_ccr"
  ],
  "indices": [
    {
      "names": [
        "follower-index-name"
      ],
      "privileges": [
        "monitor",
        "read",
        "write",
        "manage_follow_index"
      ]
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/54.console"></div>
<p>After creating the <code class="literal">remote-replication</code> role on each cluster, use the
<a class="xref" href="security-api.html#security-api-put-user" title="Create or update users API">create or update users API</a> to create a user on
the local cluster cluster and assign the <code class="literal">remote-replication</code> role. For
example, the following request assigns the <code class="literal">remote-replication</code> role to a user
named <code class="literal">cross-cluster-user</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_security/user/cross-cluster-user
{
  "password" : "l0ng-r4nd0m-p@ssw0rd",
  "roles" : [ "remote-replication" ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/55.console"></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You only need to create this user on the <span class="strong strong"><strong>local</strong></span> cluster.</p>
</div>
</div>
<p>You can then <a class="xref" href="xpack-ccr.html#ccr-getting-started-tutorial" title="Tutorial: Set up cross-cluster replication">configure cross-cluster replication</a> to replicate your
data across datacenters.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-clusters-privileges-ccs"></a>Configure privileges for cross-cluster search<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/x-pack/docs/en/security/authentication/remote-clusters-privileges.asciidoc">edit</a></h3>
</div></div></div>
<p>The cross-cluster search user requires different cluster and index privileges on the remote
cluster and local cluster. The following requests create separate roles on the
local and remote clusters, and then create a user with the required roles.</p>
<h5><a id="_remote_cluster_2"></a>Remote cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/x-pack/docs/en/security/authentication/remote-clusters-privileges.asciidoc">edit</a></h5>
<p>On the remote cluster, the cross-cluster search role requires the <code class="literal">read</code> and
<code class="literal">read_cross_cluster</code> privileges for the target indices.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If requests are authenticated with an <a class="xref" href="security-api.html#security-api-create-api-key" title="Create API key API">API key</a>, the API key
requires the above privileges on the <span class="strong strong"><strong>local</strong></span> cluster, instead of the remote.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If requests are issued <a class="xref" href="authorization.html#run-as-privilege" title="Submitting requests on behalf of other users">on behalf of other users</a>,
then the authenticating user must have the <code class="literal">run_as</code> privilege on the remote
cluster.</p>
</div>
</div>
<p>The following request creates a <code class="literal">remote-search</code> role on the remote cluster:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_security/role/remote-search
{
  "indices": [
    {
      "names": [
        "target-indices"
      ],
      "privileges": [
        "read",
        "read_cross_cluster"
      ]
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/56.console"></div>
<h5><a id="_local_cluster_2"></a>Local cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/x-pack/docs/en/security/authentication/remote-clusters-privileges.asciidoc">edit</a></h5>
<p>On the local cluster, which is the cluster used to initiate cross cluster
search, a user only needs the <code class="literal">remote-search</code> role. The role privileges can be
empty.</p>
<p>The following request creates a <code class="literal">remote-search</code> role on the local cluster:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_security/role/remote-search
{}</pre>
</div>
<div class="console_widget" data-snippet="snippets/57.console"></div>
<p>After creating the <code class="literal">remote-search</code> role on each cluster, use the
<a class="xref" href="security-api.html#security-api-put-user" title="Create or update users API">create or update users API</a> to create a user on the
local cluster and assign the <code class="literal">remote-search</code> role. For example, the following
request assigns the <code class="literal">remote-search</code> role to a user named <code class="literal">cross-search-user</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_security/user/cross-search-user
{
  "password" : "l0ng-r4nd0m-p@ssw0rd",
  "roles" : [ "remote-search" ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/58.console"></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You only need to create this user on the <span class="strong strong"><strong>local</strong></span> cluster.</p>
</div>
</div>
<p>Users with the <code class="literal">remote-search</code> role can then
<a class="xref" href="modules-cross-cluster-search.html" title="Search across clusters">search across clusters</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clusters-privileges-ccs-kibana"></a>Configure privileges for cross-cluster search and Kibana<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/x-pack/docs/en/security/authentication/remote-clusters-privileges.asciidoc">edit</a></h3>
</div></div></div>
<p>When using Kibana to search across multiple clusters, a two-step authorization
process determines whether or not the user can access data streams and indices
on a remote cluster:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
First, the local cluster determines if the user is authorized to access remote
clusters. The local cluster is the cluster that Kibana is connected to.
</li>
<li class="listitem">
If the user is authorized, the remote cluster then determines if the user has
access to the specified data streams and indices.
</li>
</ul>
</div>
<p>To grant Kibana users access to remote clusters, assign them a local role
with read privileges to indices on the remote clusters. You specify data streams
and indices in a remote cluster as <code class="literal">&lt;remote_cluster_name&gt;:&lt;target&gt;</code>.</p>
<p>To grant users read access on the remote data streams and indices, you must
create a matching role on the remote clusters that grants the
<code class="literal">read_cross_cluster</code> privilege with access to the appropriate data streams and
indices.</p>
<p>For example, you might be actively indexing Logstash data on a local cluster and
and periodically offload older time-based indices to an archive on your remote
cluster. You want to search across both clusters, so you must enable Kibana
users on both clusters.</p>
<h5><a id="_local_cluster_3"></a>Local cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/x-pack/docs/en/security/authentication/remote-clusters-privileges.asciidoc">edit</a></h5>
<p>On the local cluster, create a <code class="literal">logstash-reader</code> role that grants
<code class="literal">read</code> and <code class="literal">view_index_metadata</code> privileges on the local <code class="literal">logstash-*</code> indices.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you configure the local cluster as another remote in Elasticsearch, the
<code class="literal">logstash-reader</code> role on your local cluster also needs to grant the
<code class="literal">read_cross_cluster</code> privilege.</p>
</div>
</div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_security/role/logstash-reader
{
  "indices": [
    {
      "names": [
        "logstash-*"
        ],
        "privileges": [
          "read",
          "view_index_metadata"
          ]
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/59.console"></div>
<p>Assign your Kibana users a role that grants
<a href="https://www.elastic.co/guide/en/kibana/8.9/xpack-security-authorization.html" class="ulink" target="_top">access to Kibana</a>, as well as your
<code class="literal">logstash_reader</code> role. For example, the following request creates the
<code class="literal">cross-cluster-kibana</code> user and assigns the <code class="literal">kibana-access</code> and
<code class="literal">logstash-reader</code> roles.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_security/user/cross-cluster-kibana
{
  "password" : "l0ng-r4nd0m-p@ssw0rd",
  "roles" : [
    "logstash-reader",
    "kibana-access"
    ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/60.console"></div>
<h5><a id="_remote_cluster_3"></a>Remote cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/x-pack/docs/en/security/authentication/remote-clusters-privileges.asciidoc">edit</a></h5>
<p>On the remote cluster, create a <code class="literal">logstash-reader</code> role that grants the
<code class="literal">read_cross_cluster</code> privilege and <code class="literal">read</code> and <code class="literal">view_index_metadata</code> privileges
for the <code class="literal">logstash-*</code> indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_security/role/logstash-reader
{
  "indices": [
    {
      "names": [
        "logstash-*"
        ],
        "privileges": [
          "read_cross_cluster",
          "read",
          "view_index_metadata"
          ]
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/61.console"></div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="remote-clusters-settings"></a>Remote cluster settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/remote-clusters-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>The following settings apply to both <a class="xref" href="remote-clusters.html#sniff-mode" title="Sniff mode">sniff mode</a> and
<a class="xref" href="remote-clusters.html#proxy-mode" title="Proxy mode">proxy mode</a>. Settings that are specific to sniff mode and proxy
mode are described separately.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.mode</code>
</span>
</dt>
<dd>
The mode used for a remote cluster connection. The only supported modes are
<code class="literal">sniff</code> and <code class="literal">proxy</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.initial_connect_timeout</code>
</span>
</dt>
<dd>
The time to wait for remote connections to be established when the node
starts. The default is <code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">remote_cluster_client</code> <a class="xref" href="settings.html#node-roles" title="Node roles">role</a>
</span>
</dt>
<dd>
By default, any node in the cluster can act as a cross-cluster client and
connect to remote clusters. To prevent a node from connecting to remote
clusters, specify the <a class="xref" href="settings.html#node-roles" title="Node roles">node.roles</a> setting in <code class="literal">elasticsearch.yml</code>
and exclude <code class="literal">remote_cluster_client</code> from the listed roles. Search requests
targeting remote clusters must be sent to a node that is allowed to act as a
cross-cluster client. Other features such as machine learning <a class="xref" href="settings.html#general-ml-settings" title="General machine learning settings">data
feeds</a>, <a class="xref" href="settings.html#general-transform-settings" title="General transforms settings">transforms</a>, and
<a class="xref" href="xpack-ccr.html#ccr-getting-started-tutorial" title="Tutorial: Set up cross-cluster replication">cross-cluster replication</a> require the <code class="literal">remote_cluster_client</code> role.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.skip_unavailable</code>
</span>
</dt>
<dd>
Per cluster boolean setting that allows to skip specific clusters when no
nodes belonging to them are available and they are the target of a remote
cluster request. Default is <code class="literal">false</code>, meaning that all clusters are mandatory
by default, but they can selectively be made optional by setting this setting
to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.transport.ping_schedule</code>
</span>
</dt>
<dd>
Sets the time interval between regular application-level ping messages that
are sent to try and keep remote cluster connections alive. If set to <code class="literal">-1</code>,
application-level ping messages to this remote cluster are not sent. If
unset, application-level ping messages are sent according to the global
<code class="literal">transport.ping_schedule</code> setting, which defaults to <code class="literal">-1</code> meaning that pings
are not sent. It is preferable to correctly configure TCP keep-alives instead
of configuring a <code class="literal">ping_schedule</code>, because TCP keep-alives are handled by the
operating system and not by Elasticsearch. By default Elasticsearch enables TCP keep-alives on
remote cluster connections. Remote cluster connections are transport
connections so the <code class="literal">transport.tcp.*</code> <a class="xref" href="settings.html#transport-settings" title="Advanced transport settings">advanced settings</a>
regarding TCP keep-alives apply to them.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.transport.compress</code>
</span>
</dt>
<dd>
Per cluster setting that enables you to configure compression for requests
to a specific remote cluster. This setting impacts only requests
sent to the remote cluster. If the inbound request is compressed,
Elasticsearch compresses the response. The setting options are <code class="literal">true</code>,
<code class="literal">indexing_data</code>, and <code class="literal">false</code>. If unset, the global <code class="literal">transport.compress</code> is
used as the fallback setting.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.transport.compression_scheme</code>
</span>
</dt>
<dd>
Per cluster setting that enables you to configure compression scheme for
requests to a specific remote cluster. This setting impacts only requests
sent to the remote cluster. If an inbound request is compressed, Elasticsearch
compresses the response using the same compression scheme. The setting options
are <code class="literal">deflate</code> and <code class="literal">lz4</code>. If unset, the global <code class="literal">transport.compression_scheme</code>
is used as the fallback setting.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-cluster-sniff-settings"></a>Sniff mode remote cluster settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/remote-clusters-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.seeds</code>
</span>
</dt>
<dd>
The list of seed nodes used to sniff the remote cluster state.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.node_connections</code>
</span>
</dt>
<dd>
The number of gateway nodes to connect to for this remote cluster. The default
is <code class="literal">3</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-remote-node-attr"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.node.attr</code>
</span>
</dt>
<dd>
A node attribute to filter out nodes that are eligible as a gateway node in
the remote cluster. For instance a node can have a node attribute
<code class="literal">node.attr.gateway: true</code> such that only nodes with this attribute will be
connected to if <code class="literal">cluster.remote.node.attr</code> is set to <code class="literal">gateway</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-cluster-proxy-settings"></a>Proxy mode remote cluster settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/remote-clusters-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.proxy_address</code>
</span>
</dt>
<dd>
The address used for all remote connections.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.proxy_socket_connections</code>
</span>
</dt>
<dd>
The number of socket connections to open per remote cluster. The default is
<code class="literal">18</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.server_name</code>
</span>
</dt>
<dd>
An optional hostname string which is sent in the <code class="literal">server_name</code> field of
the TLS Server Name Indication extension if
<a class="xref" href="manually-configure-security.html#encrypt-internode-communication" title="Encrypt internode communications with TLS">TLS is enabled</a>. The TLS transport will fail to open
remote connections if this field is not a valid hostname as defined by the
TLS SNI specification.
</dd>
</dl>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="restart-cluster.html">« Full-cluster restart and rolling restart</a>
</span>
<span class="next">
<a href="modules-plugins.html">Plugins »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
