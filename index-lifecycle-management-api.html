<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="keywords" content="hot-spotting, hotspot, hot-spot, hot spot, hotspots, hotspotting">
<title>Index lifecycle management APIs | Elasticsearch Guide | Elastic</title>
<meta class="elastic" name="content" content="Index lifecycle management APIs | Elasticsearch Guide">

<link rel="home" href="index.html" title="Elasticsearch Guide"/>
<link rel="up" href="rest-apis.html" title="REST APIs"/>
<link rel="prev" href="indices.html" title="Index APIs"/>
<link rel="next" href="ingest-apis.html" title="Ingest APIs"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="indices.html">« Index APIs</a>
</span>
<span class="next">
<a href="ingest-apis.html">Ingest APIs »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="index-lifecycle-management-api"></a>Index lifecycle management APIs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/ilm-api.asciidoc">edit</a></h2>
</div></div></div>
<p>You use the following APIs to set up policies to automatically manage the index lifecycle.
For more information about index lifecycle management (ILM), see <a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle"><em>ILM: Manage the index lifecycle</em></a>.</p>
<h3><a id="ilm-api-policy-endpoint"></a>Policy management APIs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/ilm-api.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-put-lifecycle" title="Create or update lifecycle policy API">Create lifecycle policy</a>
</li>
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-get-lifecycle" title="Get lifecycle policy API">Get lifecycle policy</a>
</li>
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-delete-lifecycle" title="Delete lifecycle policy API">Delete lifecycle policy</a>
</li>
</ul>
</div>
<h3><a id="ilm-api-index-endpoint"></a>Index management APIs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/ilm-api.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-move-to-step" title="Move to lifecycle step API">Move index to step</a>
</li>
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-retry-policy" title="Retry policy execution API">Retry policy on indices</a>
</li>
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-remove-policy" title="Remove policy from index API">Remove policy from index</a>
</li>
</ul>
</div>
<h3><a id="ilm-api-management-endpoint"></a>Operation management APIs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/ilm-api.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-get-status" title="Get index lifecycle management status API">Get ILM operation mode</a>
</li>
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-start" title="Start index lifecycle management API">Start ILM</a>
</li>
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-stop" title="Stop index lifecycle management API">Stop ILM</a>
</li>
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-explain-lifecycle" title="Explain lifecycle API">Explain API</a>
</li>
<li class="listitem">
<a class="xref" href="index-lifecycle-management-api.html#ilm-migrate-to-data-tiers" title="Migrate to data tiers routing API">Migrate to data tiers routing API</a>
</li>
</ul>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-put-lifecycle"></a>Create or update lifecycle policy API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/put-lifecycle.asciidoc">edit</a></h2>
</div></div></div>

<p>Creates or updates lifecycle policy. See <a class="xref" href="ilm-concepts.html#ilm-index-lifecycle" title="Index lifecycle">Index lifecycle</a> for
definitions of policy components.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-put-lifecycle-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/put-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT _ilm/policy/&lt;policy_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-put-lifecycle-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/put-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage_ilm</code>
cluster privilege to use this API. You must also have the <code class="literal">manage</code> index
privilege on all indices being managed by <code class="literal">policy</code>. ILM performs
operations as the user who last updated the policy. ILM only has the
<a class="xref" href="authorization.html#defining-roles" title="Defining roles">roles</a> assigned to the user at the time of the last policy
update.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-put-lifecycle-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/put-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p>Creates a lifecycle policy. If the specified policy exists, the policy is
replaced and the policy version is incremented.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Only the latest version of the policy is stored, you cannot revert to
previous versions.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-put-lifecycle-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/put-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;policy_id&gt;</code>
</span>
</dt>
<dd>
(Required, string) Identifier for the policy.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-put-lifecycle-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/put-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-put-lifecycle-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/put-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example creates a new policy named <code class="literal">my_policy</code>. In addition, you can use the
<code class="literal">_meta</code> parameter to add arbitrary metadata to the policy, the <code class="literal">_meta</code> parameter is optional
and not automatically generated or used by Elasticsearch. To unset <code class="literal">_meta</code>, replace the policy
without specifying one. To check the <code class="literal">_meta</code>, you can use the <a class="xref" href="index-lifecycle-management-api.html#ilm-get-lifecycle" title="Get lifecycle policy API">Get lifecycle policy</a> API.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _ilm/policy/my_policy
{
  "policy": {
    "_meta": {
      "description": "used for nginx log",
      "project": {
        "name": "myProject",
        "department": "myDepartment"
      }
    },
    "phases": {
      "warm": {
        "min_age": "10d",
        "actions": {
          "forcemerge": {
            "max_num_segments": 1
          }
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2565.console"></div>
<p>If the request succeeds, you receive the following result:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged": true
}</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-get-lifecycle"></a>Get lifecycle policy API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-lifecycle.asciidoc">edit</a></h2>
</div></div></div>

<p>Retrieves a lifecycle policy.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-lifecycle-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET _ilm/policy</code></p>
<p><code class="literal">GET _ilm/policy/&lt;policy_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-lifecycle-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage_ilm</code> or
<code class="literal">read_ilm</code> or both cluster privileges to use this API. For more information, see
<a class="xref" href="authorization.html#security-privileges" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-lifecycle-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p>Returns the specified policy definition. Includes the policy version and last
modified date. If no policy is specified, returns all defined policies.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-lifecycle-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;policy_id&gt;</code>
</span>
</dt>
<dd>
(Optional, string) Identifier for the policy.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-lifecycle-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-lifecycle-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example retrieves <code class="literal">my_policy</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET _ilm/policy/my_policy</pre>
</div>
<div class="console_widget" data-snippet="snippets/2566.console"></div>
<p>If the request succeeds, the body of the response contains the policy definition:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "my_policy": {
    "version": 1, <a id="CO718-1"></a><i class="conum" data-value="1"></i>
    "modified_date": 82392349, <a id="CO718-2"></a><i class="conum" data-value="2"></i>
    "policy": {
      "phases": {
        "warm": {
          "min_age": "10d",
          "actions": {
            "forcemerge": {
              "max_num_segments": 1
            }
          }
        },
        "delete": {
          "min_age": "30d",
          "actions": {
            "delete": {
              "delete_searchable_snapshot": true
            }
          }
        }
      }
    },
    "in_use_by" : { <a id="CO718-3"></a><i class="conum" data-value="3"></i>
      "indices" : [],
      "data_streams" : [],
      "composable_templates" : []
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO718-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The policy version is incremented whenever the policy is updated</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO718-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>When this policy was last modified</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO718-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Which indices, data streams, or templates currently use this policy</p>
</td>
</tr>
</table>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-delete-lifecycle"></a>Delete lifecycle policy API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/delete-lifecycle.asciidoc">edit</a></h2>
</div></div></div>

<p>Deletes an index lifecycle policy.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-delete-lifecycle-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/delete-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">DELETE _ilm/policy/&lt;policy_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-delete-lifecycle-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/delete-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage_ilm</code>
cluster privilege to use this API. For more information, see
<a class="xref" href="authorization.html#security-privileges" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-delete-lifecycle-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/delete-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p>Deletes the specified lifecycle policy definition. You cannot delete policies
that are currently in use. If the policy is being used to manage any indices,
the request fails and returns an error.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-delete-lifecycle-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/delete-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;policy_id&gt;</code>
</span>
</dt>
<dd>
(Required, string) Identifier for the policy.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-delete-lifecycle-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/delete-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-delete-lifecycle-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/delete-lifecycle.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example deletes <code class="literal">my_policy</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">DELETE _ilm/policy/my_policy</pre>
</div>
<div class="console_widget" data-snippet="snippets/2567.console"></div>
<p>When the policy is successfully deleted, you receive the following result:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged": true
}</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-move-to-step"></a>Move to lifecycle step API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/move-to-step.asciidoc">edit</a></h2>
</div></div></div>

<p>Triggers execution of a specific step in the lifecycle policy.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-move-to-step-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/move-to-step.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST _ilm/move/&lt;index&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-move-to-step-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/move-to-step.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage_ilm</code>
privileges on the indices being managed to use this API. For more information,
see <a class="xref" href="authorization.html#security-privileges" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-move-to-step-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/move-to-step.asciidoc">edit</a></h3>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This operation can result in the loss of data. Manually moving an index
into a specific step executes that step even if it has already been performed.
This is a potentially destructive action and this should be considered an expert
level API.</p>
</div>
</div>
<p>Manually moves an index into the specified step and executes that step.
You must specify both the current step and the step to be executed in the
body of the request.</p>
<p>The request will fail if the current step does not match the step currently
being executed for the index. This is to prevent the index from being moved from
an unexpected step into the next step.</p>
<p>When specifying the target (<code class="literal">next_step</code>) to which the index will be moved, either the <code class="literal">name</code> or both
the <code class="literal">action</code> and <code class="literal">name</code> fields are optional. If only the phase is specified, the index will move to
the first step of the first action in the target phase. If the phase and action are specified, the index will move to
the first step of the specified action in the specified phase. Only actions specified in the ILM
policy are considered valid, an index cannot move to a step that is not part of its policy.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-move-to-step-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/move-to-step.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Required, string) Identifier for the index.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-move-to-step-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/move-to-step.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-move-to-step-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/move-to-step.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">current_step</code>
</span>
</dt>
<dd>
<p>
(Required, object)
</p>
<details open>
<summary class="title">Properties of <code class="literal">current_step</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">phase</code>
</span>
</dt>
<dd>
(Required, string)
The name of the current phase.
Must match the phase as returned by the <a class="xref" href="index-lifecycle-management-api.html#ilm-explain-lifecycle" title="Explain lifecycle API">explain</a> API.
</dd>
<dt>
<span class="term">
<code class="literal">action</code>
</span>
</dt>
<dd>
(Required, string)
The name of the current action.
Must match the action as returned by the <a class="xref" href="index-lifecycle-management-api.html#ilm-explain-lifecycle" title="Explain lifecycle API">explain</a> API.
</dd>
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(Required, string)
The name of the current step.
Must match the step as returned by the <a class="xref" href="index-lifecycle-management-api.html#ilm-explain-lifecycle" title="Explain lifecycle API">explain</a> API.
If ILM encounters a problem while performing an action,
it halts execution of the policy and transitions to the <code class="literal">ERROR</code> step.
If you are trying to advance a policy after troubleshooting a failure,
you specify this <code class="literal">ERROR</code> step as the current step.
For more information, see <a class="xref" href="index-lifecycle-error-handling.html" title="Troubleshooting index lifecycle management errors">ILM error handling</a>.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">next_step</code>
</span>
</dt>
<dd>
<p>
(Required, object)
</p>
<details open>
<summary class="title">Properties of <code class="literal">next_step</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">phase</code>
</span>
</dt>
<dd>
(Required, string)
The name of the phase that contains the action you want to perform or resume.
</dd>
<dt>
<span class="term">
<code class="literal">action</code>
</span>
</dt>
<dd>
(Optional, string)
The name action you want to perform or resume. Required if <code class="literal">name</code> used.
</dd>
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(Optional, string)
The name of the step to move to and execute. Required if <code class="literal">action</code> used.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-move-to-step-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/move-to-step.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example moves <code class="literal">my-index-000001</code> from the initial step to the
<code class="literal">forcemerge</code> step:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST _ilm/move/my-index-000001
{
  "current_step": { <a id="CO719-1"></a><i class="conum" data-value="1"></i>
    "phase": "new",
    "action": "complete",
    "name": "complete"
  },
  "next_step": { <a id="CO719-2"></a><i class="conum" data-value="2"></i>
    "phase": "warm",
    "action": "forcemerge", <a id="CO719-3"></a><i class="conum" data-value="3"></i>
    "name": "forcemerge" <a id="CO719-4"></a><i class="conum" data-value="4"></i>
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2568.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO719-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The step that the index is expected to be in</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO719-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The step that you want to execute</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO719-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The optional action to which the index will be moved</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO719-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The optional step name to which the index will be moved</p>
</td>
</tr>
</table>
</div>
<p>If the request succeeds, you receive the following result:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged": true
}</pre>
</div>
<p>The request will fail if the index is not in the <code class="literal">new</code> phase as specified
by the <code class="literal">current_step</code>.</p>
<p>The following example pushes <code class="literal">my-index-000001</code> from the end of hot phase into
the start of warm:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST _ilm/move/my-index-000001
{
  "current_step": {
    "phase": "hot",
    "action": "complete",
    "name": "complete"
  },
  "next_step": {
    "phase": "warm"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2569.console"></div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-remove-policy"></a>Remove policy from index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/remove-policy-from-index.asciidoc">edit</a></h2>
</div></div></div>

<p>Removes assigned lifecycle policies from an index or a data stream&#8217;s backing
indices.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-remove-policy-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/remove-policy-from-index.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST &lt;target&gt;/_ilm/remove</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-remove-policy-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/remove-policy-from-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage_ilm</code>
privileges on the indices being managed to use this API. For more information,
see <a class="xref" href="authorization.html#security-privileges" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-remove-policy-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/remove-policy-from-index.asciidoc">edit</a></h3>
</div></div></div>
<p>For indices, the remove lifecycle policy API removes the assigned lifecycle
policy and stops managing the specified index.</p>
<p>For data streams, the API removes any assigned lifecycle policies from
the stream&#8217;s backing indices and stops managing the indices.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-remove-policy-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/remove-policy-from-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
(Required, string) Comma-separated list of data streams, indices, and aliases to
target. Supports wildcards (<code class="literal">*</code>). To target all data streams and indices, use
<code class="literal">*</code> or <code class="literal">_all</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-remove-policy-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/remove-policy-from-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-remove-policy-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/remove-policy-from-index.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example removes the assigned policy from <code class="literal">my-index-000001</code>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST my-index-000001/_ilm/remove</pre>
</div>
<div class="console_widget" data-snippet="snippets/2570.console"></div>
<p>If the request succeeds, you receive the following result:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "has_failures" : false,
  "failed_indexes" : []
}</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-retry-policy"></a>Retry policy execution API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/retry-policy.asciidoc">edit</a></h2>
</div></div></div>

<p>Retry executing the policy for an index that is in the ERROR step.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-retry-policy-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/retry-policy.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST &lt;index&gt;/_ilm/retry</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-retry-policy-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/retry-policy.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage_ilm</code>
privileges on the indices being managed to use this API. For more information,
see <a class="xref" href="authorization.html#security-privileges" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-retry-policy-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/retry-policy.asciidoc">edit</a></h3>
</div></div></div>
<p>Sets the policy back to the step where the error occurred and executes the step.
Use the <a class="xref" href="index-lifecycle-management-api.html#ilm-explain-lifecycle" title="Explain lifecycle API">ILM Explain API</a> to determine if an index is in the ERROR
step.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-retry-policy-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/retry-policy.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Required, string) Identifier for the indices to retry in comma-separated format.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-retry-policy-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/retry-policy.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-retry-policy-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/retry-policy.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example retries the policy for <code class="literal">my-index-000001</code>.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">POST my-index-000001/_ilm/retry</pre>
</div>
<p>If the request succeeds, you receive the following result:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "acknowledged": true
}</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-get-status"></a>Get index lifecycle management status API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-status.asciidoc">edit</a></h2>
</div></div></div>

<p>Retrieves the current index lifecycle management (ILM) status.</p>
<p>You can start or stop ILM with the <a class="xref" href="index-lifecycle-management-api.html#ilm-start" title="Start index lifecycle management API">start ILM</a> and
<a class="xref" href="index-lifecycle-management-api.html#ilm-stop" title="Stop index lifecycle management API">stop ILM</a> APIs.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-status-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-status.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_ilm/status</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-status-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-status.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage_ilm</code> or
<code class="literal">read_ilm</code> or both cluster privileges to use this API. For more information, see
<a class="xref" href="authorization.html#security-privileges" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-status-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-status.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-status-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-status.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<a id="ilm-operating-modes"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">operation_mode</code>
</span>
</dt>
<dd>
<p>
(string) Current operation mode for ILM.
</p>
<details open>
<summary class="title">Possible values for <code class="literal">operation_mode</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">RUNNING</code>
</span>
</dt>
<dd>
ILM is running.
</dd>
<dt>
<span class="term">
<code class="literal">STOPPING</code>
</span>
</dt>
<dd>
ILM is finishing sensitive actions, such as <a class="xref" href="ilm-actions.html#ilm-shrink" title="Shrink">shrink</a>, that
are in progress. When these actions finish, ILM will move to <code class="literal">STOPPED</code>.
</dd>
<dt>
<span class="term">
<code class="literal">STOPPED</code>
</span>
</dt>
<dd>
ILM is not running.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-get-status-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/get-status.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example gets the ILM plugin status.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET _ilm/status</pre>
</div>
<div class="console_widget" data-snippet="snippets/2571.console"></div>
<p>If the request succeeds, the body of the response shows the operation mode:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "operation_mode": "RUNNING"
}</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-explain-lifecycle"></a>Explain lifecycle API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/explain.asciidoc">edit</a></h2>
</div></div></div>

<p>Retrieves the current lifecycle status for one or more indices. For data
streams, the API retrieves the current lifecycle status for the stream&#8217;s backing
indices.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-explain-lifecycle-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/explain.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET &lt;target&gt;/_ilm/explain</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-explain-lifecycle-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/explain.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code> or <code class="literal">manage_ilm</code> or both privileges on the indices being
managed to use this API. For more information, see <a class="xref" href="authorization.html#security-privileges" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-explain-lifecycle-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/explain.asciidoc">edit</a></h3>
</div></div></div>
<p>Retrieves information about the index&#8217;s current lifecycle state, such as
the currently executing phase, action, and step. Shows when the index entered
each one, the definition of the running phase, and information
about any failures.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-explain-lifecycle-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/explain.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
(Required, string) Comma-separated list of data streams, indices, and aliases to
target. Supports wildcards (<code class="literal">*</code>).To target all data streams and indices, use <code class="literal">*</code>
or <code class="literal">_all</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-explain-lifecycle-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/explain.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">only_managed</code>
</span>
</dt>
<dd>
(Optional, Boolean) Filters the returned indices to only indices that are managed by
ILM.
</dd>
<dt>
<span class="term">
<code class="literal">only_errors</code>
</span>
</dt>
<dd>
(Optional, Boolean) Filters the returned indices to only indices that are managed by
ILM and are in an error state, either due to an encountering an error while
executing the policy, or attempting to use a policy that does not exist.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-explain-lifecycle-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/explain.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example retrieves the lifecycle state of <code class="literal">my-index-000001</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET my-index-000001/_ilm/explain</pre>
</div>
<div class="console_widget" data-snippet="snippets/2572.console"></div>
<p>When management of the index is first taken over by ILM, <code class="literal">explain</code> shows
that the index is managed and in the <code class="literal">new</code> phase:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "indices": {
    "my-index-000001": {
      "index": "my-index-000001",
      "index_creation_date_millis": 1538475653281,  <a id="CO720-1"></a><i class="conum" data-value="1"></i>
      "time_since_index_creation": "15s",           <a id="CO720-2"></a><i class="conum" data-value="2"></i>
      "managed": true,                              <a id="CO720-3"></a><i class="conum" data-value="3"></i>
      "policy": "my_policy",                        <a id="CO720-4"></a><i class="conum" data-value="4"></i>
      "lifecycle_date_millis": 1538475653281,       <a id="CO720-5"></a><i class="conum" data-value="5"></i>
      "age": "15s",                                 <a id="CO720-6"></a><i class="conum" data-value="6"></i>
      "phase": "new",
      "phase_time_millis": 1538475653317,           <a id="CO720-7"></a><i class="conum" data-value="7"></i>
      "action": "complete"
      "action_time_millis": 1538475653317,          <a id="CO720-8"></a><i class="conum" data-value="8"></i>
      "step": "complete",
      "step_time_millis": 1538475653317             <a id="CO720-9"></a><i class="conum" data-value="9"></i>
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO720-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>When the index was created, this timestamp is used to determine when to
rollover</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO720-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The time since the index creation (used for calculating when to rollover
the index via the <code class="literal">max_age</code>)</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO720-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Shows if the index is being managed by ILM. If the index is not managed by
ILM the other fields will not be shown</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO720-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the policy which ILM is using for this index</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO720-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The timestamp used for the <code class="literal">min_age</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO720-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The age of the index (used for calculating when to enter the next phase)</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO720-7"><i class="conum" data-value="7"></i></a></p>
</td>
<td align="left" valign="top">
<p>When the index entered the current phase</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO720-8"><i class="conum" data-value="8"></i></a></p>
</td>
<td align="left" valign="top">
<p>When the index entered the current action</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO720-9"><i class="conum" data-value="9"></i></a></p>
</td>
<td align="left" valign="top">
<p>When the index entered the current step</p>
</td>
</tr>
</table>
</div>
<p>Once the policy is running on the index, the response includes a
<code class="literal">phase_execution</code> object that shows the definition of the current phase.
Changes to the underlying policy will not affect this index until the current
phase completes.</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "indices": {
    "test-000069": {
      "index": "test-000069",
      "index_creation_date_millis": 1538475653281,
      "time_since_index_creation": "25.14s",
      "managed": true,
      "policy": "my_lifecycle3",
      "lifecycle_date_millis": 1538475653281,
      "lifecycle_date": "2018-10-15T13:45:21.981Z",
      "age": "25.14s",
      "phase": "hot",
      "phase_time_millis": 1538475653317,
      "phase_time": "2018-10-15T13:45:22.577Z",
      "action": "rollover",
      "action_time_millis": 1538475653317,
      "action_time": "2018-10-15T13:45:22.577Z",
      "step": "attempt-rollover",
      "step_time_millis": 1538475653317,
      "step_time": "2018-10-15T13:45:22.577Z",
      "phase_execution": {
        "policy": "my_lifecycle3",
        "phase_definition": { <a id="CO721-1"></a><i class="conum" data-value="1"></i>
          "min_age": "0ms",
          "actions": {
            "rollover": {
              "max_age": "30s"
            }
          }
        },
        "version": 3, <a id="CO721-2"></a><i class="conum" data-value="2"></i>
        "modified_date": "2018-10-15T13:21:41.576Z", <a id="CO721-3"></a><i class="conum" data-value="3"></i>
        "modified_date_in_millis": 1539609701576 <a id="CO721-4"></a><i class="conum" data-value="4"></i>
      }
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO721-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The JSON phase definition loaded from the specified policy when the index
entered this phase</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO721-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The version of the policy that was loaded</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO721-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The date the loaded policy was last modified</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO721-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The epoch time when the loaded policy was last modified</p>
</td>
</tr>
</table>
</div>
<p>If ILM is waiting for a step to complete, the response includes status
information for the step that&#8217;s being performed on the index.</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "indices": {
    "test-000020": {
      "index": "test-000020",
      "index_creation_date_millis": 1538475653281,
      "time_since_index_creation": "4.12m",
      "managed": true,
      "policy": "my_lifecycle3",
      "lifecycle_date_millis": 1538475653281,
      "lifecycle_date": "2018-10-15T13:45:21.981Z",
      "age": "4.12m",
      "phase": "warm",
      "phase_time_millis": 1538475653317,
      "phase_time": "2018-10-15T13:45:22.577Z",
      "action": "allocate",
      "action_time_millis": 1538475653317,
      "action_time": "2018-10-15T13:45:22.577Z",
      "step": "check-allocation",
      "step_time_millis": 1538475653317,
      "step_time": "2018-10-15T13:45:22.577Z",
      "step_info": { <a id="CO722-1"></a><i class="conum" data-value="1"></i>
        "message": "Waiting for all shard copies to be active",
        "shards_left_to_allocate": -1,
        "all_shards_active": false,
        "number_of_replicas": 2
      },
      "phase_execution": {
        "policy": "my_lifecycle3",
        "phase_definition": {
          "min_age": "0ms",
          "actions": {
            "allocate": {
              "number_of_replicas": 2,
              "include": {
                "box_type": "warm"
              },
              "exclude": {},
              "require": {}
            },
            "forcemerge": {
              "max_num_segments": 1
            }
          }
        },
        "version": 2,
        "modified_date": "2018-10-15T13:20:02.489Z",
        "modified_date_in_millis": 1539609602489
      }
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO722-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Status of the step that&#8217;s in progress.</p>
</td>
</tr>
</table>
</div>
<p>If the index is in the ERROR step, something went wrong while executing a
step in the policy and you will need to take action for the index to proceed
to the next step. Some steps are safe to automatically be retried in certain
circumstances. To help you diagnose the problem, the explain response shows
the step that failed, the step info which provides information about the error,
and information about the retry attempts executed for the failed step if it&#8217;s
the case.</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "indices": {
    "test-000056": {
      "index": "test-000056",
      "index_creation_date_millis": 1538475653281,
      "time_since_index_creation": "50.1d",
      "managed": true,
      "policy": "my_lifecycle3",
      "lifecycle_date_millis": 1538475653281,
      "lifecycle_date": "2018-10-15T13:45:21.981Z",
      "age": "50.1d",
      "phase": "hot",
      "phase_time_millis": 1538475653317,
      "phase_time": "2018-10-15T13:45:22.577Z",
      "action": "rollover",
      "action_time_millis": 1538475653317,
      "action_time": "2018-10-15T13:45:22.577Z",
      "step": "ERROR",
      "step_time_millis": 1538475653317,
      "step_time": "2018-10-15T13:45:22.577Z",
      "failed_step": "check-rollover-ready", <a id="CO723-1"></a><i class="conum" data-value="1"></i>
      "is_auto_retryable_error": true, <a id="CO723-2"></a><i class="conum" data-value="2"></i>
      "failed_step_retry_count": 1, <a id="CO723-3"></a><i class="conum" data-value="3"></i>
      "step_info": { <a id="CO723-4"></a><i class="conum" data-value="4"></i>
        "type": "cluster_block_exception",
        "reason": "index [test-000057/H7lF9n36Rzqa-KfKcnGQMg] blocked by: [FORBIDDEN/5/index read-only (api)",
        "index_uuid": "H7lF9n36Rzqa-KfKcnGQMg",
        "index": "test-000057"
      },
      "phase_execution": {
        "policy": "my_lifecycle3",
        "phase_definition": {
          "min_age": "0ms",
          "actions": {
            "rollover": {
              "max_age": "30s"
            }
          }
        },
        "version": 3,
        "modified_date": "2018-10-15T13:21:41.576Z",
        "modified_date_in_millis": 1539609701576
      }
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO723-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The step that caused the error</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO723-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Indicates if retrying the failed step can overcome the error. If this
is true, ILM will retry the failed step automatically.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO723-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Shows the number of attempted automatic retries to execute the failed
step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO723-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>What went wrong</p>
</td>
</tr>
</table>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-start"></a>Start index lifecycle management API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/start.asciidoc">edit</a></h2>
</div></div></div>

<p>Start the index lifecycle management (ILM) plugin.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-start-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/start.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_ilm/start</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-start-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/start.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage_ilm</code>
cluster privilege to use this API. For more information, see
<a class="xref" href="authorization.html#security-privileges" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-start-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/start.asciidoc">edit</a></h3>
</div></div></div>
<p>Starts the ILM plugin if it is currently stopped. ILM is started
automatically when the cluster is formed. Restarting ILM is only
necessary if it has been stopped using the <a class="xref" href="index-lifecycle-management-api.html#ilm-stop" title="Stop index lifecycle management API">Stop ILM API</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-start-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/start.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-start-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/start.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example starts the ILM plugin.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST _ilm/start</pre>
</div>
<div class="console_widget" data-snippet="snippets/2573.console"></div>
<p>If the request succeeds, you receive the following result:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged": true
}</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-stop"></a>Stop index lifecycle management API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/stop.asciidoc">edit</a></h2>
</div></div></div>

<p>Stop the index lifecycle management (ILM) plugin.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-stop-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/stop.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_ilm/stop</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-stop-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/stop.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage_ilm</code>
cluster privilege to use this API. For more information, see
<a class="xref" href="authorization.html#security-privileges" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-stop-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/stop.asciidoc">edit</a></h3>
</div></div></div>
<p>Halts all lifecycle management operations and stops the ILM plugin. This
is useful when you are performing maintenance on the cluster and need to prevent
ILM from performing any actions on your indices.</p>
<p>The API returns as soon as the stop request has been acknowledged, but the
plugin might continue to run until in-progress operations complete and the plugin
can be safely stopped. Use the  <a class="xref" href="index-lifecycle-management-api.html#ilm-get-status" title="Get index lifecycle management status API">Get ILM Status</a> API to see
if ILM is running.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-stop-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/stop.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-stop-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/stop.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example stops the ILM plugin.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST _ilm/stop</pre>
</div>
<div class="console_widget" data-snippet="snippets/2574.console"></div>
<p>If the request does not encounter errors, you receive the following result:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged": true
}</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-migrate-to-data-tiers"></a>Migrate to data tiers routing API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/migrate-to-data-tiers.asciidoc">edit</a></h2>
</div></div></div>

<p>Switches the indices, ILM policies, and legacy, composable and component templates from using custom node attributes and
<a class="xref" href="index-modules-allocation.html#shard-allocation-filtering" title="Index-level shard allocation filtering">attribute-based allocation filters</a> to using <a class="xref" href="data-tiers.html" title="Data tiers">data tiers</a>, and
optionally deletes one legacy index template.
Using node roles enables ILM to <a class="xref" href="data-tiers.html#data-tier-migration" title="Automatic data tier migration">automatically move the indices</a> between
data tiers.</p>
<p>Migrating away from custom node attributes routing can be manually performed
as indicated in the <a class="xref" href="migrate-index-allocation-filters.html" title="Migrate index allocation filters to node roles">Migrate index allocation
filters to node roles</a> page.</p>
<p>This API provides an automated way of executing three out of the four manual steps listed
in the <a class="xref" href="migrate-index-allocation-filters.html" title="Migrate index allocation filters to node roles">migration guide</a>:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a class="xref" href="migrate-index-allocation-filters.html#stop-setting-custom-hot-attribute" title="Stop setting the custom hot attribute on new indices">Stop setting the custom hot attribute on new indices</a>
</li>
<li class="listitem">
<a class="xref" href="migrate-index-allocation-filters.html#remove-custom-allocation-settings" title="Remove custom allocation settings from existing ILM policies">Remove custom allocation settings from existing ILM policies</a>
</li>
<li class="listitem">
<a class="xref" href="migrate-index-allocation-filters.html#set-tier-preference" title="Set a tier preference for existing indices">Replace custom allocation settings from existing indices</a> with the corresponding <a class="xref" href="index-modules-allocation.html#tier-preference-allocation-filter">tier preference</a>
</li>
</ol>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-migrate-to-data-tiers-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/migrate-to-data-tiers.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_ilm/migrate_to_data_tiers</code></p>
<p>The API accepts an optional body that allows you to specify:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The legacy index template name to delete. Defaults to none.
</li>
<li class="listitem">
The name of the custom node attribute used for the indices and ILM policies allocation filtering.
Defaults to <code class="literal">data</code>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-migrate-to-data-tiers-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/migrate-to-data-tiers.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
ILM must be stopped before performing the migration. Use the <a class="xref" href="index-lifecycle-management-api.html#ilm-stop-request" title="Request">stop ILM API</a>
to stop ILM and <a class="xref" href="index-lifecycle-management-api.html#ilm-get-status-request" title="Request">get status API</a> to wait until the
reported operation mode is <code class="literal">STOPPED</code>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-migrate-to-data-tiers-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/migrate-to-data-tiers.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">dry_run</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>, simulates the migration from node attributes based allocation filters to data tiers, but does
not perform the migration. This provides a way to retrieve the indices and ILM policies that need to be
migrated.
Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When simulating a migration (ie. <code class="literal">dry_run</code> is <code class="literal">true</code>) ILM doesn&#8217;t need to be stopped.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ilm-migrate-to-data-tiers-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/ilm/apis/migrate-to-data-tiers.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example migrates the indices, ILM policies, legacy templates,
composable, and component templates away from defining custom allocation filtering
using the <code class="literal">custom_attribute_name</code> node attribute, and deletes the legacy template
with name <code class="literal">global-template</code> if it exists in the system.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_ilm/migrate_to_data_tiers
{
  "legacy_template_to_delete": "global-template",
  "node_attribute": "custom_attribute_name"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2575.console"></div>
<p>If the request succeeds, a response like the following will be received:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "dry_run": false,
  "removed_legacy_template":"global-template", <a id="CO724-1"></a><i class="conum" data-value="1"></i>
  "migrated_ilm_policies":["policy_with_allocate_action"], <a id="CO724-2"></a><i class="conum" data-value="2"></i>
  "migrated_indices":["warm-index-to-migrate-000001"], <a id="CO724-3"></a><i class="conum" data-value="3"></i>
  "migrated_legacy_templates":["a-legacy-template"], <a id="CO724-4"></a><i class="conum" data-value="4"></i>
  "migrated_composable_templates":["a-composable-template"], <a id="CO724-5"></a><i class="conum" data-value="5"></i>
  "migrated_component_templates":["a-component-template"] <a id="CO724-6"></a><i class="conum" data-value="6"></i>
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO724-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Shows the name of the legacy index template that was deleted. This will be missing
if no legacy index template was deleted.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO724-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The ILM policies that were updated.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO724-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The indices that were migrated to <a class="xref" href="index-modules-allocation.html#tier-preference-allocation-filter">tier preference</a> routing.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO724-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The legacy index templates that were updated to not contain custom routing settings for the
provided data attribute.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO724-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The composable index templates that were updated to not contain custom routing settings for the
provided data attribute.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO724-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The component templates that were updated to not contain custom routing settings for the
provided data attribute.</p>
</td>
</tr>
</table>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="indices.html">« Index APIs</a>
</span>
<span class="next">
<a href="ingest-apis.html">Ingest APIs »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
