<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Functions and Operators | Elasticsearch Guide | Elastic</title>
<meta class="elastic" name="content" content="Functions and Operators | Elasticsearch Guide">

<link rel="home" href="index.html" title="Elasticsearch Guide"/>
<link rel="up" href="xpack-sql.html" title="SQL"/>
<link rel="prev" href="sql-spec.html" title="SQL Language"/>
<link rel="next" href="sql-syntax-reserved.html" title="Reserved keywords"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="xpack-sql.html">SQL</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="sql-spec.html">« SQL Language</a>
</span>
<span class="next">
<a href="sql-syntax-reserved.html">Reserved keywords »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions"></a>Functions and Operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/index.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch SQL provides a comprehensive set of built-in operators and functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-operators" title="Comparison Operators">Operators</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-equality" title="Equality (=)"><code class="literal">Equality (=)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-null-safe-equality" title="Null safe Equality (&lt;=&gt;)"><code class="literal">Null safe Equality (&lt;=&gt;)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-inequality" title="Inequality (&lt;&gt; or !=)"><code class="literal">Inequality (&lt;&gt; or !=)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-comparison" title="Comparison (&lt;, &lt;=, &gt;, &gt;=)"><code class="literal">Comparison (&lt;, &lt;=, &gt;, &gt;=)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-between" title="BETWEEN"><code class="literal">BETWEEN</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-is-null" title="IS NULL/IS NOT NULL"><code class="literal">IS NULL/IS NOT NULL</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-in" title="IN (&lt;value1&gt;, &lt;value2&gt;, ...)"><code class="literal">IN (&lt;value1&gt;, &lt;value2&gt;, ...)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-and" title="AND"><code class="literal">AND</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-or" title="OR"><code class="literal">OR</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-not" title="NOT"><code class="literal">NOT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-plus" title="Add (+)"><code class="literal">Add (+)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-subtract" title="Subtract (infix -)"><code class="literal">Subtract (infix -)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-negate" title="Negate (unary -)"><code class="literal">Negate (unary -)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-multiply" title="Multiply (*)"><code class="literal">Multiply (*)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-divide" title="Divide (/)"><code class="literal">Divide (/)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-remainder" title="Modulo or Remainder(%)"><code class="literal">Modulo or Remainder(%)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-operators-cast-cast" title="Cast (::)"><code class="literal">Cast (::)</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-like-rlike-operators" title="LIKE and RLIKE Operators">LIKE and RLIKE Operators</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-like-operator" title="LIKE"><code class="literal">LIKE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-rlike-operator" title="RLIKE"><code class="literal">RLIKE</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-functions-aggs" title="Aggregate Functions">Aggregate Functions</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-avg" title="AVG"><code class="literal">AVG</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-count" title="COUNT"><code class="literal">COUNT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-count-all" title="COUNT(ALL)"><code class="literal">COUNT(ALL)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-count-distinct" title="COUNT(DISTINCT)"><code class="literal">COUNT(DISTINCT)</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-first" title="FIRST/FIRST_VALUE"><code class="literal">FIRST/FIRST_VALUE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-last" title="LAST/LAST_VALUE"><code class="literal">LAST/LAST_VALUE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-max" title="MAX"><code class="literal">MAX</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-min" title="MIN"><code class="literal">MIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-sum" title="SUM"><code class="literal">SUM</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-kurtosis" title="KURTOSIS"><code class="literal">KURTOSIS</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-mad" title="MAD"><code class="literal">MAD</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-percentile" title="PERCENTILE"><code class="literal">PERCENTILE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-percentile-rank" title="PERCENTILE_RANK"><code class="literal">PERCENTILE_RANK</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-skewness" title="SKEWNESS"><code class="literal">SKEWNESS</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-stddev-pop" title="STDDEV_POP"><code class="literal">STDDEV_POP</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-stddev-samp" title="STDDEV_SAMP"><code class="literal">STDDEV_SAMP</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-sum-squares" title="SUM_OF_SQUARES"><code class="literal">SUM_OF_SQUARES</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-var-pop" title="VAR_POP"><code class="literal">VAR_POP</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-aggs-var-samp" title="VAR_SAMP"><code class="literal">VAR_SAMP</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-functions-grouping" title="Grouping Functions">Grouping Functions</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-grouping-histogram" title="HISTOGRAM"><code class="literal">HISTOGRAM</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-interval" title="Intervals">Date-Time Operators</a>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-functions-current-date" title="CURRENT_DATE/CURDATE">Date-Time Functions</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-current-date" title="CURRENT_DATE/CURDATE"><code class="literal">CURRENT_DATE/CURDATE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-current-time" title="CURRENT_TIME/CURTIME"><code class="literal">CURRENT_TIME/CURTIME</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-current-timestamp" title="CURRENT_TIMESTAMP"><code class="literal">CURRENT_TIMESTAMP</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-add" title="DATE_ADD/DATEADD/TIMESTAMP_ADD/TIMESTAMPADD"><code class="literal">DATE_ADD/DATEADD/TIMESTAMP_ADD/TIMESTAMPADD</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-diff" title="DATE_DIFF/DATEDIFF/TIMESTAMP_DIFF/TIMESTAMPDIFF"><code class="literal">DATE_DIFF/DATEDIFF/TIMESTAMP_DIFF/TIMESTAMPDIFF</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-dateformat" title="DATE_FORMAT"><code class="literal">DATE_FORMAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-dateparse" title="DATE_PARSE"><code class="literal">DATE_PARSE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-datetimeformat" title="DATETIME_FORMAT"><code class="literal">DATETIME_FORMAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-datetimeparse" title="DATETIME_PARSE"><code class="literal">DATETIME_PARSE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-format" title="FORMAT"><code class="literal">FORMAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-part" title="DATE_PART/DATEPART"><code class="literal">DATE_PART/DATEPART</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-trunc" title="DATE_TRUNC/DATETRUNC"><code class="literal">DATE_TRUNC/DATETRUNC</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-day" title="DAY_OF_MONTH/DOM/DAY"><code class="literal">DAY_OF_MONTH/DOM/DAY</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-dow" title="DAY_OF_WEEK/DAYOFWEEK/DOW"><code class="literal">DAY_OF_WEEK/DAYOFWEEK/DOW</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-doy" title="DAY_OF_YEAR/DOY"><code class="literal">DAY_OF_YEAR/DOY</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-dayname" title="DAY_NAME/DAYNAME"><code class="literal">DAY_NAME/DAYNAME</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-extract" title="EXTRACT"><code class="literal">EXTRACT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-hour" title="HOUR_OF_DAY/HOUR"><code class="literal">HOUR_OF_DAY/HOUR</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-isodow" title="ISO_DAY_OF_WEEK/ISODAYOFWEEK/ISODOW/IDOW"><code class="literal">ISO_DAY_OF_WEEK/ISODAYOFWEEK/ISODOW/IDOW</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-isoweek" title="ISO_WEEK_OF_YEAR/ISOWEEKOFYEAR/ISOWEEK/IWOY/IW"><code class="literal">ISO_WEEK_OF_YEAR/ISOWEEKOFYEAR/ISOWEEK/IWOY/IW</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-minuteofday" title="MINUTE_OF_DAY"><code class="literal">MINUTE_OF_DAY</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-minute" title="MINUTE_OF_HOUR/MINUTE"><code class="literal">MINUTE_OF_HOUR/MINUTE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-month" title="MONTH_OF_YEAR/MONTH"><code class="literal">MONTH_OF_YEAR/MONTH</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-monthname" title="MONTH_NAME/MONTHNAME"><code class="literal">MONTH_NAME/MONTHNAME</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-now" title="NOW"><code class="literal">NOW</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-second" title="SECOND_OF_MINUTE/SECOND"><code class="literal">SECOND_OF_MINUTE/SECOND</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-quarter" title="QUARTER"><code class="literal">QUARTER</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-timeparse" title="TIME_PARSE"><code class="literal">TIME_PARSE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-to_char" title="TO_CHAR"><code class="literal">TO_CHAR</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-today" title="TODAY"><code class="literal">TODAY</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-week" title="WEEK_OF_YEAR/WEEK"><code class="literal">WEEK_OF_YEAR/WEEK</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-datetime-year" title="YEAR"><code class="literal">YEAR</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-functions-search" title="Full-Text Search Functions">Full-Text Search Functions</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-search-match" title="MATCH"><code class="literal">MATCH</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-search-query" title="QUERY"><code class="literal">QUERY</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-search-score" title="SCORE"><code class="literal">SCORE</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-functions-math" title="Mathematical Functions">Mathematical Functions</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-abs" title="ABS"><code class="literal">ABS</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-cbrt" title="CBRT"><code class="literal">CBRT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-ceil" title="CEIL/CEILING"><code class="literal">CEIL/CEILING</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-e" title="E"><code class="literal">E</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-exp" title="EXP"><code class="literal">EXP</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-expm1" title="EXPM1"><code class="literal">EXPM1</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-floor" title="FLOOR"><code class="literal">FLOOR</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-log" title="LOG"><code class="literal">LOG</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-log10" title="LOG10"><code class="literal">LOG10</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-pi" title="PI"><code class="literal">PI</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-power" title="POWER"><code class="literal">POWER</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-random" title="RANDOM/RAND"><code class="literal">RANDOM/RAND</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-round" title="ROUND"><code class="literal">ROUND</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-sign" title="SIGN/SIGNUM"><code class="literal">SIGN/SIGNUM</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-sqrt" title="SQRT"><code class="literal">SQRT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-truncate" title="TRUNCATE/TRUNC"><code class="literal">TRUNCATE/TRUNC</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-acos" title="ACOS"><code class="literal">ACOS</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-asin" title="ASIN"><code class="literal">ASIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-atan" title="ATAN"><code class="literal">ATAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-atan2" title="ATAN2"><code class="literal">ATAN2</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-cos" title="COS"><code class="literal">COS</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-cosh" title="COSH"><code class="literal">COSH</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-cot" title="COT"><code class="literal">COT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-degrees" title="DEGREES"><code class="literal">DEGREES</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-radians" title="RADIANS"><code class="literal">RADIANS</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-sin" title="SIN"><code class="literal">SIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-sinh" title="SINH"><code class="literal">SINH</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-math-tan" title="TAN"><code class="literal">TAN</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-functions-string" title="String Functions">String Functions</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-ascii" title="ASCII"><code class="literal">ASCII</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-bit-length" title="BIT_LENGTH"><code class="literal">BIT_LENGTH</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-char" title="CHAR"><code class="literal">CHAR</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-char-length" title="CHAR_LENGTH"><code class="literal">CHAR_LENGTH</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-concat" title="CONCAT"><code class="literal">CONCAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-insert" title="INSERT"><code class="literal">INSERT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-lcase" title="LCASE"><code class="literal">LCASE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-left" title="LEFT"><code class="literal">LEFT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-length" title="LENGTH"><code class="literal">LENGTH</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-locate" title="LOCATE"><code class="literal">LOCATE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-ltrim" title="LTRIM"><code class="literal">LTRIM</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-octet-length" title="OCTET_LENGTH"><code class="literal">OCTET_LENGTH</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-position" title="POSITION"><code class="literal">POSITION</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-repeat" title="REPEAT"><code class="literal">REPEAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-replace" title="REPLACE"><code class="literal">REPLACE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-right" title="RIGHT"><code class="literal">RIGHT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-rtrim" title="RTRIM"><code class="literal">RTRIM</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-space" title="SPACE"><code class="literal">SPACE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-substring" title="SUBSTRING"><code class="literal">SUBSTRING</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-trim" title="TRIM"><code class="literal">TRIM</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-string-ucase" title="UCASE"><code class="literal">UCASE</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-functions-type-conversion" title="Type Conversion Functions">Type Conversion Functions</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-type-conversion-cast" title="CAST"><code class="literal">CAST</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-type-conversion-convert" title="CONVERT"><code class="literal">CONVERT</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-functions-conditional" title="Conditional Functions And Expressions">Conditional Functions And Expressions</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-conditional-case" title="CASE"><code class="literal">CASE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-conditional-coalesce" title="COALESCE"><code class="literal">COALESCE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-conditional-greatest" title="GREATEST"><code class="literal">GREATEST</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-conditional-ifnull" title="IFNULL"><code class="literal">IFNULL</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-conditional-iif" title="IIF"><code class="literal">IIF</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-conditional-isnull" title="ISNULL"><code class="literal">ISNULL</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-conditional-least" title="LEAST"><code class="literal">LEAST</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-conditional-nullif" title="NULLIF"><code class="literal">NULLIF</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-conditional-nvl" title="NVL"><code class="literal">NVL</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-functions-geo" title="Geo Functions">Geo Functions</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-geo-st-as-wkt" title="ST_AsWKT"><code class="literal">ST_AsWKT</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-geo-st-distance" title="ST_Distance"><code class="literal">ST_Distance</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-geo-st-geometrytype" title="ST_GeometryType"><code class="literal">ST_GeometryType</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-geo-st-wkt-to-sql" title="ST_WKTToSQL"><code class="literal">ST_WKTToSQL</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-geo-st-x" title="ST_X"><code class="literal">ST_X</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-geo-st-y" title="ST_Y"><code class="literal">ST_Y</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-geo-st-z" title="ST_Z"><code class="literal">ST_Z</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="sql-functions.html#sql-functions-system" title="System Functions">System Functions</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-system-database" title="DATABASE"><code class="literal">DATABASE</code></a>
</li>
<li class="listitem">
<a class="xref" href="sql-functions.html#sql-functions-system-user" title="USER"><code class="literal">USER</code></a>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-operators"></a>Comparison Operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h2>
</div></div></div>
<p>Boolean operator for comparing against one or multiple expressions.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-equality"></a><code class="literal">Equality (=)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT last_name l FROM "test_emp" WHERE emp_no = 10000 LIMIT 5;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-null-safe-equality"></a><code class="literal">Null safe Equality (&lt;=&gt;)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT 'elastic' &lt;=&gt; null AS "equals";

    equals
---------------
false</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT null &lt;=&gt; null AS "equals";

    equals
---------------
true</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-inequality"></a><code class="literal">Inequality (&lt;&gt; or !=)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT last_name l FROM "test_emp" WHERE emp_no &lt;&gt; 10000 ORDER BY emp_no LIMIT 5;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-comparison"></a><code class="literal">Comparison (&lt;, &lt;=, &gt;, &gt;=)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT last_name l FROM "test_emp" WHERE emp_no &lt; 10003 ORDER BY emp_no LIMIT 5;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-between"></a><code class="literal">BETWEEN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT last_name l FROM "test_emp" WHERE emp_no BETWEEN 9990 AND 10003 ORDER BY emp_no;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-is-null"></a><code class="literal">IS NULL/IS NOT NULL</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT last_name l FROM "test_emp" WHERE emp_no IS NOT NULL AND gender IS NULL;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-in"></a><code class="literal">IN (&lt;value1&gt;, &lt;value2&gt;, ...)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT last_name l FROM "test_emp" WHERE emp_no IN (10000, 10001, 10002, 999) ORDER BY emp_no LIMIT 5;</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-operators-logical"></a>Logical Operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h2>
</div></div></div>
<p>Boolean operator for evaluating one or two expressions.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-and"></a><code class="literal">AND</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT last_name l FROM "test_emp" WHERE emp_no &gt; 10000 AND emp_no &lt; 10005 ORDER BY emp_no LIMIT 5;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-or"></a><code class="literal">OR</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT last_name l FROM "test_emp" WHERE emp_no &lt; 10003 OR emp_no = 10005 ORDER BY emp_no LIMIT 5;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-not"></a><code class="literal">NOT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT last_name l FROM "test_emp" WHERE NOT emp_no = 10000 LIMIT 5;</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-operators-math"></a>Math Operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h2>
</div></div></div>
<p>Perform mathematical operations affecting one or two values.
The result is a value of numeric type.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-plus"></a><code class="literal">Add (+)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT 1 + 1 AS x;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-subtract"></a><code class="literal">Subtract (infix -)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT 1 - 1 AS x;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-negate"></a><code class="literal">Negate (unary -)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT - 1 AS x;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-multiply"></a><code class="literal">Multiply (*)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT 2 * 3 AS x;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-divide"></a><code class="literal">Divide (/)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT 6 / 3 AS x;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-remainder"></a><code class="literal">Modulo or Remainder(%)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT 5 % 2 AS x;</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-operators-cast"></a>Cast Operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h2>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-operators-cast-cast"></a><code class="literal">Cast (::)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">::</code> provides an alternative syntax to the <a class="xref" href="sql-functions.html#sql-functions-type-conversion-cast" title="CAST"><code class="literal">CAST</code></a> function.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT '123'::long AS long;

      long
---------------
123</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-like-rlike-operators"></a>LIKE and RLIKE Operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/like-rlike.asciidoc">edit</a></h2>
</div></div></div>
<p><code class="literal">LIKE</code> and <code class="literal">RLIKE</code> operators are commonly used to filter data based on string patterns. They usually act on a field placed on the left-hand side of
the operator, but can also act on a constant (literal) expression. The right-hand side of the operator represents the pattern.
Both can be used in the <code class="literal">WHERE</code> clause of the <code class="literal">SELECT</code> statement, but <code class="literal">LIKE</code> can also be used in other places, such as defining an
<a class="xref" href="sql-spec.html#sql-index-patterns" title="Index patterns">index pattern</a> or across various <a class="xref" href="sql-spec.html#sql-commands" title="SQL Commands">SHOW commands</a>.
This section covers only the <code class="literal">SELECT ... WHERE ...</code> usage.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>One significant difference between <code class="literal">LIKE</code>/<code class="literal">RLIKE</code> and the <a class="xref" href="sql-functions.html#sql-functions-search" title="Full-Text Search Functions">full-text search predicates</a> is that the former
act on <a class="xref" href="sql-spec.html#sql-multi-field" title="SQL and multi-fields">exact fields</a> while the latter also work on <a class="xref" href="mapping-types.html#text" title="Text type family">analyzed</a> fields. If the field used with <code class="literal">LIKE</code>/<code class="literal">RLIKE</code> doesn&#8217;t
have an exact not-normalized sub-field (of <a class="xref" href="mapping-types.html#keyword" title="Keyword type family">keyword</a> type) Elasticsearch SQL will not be able to run the query. If the field is either exact
or has an exact sub-field, it will use it as is, or it will automatically use the exact sub-field even if it wasn&#8217;t explicitly specified in the statement.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-like-operator"></a><code class="literal">LIKE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/like-rlike.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">expression        <a id="CO390-1"></a><i class="conum" data-value="1"></i>
LIKE constant_exp <a id="CO390-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO390-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>typically a field, or a constant expression</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO390-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>pattern</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Description</strong></span>: The SQL <code class="literal">LIKE</code> operator is used to compare a value to similar values using wildcard operators. There are two wildcards used in conjunction
with the <code class="literal">LIKE</code> operator:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The percent sign (%)
</li>
<li class="listitem">
The underscore (_)
</li>
</ul>
</div>
<p>The percent sign represents zero, one or multiple characters. The underscore represents a single number or character. These symbols can be used in combinations.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>No other characters have special meaning or act as wildcard. Characters often used as wildcards in other languages (<code class="literal">*</code> or <code class="literal">?</code>) are treated as normal characters.</p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT author, name FROM library WHERE name LIKE 'Dune%';

    author     |     name
---------------+---------------
Frank Herbert  |Dune
Frank Herbert  |Dune Messiah</pre>
</div>
<p>There is, also, the possibility of using an escape character if one needs to match the wildcard characters themselves. This can be done
by using the <code class="literal">ESCAPE [escape_character]</code> statement after the <code class="literal">LIKE ...</code> operator:</p>
<pre class="literallayout">SELECT name, author FROM library WHERE name LIKE 'Dune/%' ESCAPE '/';</pre>

<p>In the example above <code class="literal">/</code> is defined as an escape character which needs to be placed before the <code class="literal">%</code> or <code class="literal">_</code> characters if one needs to
match those characters in the pattern specifically. By default, there is no escape character defined.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Even though <code class="literal">LIKE</code> is a valid option when searching or filtering in Elasticsearch SQL, full-text search predicates
<code class="literal">MATCH</code> and <code class="literal">QUERY</code> are <a class="xref" href="sql-functions.html#sql-like-prefer-full-text" title="Prefer full-text search predicates">faster and much more powerful and are the preferred alternative</a>.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-rlike-operator"></a><code class="literal">RLIKE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/like-rlike.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">expression         <a id="CO391-1"></a><i class="conum" data-value="1"></i>
RLIKE constant_exp <a id="CO391-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO391-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>typically a field, or a constant expression</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO391-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>pattern</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Description</strong></span>: This operator is similar to <code class="literal">LIKE</code>, but the user is not limited to search for a string based on a fixed pattern with the percent sign (<code class="literal">%</code>)
and underscore (<code class="literal">_</code>); the pattern in this case is a regular expression which allows the construction of more flexible patterns.</p>
<p>For supported syntax, see <a class="xref" href="regexp-syntax.html" title="Regular expression syntax"><em>Regular expression syntax</em></a>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT author, name FROM library WHERE name RLIKE 'Child.* Dune';

    author     |      name
---------------+----------------
Frank Herbert  |Children of Dune</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Even though <code class="literal">RLIKE</code> is a valid option when searching or filtering in Elasticsearch SQL, full-text search predicates
<code class="literal">MATCH</code> and <code class="literal">QUERY</code> are <a class="xref" href="sql-functions.html#sql-like-prefer-full-text" title="Prefer full-text search predicates">faster and much more powerful and are the preferred alternative</a>.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-like-prefer-full-text"></a>Prefer full-text search predicates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/like-rlike.asciidoc">edit</a></h3>
</div></div></div>
<p>When using <code class="literal">LIKE</code>/<code class="literal">RLIKE</code>, do consider using <a class="xref" href="sql-functions.html#sql-functions-search" title="Full-Text Search Functions">full-text search predicates</a> which are faster, much more powerful
and offer the option of sorting by relevancy (results can be returned based on how well they matched).</p>
<p>For example:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>LIKE/RLIKE</strong></span></p></td>
<td align="center" valign="top"><p><span class="strong strong"><strong>QUERY/MATCH</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal"><code class="literal">foo LIKE 'bar'</code></code></p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">MATCH(foo, 'bar')</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal"><code class="literal">foo LIKE 'bar' AND tar LIKE 'goo'</code></code></p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">MATCH('foo^2, tar^5', 'bar goo', 'operator=and')</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal"><code class="literal">foo LIKE 'barr'</code></code></p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">QUERY('foo: bar~')</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal"><code class="literal">foo LIKE 'bar' AND tar LIKE 'goo'</code></code></p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">QUERY('foo: bar AND tar: goo')</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal"><code class="literal">foo RLIKE 'ba.*'</code></code></p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">MATCH(foo, 'ba', 'fuzziness=AUTO:1,5')</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal"><code class="literal">foo RLIKE 'b.{1}r'</code></code></p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">MATCH(foo, 'br', 'fuzziness=1')</code></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-aggs"></a>Aggregate Functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h2>
</div></div></div>
<p>Functions for computing a <em>single</em> result from a set of input values.
Elasticsearch SQL supports aggregate functions only alongside <a class="xref" href="sql-spec.html#sql-syntax-group-by" title="GROUP BY">grouping</a> (implicit or explicit).</p>
<h3><a id="sql-functions-aggs-general"></a>General Purpose<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-avg"></a><code class="literal">AVG</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">AVG(numeric_field) <a id="CO392-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO392-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Arithmetic_mean" class="ulink" target="_top">Average</a> (arithmetic mean) of input values.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT AVG(salary) AS avg FROM emp;

      avg
---------------
48248.55</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT AVG(salary / 12.0) AS avg FROM emp;

      avg
---------------
4020.7125</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-count"></a><code class="literal">COUNT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">COUNT(expression) <a id="CO393-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO393-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a field name, wildcard (<code class="literal">*</code>) or any numeric value. For <code class="literal">COUNT(*)</code> or
<code class="literal">COUNT(&lt;literal&gt;)</code>, all values are considered, including <code class="literal">null</code> or missing
ones. For <code class="literal">COUNT(&lt;field_name&gt;)</code>, <code class="literal">null</code> values are not considered.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the total number (count) of input values.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT COUNT(*) AS count FROM emp;

     count
---------------
100</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-count-all"></a><code class="literal">COUNT(ALL)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">COUNT(ALL field_name) <a id="CO394-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO394-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a field name. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the total number (count) of all <em>non-null</em> input values. <code class="literal">COUNT(&lt;field_name&gt;)</code> and <code class="literal">COUNT(ALL &lt;field_name&gt;)</code> are equivalent.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT COUNT(ALL last_name) AS count_all, COUNT(DISTINCT last_name) count_distinct FROM emp;

   count_all   |  count_distinct
---------------+------------------
100            |96</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT COUNT(ALL CASE WHEN languages IS NULL THEN -1 ELSE languages END) AS count_all, COUNT(DISTINCT CASE WHEN languages IS NULL THEN -1 ELSE languages END) count_distinct FROM emp;

   count_all   |  count_distinct
---------------+---------------
100            |6</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-count-distinct"></a><code class="literal">COUNT(DISTINCT)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">COUNT(DISTINCT field_name) <a id="CO395-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO395-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a field name</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: numeric value. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the total number of <em>distinct non-null</em> values in input values.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT COUNT(DISTINCT hire_date) unique_hires, COUNT(hire_date) AS hires FROM emp;

  unique_hires  |     hires
----------------+---------------
99              |100</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT COUNT(DISTINCT DATE_TRUNC('YEAR', hire_date)) unique_hires, COUNT(DATE_TRUNC('YEAR', hire_date)) AS hires FROM emp;

 unique_hires  |     hires
---------------+---------------
14             |100</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-first"></a><code class="literal">FIRST/FIRST_VALUE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">FIRST(
    field_name               <a id="CO396-1"></a><i class="conum" data-value="1"></i>
    [, ordering_field_name]) <a id="CO396-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO396-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>target field for the aggregation</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO396-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>optional field used for ordering</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: same type as the input</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the first non-<code class="literal">null</code> value (if such exists) of the <code class="literal">field_name</code> input column sorted by
the <code class="literal">ordering_field_name</code> column. If <code class="literal">ordering_field_name</code> is not provided, only the <code class="literal">field_name</code>
column is used for the sorting. E.g.:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a</th>
<th align="left" valign="top">b</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>100</p></td>
<td align="left" valign="top"><p>1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>200</p></td>
<td align="left" valign="top"><p>1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>2</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>2</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>20</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>null</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT FIRST(a) FROM t</pre>
</div>
<p>will result in:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>FIRST(a)</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
</tr>
</tbody>
</table>
</div>
<p>and</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT FIRST(a, b) FROM t</pre>
</div>
<p>will result in:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>FIRST(a, b)</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>100</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT FIRST(first_name) FROM emp;

   FIRST(first_name)
--------------------
Alejandro</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT gender, FIRST(first_name) FROM emp GROUP BY gender ORDER BY gender;

   gender   |   FIRST(first_name)
------------+--------------------
null        |   Berni
F           |   Alejandro
M           |   Amabile</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT FIRST(first_name, birth_date) FROM emp;

   FIRST(first_name, birth_date)
--------------------------------
Remzi</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT gender, FIRST(first_name, birth_date) FROM emp GROUP BY gender ORDER BY gender;

    gender    |   FIRST(first_name, birth_date)
--------------+--------------------------------
null          |   Lillian
F             |   Sumant
M             |   Remzi</pre>
</div>
<p><code class="literal">FIRST_VALUE</code> is a name alias and can be used instead of <code class="literal">FIRST</code>, e.g.:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT gender, FIRST_VALUE(first_name, birth_date) FROM emp GROUP BY gender ORDER BY gender;

    gender    |   FIRST_VALUE(first_name, birth_date)
--------------+--------------------------------------
null          |   Lillian
F             |   Sumant
M             |   Remzi</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT gender, FIRST_VALUE(SUBSTRING(first_name, 2, 6), birth_date) AS "first" FROM emp GROUP BY gender ORDER BY gender;

    gender     |     first
---------------+---------------
null           |illian
F              |umant
M              |emzi</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">FIRST</code> cannot be used in a HAVING clause.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">FIRST</code> cannot be used with columns of type <a class="xref" href="mapping-types.html#text" title="Text type family"><code class="literal">text</code></a> unless
the field is also <a class="xref" href="mapping-types.html#before-enabling-fielddata" title="Before enabling fielddata">saved as a keyword</a>.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-last"></a><code class="literal">LAST/LAST_VALUE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">LAST(
    field_name               <a id="CO397-1"></a><i class="conum" data-value="1"></i>
    [, ordering_field_name]) <a id="CO397-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO397-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>target field for the aggregation</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO397-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>optional field used for ordering</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: same type as the input</p>
<p><span class="strong strong"><strong>Description</strong></span>: It&#8217;s the inverse of <a class="xref" href="sql-functions.html#sql-functions-aggs-first" title="FIRST/FIRST_VALUE"><code class="literal">FIRST/FIRST_VALUE</code></a>. Returns the last non-<code class="literal">null</code> value (if such exists) of the
<code class="literal">field_name</code> input column sorted descending by the <code class="literal">ordering_field_name</code> column. If <code class="literal">ordering_field_name</code> is not
provided, only the <code class="literal">field_name</code> column is used for the sorting. E.g.:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a</th>
<th align="left" valign="top">b</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>20</p></td>
<td align="left" valign="top"><p>1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>2</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>2</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>100</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>200</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>null</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LAST(a) FROM t</pre>
</div>
<p>will result in:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>LAST(a)</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>200</p></td>
</tr>
</tbody>
</table>
</div>
<p>and</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LAST(a, b) FROM t</pre>
</div>
<p>will result in:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>LAST(a, b)</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LAST(first_name) FROM emp;

   LAST(first_name)
-------------------
Zvonko</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT gender, LAST(first_name) FROM emp GROUP BY gender ORDER BY gender;

   gender   |   LAST(first_name)
------------+-------------------
null        |   Patricio
F           |   Xinglin
M           |   Zvonko</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LAST(first_name, birth_date) FROM emp;

   LAST(first_name, birth_date)
-------------------------------
Hilari</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT gender, LAST(first_name, birth_date) FROM emp GROUP BY gender ORDER BY gender;

   gender  |   LAST(first_name, birth_date)
-----------+-------------------------------
null       |   Eberhardt
F          |   Valdiodio
M          |   Hilari</pre>
</div>
<p><code class="literal">LAST_VALUE</code> is a name alias and can be used instead of <code class="literal">LAST</code>, e.g.:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT gender, LAST_VALUE(first_name, birth_date) FROM emp GROUP BY gender ORDER BY gender;

   gender  |   LAST_VALUE(first_name, birth_date)
-----------+-------------------------------------
null       |   Eberhardt
F          |   Valdiodio
M          |   Hilari</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT gender, LAST_VALUE(SUBSTRING(first_name, 3, 8), birth_date) AS "last" FROM emp GROUP BY gender ORDER BY gender;

    gender     |     last
---------------+---------------
null           |erhardt
F              |ldiodio
M              |lari</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">LAST</code> cannot be used in <code class="literal">HAVING</code> clause.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">LAST</code> cannot be used with columns of type <a class="xref" href="mapping-types.html#text" title="Text type family"><code class="literal">text</code></a> unless
the field is also <a class="xref" href="mapping-types.html#before-enabling-fielddata" title="Before enabling fielddata"><code class="literal">saved as a keyword</code></a>.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-max"></a><code class="literal">MAX</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MAX(field_name) <a id="CO398-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO398-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: same type as the input</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the maximum value across input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MAX(salary) AS max FROM emp;

      max
---------------
74999</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MAX(ABS(salary / -12.0)) AS max FROM emp;

       max
-----------------
6249.916666666667</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">MAX</code> on a field of type <a class="xref" href="mapping-types.html#text" title="Text type family"><code class="literal">text</code></a> or <a class="xref" href="mapping-types.html#keyword" title="Keyword type family"><code class="literal">keyword</code></a> is translated into
<a class="xref" href="sql-functions.html#sql-functions-aggs-last" title="LAST/LAST_VALUE"><code class="literal">LAST/LAST_VALUE</code></a> and therefore, it cannot be used in <code class="literal">HAVING</code> clause.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-min"></a><code class="literal">MIN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MIN(field_name) <a id="CO399-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO399-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: same type as the input</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the minimum value across input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min FROM emp;

      min
---------------
25324</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">MIN</code> on a field of type <a class="xref" href="mapping-types.html#text" title="Text type family"><code class="literal">text</code></a> or <a class="xref" href="mapping-types.html#keyword" title="Keyword type family"><code class="literal">keyword</code></a> is translated into
<a class="xref" href="sql-functions.html#sql-functions-aggs-first" title="FIRST/FIRST_VALUE"><code class="literal">FIRST/FIRST_VALUE</code></a> and therefore, it cannot be used in <code class="literal">HAVING</code> clause.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-sum"></a><code class="literal">SUM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SUM(field_name) <a id="CO400-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO400-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">bigint</code> for integer input, <code class="literal">double</code> for floating points</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the sum of input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SUM(salary) AS sum FROM emp;

      sum
---------------
4824855</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ROUND(SUM(salary / 12.0), 1) AS sum FROM emp;

      sum
---------------
402071.3</pre>
</div>
<h3><a id="sql-functions-aggs-statistics"></a>Statistics<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-kurtosis"></a><code class="literal">KURTOSIS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">KURTOSIS(field_name) <a id="CO401-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO401-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>:</p>
<p><a href="https://en.wikipedia.org/wiki/Kurtosis" class="ulink" target="_top">Quantify</a> the shape of the distribution of input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max, KURTOSIS(salary) AS k FROM emp;

      min      |      max      |        k
---------------+---------------+------------------
25324          |74999          |2.0444718929142986</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">KURTOSIS</code> cannot be used on top of scalar functions or operators but only directly on a field. So, for example,
the following is not allowed and an error is returned:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql"> SELECT KURTOSIS(salary / 12.0), gender FROM emp GROUP BY gender</pre>
</div>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-mad"></a><code class="literal">MAD</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MAD(field_name) <a id="CO402-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO402-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>:</p>
<p><a href="https://en.wikipedia.org/wiki/Median_absolute_deviation" class="ulink" target="_top">Measure</a> the variability of the input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max, AVG(salary) AS avg, MAD(salary) AS mad FROM emp;

      min      |      max      |      avg      |      mad
---------------+---------------+---------------+---------------
25324          |74999          |48248.55       |10096.5</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary / 12.0) AS min, MAX(salary / 12.0) AS max, AVG(salary/ 12.0) AS avg, MAD(salary / 12.0) AS mad FROM emp;

       min        |       max       |      avg      |       mad
------------------+-----------------+---------------+-----------------
2110.3333333333335|6249.916666666667|4020.7125      |841.3750000000002</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-percentile"></a><code class="literal">PERCENTILE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">PERCENTILE(
    field_name,         <a id="CO403-1"></a><i class="conum" data-value="1"></i>
    percentile[,        <a id="CO403-2"></a><i class="conum" data-value="2"></i>
    method[,            <a id="CO403-3"></a><i class="conum" data-value="3"></i>
    method_parameter]]) <a id="CO403-4"></a><i class="conum" data-value="4"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO403-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO403-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric expression (must be a constant and not based on a field). If
<code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO403-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>optional string literal for the <a class="xref" href="search-aggregations-metrics.html#search-aggregations-metrics-percentile-aggregation-approximation" title="Percentiles are (usually) approximate">percentile algorithm</a>. Possible values: <code class="literal">tdigest</code> or <code class="literal">hdr</code>. Defaults to <code class="literal">tdigest</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO403-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>optional numeric literal that configures the <a class="xref" href="search-aggregations-metrics.html#search-aggregations-metrics-percentile-aggregation-approximation" title="Percentiles are (usually) approximate">percentile algorithm</a>. Configures <code class="literal">compression</code> for <code class="literal">tdigest</code> or <code class="literal">number_of_significant_value_digits</code> for <code class="literal">hdr</code>. The default is the same as that of the backing algorithm.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>:</p>
<p>Returns the nth <a href="https://en.wikipedia.org/wiki/Percentile" class="ulink" target="_top">percentile</a> (represented by <code class="literal">numeric_exp</code> parameter)
of input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT languages, PERCENTILE(salary, 95) AS "95th" FROM emp
       GROUP BY languages;

   languages   |      95th
---------------+-----------------
null           |74482.4
1              |71122.8
2              |70271.4
3              |71926.0
4              |69352.15
5              |56371.0</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT languages, PERCENTILE(salary / 12.0, 95) AS "95th" FROM emp
       GROUP BY languages;

   languages   |       95th
---------------+------------------
null           |6206.866666666667
1              |5926.9
2              |5855.949999999999
3              |5993.833333333333
4              |5779.345833333333
5              |4697.583333333333</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT
    languages,
    PERCENTILE(salary, 97.3, 'tdigest', 100.0) AS "97.3_TDigest",
    PERCENTILE(salary, 97.3, 'hdr', 3) AS "97.3_HDR"
FROM emp
GROUP BY languages;

   languages   | 97.3_TDigest    |   97.3_HDR
---------------+-----------------+---------------
null           |74720.036        |74992.0
1              |72316.132        |73712.0
2              |71792.436        |69936.0
3              |73326.23999999999|74992.0
4              |71753.281        |74608.0
5              |61176.16000000001|56368.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-percentile-rank"></a><code class="literal">PERCENTILE_RANK</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">PERCENTILE_RANK(
    field_name,         <a id="CO404-1"></a><i class="conum" data-value="1"></i>
    value[,             <a id="CO404-2"></a><i class="conum" data-value="2"></i>
    method[,            <a id="CO404-3"></a><i class="conum" data-value="3"></i>
    method_parameter]]) <a id="CO404-4"></a><i class="conum" data-value="4"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO404-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO404-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric expression (must be a constant and not based on a field). If
<code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO404-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>optional string literal for the <a class="xref" href="search-aggregations-metrics.html#search-aggregations-metrics-percentile-aggregation-approximation" title="Percentiles are (usually) approximate">percentile algorithm</a>. Possible values: <code class="literal">tdigest</code> or <code class="literal">hdr</code>. Defaults to <code class="literal">tdigest</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO404-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>optional numeric literal that configures the <a class="xref" href="search-aggregations-metrics.html#search-aggregations-metrics-percentile-aggregation-approximation" title="Percentiles are (usually) approximate">percentile algorithm</a>. Configures <code class="literal">compression</code> for <code class="literal">tdigest</code> or <code class="literal">number_of_significant_value_digits</code> for <code class="literal">hdr</code>. The default is the same as that of the backing algorithm.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>:</p>
<p>Returns the nth <a href="https://en.wikipedia.org/wiki/Percentile_rank" class="ulink" target="_top">percentile rank</a> (represented by <code class="literal">numeric_exp</code> parameter)
of input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT languages, PERCENTILE_RANK(salary, 65000) AS rank FROM emp GROUP BY languages;

   languages   |      rank
---------------+-----------------
null           |73.65766569962062
1              |73.7291625157734
2              |88.88005607010643
3              |79.43662623295829
4              |85.70446389643493
5              |96.79075152940749</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT languages, PERCENTILE_RANK(salary/12, 5000) AS rank FROM emp GROUP BY languages;

   languages   |       rank
---------------+------------------
null           |66.91240875912409
1              |66.70766707667076
2              |84.13266895048271
3              |61.052992625621684
4              |76.55646443990001
5              |94.00696864111498</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT
    languages,
    ROUND(PERCENTILE_RANK(salary, 65000, 'tdigest', 100.0), 2) AS "rank_TDigest",
    ROUND(PERCENTILE_RANK(salary, 65000, 'hdr', 3), 2) AS "rank_HDR"
FROM emp
GROUP BY languages;

   languages   | rank_TDigest  |   rank_HDR
---------------+---------------+---------------
null           |73.66          |80.0
1              |73.73          |73.33
2              |88.88          |89.47
3              |79.44          |76.47
4              |85.7           |83.33
5              |96.79          |95.24</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-skewness"></a><code class="literal">SKEWNESS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SKEWNESS(field_name) <a id="CO405-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO405-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>:</p>
<p><a href="https://en.wikipedia.org/wiki/Skewness" class="ulink" target="_top">Quantify</a> the asymmetric distribution of input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max, SKEWNESS(salary) AS s FROM emp;

      min      |      max      |        s
---------------+---------------+------------------
25324          |74999          |0.2707722118423227</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">SKEWNESS</code> cannot be used on top of scalar functions but only directly on a field. So, for example, the following is
not allowed and an error is returned:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql"> SELECT SKEWNESS(ROUND(salary / 12.0, 2), gender FROM emp GROUP BY gender</pre>
</div>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-stddev-pop"></a><code class="literal">STDDEV_POP</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">STDDEV_POP(field_name) <a id="CO406-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO406-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>:</p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Standard_deviations" class="ulink" target="_top">population standard deviation</a> of input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max, STDDEV_POP(salary) AS stddev FROM emp;

      min      |      max      |      stddev
---------------+---------------+------------------
25324          |74999          |13765.125502787832</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary / 12.0) AS min, MAX(salary / 12.0) AS max, STDDEV_POP(salary / 12.0) AS stddev FROM emp;

       min        |       max       |     stddev
------------------+-----------------+-----------------
2110.3333333333335|6249.916666666667|1147.093791898986</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-stddev-samp"></a><code class="literal">STDDEV_SAMP</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">STDDEV_SAMP(field_name) <a id="CO407-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO407-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>:</p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Standard_deviations" class="ulink" target="_top">sample standard deviation</a> of input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max, STDDEV_SAMP(salary) AS stddev FROM emp;

      min      |      max      |      stddev
---------------+---------------+------------------
25324          |74999          |13834.471662090747</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary / 12.0) AS min, MAX(salary / 12.0) AS max, STDDEV_SAMP(salary / 12.0) AS stddev FROM emp;

       min        |       max       |     stddev
------------------+-----------------+-----------------
2110.3333333333335|6249.916666666667|1152.872638507562</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-sum-squares"></a><code class="literal">SUM_OF_SQUARES</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SUM_OF_SQUARES(field_name) <a id="CO408-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO408-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>:</p>
<p>Returns the sum of squares of input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max, SUM_OF_SQUARES(salary) AS sumsq
       FROM emp;

      min      |      max      |     sumsq
---------------+---------------+----------------
25324          |74999          |2.51740125721E11</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary / 24.0) AS min, MAX(salary / 24.0) AS max, SUM_OF_SQUARES(salary / 24.0) AS sumsq FROM emp;

       min        |       max        |       sumsq
------------------+------------------+-------------------
1055.1666666666667|3124.9583333333335|4.370488293767361E8</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-var-pop"></a><code class="literal">VAR_POP</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">VAR_POP(field_name) <a id="CO409-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO409-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>:</p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Variance" class="ulink" target="_top">population variance</a> of input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max, VAR_POP(salary) AS varpop FROM emp;

      min      |      max      |     varpop
---------------+---------------+----------------
25324          |74999          |1.894786801075E8</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary / 24.0) AS min, MAX(salary / 24.0) AS max, VAR_POP(salary / 24.0) AS varpop FROM emp;

       min        |       max        |      varpop
------------------+------------------+------------------
1055.1666666666667|3124.9583333333335|328956.04185329855</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-aggs-var-samp"></a><code class="literal">VAR_SAMP</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/aggs.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">VAR_SAMP(field_name) <a id="CO410-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO410-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>a numeric field. If this field contains only <code class="literal">null</code> values, the function
returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code> values in this field.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>:</p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Variance" class="ulink" target="_top">sample variance</a> of input values in the field <code class="literal">field_name</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max, VAR_SAMP(salary) AS varsamp FROM emp;

      min      |      max      |     varsamp
---------------+---------------+----------------
25324          |74999          |1.913926061691E8</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MIN(salary / 24.0) AS min, MAX(salary / 24.0) AS max, VAR_SAMP(salary / 24.0) AS varsamp FROM emp;

       min        |       max        |     varsamp
------------------+------------------+----------------
1055.1666666666667|3124.9583333333335|332278.830154847</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-grouping"></a>Grouping Functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/grouping.asciidoc">edit</a></h2>
</div></div></div>
<p>Functions for creating special <em>grouping</em>s (also known as <em>bucketing</em>); as such these need to be used
as part of the <a class="xref" href="sql-spec.html#sql-syntax-group-by" title="GROUP BY">grouping</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-grouping-histogram"></a><code class="literal">HISTOGRAM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/grouping.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">HISTOGRAM(
    numeric_exp,        <a id="CO411-1"></a><i class="conum" data-value="1"></i>
    numeric_interval)   <a id="CO411-2"></a><i class="conum" data-value="2"></i>

HISTOGRAM(
    date_exp,           <a id="CO411-3"></a><i class="conum" data-value="3"></i>
    date_time_interval) <a id="CO411-4"></a><i class="conum" data-value="4"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO411-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression (typically a field). If this field contains only <code class="literal">null</code>
values, the function returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code>
values in this field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO411-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric interval. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO411-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/time expression (typically a field). If this field contains only <code class="literal">null</code>
values, the function returns <code class="literal">null</code>. Otherwise, the function ignores <code class="literal">null</code>
values in this field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO411-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/time <a class="xref" href="sql-functions.html#sql-functions-datetime-interval" title="Intervals">interval</a>. If <code class="literal">null</code>, the
function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: non-empty buckets or groups of the given expression divided according to the given interval</p>
<p><span class="strong strong"><strong>Description</strong></span>: The histogram function takes all matching values and divides them into buckets with fixed size matching the given interval, using (roughly) the following formula:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">bucket_key = Math.floor(value / interval) * interval</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The histogram in SQL does <span class="strong strong"><strong>NOT</strong></span> return empty buckets for missing intervals as the traditional <a class="xref" href="search-aggregations-bucket.html#search-aggregations-bucket-histogram-aggregation" title="Histogram aggregation">histogram</a> and  <a class="xref" href="search-aggregations-bucket.html#search-aggregations-bucket-datehistogram-aggregation" title="Date histogram aggregation">date histogram</a>. Such behavior does not fit conceptually in SQL which treats all missing values as <code class="literal">null</code>; as such the histogram places all missing values in the <code class="literal">null</code> group.</p>
</div>
</div>
<p><code class="literal">Histogram</code> can be applied on either numeric fields:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT HISTOGRAM(salary, 5000) AS h FROM emp GROUP BY h;

       h
---------------
25000
30000
35000
40000
45000
50000
55000
60000
65000
70000</pre>
</div>
<p>or date/time fields:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT HISTOGRAM(birth_date, INTERVAL 1 YEAR) AS h, COUNT(*) AS c FROM emp GROUP BY h;


           h            |       c
------------------------+---------------
null                    |10
1952-01-01T00:00:00.000Z|8
1953-01-01T00:00:00.000Z|11
1954-01-01T00:00:00.000Z|8
1955-01-01T00:00:00.000Z|4
1956-01-01T00:00:00.000Z|5
1957-01-01T00:00:00.000Z|4
1958-01-01T00:00:00.000Z|7
1959-01-01T00:00:00.000Z|9
1960-01-01T00:00:00.000Z|8
1961-01-01T00:00:00.000Z|8
1962-01-01T00:00:00.000Z|6
1963-01-01T00:00:00.000Z|7
1964-01-01T00:00:00.000Z|4
1965-01-01T00:00:00.000Z|1</pre>
</div>
<p>Expressions inside the histogram are also supported as long as the
return type is numeric:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT HISTOGRAM(salary % 100, 10) AS h, COUNT(*) AS c FROM emp GROUP BY h;

       h       |       c
---------------+---------------
0              |10
10             |15
20             |10
30             |14
40             |9
50             |9
60             |8
70             |13
80             |3
90             |9</pre>
</div>
<p>Do note that histograms (and grouping functions in general) allow custom expressions but cannot have any functions applied to them in the <code class="literal">GROUP BY</code>. In other words, the following statement is <span class="strong strong"><strong>NOT</strong></span> allowed:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MONTH(HISTOGRAM(birth_date), 2)) AS h, COUNT(*) as c FROM emp GROUP BY h ORDER BY h DESC;</pre>
</div>
<p>as it requires two groupings (one for histogram followed by a second for applying the function on top of the histogram groups).</p>
<p>Instead one can rewrite the query to move the expression on the histogram <em>inside</em> of it:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT HISTOGRAM(MONTH(birth_date), 2) AS h, COUNT(*) as c FROM emp GROUP BY h ORDER BY h DESC;

       h       |       c
---------------+---------------
12             |7
10             |17
8              |16
6              |16
4              |18
2              |10
0              |6
null           |10</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>When the histogram in SQL is applied on <span class="strong strong"><strong>DATE</strong></span> type instead of <span class="strong strong"><strong>DATETIME</strong></span>, the interval specified is truncated to
the multiple of a day. E.g.: for <code class="literal">HISTOGRAM(CAST(birth_date AS DATE), INTERVAL '2 3:04' DAY TO MINUTE)</code> the interval
actually used will be <code class="literal">INTERVAL '2' DAY</code>. If the interval specified is less than 1 day, e.g.:
<code class="literal">HISTOGRAM(CAST(birth_date AS DATE), INTERVAL '20' HOUR)</code> then the interval used will be <code class="literal">INTERVAL '1' DAY</code>.</p>
</div>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>All intervals specified for a date/time HISTOGRAM will use a <a class="xref" href="search-aggregations-bucket.html#search-aggregations-bucket-datehistogram-aggregation" title="Date histogram aggregation">fixed interval</a>
in their <code class="literal">date_histogram</code> aggregation definition, with the notable exceptions of <code class="literal">INTERVAL '1' YEAR</code>, <code class="literal">INTERVAL '1' MONTH</code> and <code class="literal">INTERVAL '1' DAY</code>  where a calendar interval is used.
The choice for a calendar interval was made for having a more intuitive result for YEAR, MONTH and DAY groupings. In the case of YEAR, for example, the calendar intervals consider a one year
bucket as the one starting on January 1st that specific year, whereas a fixed interval one-year-bucket considers one year as a number
of milliseconds (for example, <code class="literal">31536000000ms</code> corresponding to 365 days, 24 hours per day, 60 minutes per hour etc.). With fixed intervals,
the day of February 5th, 2019 for example, belongs to a bucket that starts on December 20th, 2018 and Elasticsearch (and implicitly Elasticsearch SQL) would
have returned the year 2018 for a date that&#8217;s actually in 2019. With calendar interval this behavior is more intuitive, having the day of
February 5th, 2019 actually belonging to the 2019 year bucket.</p>
</div>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Histogram in SQL cannot be applied on <span class="strong strong"><strong>TIME</strong></span> type.
E.g.: <code class="literal">HISTOGRAM(CAST(birth_date AS TIME), INTERVAL '10' MINUTES)</code> is currently not supported.</p>
</div>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-datetime"></a>Date/Time and Interval Functions and Operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch SQL offers a wide range of facilities for performing date/time manipulations.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-interval"></a>Intervals<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p>A common requirement when dealing with date/time in general revolves around
the notion of <code class="literal">interval</code>, a topic that is worth exploring in the context of Elasticsearch and Elasticsearch SQL.</p>
<p>Elasticsearch has comprehensive support for <a class="xref" href="common-options.html#date-math" title="Date Math">date math</a> both inside <a class="xref" href="api-conventions.html#api-date-math-index-names" title="Date math support in index and index alias names">index names</a> and <a class="xref" href="mapping-params.html#mapping-date-format" title="format">queries</a>.
Inside Elasticsearch SQL the former is supported as is by passing the expression in the table name, while the latter is supported through the standard SQL <code class="literal">INTERVAL</code>.</p>
<p>The table below shows the mapping between Elasticsearch and Elasticsearch SQL:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>Elasticsearch</strong></span></p></td>
<td align="center" valign="top"><p><span class="strong strong"><strong>Elasticsearch SQL</strong></span></p></td>
</tr>
<tr>
<td align="center" colspan="2" valign="top"><p><span class="strong strong"><strong>Index/Table datetime math</strong></span></p></td>
</tr>
<tr>
<td align="center" colspan="2" valign="top"><p><code class="literal">&lt;index-{now/M{YYYY.MM}}&gt;</code></p></td>
</tr>
<tr>
<td align="center" colspan="2" valign="top"><p><span class="strong strong"><strong>Query date/time math</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">1y</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 1 YEAR</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">2M</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 2 MONTH</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">3w</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 21 DAY</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">4d</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 4 DAY</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">5h</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 5 HOUR</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">6m</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 6 MINUTE</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">7s</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 7 SECOND</code></p></td>
</tr>
</tbody>
</table>
</div>
<p><code class="literal">INTERVAL</code> allows either <code class="literal">YEAR</code> and <code class="literal">MONTH</code> to be mixed together <em>or</em> <code class="literal">DAY</code>, <code class="literal">HOUR</code>, <code class="literal">MINUTE</code> and <code class="literal">SECOND</code>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch SQL accepts also the plural for each time unit (e.g. both <code class="literal">YEAR</code> and <code class="literal">YEARS</code> are valid).</p>
</div>
</div>
<p>Example of the possible combinations below:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>Interval</strong></span></p></td>
<td align="center" valign="top"><p><span class="strong strong"><strong>Description</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '1-2' YEAR TO MONTH</code></p></td>
<td align="center" valign="top"><p>1 year and 2 months</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '3 4' DAYS TO HOURS</code></p></td>
<td align="center" valign="top"><p>3 days and 4 hours</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '5 6:12' DAYS TO MINUTES</code></p></td>
<td align="center" valign="top"><p>5 days, 6 hours and 12 minutes</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '3 4:56:01' DAY TO SECOND</code></p></td>
<td align="center" valign="top"><p>3 days, 4 hours, 56 minutes and 1 second</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '2 3:45:01.23456789' DAY TO SECOND</code></p></td>
<td align="center" valign="top"><p>2 days, 3 hours, 45 minutes, 1 second and 234567890 nanoseconds</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '123:45' HOUR TO MINUTES</code></p></td>
<td align="center" valign="top"><p>123 hours and 45 minutes</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '65:43:21.0123' HOUR TO SECONDS</code></p></td>
<td align="center" valign="top"><p>65 hours, 43 minutes, 21 seconds and 12300000 nanoseconds</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '45:01.23' MINUTES TO SECONDS</code></p></td>
<td align="center" valign="top"><p>45 minutes, 1 second and 230000000 nanoseconds</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_comparison"></a>Comparison<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p>Date/time fields can be compared to <a class="xref" href="common-options.html#date-math" title="Date Math">date math</a> expressions with the equality (<code class="literal">=</code>) and <code class="literal">IN</code> operators:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT hire_date FROM emp WHERE hire_date = '1987-03-01||+4y/y';

       hire_date
------------------------
1991-01-26T00:00:00.000Z
1991-10-22T00:00:00.000Z
1991-09-01T00:00:00.000Z
1991-06-26T00:00:00.000Z
1991-08-30T00:00:00.000Z
1991-12-01T00:00:00.000Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT hire_date FROM emp WHERE hire_date IN ('1987-03-01||+2y/M', '1987-03-01||+3y/M');

       hire_date
------------------------
1989-03-31T00:00:00.000Z
1990-03-02T00:00:00.000Z</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_operators"></a>Operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p>Basic arithmetic operators (<code class="literal">+</code>, <code class="literal">-</code>, <code class="literal">*</code>) support date/time parameters as indicated below:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT INTERVAL 1 DAY + INTERVAL 53 MINUTES AS result;

    result
---------------
+1 00:53:00</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CAST('1969-05-13T12:34:56' AS DATETIME) + INTERVAL 49 YEARS AS result;

       result
--------------------
2018-05-13T12:34:56Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT - INTERVAL '49-1' YEAR TO MONTH result;

    result
---------------
-49-1</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT INTERVAL '1' DAY - INTERVAL '2' HOURS AS result;

    result
---------------
+0 22:00:00</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CAST('2018-05-13T12:34:56' AS DATETIME) - INTERVAL '2-8' YEAR TO MONTH AS result;

       result
--------------------
2015-09-13T12:34:56Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT -2 * INTERVAL '3' YEARS AS result;

    result
---------------
-6-0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_functions"></a>Functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p>Functions that target date/time.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-current-date"></a><code class="literal">CURRENT_DATE/CURDATE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CURRENT_DATE
CURRENT_DATE()
CURDATE()</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>: <em>none</em></p>
<p><span class="strong strong"><strong>Output</strong></span>: date</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the date (no time part) when the current query reached the server.
It can be used both as a keyword: <code class="literal">CURRENT_DATE</code> or as a function with no arguments: <code class="literal">CURRENT_DATE()</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Unlike CURRENT_DATE, <code class="literal">CURDATE()</code> can only be used as a function with no arguments and not as a keyword.</p>
</div>
</div>
<p>This method always returns the same value for its every occurrence within the same query.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_DATE AS result;

         result
------------------------
2018-12-12</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_DATE() AS result;

         result
------------------------
2018-12-12</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURDATE() AS result;

         result
------------------------
2018-12-12</pre>
</div>
<p>Typically, this function (as well as its twin <a class="xref" href="sql-functions.html#sql-functions-today" title="TODAY">TODAY())</a> function
is used for relative date filtering:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT first_name FROM emp WHERE hire_date &gt; TODAY() - INTERVAL 35 YEARS ORDER BY first_name ASC LIMIT 5;

 first_name
------------
Alejandro
Amabile
Anneke
Anoosh
Basil</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-current-time"></a><code class="literal">CURRENT_TIME/CURTIME</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CURRENT_TIME
CURRENT_TIME([precision]) <a id="CO412-1"></a><i class="conum" data-value="1"></i>
CURTIME</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO412-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>fractional digits; optional</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: time</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the time when the current query reached the server.
As a function, <code class="literal">CURRENT_TIME()</code> accepts <em>precision</em> as an optional
parameter for rounding the second fractional digits (nanoseconds). The default <em>precision</em> is 3,
meaning a milliseconds precision current time will be returned.</p>
<p>This method always returns the same value for its every occurrence within the same query.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_TIME AS result;

         result
------------------------
12:31:27.237Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_TIME() AS result;

         result
------------------------
12:31:27.237Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURTIME() AS result;

         result
------------------------
12:31:27.237Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_TIME(1) AS result;

         result
------------------------
12:31:27.2Z</pre>
</div>
<p>Typically, this function is used for relative date/time filtering:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT first_name FROM emp WHERE CAST(hire_date AS TIME) &gt; CURRENT_TIME() - INTERVAL 20 MINUTES ORDER BY first_name ASC LIMIT 5;

  first_name
---------------
Alejandro
Amabile
Anneke
Anoosh
Arumugam</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Currently, using a <em>precision</em> greater than 6 doesn&#8217;t make any difference to the output of the
function as the maximum number of second fractional digits returned is 6.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-current-timestamp"></a><code class="literal">CURRENT_TIMESTAMP</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CURRENT_TIMESTAMP
CURRENT_TIMESTAMP([precision]) <a id="CO413-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO413-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>fractional digits; optional</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: date/time</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the date/time when the current query reached the server.
As a function, <code class="literal">CURRENT_TIMESTAMP()</code> accepts <em>precision</em> as an optional
parameter for rounding the second fractional digits (nanoseconds). The default <em>precision</em> is 3,
meaning a milliseconds precision current date/time will be returned.</p>
<p>This method always returns the same value for its every occurrence within the same query.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_TIMESTAMP AS result;

         result
------------------------
2018-12-12T14:48:52.448Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_TIMESTAMP() AS result;

         result
------------------------
2018-12-12T14:48:52.448Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_TIMESTAMP(1) AS result;

         result
------------------------
2018-12-12T14:48:52.4Z</pre>
</div>
<p>Typically, this function (as well as its twin <a class="xref" href="sql-functions.html#sql-functions-now" title="NOW">NOW())</a> function is used for
relative date/time filtering:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT first_name FROM emp WHERE hire_date &gt; NOW() - INTERVAL 100 YEARS ORDER BY first_name ASC LIMIT 5;

  first_name
---------------
Alejandro
Amabile
Anneke
Anoosh
Arumugam</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Currently, using a <em>precision</em> greater than 6 doesn&#8217;t make any difference to the output of the
function as the maximum number of second fractional digits returned is 6.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-add"></a><code class="literal">DATE_ADD/DATEADD/TIMESTAMP_ADD/TIMESTAMPADD</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DATE_ADD(
    string_exp, <a id="CO414-1"></a><i class="conum" data-value="1"></i>
    integer_exp, <a id="CO414-2"></a><i class="conum" data-value="2"></i>
    datetime_exp) <a id="CO414-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO414-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression denoting the date/time unit to add to the date/datetime.
If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO414-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression denoting how many times the above unit should be added
to/from the date/datetime, if a negative value is used it results to a
subtraction from the date/datetime. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO414-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: datetime</p>
<p><span class="strong strong"><strong>Description</strong></span>: Add the given number of date/time units to a date/datetime. If the number of units is negative then it&#8217;s subtracted from
the date/datetime.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the second argument is a long there is possibility of truncation since an integer value will be extracted and
used from that long.</p>
</div>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="center" colspan="2" valign="top">Datetime units to add/subtract</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>unit</strong></span></p></td>
<td align="center" valign="top"><p><span class="strong strong"><strong>abbreviations</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>year</p></td>
<td align="center" valign="top"><p>years, yy, yyyy</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>quarter</p></td>
<td align="center" valign="top"><p>quarters, qq, q</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>month</p></td>
<td align="center" valign="top"><p>months, mm, m</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>dayofyear</p></td>
<td align="center" valign="top"><p>dy, y</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>day</p></td>
<td align="center" valign="top"><p>days, dd, d</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>week</p></td>
<td align="center" valign="top"><p>weeks, wk, ww</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>weekday</p></td>
<td align="center" valign="top"><p>weekdays, dw</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>hour</p></td>
<td align="center" valign="top"><p>hours, hh</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>minute</p></td>
<td align="center" valign="top"><p>minutes, mi, n</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>second</p></td>
<td align="center" valign="top"><p>seconds, ss, s</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>millisecond</p></td>
<td align="center" valign="top"><p>milliseconds, ms</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>microsecond</p></td>
<td align="center" valign="top"><p>microseconds, mcs</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>nanosecond</p></td>
<td align="center" valign="top"><p>nanoseconds, ns</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_ADD('years', 10, '2019-09-04T11:22:33.000Z'::datetime) AS "+10 years";

      +10 years
------------------------
2029-09-04T11:22:33.000Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_ADD('week', 10, '2019-09-04T11:22:33.000Z'::datetime) AS "+10 weeks";

      +10 weeks
------------------------
2019-11-13T11:22:33.000Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_ADD('seconds', -1234, '2019-09-04T11:22:33.000Z'::datetime) AS "-1234 seconds";

      -1234 seconds
------------------------
2019-09-04T11:01:59.000Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_ADD('qq', -417, '2019-09-04'::date) AS "-417 quarters";

      -417 quarters
------------------------
1915-06-04T00:00:00.000Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_ADD('minutes', 9235, '2019-09-04'::date) AS "+9235 minutes";

      +9235 minutes
------------------------
2019-09-10T09:55:00.000Z</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-diff"></a><code class="literal">DATE_DIFF/DATEDIFF/TIMESTAMP_DIFF/TIMESTAMPDIFF</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DATE_DIFF(
    string_exp, <a id="CO415-1"></a><i class="conum" data-value="1"></i>
    datetime_exp, <a id="CO415-2"></a><i class="conum" data-value="2"></i>
    datetime_exp) <a id="CO415-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO415-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression denoting the date/time unit difference between the
following two date/datetime expressions. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO415-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>start date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO415-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>end date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Subtract the second argument from the third argument and return their difference in multiples of the unit
specified in the first argument. If the second argument (start) is greater than the third argument (end),
then negative values are returned.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="center" colspan="2" valign="top">Datetime difference units</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>unit</strong></span></p></td>
<td align="center" valign="top"><p><span class="strong strong"><strong>abbreviations</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>year</p></td>
<td align="center" valign="top"><p>years, yy, yyyy</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>quarter</p></td>
<td align="center" valign="top"><p>quarters, qq, q</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>month</p></td>
<td align="center" valign="top"><p>months, mm, m</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>dayofyear</p></td>
<td align="center" valign="top"><p>dy, y</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>day</p></td>
<td align="center" valign="top"><p>days, dd, d</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>week</p></td>
<td align="center" valign="top"><p>weeks, wk, ww</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>weekday</p></td>
<td align="center" valign="top"><p>weekdays, dw</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>hour</p></td>
<td align="center" valign="top"><p>hours, hh</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>minute</p></td>
<td align="center" valign="top"><p>minutes, mi, n</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>second</p></td>
<td align="center" valign="top"><p>seconds, ss, s</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>millisecond</p></td>
<td align="center" valign="top"><p>milliseconds, ms</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>microsecond</p></td>
<td align="center" valign="top"><p>microseconds, mcs</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>nanosecond</p></td>
<td align="center" valign="top"><p>nanoseconds, ns</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_DIFF('years', '2019-09-04T11:22:33.000Z'::datetime, '2032-09-04T22:33:11.000Z'::datetime) AS "diffInYears";

      diffInYears
------------------------
13</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_DIFF('week', '2019-09-04T11:22:33.000Z'::datetime, '2016-12-08T22:33:11.000Z'::datetime) AS "diffInWeeks";

      diffInWeeks
------------------------
-143</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_DIFF('seconds', '2019-09-04T11:22:33.123Z'::datetime, '2019-07-12T22:33:11.321Z'::datetime) AS "diffInSeconds";

      diffInSeconds
------------------------
-4625362</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_DIFF('qq', '2019-09-04'::date, '2025-04-25'::date) AS "diffInQuarters";

      diffInQuarters
------------------------
23</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>For <code class="literal">hour</code> and <code class="literal">minute</code>, <code class="literal">DATEDIFF</code> doesn&#8217;t do any rounding, but instead first truncates
the more detailed time fields on the 2 dates to zero and then calculates the subtraction.</p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATEDIFF('hours', '2019-11-10T12:10:00.000Z'::datetime, '2019-11-10T23:59:59.999Z'::datetime) AS "diffInHours";

      diffInHours
------------------------
11</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATEDIFF('minute', '2019-11-10T12:10:00.000Z'::datetime, '2019-11-10T12:15:59.999Z'::datetime) AS "diffInMinutes";

      diffInMinutes
------------------------
5</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_DIFF('minutes', '2019-09-04'::date, '2015-08-17T22:33:11.567Z'::datetime) AS "diffInMinutes";

      diffInMinutes
------------------------
-2128407</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-dateformat"></a><code class="literal">DATE_FORMAT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DATE_FORMAT(
    date_exp/datetime_exp/time_exp, <a id="CO416-1"></a><i class="conum" data-value="1"></i>
    string_exp) <a id="CO416-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO416-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime/time expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO416-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>format pattern. If <code class="literal">null</code> or an empty string, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the date/datetime/time as a string using the format specified in the 2nd argument. The formatting
pattern is one of the specifiers used in the
<a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format" class="ulink" target="_top">MySQL DATE_FORMAT() function</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the 1st argument is of type <code class="literal">time</code>, then pattern specified by the 2nd argument cannot contain date related units
(e.g. <em>dd</em>, <em>MM</em>, <em>yyyy</em>, etc.). If it contains such units an error is returned.
Ranges for month and day specifiers (%c, %D, %d, %e, %m) start at one, unlike MySQL, where they start at zero, due to
the fact that MySQL permits the storing of incomplete dates such as <em>2014-00-00</em>.
Elasticsearch in this case returns an error.</p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_FORMAT(CAST('2020-04-05' AS DATE), '%d/%m/%Y') AS "date";

      date
------------------
05/04/2020</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_FORMAT(CAST('2020-04-05T11:22:33.987654' AS DATETIME), '%d/%m/%Y %H:%i:%s.%f') AS "datetime";

      datetime
------------------
05/04/2020 11:22:33.987654</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_FORMAT(CAST('23:22:33.987' AS TIME), '%H %i %s.%f') AS "time";

      time
------------------
23 22 33.987000</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-dateparse"></a><code class="literal">DATE_PARSE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DATE_PARSE(
    string_exp, <a id="CO417-1"></a><i class="conum" data-value="1"></i>
    string_exp) <a id="CO417-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO417-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression as a string. If <code class="literal">null</code> or an empty string, the function
returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO417-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>parsing pattern. If <code class="literal">null</code> or an empty string, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: date</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a date by parsing the 1st argument using the format specified in the 2nd argument. The parsing
format pattern used is the one from
<a href="https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/format/DateTimeFormatter.html" class="ulink" target="_top"><code class="literal">java.time.format.DateTimeFormatter</code></a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the parsing pattern does not contain all valid date units (e.g. <em>HH:mm:ss</em>, <em>dd-MM HH:mm:ss</em>, etc.) an error is returned
as the function needs to return a value of <code class="literal">date</code> type which will contain date part.</p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_PARSE('07/04/2020', 'dd/MM/yyyy') AS "date";

   date
-----------
2020-04-07</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The resulting <code class="literal">date</code> will have the time zone specified by the user through the
<a class="xref" href="sql-apis.html#sql-search-api-time-zone"><code class="literal">time_zone</code></a>/<a class="xref" href="sql-jdbc.html#jdbc-cfg-timezone"><code class="literal">timezone</code></a> REST/driver parameters
with no conversion applied.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">{
    "query" : "SELECT DATE_PARSE('07/04/2020', 'dd/MM/yyyy') AS \"date\"",
    "time_zone" : "Europe/Athens"
}

   date
------------
2020-04-07T00:00:00.000+03:00</pre>
</div>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-datetimeformat"></a><code class="literal">DATETIME_FORMAT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DATETIME_FORMAT(
    date_exp/datetime_exp/time_exp, <a id="CO418-1"></a><i class="conum" data-value="1"></i>
    string_exp) <a id="CO418-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO418-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime/time expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO418-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>format pattern. If <code class="literal">null</code> or an empty string, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the date/datetime/time as a string using the format specified in the 2nd argument. The formatting
pattern used is the one from
<a href="https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/format/DateTimeFormatter.html" class="ulink" target="_top"><code class="literal">java.time.format.DateTimeFormatter</code></a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the 1st argument is of type <code class="literal">time</code>, then pattern specified by the 2nd argument cannot contain date related units
(e.g. <em>dd</em>, <em>MM</em>, <em>yyyy</em>, etc.). If it contains such units an error is returned.</p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATETIME_FORMAT(CAST('2020-04-05' AS DATE), 'dd/MM/yyyy') AS "date";

      date
------------------
05/04/2020</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATETIME_FORMAT(CAST('2020-04-05T11:22:33.987654' AS DATETIME), 'dd/MM/yyyy HH:mm:ss.SS') AS "datetime";

      datetime
------------------
05/04/2020 11:22:33.98</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATETIME_FORMAT(CAST('11:22:33.987' AS TIME), 'HH mm ss.S') AS "time";

      time
------------------
11 22 33.9</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-datetimeparse"></a><code class="literal">DATETIME_PARSE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DATETIME_PARSE(
    string_exp, <a id="CO419-1"></a><i class="conum" data-value="1"></i>
    string_exp) <a id="CO419-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO419-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>datetime expression as a string. If <code class="literal">null</code> or an empty string, the function
returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO419-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>parsing pattern. If <code class="literal">null</code> or an empty string, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: datetime</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a datetime by parsing the 1st argument using the format specified in the 2nd argument. The parsing
format pattern used is the one from
<a href="https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/format/DateTimeFormatter.html" class="ulink" target="_top"><code class="literal">java.time.format.DateTimeFormatter</code></a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the parsing pattern contains only date or only time units (e.g. <em>dd/MM/yyyy</em>, <em>HH:mm:ss</em>, etc.) an error is returned
as the function needs to return a value of <code class="literal">datetime</code> type which must contain both.</p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATETIME_PARSE('07/04/2020 10:20:30.123', 'dd/MM/yyyy HH:mm:ss.SSS') AS "datetime";

      datetime
------------------------
2020-04-07T10:20:30.123Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATETIME_PARSE('10:20:30 07/04/2020 Europe/Berlin', 'HH:mm:ss dd/MM/yyyy VV') AS "datetime";

      datetime
------------------------
2020-04-07T08:20:30.000Z</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If timezone is not specified in the datetime string expression and the parsing pattern, the resulting <code class="literal">datetime</code> will have the
time zone specified by the user through the <a class="xref" href="sql-apis.html#sql-search-api-time-zone"><code class="literal">time_zone</code></a>/<a class="xref" href="sql-jdbc.html#jdbc-cfg-timezone"><code class="literal">timezone</code></a> REST/driver parameters
with no conversion applied.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">{
    "query" : "SELECT DATETIME_PARSE('10:20:30 07/04/2020', 'HH:mm:ss dd/MM/yyyy') AS \"datetime\"",
    "time_zone" : "Europe/Athens"
}

      datetime
-----------------------------
2020-04-07T10:20:30.000+03:00</pre>
</div>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-timeparse"></a><code class="literal">TIME_PARSE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">TIME_PARSE(
    string_exp, <a id="CO420-1"></a><i class="conum" data-value="1"></i>
    string_exp) <a id="CO420-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO420-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>time expression as a string. If <code class="literal">null</code> or an empty string, the function
returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO420-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>parsing pattern. If <code class="literal">null</code> or an empty string, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: time</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a time by parsing the 1st argument using the format specified in the 2nd argument. The parsing
format pattern used is the one from
<a href="https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/format/DateTimeFormatter.html" class="ulink" target="_top"><code class="literal">java.time.format.DateTimeFormatter</code></a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the parsing pattern contains only date units (e.g. <em>dd/MM/yyyy</em>) an error is returned
as the function needs to return a value of <code class="literal">time</code> type which will contain only time.</p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT TIME_PARSE('10:20:30.123', 'HH:mm:ss.SSS') AS "time";

     time
---------------
10:20:30.123Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT TIME_PARSE('10:20:30-01:00', 'HH:mm:ssXXX') AS "time";

     time
---------------
11:20:30.000Z</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If timezone is not specified in the time string expression and the parsing pattern,
the resulting <code class="literal">time</code> will have the offset of the time zone specified by the user through the
 <a class="xref" href="sql-apis.html#sql-search-api-time-zone"><code class="literal">time_zone</code></a>/<a class="xref" href="sql-jdbc.html#jdbc-cfg-timezone"><code class="literal">timezone</code></a> REST/driver
parameters at the Unix epoch date (<code class="literal">1970-01-01</code>) with no conversion applied.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">{
    "query" : "SELECT DATETIME_PARSE('10:20:30', 'HH:mm:ss') AS \"time\"",
    "time_zone" : "Europe/Athens"
}

      time
------------------------------------
10:20:30.000+02:00</pre>
</div>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-part"></a><code class="literal">DATE_PART/DATEPART</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DATE_PART(
    string_exp, <a id="CO421-1"></a><i class="conum" data-value="1"></i>
    datetime_exp) <a id="CO421-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO421-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression denoting the unit to extract from the date/datetime. If
<code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO421-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the specified unit from a date/datetime. It&#8217;s similar to
<a class="xref" href="sql-functions.html#sql-functions-datetime-extract" title="EXTRACT"><code class="literal">EXTRACT</code></a> but with different names and aliases for the
units and provides more options (e.g.: <code class="literal">TZOFFSET</code>).</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="center" colspan="2" valign="top">Datetime units to extract</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>unit</strong></span></p></td>
<td align="center" valign="top"><p><span class="strong strong"><strong>abbreviations</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>year</p></td>
<td align="center" valign="top"><p>years, yy, yyyy</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>quarter</p></td>
<td align="center" valign="top"><p>quarters, qq, q</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>month</p></td>
<td align="center" valign="top"><p>months, mm, m</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>dayofyear</p></td>
<td align="center" valign="top"><p>dy, y</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>day</p></td>
<td align="center" valign="top"><p>days, dd, d</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>week</p></td>
<td align="center" valign="top"><p>weeks, wk, ww</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>weekday</p></td>
<td align="center" valign="top"><p>weekdays, dw</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>hour</p></td>
<td align="center" valign="top"><p>hours, hh</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>minute</p></td>
<td align="center" valign="top"><p>minutes, mi, n</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>second</p></td>
<td align="center" valign="top"><p>seconds, ss, s</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>millisecond</p></td>
<td align="center" valign="top"><p>milliseconds, ms</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>microsecond</p></td>
<td align="center" valign="top"><p>microseconds, mcs</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>nanosecond</p></td>
<td align="center" valign="top"><p>nanoseconds, ns</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>tzoffset</p></td>
<td align="center" valign="top"><p>tz</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_PART('year', '2019-09-22T11:22:33.123Z'::datetime) AS "years";

   years
----------
2019</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_PART('mi', '2019-09-04T11:22:33.123Z'::datetime) AS mins;

   mins
-----------
22</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_PART('quarters', CAST('2019-09-24' AS DATE)) AS quarter;

   quarter
-------------
3</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_PART('month', CAST('2019-09-24' AS DATE)) AS month;

   month
-------------
9</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>For <code class="literal">week</code> and <code class="literal">weekday</code> the unit is extracted using the non-ISO calculation, which means
that a given week is considered to start from Sunday, not Monday.</p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_PART('week', '2019-09-22T11:22:33.123Z'::datetime) AS week;

   week
----------
39</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">tzoffset</code> returns the total number of minutes (signed) that represent the time zone&#8217;s offset.</p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_PART('tzoffset', '2019-09-04T11:22:33.123+05:15'::datetime) AS tz_mins;

   tz_mins
--------------
315</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_PART('tzoffset', '2019-09-04T11:22:33.123-03:49'::datetime) AS tz_mins;

   tz_mins
--------------
-229</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-trunc"></a><code class="literal">DATE_TRUNC/DATETRUNC</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DATE_TRUNC(
    string_exp, <a id="CO422-1"></a><i class="conum" data-value="1"></i>
    datetime_exp/interval_exp) <a id="CO422-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO422-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression denoting the unit to which the date/datetime/interval
should be truncated to. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO422-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime/interval expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: datetime/interval</p>
<p><span class="strong strong"><strong>Description</strong></span>: Truncate the date/datetime/interval to the specified unit by
setting all fields that are less significant than the specified one to zero (or
one, for day, day of week and month). If the first argument is <code class="literal">week</code> and the
second argument is of <code class="literal">interval</code> type, an error is thrown since the <code class="literal">interval</code>
data type doesn&#8217;t support a <code class="literal">week</code> time unit.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="center" colspan="2" valign="top">Datetime truncation units</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>unit</strong></span></p></td>
<td align="center" valign="top"><p><span class="strong strong"><strong>abbreviations</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>millennium</p></td>
<td align="center" valign="top"><p>millennia</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>century</p></td>
<td align="center" valign="top"><p>centuries</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>decade</p></td>
<td align="center" valign="top"><p>decades</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>year</p></td>
<td align="center" valign="top"><p>years, yy, yyyy</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>quarter</p></td>
<td align="center" valign="top"><p>quarters, qq, q</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>month</p></td>
<td align="center" valign="top"><p>months, mm, m</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>week</p></td>
<td align="center" valign="top"><p>weeks, wk, ww</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>day</p></td>
<td align="center" valign="top"><p>days, dd, d</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>hour</p></td>
<td align="center" valign="top"><p>hours, hh</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>minute</p></td>
<td align="center" valign="top"><p>minutes, mi, n</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>second</p></td>
<td align="center" valign="top"><p>seconds, ss, s</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>millisecond</p></td>
<td align="center" valign="top"><p>milliseconds, ms</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>microsecond</p></td>
<td align="center" valign="top"><p>microseconds, mcs</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>nanosecond</p></td>
<td align="center" valign="top"><p>nanoseconds, ns</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_TRUNC('millennium', '2019-09-04T11:22:33.123Z'::datetime) AS millennium;

      millennium
------------------------
2000-01-01T00:00:00.000Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATETRUNC('week', '2019-08-24T11:22:33.123Z'::datetime) AS week;

      week
------------------------
2019-08-19T00:00:00.000Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_TRUNC('mi', '2019-09-04T11:22:33.123Z'::datetime) AS mins;

      mins
------------------------
2019-09-04T11:22:00.000Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_TRUNC('decade', CAST('2019-09-04' AS DATE)) AS decades;

      decades
------------------------
2010-01-01T00:00:00.000Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATETRUNC('quarters', CAST('2019-09-04' AS DATE)) AS quarter;

      quarter
------------------------
2019-07-01T00:00:00.000Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_TRUNC('centuries', INTERVAL '199-5' YEAR TO MONTH) AS centuries;

      centuries
------------------
 +100-0</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_TRUNC('hours', INTERVAL '17 22:13:12' DAY TO SECONDS) AS hour;

      hour
------------------
+17 22:00:00</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATE_TRUNC('days', INTERVAL '19 15:24:19' DAY TO SECONDS) AS day;

      day
------------------
+19 00:00:00</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-format"></a><code class="literal">FORMAT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">FORMAT(
    date_exp/datetime_exp/time_exp, <a id="CO423-1"></a><i class="conum" data-value="1"></i>
    string_exp) <a id="CO423-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO423-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime/time expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO423-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>format pattern. If <code class="literal">null</code> or an empty string, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the date/datetime/time as a string using the
<a href="https://docs.microsoft.com/en-us/sql/t-sql/functions/format-transact-sql#arguments" class="ulink" target="_top">format</a>
specified in the 2nd argument. The formatting pattern used is the one from
<a href="https://docs.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings" class="ulink" target="_top">Microsoft
SQL Server Format Specification</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the 1st argument is of type <code class="literal">time</code>, then pattern specified by the 2nd argument cannot contain date related units
(e.g. <em>dd</em>, <em>MM</em>, <em>yyyy</em>, etc.). If it contains such units an error is returned.<br>
Format specifier <code class="literal">F</code> will be working similar to format specifier <code class="literal">f</code>.
It will return the fractional part of seconds, and the number of digits will be same as of the number of <code class="literal">Fs</code> provided as input (up to 9 digits).
Result will contain <code class="literal">0</code> appended in the end to match with number of <code class="literal">F</code> provided.
e.g.: for a time part <code class="literal">10:20:30.1234</code> and pattern <code class="literal">HH:mm:ss.FFFFFF</code>, the output string of the function would be: <code class="literal">10:20:30.123400</code>.<br>
Format specifier <code class="literal">y</code> will return year-of-era instead of one/two low-order digits.
eg.: For year <code class="literal">2009</code>, <code class="literal">y</code> will be returning <code class="literal">2009</code> instead of <code class="literal">9</code>. For year <code class="literal">43</code>, <code class="literal">y</code> format specifier will return <code class="literal">43</code>.
- Special characters like <code class="literal">"</code> , <code class="literal">\</code> and <code class="literal">%</code> will be returned as it is without any change. eg.: formatting date <code class="literal">17-sep-2020</code> with <code class="literal">%M</code> will return <code class="literal">%9</code></p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT FORMAT(CAST('2020-04-05' AS DATE), 'dd/MM/yyyy') AS "date";

      date
------------------
05/04/2020</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT FORMAT(CAST('2020-04-05T11:22:33.987654' AS DATETIME), 'dd/MM/yyyy HH:mm:ss.ff') AS "datetime";

      datetime
------------------
05/04/2020 11:22:33.98</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT FORMAT(CAST('11:22:33.987' AS TIME), 'HH mm ss.f') AS "time";

      time
------------------
11 22 33.9</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-to_char"></a><code class="literal">TO_CHAR</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">TO_CHAR(
    date_exp/datetime_exp/time_exp, <a id="CO424-1"></a><i class="conum" data-value="1"></i>
    string_exp) <a id="CO424-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO424-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime/time expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO424-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>format pattern. If <code class="literal">null</code> or an empty string, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the date/datetime/time as a string using the format
specified in the 2nd argument. The formatting pattern conforms to
<a href="https://www.postgresql.org/docs/13/functions-formatting.html" class="ulink" target="_top">PostgreSQL Template
Patterns for Date/Time Formatting</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the 1st argument is of type <code class="literal">time</code>, then the pattern specified by the 2nd argument cannot contain date related units
(e.g. <em>dd</em>, <em>MM</em>, <em>YYYY</em>, etc.). If it contains such units an error is returned.<br>
The result of the patterns <code class="literal">TZ</code> and <code class="literal">tz</code> (time zone abbreviations) in some cases differ from the results returned by the <code class="literal">TO_CHAR</code>
in PostgreSQL. The reason is that the time zone abbreviations specified by the JDK are different from the ones specified by PostgreSQL.
This function might show an actual time zone abbreviation instead of the generic <code class="literal">LMT</code> or empty string or offset returned by the PostgreSQL
implementation. The summer/daylight markers might also differ between the two implementations (e.g. will show <code class="literal">HT</code> instead of <code class="literal">HST</code>
for Hawaii).<br>
The <code class="literal">FX</code>, <code class="literal">TM</code>, <code class="literal">SP</code> pattern modifiers are not supported and will show up as <code class="literal">FX</code>, <code class="literal">TM</code>, <code class="literal">SP</code> literals in the output.</p>
</div>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT TO_CHAR(CAST('2020-04-05' AS DATE), 'DD/MM/YYYY') AS "date";

      date
------------------
05/04/2020</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT TO_CHAR(CAST('2020-04-05T11:22:33.987654' AS DATETIME), 'DD/MM/YYYY HH24:MI:SS.FF2') AS "datetime";

      datetime
------------------
05/04/2020 11:22:33.98</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT TO_CHAR(CAST('23:22:33.987' AS TIME), 'HH12 MI SS.FF1') AS "time";

      time
------------------
11 22 33.9</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-day"></a><code class="literal">DAY_OF_MONTH/DOM/DAY</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DAY_OF_MONTH(datetime_exp) <a id="CO425-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO425-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the day of the month from a date/datetime.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DAY_OF_MONTH(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
19</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-dow"></a><code class="literal">DAY_OF_WEEK/DAYOFWEEK/DOW</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DAY_OF_WEEK(datetime_exp) <a id="CO426-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO426-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the day of the week from a date/datetime. Sunday is <code class="literal">1</code>, Monday is <code class="literal">2</code>, etc.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DAY_OF_WEEK(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
2</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-doy"></a><code class="literal">DAY_OF_YEAR/DOY</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DAY_OF_YEAR(datetime_exp) <a id="CO427-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO427-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the day of the year from a date/datetime.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DAY_OF_YEAR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
50</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-dayname"></a><code class="literal">DAY_NAME/DAYNAME</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DAY_NAME(datetime_exp) <a id="CO428-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO428-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the day of the week from a date/datetime in text format (<code class="literal">Monday</code>, <code class="literal">Tuesday</code>&#8230;&#8203;).</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DAY_NAME(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
Monday</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-hour"></a><code class="literal">HOUR_OF_DAY/HOUR</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">HOUR_OF_DAY(datetime_exp) <a id="CO429-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO429-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the hour of the day from a date/datetime.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT HOUR_OF_DAY(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS hour;

     hour
---------------
10</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-isodow"></a><code class="literal">ISO_DAY_OF_WEEK/ISODAYOFWEEK/ISODOW/IDOW</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ISO_DAY_OF_WEEK(datetime_exp) <a id="CO430-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO430-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the day of the week from a date/datetime, following the <a href="https://en.wikipedia.org/wiki/ISO_week_date" class="ulink" target="_top">ISO 8601 standard</a>.
Monday is <code class="literal">1</code>, Tuesday is <code class="literal">2</code>, etc.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ISO_DAY_OF_WEEK(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-isoweek"></a><code class="literal">ISO_WEEK_OF_YEAR/ISOWEEKOFYEAR/ISOWEEK/IWOY/IW</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ISO_WEEK_OF_YEAR(datetime_exp) <a id="CO431-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO431-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the week of the year from a date/datetime, following <a href="https://en.wikipedia.org/wiki/ISO_week_date" class="ulink" target="_top">ISO 8601 standard</a>. The first week
of a year is the first week with a majority (4 or more) of its days in January.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ISO_WEEK_OF_YEAR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS week;

     week
---------------
8</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-minuteofday"></a><code class="literal">MINUTE_OF_DAY</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MINUTE_OF_DAY(datetime_exp) <a id="CO432-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO432-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the minute of the day from a date/datetime.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MINUTE_OF_DAY(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS minute;

    minute
---------------
623</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-minute"></a><code class="literal">MINUTE_OF_HOUR/MINUTE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MINUTE_OF_HOUR(datetime_exp) <a id="CO433-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO433-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the minute of the hour from a date/datetime.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MINUTE_OF_HOUR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS minute;

    minute
---------------
23</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-month"></a><code class="literal">MONTH_OF_YEAR/MONTH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MONTH(datetime_exp) <a id="CO434-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO434-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the month of the year from a date/datetime.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MONTH_OF_YEAR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS month;

     month
---------------
2</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-monthname"></a><code class="literal">MONTH_NAME/MONTHNAME</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MONTH_NAME(datetime_exp) <a id="CO435-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO435-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the month from a date/datetime in text format (<code class="literal">January</code>, <code class="literal">February</code>&#8230;&#8203;).</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MONTH_NAME(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS month;

     month
---------------
February</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-now"></a><code class="literal">NOW</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">NOW()</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>: <em>none</em></p>
<p><span class="strong strong"><strong>Output</strong></span>: datetime</p>
<p><span class="strong strong"><strong>Description</strong></span>: This function offers the same functionality as <a class="xref" href="sql-functions.html#sql-functions-current-timestamp" title="CURRENT_TIMESTAMP">CURRENT_TIMESTAMP()</a> function: returns
the datetime when the current query reached the server. This method always returns the same value for its every
occurrence within the same query.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT NOW() AS result;

         result
------------------------
2018-12-12T14:48:52.448Z</pre>
</div>
<p>Typically, this function (as well as its twin <a class="xref" href="sql-functions.html#sql-functions-current-timestamp" title="CURRENT_TIMESTAMP">CURRENT_TIMESTAMP())</a> function is used
for relative date/time filtering:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT first_name FROM emp WHERE hire_date &gt; NOW() - INTERVAL 100 YEARS ORDER BY first_name ASC LIMIT 5;

  first_name
---------------
Alejandro
Amabile
Anneke
Anoosh
Arumugam</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-second"></a><code class="literal">SECOND_OF_MINUTE/SECOND</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SECOND_OF_MINUTE(datetime_exp) <a id="CO436-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO436-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the second of the minute from a date/datetime.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SECOND_OF_MINUTE(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS second;

    second
---------------
27</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-quarter"></a><code class="literal">QUARTER</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">QUARTER(datetime_exp) <a id="CO437-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO437-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the year quarter the date/datetime falls in.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT QUARTER(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS quarter;

    quarter
---------------
1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-today"></a><code class="literal">TODAY</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">TODAY()</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>: <em>none</em></p>
<p><span class="strong strong"><strong>Output</strong></span>: date</p>
<p><span class="strong strong"><strong>Description</strong></span>: This function offers the same functionality as <a class="xref" href="sql-functions.html#sql-functions-current-date" title="CURRENT_DATE/CURDATE">CURRENT_DATE()</a> function: returns
the date when the current query reached the server. This method always returns the same value for its every occurrence
within the same query.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT TODAY() AS result;

         result
------------------------
2018-12-12</pre>
</div>
<p>Typically, this function (as well as its twin <a class="xref" href="sql-functions.html#sql-functions-current-timestamp" title="CURRENT_TIMESTAMP">CURRENT_TIMESTAMP())</a> function is used
for relative date filtering:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT first_name FROM emp WHERE hire_date &gt; TODAY() - INTERVAL 35 YEARS ORDER BY first_name ASC LIMIT 5;

 first_name
------------
Alejandro
Amabile
Anneke
Anoosh
Basil</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-week"></a><code class="literal">WEEK_OF_YEAR/WEEK</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">WEEK_OF_YEAR(datetime_exp) <a id="CO438-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO438-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the week of the year from a date/datetime.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT WEEK(CAST('1988-01-05T09:22:10Z' AS TIMESTAMP)) AS week, ISOWEEK(CAST('1988-01-05T09:22:10Z' AS TIMESTAMP)) AS isoweek;

      week     |   isoweek
---------------+---------------
2              |1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-year"></a><code class="literal">YEAR</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">YEAR(datetime_exp) <a id="CO439-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO439-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract the year from a date/datetime.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT YEAR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS year;

     year
---------------
2018</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-extract"></a><code class="literal">EXTRACT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">EXTRACT(
    datetime_function  <a id="CO440-1"></a><i class="conum" data-value="1"></i>
    FROM datetime_exp) <a id="CO440-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO440-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/time function name</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO440-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>date/datetime expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Extract fields from a date/datetime by specifying the name of a <a class="xref" href="sql-functions.html#sql-functions-datetime" title="Date/Time and Interval Functions and Operators">datetime function</a>.
The following</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT EXTRACT(DAY_OF_YEAR FROM CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
50</pre>
</div>
<p>is the equivalent to</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DAY_OF_YEAR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
50</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-search"></a>Full-Text Search Functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/search.asciidoc">edit</a></h2>
</div></div></div>
<p>Search functions should be used when performing full-text search, namely
when the <code class="literal">MATCH</code> or <code class="literal">QUERY</code> predicates are being used.
Outside a, so-called, search context, these functions will return default values
such as <code class="literal">0</code> or <code class="literal">NULL</code>.</p>
<p>Elasticsearch SQL optimizes all queries executed against Elasticsearch depending on the scoring needs.
Using <a class="xref" href="sort-search-results.html#_track_scores" title="Track Scores"><code class="literal">track_scores</code></a> on the search request or <a class="xref" href="sort-search-results.html" title="Sort search results"><code class="literal">_doc</code> sorting</a> that
disables scores calculation, Elasticsearch SQL instructs Elasticsearch not to compute scores when these are not needed.
For example, every time a <code class="literal">SCORE()</code> function is encountered in the SQL query, the scores are computed.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-search-match"></a><code class="literal">MATCH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/search.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MATCH(
    field_exp,   <a id="CO441-1"></a><i class="conum" data-value="1"></i>
    constant_exp <a id="CO441-2"></a><i class="conum" data-value="2"></i>
    [, options]) <a id="CO441-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO441-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>field(s) to match</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO441-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>matching text</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO441-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>additional parameters; optional</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Description</strong></span>: A full-text search option, in the form of a predicate, available in Elasticsearch SQL that gives the user control over powerful <a class="xref" href="full-text-queries.html#query-dsl-match-query" title="Match query">match</a>
and <a class="xref" href="full-text-queries.html#query-dsl-multi-match-query" title="Multi-match query">multi_match</a> Elasticsearch queries.</p>
<p>The first parameter is the field or fields to match against. In case it receives one value only, Elasticsearch SQL will use a <code class="literal">match</code> query to perform the search:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT author, name FROM library WHERE MATCH(author, 'frank');

    author     |       name
---------------+-------------------
Frank Herbert  |Dune
Frank Herbert  |Dune Messiah
Frank Herbert  |Children of Dune
Frank Herbert  |God Emperor of Dune</pre>
</div>
<p>However, it can also receive a list of fields and their corresponding optional <code class="literal">boost</code> value. In this case, Elasticsearch SQL will use a
<code class="literal">multi_match</code> query to match the documents:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT author, name, SCORE() FROM library WHERE MATCH('author^2,name^5', 'frank dune');

    author     |       name        |    SCORE()
---------------+-------------------+---------------
Frank Herbert  |Dune               |11.443176
Frank Herbert  |Dune Messiah       |9.446629
Frank Herbert  |Children of Dune   |8.043278
Frank Herbert  |God Emperor of Dune|7.0029488</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">multi_match</code> query in Elasticsearch has the option of <a class="xref" href="full-text-queries.html#query-dsl-multi-match-query" title="Multi-match query">per-field boosting</a> that gives preferential weight
(in terms of scoring) to fields being searched in, using the <code class="literal">^</code> character. In the example above, the <code class="literal">name</code> field has a greater weight in
the final score than the <code class="literal">author</code> field when searching for <code class="literal">frank dune</code> text in both of them.</p>
</div>
</div>
<p>Both options above can be used in combination with the optional third parameter of the <code class="literal">MATCH()</code> predicate, where one can specify
additional configuration parameters (separated by semicolon <code class="literal">;</code>) for either <code class="literal">match</code> or <code class="literal">multi_match</code> queries. For example:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT author, name, SCORE() FROM library WHERE MATCH(name, 'to the star', 'operator=OR;fuzziness=AUTO:1,5;minimum_should_match=1')
ORDER BY SCORE() DESC LIMIT 2;

     author      |                name                |    SCORE()
-----------------+------------------------------------+---------------
Douglas Adams    |The Hitchhiker's Guide to the Galaxy|3.1756816
Peter F. Hamilton|Pandora's Star                      |3.0997515</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The allowed optional parameters for a single-field <code class="literal">MATCH()</code> variant (for the <code class="literal">match</code> Elasticsearch query) are: <code class="literal">analyzer</code>, <code class="literal">auto_generate_synonyms_phrase_query</code>,
<code class="literal">lenient</code>, <code class="literal">fuzziness</code>, <code class="literal">fuzzy_transpositions</code>, <code class="literal">fuzzy_rewrite</code>, <code class="literal">minimum_should_match</code>, <code class="literal">operator</code>,
<code class="literal">max_expansions</code>, <code class="literal">prefix_length</code>.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The allowed optional parameters for a multi-field <code class="literal">MATCH()</code> variant (for the <code class="literal">multi_match</code> Elasticsearch query) are: <code class="literal">analyzer</code>, <code class="literal">auto_generate_synonyms_phrase_query</code>,
<code class="literal">lenient</code>, <code class="literal">fuzziness</code>, <code class="literal">fuzzy_transpositions</code>, <code class="literal">fuzzy_rewrite</code>, <code class="literal">minimum_should_match</code>, <code class="literal">operator</code>,
<code class="literal">max_expansions</code>, <code class="literal">prefix_length</code>, <code class="literal">slop</code>, <code class="literal">tie_breaker</code>, <code class="literal">type</code>.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-search-query"></a><code class="literal">QUERY</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/search.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">QUERY(
    constant_exp <a id="CO442-1"></a><i class="conum" data-value="1"></i>
    [, options]) <a id="CO442-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO442-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>query text</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO442-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>additional parameters; optional</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Description</strong></span>: Just like <code class="literal">MATCH</code>, <code class="literal">QUERY</code> is a full-text search predicate that gives the user control over the <a class="xref" href="full-text-queries.html#query-dsl-query-string-query" title="Query string query">query_string</a> query in Elasticsearch.</p>
<p>The first parameter is basically the input that will be passed as is to the <code class="literal">query_string</code> query, which means that anything that <code class="literal">query_string</code>
accepts in its <code class="literal">query</code> field can be used here as well:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT author, name, SCORE() FROM library WHERE QUERY('name:dune');

    author     |       name        |    SCORE()
---------------+-------------------+---------------
Frank Herbert  |Dune               |2.2886353
Frank Herbert  |Dune Messiah       |1.8893257
Frank Herbert  |Children of Dune   |1.6086556
Frank Herbert  |God Emperor of Dune|1.4005898</pre>
</div>
<p>A more advanced example, showing more of the features that <code class="literal">query_string</code> supports, of course possible with Elasticsearch SQL:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT author, name, page_count, SCORE() FROM library WHERE QUERY('_exists_:"author" AND page_count:&gt;200 AND (name:/star.*/ OR name:duna~)');

      author      |       name        |  page_count   |    SCORE()
------------------+-------------------+---------------+---------------
Frank Herbert     |Dune               |604            |3.7164764
Frank Herbert     |Dune Messiah       |331            |3.4169943
Frank Herbert     |Children of Dune   |408            |3.2064917
Frank Herbert     |God Emperor of Dune|454            |3.0504425
Peter F. Hamilton |Pandora's Star     |768            |3.0
Robert A. Heinlein|Starship Troopers  |335            |3.0</pre>
</div>
<p>The query above uses the <code class="literal">_exists_</code> query to select documents that have values in the <code class="literal">author</code> field, a range query for <code class="literal">page_count</code> and
regex and fuzziness queries for the <code class="literal">name</code> field.</p>
<p>If one needs to customize various configuration options that <code class="literal">query_string</code> exposes, this can be done using the second <em>optional</em> parameter.
Multiple settings can be specified separated by a semicolon <code class="literal">;</code>:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT author, name, SCORE() FROM library WHERE QUERY('dune god', 'default_operator=and;default_field=name');

    author     |       name        |    SCORE()
---------------+-------------------+---------------
Frank Herbert  |God Emperor of Dune|3.6984892</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The allowed optional parameters for <code class="literal">QUERY()</code> are: <code class="literal">allow_leading_wildcard</code>, <code class="literal">analyze_wildcard</code>, <code class="literal">analyzer</code>,
<code class="literal">auto_generate_synonyms_phrase_query</code>, <code class="literal">default_field</code>, <code class="literal">default_operator</code>, <code class="literal">enable_position_increments</code>,
<code class="literal">escape</code>, <code class="literal">fuzziness</code>, <code class="literal">fuzzy_max_expansions</code>, <code class="literal">fuzzy_prefix_length</code>, <code class="literal">fuzzy_rewrite</code>, <code class="literal">fuzzy_transpositions</code>,
<code class="literal">lenient</code>, <code class="literal">max_determinized_states</code>, <code class="literal">minimum_should_match</code>, <code class="literal">phrase_slop</code>, <code class="literal">rewrite</code>, <code class="literal">quote_analyzer</code>,
<code class="literal">quote_field_suffix</code>, <code class="literal">tie_breaker</code>, <code class="literal">time_zone</code>, <code class="literal">type</code>.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-search-score"></a><code class="literal">SCORE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/search.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SCORE()</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>: <em>none</em></p>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/relevance-intro.html" class="ulink" target="_top">relevance</a> of a given input to the executed query.
The higher score, the more relevant the data.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When doing multiple text queries in the <code class="literal">WHERE</code> clause then, their scores will be
combined using the same rules as Elasticsearch&#8217;s
<a class="xref" href="compound-queries.html#query-dsl-bool-query" title="Boolean query">bool query</a>.</p>
</div>
</div>
<p>Typically <code class="literal">SCORE</code> is used for ordering the results of a query based on their relevance:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SCORE(), * FROM library WHERE MATCH(name, 'dune') ORDER BY SCORE() DESC;

    SCORE()    |    author     |       name        |  page_count   |    release_date
---------------+---------------+-------------------+---------------+--------------------
2.2886353      |Frank Herbert  |Dune               |604            |1965-06-01T00:00:00Z
1.8893257      |Frank Herbert  |Dune Messiah       |331            |1969-10-15T00:00:00Z
1.6086556      |Frank Herbert  |Children of Dune   |408            |1976-04-21T00:00:00Z
1.4005898      |Frank Herbert  |God Emperor of Dune|454            |1981-05-28T00:00:00Z</pre>
</div>
<p>However, it is perfectly fine to return the score without sorting by it:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SCORE() AS score, name, release_date FROM library WHERE QUERY('dune') ORDER BY YEAR(release_date) DESC;

     score     |       name        |    release_date
---------------+-------------------+--------------------
1.4005898      |God Emperor of Dune|1981-05-28T00:00:00Z
1.6086556      |Children of Dune   |1976-04-21T00:00:00Z
1.8893257      |Dune Messiah       |1969-10-15T00:00:00Z
2.2886353      |Dune               |1965-06-01T00:00:00Z</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-math"></a>Mathematical Functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h2>
</div></div></div>
<p>All math and trigonometric functions require their input (where applicable)
to be numeric.</p>
<h3><a id="sql-functions-math-generic"></a>Generic<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-abs"></a><code class="literal">ABS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ABS(numeric_exp) <a id="CO443-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO443-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: numeric</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Absolute_value" class="ulink" target="_top">absolute value</a> of <code class="literal">numeric_exp</code>. The return type is the same as the input type.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ABS(-123.5), ABS(55);

  ABS(-123.5)  |    ABS(55)
---------------+---------------
123.5          |55</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-cbrt"></a><code class="literal">CBRT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CBRT(numeric_exp) <a id="CO444-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO444-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Cube_root" class="ulink" target="_top">cube root</a> of <code class="literal">numeric_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CBRT(-125.5);

   CBRT(-125.5)
-------------------
-5.0066577974783435</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-ceil"></a><code class="literal">CEIL/CEILING</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CEIL(numeric_exp) <a id="CO445-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO445-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer or long numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the smallest integer greater than or equal to <code class="literal">numeric_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CEIL(125.01), CEILING(-125.99);

 CEIL(125.01)  |CEILING(-125.99)
---------------+----------------
126            |-125</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-e"></a><code class="literal">E</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">E()</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>: <em>none</em></p>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">2.718281828459045</code></p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns <a href="https://en.wikipedia.org/wiki/E_%28mathematical_constant%29" class="ulink" target="_top">Euler&#8217;s number</a>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT E(), CEIL(E());

       E()       |   CEIL(E())
-----------------+---------------
2.718281828459045|3</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-exp"></a><code class="literal">EXP</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">EXP(numeric_exp) <a id="CO446-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO446-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>float numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns <a href="https://en.wikipedia.org/wiki/Exponential_function" class="ulink" target="_top">Euler&#8217;s number at the power</a> of <code class="literal">numeric_exp</code> e<sup>numeric_exp</sup>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT EXP(1), E(), EXP(2), E() * E();

     EXP(1)      |       E()       |     EXP(2)     |     E() * E()
-----------------+-----------------+----------------+------------------
2.718281828459045|2.718281828459045|7.38905609893065|7.3890560989306495</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-expm1"></a><code class="literal">EXPM1</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">EXPM1(numeric_exp) <a id="CO447-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO447-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>float numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#expm1-double-" class="ulink" target="_top">Euler&#8217;s number at the power</a> of <code class="literal">numeric_exp</code> minus 1 (e<sup>numeric_exp</sup> - 1).</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT E(), EXP(2), EXPM1(2);

       E()       |     EXP(2)     |    EXPM1(2)
-----------------+----------------+----------------
2.718281828459045|7.38905609893065|6.38905609893065</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-floor"></a><code class="literal">FLOOR</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">FLOOR(numeric_exp) <a id="CO448-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO448-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer or long numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the largest integer less than or equal to <code class="literal">numeric_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT FLOOR(125.01), FLOOR(-125.99);

 FLOOR(125.01) |FLOOR(-125.99)
---------------+---------------
125            |-126</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-log"></a><code class="literal">LOG</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">LOG(numeric_exp) <a id="CO449-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO449-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Natural_logarithm" class="ulink" target="_top">natural logarithm</a> of <code class="literal">numeric_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT EXP(3), LOG(20.085536923187668);

      EXP(3)      |LOG(20.085536923187668)
------------------+-----------------------
20.085536923187668|3.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-log10"></a><code class="literal">LOG10</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">LOG10(numeric_exp) <a id="CO450-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO450-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Common_logarithm" class="ulink" target="_top">base 10 logarithm</a> of <code class="literal">numeric_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LOG10(5), LOG(5)/LOG(10);

     LOG10(5)     |    LOG(5)/LOG(10)
------------------+-----------------------
0.6989700043360189|0.6989700043360187</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-pi"></a><code class="literal">PI</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">PI()</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>: <em>none</em></p>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">3.141592653589793</code></p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns <a href="https://en.wikipedia.org/wiki/Pi" class="ulink" target="_top">PI number</a>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT PI();

      PI()
-----------------
3.141592653589793</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-power"></a><code class="literal">POWER</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">POWER(
    numeric_exp, <a id="CO451-1"></a><i class="conum" data-value="1"></i>
    integer_exp) <a id="CO451-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO451-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO451-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the value of <code class="literal">numeric_exp</code> to the power of <code class="literal">integer_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT POWER(3, 2), POWER(3, 3);

  POWER(3, 2)  |  POWER(3, 3)
---------------+---------------
9.0            |27.0</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT POWER(5, -1), POWER(5, -2);

  POWER(5, -1) |  POWER(5, -2)
---------------+---------------
0.2            |0.04</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-random"></a><code class="literal">RANDOM/RAND</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">RANDOM(seed) <a id="CO452-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO452-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a random double using the given seed.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT RANDOM(123);

   RANDOM(123)
------------------
0.7231742029971469</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-round"></a><code class="literal">ROUND</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ROUND(
    numeric_exp      <a id="CO453-1"></a><i class="conum" data-value="1"></i>
    [, integer_exp]) <a id="CO453-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO453-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO453-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression; optional. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: numeric</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns <code class="literal">numeric_exp</code> rounded to <code class="literal">integer_exp</code> places right of the decimal point. If <code class="literal">integer_exp</code> is negative,
<code class="literal">numeric_exp</code> is rounded to |<code class="literal">integer_exp</code>| places to the left of the decimal point. If <code class="literal">integer_exp</code> is omitted,
the function will perform as if <code class="literal">integer_exp</code> would be 0. The returned numeric data type is the same as the data type
of <code class="literal">numeric_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ROUND(-345.153, 1) AS rounded;

    rounded
---------------
-345.2</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ROUND(-345.153, -1) AS rounded;

    rounded
---------------
-350.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-sign"></a><code class="literal">SIGN/SIGNUM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SIGN(numeric_exp) <a id="CO454-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO454-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: [-1, 0, 1]</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns an indicator of the sign of <code class="literal">numeric_exp</code>. If <code class="literal">numeric_exp</code> is less than zero, –1 is returned. If <code class="literal">numeric_exp</code> equals zero, 0 is returned. If <code class="literal">numeric_exp</code> is greater than zero, 1 is returned.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SIGN(-123), SIGN(0), SIGN(415);

  SIGN(-123)   |    SIGN(0)    |   SIGN(415)
---------------+---------------+---------------
-1             |0              |1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-sqrt"></a><code class="literal">SQRT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SQRT(numeric_exp) <a id="CO455-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO455-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns <a href="https://en.wikipedia.org/wiki/Square_root" class="ulink" target="_top">square root</a> of <code class="literal">numeric_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SQRT(EXP(2)), E(), SQRT(25);

  SQRT(EXP(2))   |       E()       |   SQRT(25)
-----------------+-----------------+---------------
2.718281828459045|2.718281828459045|5.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-truncate"></a><code class="literal">TRUNCATE/TRUNC</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">TRUNCATE(
    numeric_exp      <a id="CO456-1"></a><i class="conum" data-value="1"></i>
    [, integer_exp]) <a id="CO456-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO456-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO456-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression; optional. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: numeric</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns <code class="literal">numeric_exp</code> truncated to <code class="literal">integer_exp</code> places right of the decimal point. If <code class="literal">integer_exp</code> is negative,
<code class="literal">numeric_exp</code> is truncated to |<code class="literal">integer_exp</code>| places to the left of the decimal point. If <code class="literal">integer_exp</code> is omitted,
the function will perform as if <code class="literal">integer_exp</code> would be 0. The returned numeric data type is the same as the data type
of <code class="literal">numeric_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT TRUNC(-345.153, 1) AS trimmed;

    trimmed
---------------
-345.1</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT TRUNCATE(-345.153, -1) AS trimmed;

    trimmed
---------------
-340.0</pre>
</div>
<h3><a id="sql-functions-math-trigonometric"></a>Trigonometric<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-acos"></a><code class="literal">ACOS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ACOS(numeric_exp) <a id="CO457-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO457-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Inverse_trigonometric_functions" class="ulink" target="_top">arccosine</a> of <code class="literal">numeric_exp</code> as an angle, expressed in radians.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ACOS(COS(PI())), PI();

 ACOS(COS(PI())) |      PI()
-----------------+-----------------
3.141592653589793|3.141592653589793</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-asin"></a><code class="literal">ASIN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ASIN(numeric_exp) <a id="CO458-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO458-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Inverse_trigonometric_functions" class="ulink" target="_top">arcsine</a> of <code class="literal">numeric_exp</code> as an angle, expressed in radians.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ROUND(DEGREES(ASIN(0.7071067811865475))) AS "ASIN(0.707)", ROUND(SIN(RADIANS(45)), 3) AS "SIN(45)";

  ASIN(0.707)  |    SIN(45)
---------------+---------------
45.0           |0.707</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-atan"></a><code class="literal">ATAN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ATAN(numeric_exp) <a id="CO459-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO459-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Inverse_trigonometric_functions" class="ulink" target="_top">arctangent</a> of <code class="literal">numeric_exp</code> as an angle, expressed in radians.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DEGREES(ATAN(TAN(RADIANS(90))));

DEGREES(ATAN(TAN(RADIANS(90))))
-------------------------------
90.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-atan2"></a><code class="literal">ATAN2</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ATAN2(
    ordinate, <a id="CO460-1"></a><i class="conum" data-value="1"></i>
    abscisa)  <a id="CO460-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO460-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO460-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Atan2" class="ulink" target="_top">arctangent of the <code class="literal">ordinate</code> and <code class="literal">abscisa</code> coordinates</a> specified as an angle, expressed in radians.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ATAN2(5 * SIN(RADIANS(45)), 5 * COS(RADIANS(45))) AS "ATAN2(5*SIN(45), 5*COS(45))", RADIANS(45);

ATAN2(5*SIN(45), 5*COS(45))|   RADIANS(45)
---------------------------+------------------
0.7853981633974483         |0.7853981633974483</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-cos"></a><code class="literal">COS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">COS(numeric_exp) <a id="CO461-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO461-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Trigonometric_functions#cosine" class="ulink" target="_top">cosine</a> of <code class="literal">numeric_exp</code>, where <code class="literal">numeric_exp</code> is an angle expressed in radians.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT COS(RADIANS(180)), POWER(SIN(RADIANS(54)), 2) + POWER(COS(RADIANS(54)), 2) AS pythagorean_identity;

COS(RADIANS(180))|pythagorean_identity
-----------------+--------------------
-1.0             |1.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-cosh"></a><code class="literal">COSH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">COSH(numeric_exp) <a id="CO462-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO462-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Hyperbolic_function" class="ulink" target="_top">hyperbolic cosine</a> of <code class="literal">numeric_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT COSH(5), (POWER(E(), 5) + POWER(E(), -5)) / 2 AS "(e^5 + e^-5)/2";

     COSH(5)     | (e^5 + e^-5)/2
-----------------+-----------------
74.20994852478785|74.20994852478783</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-cot"></a><code class="literal">COT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">COT(numeric_exp) <a id="CO463-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO463-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Trigonometric_functions#Cosecant,_secant,_and_cotangent" class="ulink" target="_top">cotangent</a> of <code class="literal">numeric_exp</code>, where <code class="literal">numeric_exp</code> is an angle expressed in radians.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT COT(RADIANS(30)) AS "COT(30)", COS(RADIANS(30)) / SIN(RADIANS(30)) AS "COS(30)/SIN(30)";

     COT(30)      | COS(30)/SIN(30)
------------------+------------------
1.7320508075688774|1.7320508075688776</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-degrees"></a><code class="literal">DEGREES</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DEGREES(numeric_exp) <a id="CO464-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO464-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Convert from <a href="https://en.wikipedia.org/wiki/Radian" class="ulink" target="_top">radians</a>
to <a href="https://en.wikipedia.org/wiki/Degree_(angle)" class="ulink" target="_top">degrees</a>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DEGREES(PI() * 2), DEGREES(PI());

DEGREES(PI() * 2)| DEGREES(PI())
-----------------+---------------
360.0            |180.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-radians"></a><code class="literal">RADIANS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">RADIANS(numeric_exp) <a id="CO465-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO465-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Convert from <a href="https://en.wikipedia.org/wiki/Degree_(angle)" class="ulink" target="_top">degrees</a>
to <a href="https://en.wikipedia.org/wiki/Radian" class="ulink" target="_top">radians</a>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT RADIANS(90), PI()/2;

   RADIANS(90)    |      PI()/2
------------------+------------------
1.5707963267948966|1.5707963267948966</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-sin"></a><code class="literal">SIN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SIN(numeric_exp) <a id="CO466-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO466-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Trigonometric_functions#sine" class="ulink" target="_top">sine</a> of <code class="literal">numeric_exp</code>, where <code class="literal">numeric_exp</code> is an angle expressed in radians.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SIN(RADIANS(90)), POWER(SIN(RADIANS(67)), 2) + POWER(COS(RADIANS(67)), 2) AS pythagorean_identity;

SIN(RADIANS(90))|pythagorean_identity
----------------+--------------------
1.0             |1.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-sinh"></a><code class="literal">SINH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SINH(numeric_exp) <a id="CO467-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO467-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Hyperbolic_function" class="ulink" target="_top">hyperbolic sine</a> of <code class="literal">numeric_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SINH(5), (POWER(E(), 5) - POWER(E(), -5)) / 2 AS "(e^5 - e^-5)/2";

     SINH(5)     | (e^5 - e^-5)/2
-----------------+-----------------
74.20321057778875|74.20321057778874</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-math-tan"></a><code class="literal">TAN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/math.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">TAN(numeric_exp) <a id="CO468-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO468-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double numeric value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the <a href="https://en.wikipedia.org/wiki/Trigonometric_functions#tangent" class="ulink" target="_top">tangent</a> of <code class="literal">numeric_exp</code>, where <code class="literal">numeric_exp</code> is an angle expressed in radians.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT TAN(RADIANS(66)) AS "TAN(66)", SIN(RADIANS(66))/COS(RADIANS(66)) AS "SIN(66)/COS(66)=TAN(66)";

     TAN(66)      |SIN(66)/COS(66)=TAN(66)
------------------+-----------------------
2.2460367739042164|2.246036773904216</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-string"></a>String Functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h2>
</div></div></div>
<p>Functions for performing string manipulation.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-ascii"></a><code class="literal">ASCII</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ASCII(string_exp) <a id="CO469-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO469-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the ASCII code value of the leftmost character of <code class="literal">string_exp</code> as an integer.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ASCII('Elastic');

ASCII('Elastic')
----------------
69</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-bit-length"></a><code class="literal">BIT_LENGTH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">BIT_LENGTH(string_exp) <a id="CO470-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO470-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the length in bits of the <code class="literal">string_exp</code> input expression.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT BIT_LENGTH('Elastic');

BIT_LENGTH('Elastic')
---------------------
56</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-char"></a><code class="literal">CHAR</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CHAR(code) <a id="CO471-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO471-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression between <code class="literal">0</code> and <code class="literal">255</code>. If <code class="literal">null</code>, negative, or greater
than <code class="literal">255</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the character that has the ASCII code value specified by the numeric input.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CHAR(69);

   CHAR(69)
---------------
E</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-char-length"></a><code class="literal">CHAR_LENGTH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CHAR_LENGTH(string_exp) <a id="CO472-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO472-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the length in characters of the input, if the string expression is of a character data type; otherwise, returns the length in bytes of the string expression (the smallest integer not less than the number of bits divided by 8).</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CHAR_LENGTH('Elastic');

CHAR_LENGTH('Elastic')
----------------------
7</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-concat"></a><code class="literal">CONCAT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CONCAT(
    string_exp1, <a id="CO473-1"></a><i class="conum" data-value="1"></i>
    string_exp2) <a id="CO473-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO473-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. Treats <code class="literal">null</code> as an empty string.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO473-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. Treats <code class="literal">null</code> as an empty string.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a character string that is the result of concatenating <code class="literal">string_exp1</code> to <code class="literal">string_exp2</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CONCAT('Elasticsearch', ' SQL');

CONCAT('Elasticsearch', ' SQL')
-------------------------------
Elasticsearch SQL</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-insert"></a><code class="literal">INSERT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">INSERT(
    source,      <a id="CO474-1"></a><i class="conum" data-value="1"></i>
    start,       <a id="CO474-2"></a><i class="conum" data-value="2"></i>
    length,      <a id="CO474-3"></a><i class="conum" data-value="3"></i>
    replacement) <a id="CO474-4"></a><i class="conum" data-value="4"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO474-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO474-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO474-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO474-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a string where <code class="literal">length</code> characters have been deleted from <code class="literal">source</code>, beginning at <code class="literal">start</code>, and where <code class="literal">replacement</code> has been inserted into <code class="literal">source</code>, beginning at <code class="literal">start</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT INSERT('Elastic ', 8, 1, 'search');

INSERT('Elastic ', 8, 1, 'search')
----------------------------------
Elasticsearch</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-lcase"></a><code class="literal">LCASE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">LCASE(string_exp) <a id="CO475-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO475-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a string equal to that in <code class="literal">string_exp</code>, with all uppercase characters converted to lowercase.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LCASE('Elastic');

LCASE('Elastic')
----------------
elastic</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-left"></a><code class="literal">LEFT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">LEFT(
    string_exp, <a id="CO476-1"></a><i class="conum" data-value="1"></i>
    count)      <a id="CO476-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO476-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO476-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>. If <code class="literal">0</code> or
negative, the function returns an empty string.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the leftmost count characters of <code class="literal">string_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LEFT('Elastic',3);

LEFT('Elastic',3)
-----------------
Ela</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-length"></a><code class="literal">LENGTH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">LENGTH(string_exp) <a id="CO477-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO477-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the number of characters in <code class="literal">string_exp</code>, excluding trailing blanks.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LENGTH('Elastic   ');

LENGTH('Elastic   ')
--------------------
7</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-locate"></a><code class="literal">LOCATE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">LOCATE(
    pattern, <a id="CO478-1"></a><i class="conum" data-value="1"></i>
    source   <a id="CO478-2"></a><i class="conum" data-value="2"></i>
    [, start]<a id="CO478-3"></a><i class="conum" data-value="3"></i>
)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO478-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression.  If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO478-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression.  If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO478-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression; optional. If <code class="literal">null</code>, <code class="literal">0</code>, <code class="literal">1</code>, negative, or not
specified, the search starts at the first character position.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the starting position of the first occurrence of
<code class="literal">pattern</code> within <code class="literal">source</code>. The optional <code class="literal">start</code> specifies the character position
to start the search with. If the <code class="literal">pattern</code> is not found within <code class="literal">source</code>, the
function returns <code class="literal">0</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LOCATE('a', 'Elasticsearch');

LOCATE('a', 'Elasticsearch')
----------------------------
3</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LOCATE('a', 'Elasticsearch', 5);

LOCATE('a', 'Elasticsearch', 5)
-------------------------------
10</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-ltrim"></a><code class="literal">LTRIM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">LTRIM(string_exp) <a id="CO479-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO479-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the characters of <code class="literal">string_exp</code>, with leading blanks removed.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LTRIM('   Elastic');

LTRIM('   Elastic')
-------------------
Elastic</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-octet-length"></a><code class="literal">OCTET_LENGTH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">OCTET_LENGTH(string_exp) <a id="CO480-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO480-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the length in bytes of the <code class="literal">string_exp</code> input expression.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT OCTET_LENGTH('Elastic');

OCTET_LENGTH('Elastic')
-----------------------
7</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-position"></a><code class="literal">POSITION</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">POSITION(
    string_exp1, <a id="CO481-1"></a><i class="conum" data-value="1"></i>
    string_exp2) <a id="CO481-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO481-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO481-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the position of the <code class="literal">string_exp1</code> in <code class="literal">string_exp2</code>. The result is an exact numeric.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT POSITION('Elastic', 'Elasticsearch');

POSITION('Elastic', 'Elasticsearch')
------------------------------------
1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-repeat"></a><code class="literal">REPEAT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">REPEAT(
    string_exp, <a id="CO482-1"></a><i class="conum" data-value="1"></i>
    count)      <a id="CO482-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO482-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO482-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression. If <code class="literal">0</code>, negative, or <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a character string composed of <code class="literal">string_exp</code> repeated <code class="literal">count</code> times.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT REPEAT('La', 3);

 REPEAT('La', 3)
----------------
LaLaLa</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-replace"></a><code class="literal">REPLACE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">REPLACE(
    source,      <a id="CO483-1"></a><i class="conum" data-value="1"></i>
    pattern,     <a id="CO483-2"></a><i class="conum" data-value="2"></i>
    replacement) <a id="CO483-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO483-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO483-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO483-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Search <code class="literal">source</code> for occurrences of <code class="literal">pattern</code>, and replace with <code class="literal">replacement</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT REPLACE('Elastic','El','Fant');

REPLACE('Elastic','El','Fant')
------------------------------
Fantastic</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-right"></a><code class="literal">RIGHT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">RIGHT(
    string_exp, <a id="CO484-1"></a><i class="conum" data-value="1"></i>
    count)      <a id="CO484-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO484-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO484-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>. If <code class="literal">0</code> or
negative, the function returns an empty string.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the rightmost count characters of <code class="literal">string_exp</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT RIGHT('Elastic',3);

RIGHT('Elastic',3)
------------------
tic</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-rtrim"></a><code class="literal">RTRIM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">RTRIM(string_exp) <a id="CO485-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO485-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the characters of <code class="literal">string_exp</code> with trailing blanks removed.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT RTRIM('Elastic   ');

RTRIM('Elastic   ')
-------------------
Elastic</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-space"></a><code class="literal">SPACE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SPACE(count) <a id="CO486-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO486-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression. If <code class="literal">null</code> or negative, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a character string consisting of <code class="literal">count</code> spaces.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SPACE(3);

   SPACE(3)
---------------</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-startswith"></a><code class="literal">STARTS_WITH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">STARTS_WITH(
    source,   <a id="CO487-1"></a><i class="conum" data-value="1"></i>
    pattern)  <a id="CO487-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO487-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO487-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: boolean value</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns <code class="literal">true</code> if the source expression starts with the specified
pattern, <code class="literal">false</code> otherwise. The matching is case sensitive.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT STARTS_WITH('Elasticsearch', 'Elastic');

STARTS_WITH('Elasticsearch', 'Elastic')
--------------------------------
true</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT STARTS_WITH('Elasticsearch', 'ELASTIC');

STARTS_WITH('Elasticsearch', 'ELASTIC')
--------------------------------
false</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-substring"></a><code class="literal">SUBSTRING</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SUBSTRING(
    source, <a id="CO488-1"></a><i class="conum" data-value="1"></i>
    start,  <a id="CO488-2"></a><i class="conum" data-value="2"></i>
    length) <a id="CO488-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO488-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO488-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO488-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>integer expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a character string that is derived from <code class="literal">source</code>, beginning at the character position specified by <code class="literal">start</code> for <code class="literal">length</code> characters.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SUBSTRING('Elasticsearch', 0, 7);

SUBSTRING('Elasticsearch', 0, 7)
--------------------------------
Elastic</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-trim"></a><code class="literal">TRIM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">TRIM(string_exp) <a id="CO489-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO489-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the characters of <code class="literal">string_exp</code>, with leading and trailing blanks removed.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT TRIM('   Elastic   ') AS trimmed;

trimmed
--------------
Elastic</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-string-ucase"></a><code class="literal">UCASE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/string.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">UCASE(string_exp) <a id="CO490-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO490-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns a string equal to that of the input, with all lowercase characters converted to uppercase.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT UCASE('Elastic');

UCASE('Elastic')
----------------
ELASTIC</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-type-conversion"></a>Type Conversion Functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/type-conversion.asciidoc">edit</a></h2>
</div></div></div>
<p>Functions for converting an expression of one data type to another.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-type-conversion-cast"></a><code class="literal">CAST</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/type-conversion.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CAST(
    expression <a id="CO491-1"></a><i class="conum" data-value="1"></i>
 AS data_type) <a id="CO491-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO491-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Expression to cast. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO491-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Target data type to cast to</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Description</strong></span>: Casts the result of the given expression to the target <a class="xref" href="sql-spec.html#sql-data-types" title="Data Types">data type</a>.
If the cast is not possible (for example because of target type is too narrow or because
the value itself cannot be converted), the query fails.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CAST('123' AS INT) AS int;

      int
---------------
123</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CAST(123 AS VARCHAR) AS string;

    string
---------------
123</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT YEAR(CAST('2018-05-19T11:23:45Z' AS TIMESTAMP)) AS year;

     year
---------------
2018</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Both ANSI SQL and Elasticsearch SQL types are supported with the former taking
precedence. This only affects <code class="literal">FLOAT</code> which due naming conflict, is interpreted as ANSI SQL
and thus maps to <code class="literal">double</code> in Elasticsearch as oppose to <code class="literal">float</code>.
To obtain an Elasticsearch <code class="literal">float</code>, perform casting to its SQL equivalent, <code class="literal">real</code> type.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-type-conversion-convert"></a><code class="literal">CONVERT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/type-conversion.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CONVERT(
    expression, <a id="CO492-1"></a><i class="conum" data-value="1"></i>
    data_type)  <a id="CO492-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO492-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Expression to convert. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO492-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Target data type to convert to</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Description</strong></span>: Works exactly like <a class="xref" href="sql-functions.html#sql-functions-type-conversion-cast" title="CAST"><code class="literal">CAST</code></a> with slightly different syntax.
Moreover, apart from the standard <a class="xref" href="sql-spec.html#sql-data-types" title="Data Types">data types</a> it supports the corresponding
<a href="https://docs.microsoft.com/en-us/sql/odbc/reference/appendixes/explicit-data-type-conversion-function?view=sql-server-2017" class="ulink" target="_top">ODBC data types</a>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CONVERT('123', SQL_INTEGER) AS int;

      int
---------------
123</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CONVERT('123', INTEGER) AS int;

      int
---------------
123</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-geo"></a>Geo Functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h2>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>The geo functions work with geometries stored in <code class="literal">geo_point</code>, <code class="literal">geo_shape</code> and <code class="literal">shape</code> fields, or returned by other geo functions.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_limitations_8"></a>Limitations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h3>
</div></div></div>
<p><a class="xref" href="mapping-types.html#geo-point" title="Geopoint field type"><code class="literal">geo_point</code></a>, <a class="xref" href="mapping-types.html#geo-shape" title="Geoshape field type"><code class="literal">geo_shape</code></a> and <a class="xref" href="mapping-types.html#shape" title="Shape field type"><code class="literal">shape</code></a> and types are represented in SQL as
geometry and can be used interchangeably with the following exceptions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">geo_shape</code> and <code class="literal">shape</code> fields don&#8217;t have doc values, therefore these fields cannot be used for filtering, grouping
or sorting.
</li>
<li class="listitem">
<code class="literal">geo_points</code> fields are indexed and have doc values by default, however only latitude and longitude are stored and
indexed with some loss of precision from the original values (4.190951585769653E-8 for the latitude and
8.381903171539307E-8 for longitude). The altitude component is accepted but not stored in doc values nor indexed.
Therefore calling <code class="literal">ST_Z</code> function in the filtering, grouping or sorting will return <code class="literal">null</code>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_geometry_conversion"></a>Geometry Conversion<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="sql-functions-geo-st-as-wkt"></a><code class="literal">ST_AsWKT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h4>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ST_AsWKT(
    geometry <a id="CO493-1"></a><i class="conum" data-value="1"></i>
)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO493-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>geometry. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the WKT representation of the <code class="literal">geometry</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT city, ST_AsWKT(location) location FROM "geo" WHERE city = 'Amsterdam';

     city:s    |     location:s
Amsterdam      |POINT (4.850312 52.347557)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="sql-functions-geo-st-wkt-to-sql"></a><code class="literal">ST_WKTToSQL</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h4>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ST_WKTToSQL(
    string <a id="CO494-1"></a><i class="conum" data-value="1"></i>
)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO494-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>string WKT representation of geometry. If <code class="literal">null</code>, the function returns
<code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: geometry</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the geometry from WKT representation.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CAST(ST_WKTToSQL('POINT (10 20)') AS STRING) location;

   location:s
POINT (10.0 20.0)</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_geometry_properties"></a>Geometry Properties<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="sql-functions-geo-st-geometrytype"></a><code class="literal">ST_GeometryType</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h4>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ST_GeometryType(
    geometry <a id="CO495-1"></a><i class="conum" data-value="1"></i>
)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO495-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>geometry. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the type of the <code class="literal">geometry</code> such as POINT, MULTIPOINT, LINESTRING, MULTILINESTRING, POLYGON, MULTIPOLYGON, GEOMETRYCOLLECTION, ENVELOPE or CIRCLE.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ST_GeometryType(ST_WKTToSQL('POINT (10 20)')) type;

      type:s
POINT</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="sql-functions-geo-st-x"></a><code class="literal">ST_X</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h4>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ST_X(
    geometry <a id="CO496-1"></a><i class="conum" data-value="1"></i>
)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO496-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>geometry. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the longitude of the first point in the geometry.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ST_X(ST_WKTToSQL('POINT (10 20)')) x;

      x:d
10.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="sql-functions-geo-st-y"></a><code class="literal">ST_Y</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h4>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ST_Y(
    geometry <a id="CO497-1"></a><i class="conum" data-value="1"></i>
)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO497-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>geometry. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the latitude of the first point in the geometry.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ST_Y(ST_WKTToSQL('POINT (10 20)')) y;

      y:d
20.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="sql-functions-geo-st-z"></a><code class="literal">ST_Z</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h4>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ST_Z(
    geometry <a id="CO498-1"></a><i class="conum" data-value="1"></i>
)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO498-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>geometry. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: double</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the altitude of the first point in the geometry.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ST_Z(ST_WKTToSQL('POINT (10 20 30)')) z;

      z:d
30.0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="sql-functions-geo-st-distance"></a><code class="literal">ST_Distance</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/geo.asciidoc">edit</a></h4>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ST_Distance(
    geometry, <a id="CO499-1"></a><i class="conum" data-value="1"></i>
    geometry  <a id="CO499-2"></a><i class="conum" data-value="2"></i>
)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO499-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>source geometry. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO499-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>target geometry. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: Double</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the distance between geometries in meters. Both geometries have to be points.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ST_Distance(ST_WKTToSQL('POINT (10 20)'), ST_WKTToSQL('POINT (20 30)')) distance;

   distance:d
1499101.2889383635</pre>
</div>
</div>

</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-conditional"></a>Conditional Functions And Expressions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h2>
</div></div></div>
<p>Functions that return one of their arguments by evaluating in an if-else manner.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-conditional-case"></a><code class="literal">CASE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CASE WHEN condition THEN result
    [WHEN ...]
    [ELSE default_result]
END</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<p>One or multiple <em>WHEN <span class="strong strong"><strong>condition</strong></span> THEN <span class="strong strong"><strong>result</em></strong></span> clauses are used and the expression can optionally have
an <em>ELSE <span class="strong strong"><strong>default_result</em></strong></span> clause. Every <span class="strong strong"><strong>condition</strong></span> should be a boolean expression.</p>
<p><span class="strong strong"><strong>Output</strong></span>: one of the <span class="strong strong"><strong>result</strong></span> expressions if the corresponding <em>WHEN <span class="strong strong"><strong>condition</em></strong></span> evaluates to <code class="literal">true</code> or
the <span class="strong strong"><strong>default_result</strong></span> if all <em>WHEN <span class="strong strong"><strong>condition</em></strong></span> clauses evaluate to <code class="literal">false</code>. If the optional <em>ELSE <span class="strong strong"><strong>default_result</em></strong></span>
clause is missing and all <em>WHEN <span class="strong strong"><strong>condition</em></strong></span> clauses evaluate to <code class="literal">false</code> then <code class="literal">null</code> is returned.</p>
<p><span class="strong strong"><strong>Description</strong></span>: The CASE expression is a generic conditional expression which simulates if/else statements of other programming languages
If the condition’s result is true, the value of the result expression that follows the condition will be the returned
the subsequent when clauses will be skipped and not processed.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CASE WHEN 1 &gt; 2 THEN 'elastic'
            WHEN 2 &lt;= 3 THEN 'search'
       END AS "case";

    case
---------------
search</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CASE WHEN 1 &gt; 2 THEN 'elastic'
            WHEN 2 &gt; 10 THEN 'search'
       END AS "case";

    case
---------------
null</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CASE WHEN 1 &gt; 2 THEN 'elastic'
            WHEN 2 &gt; 10 THEN 'search'
            ELSE 'default'
       END AS "case";

    case
---------------
default</pre>
</div>
<p>As a variant, a case expression can be expressed with a syntax similar to <span class="strong strong"><strong>switch-case</strong></span> of other programming languages:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CASE expression
     WHEN value1 THEN result1
    [WHEN value2 THEN result2]
    [WHEN ...]
    [ELSE default_result]
END</pre>
</div>
<p>In this case it&#8217;s transformed internally to:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CASE WHEN expression = value1 THEN result1
    [WHEN expression = value2 THEN result2]
    [WHEN ...]
    [ELSE default_result]
END</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CASE 5
            WHEN 1 THEN 'elastic'
            WHEN 2 THEN 'search'
            WHEN 5 THEN 'elasticsearch'
       END AS "case";

    case
---------------
elasticsearch</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CASE 5
            WHEN 1 THEN 'elastic'
            WHEN 2 THEN 'search'
            WHEN 3 THEN 'elasticsearch'
            ELSE 'default'
       END AS "case";

    case
---------------
default</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>All result expressions must be of compatible data types. More specifically all result
expressions should have a compatible data type with the 1st <em>non-null</em> result expression.
E.g.:</p>
<p>for the following query:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CASE WHEN a = 1 THEN null
     WHEN a &gt; 2 THEN 10
     WHEN a &gt; 5 THEN 'foo'
END</pre>
</div>
<p>an error message would be returned, mentioning that <span class="strong strong"><strong><em>foo</em></strong></span> is of data type <span class="strong strong"><strong>keyword</strong></span>,
which does not match the expected data type <span class="strong strong"><strong>integer</strong></span> (based on result <span class="strong strong"><strong>10</strong></span>).</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="sql-functions-conditional-case-groupby-custom-buckets"></a>Conditional bucketing<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h4>
</div></div></div>
<p>CASE can be used as a GROUP BY key in a query to facilitate custom bucketing
and assign descriptive names to those buckets. If, for example, the values
for a key are too many or, simply, ranges of those values are more
interesting than every single value, CASE can create custom buckets as in the
following example:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT count(*) AS count,
  CASE WHEN NVL(languages, 0) = 0 THEN 'zero'
    WHEN languages = 1 THEN 'one'
    WHEN languages = 2 THEN 'bilingual'
    WHEN languages = 3 THEN 'trilingual'
    ELSE 'multilingual'
  END as lang_skills
FROM employees
GROUP BY lang_skills
ORDER BY lang_skills;</pre>
</div>
<p>With this query, one can create normal grouping buckets for values <em>0, 1, 2, 3</em> with
descriptive names, and every value <em>&gt;= 4</em> falls into the <em>multilingual</em> bucket.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-conditional-coalesce"></a><code class="literal">COALESCE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">COALESCE(
    expression, <a id="CO500-1"></a><i class="conum" data-value="1"></i>
    expression, <a id="CO500-2"></a><i class="conum" data-value="2"></i>
    ...)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO500-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>1st expression</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO500-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>2nd expression</p>
</td>
</tr>
</table>
</div>
<p>&#8230;&#8203;</p>
<p><span class="strong strong"><strong>N</strong></span>th expression</p>
<p>COALESCE can take an arbitrary number of arguments.</p>
<p><span class="strong strong"><strong>Output</strong></span>: one of the expressions or <code class="literal">null</code></p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the first of its arguments that is not null.
If all arguments are null, then it returns <code class="literal">null</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT COALESCE(null, 'elastic', 'search') AS "coalesce";

    coalesce
---------------
elastic</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT COALESCE(null, null, null, null) AS "coalesce";

    coalesce
---------------
null</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-conditional-greatest"></a><code class="literal">GREATEST</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">GREATEST(
    expression, <a id="CO501-1"></a><i class="conum" data-value="1"></i>
    expression, <a id="CO501-2"></a><i class="conum" data-value="2"></i>
    ...)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO501-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>1st expression</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO501-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>2nd expression</p>
</td>
</tr>
</table>
</div>
<p>&#8230;&#8203;</p>
<p><span class="strong strong"><strong>N</strong></span>th expression</p>
<p>GREATEST can take an arbitrary number of arguments and
all of them must be of the same data type.</p>
<p><span class="strong strong"><strong>Output</strong></span>: one of the expressions or <code class="literal">null</code></p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the argument that has the largest value which is not null.
If all arguments are null, then it returns <code class="literal">null</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT GREATEST(null, 1, 2) AS "greatest";

    greatest
---------------
2</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT GREATEST(null, null, null, null) AS "greatest";

    greatest
---------------
null</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-conditional-ifnull"></a><code class="literal">IFNULL</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">IFNULL(
    expression, <a id="CO502-1"></a><i class="conum" data-value="1"></i>
    expression) <a id="CO502-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO502-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>1st expression</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO502-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>2nd expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: 2nd expression if 1st expression is null, otherwise 1st expression.</p>
<p><span class="strong strong"><strong>Description</strong></span>: Variant of <a class="xref" href="sql-functions.html#sql-functions-conditional-coalesce" title="COALESCE"><code class="literal">COALESCE</code></a> with only two arguments.
Returns the first of its arguments that is not null.
If all arguments are null, then it returns <code class="literal">null</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT IFNULL('elastic', null) AS "ifnull";

    ifnull
---------------
elastic</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT IFNULL(null, 'search') AS "ifnull";

    ifnull
---------------
search</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-conditional-iif"></a><code class="literal">IIF</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">IIF(
    expression,   <a id="CO503-1"></a><i class="conum" data-value="1"></i>
    expression,   <a id="CO503-2"></a><i class="conum" data-value="2"></i>
    [expression]) <a id="CO503-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO503-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>boolean condition to check</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO503-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>return value if the boolean condition evaluates to <code class="literal">true</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO503-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>return value if the boolean condition evaluates <code class="literal">false</code>; optional</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: 2nd expression if 1st expression (condition) evaluates to <code class="literal">true</code>. If it evaluates to <code class="literal">false</code>
return 3rd expression. If 3rd expression is not provided return <code class="literal">null</code>.</p>
<p><span class="strong strong"><strong>Description</strong></span>: Conditional function that implements the standard <em>IF &lt;condition&gt; THEN &lt;result1&gt; ELSE &lt;result2&gt;</em>
logic of programming languages. If the 3rd expression is not provided and the condition evaluates to <code class="literal">false</code>,
<code class="literal">null</code> is returned.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT IIF(1 &lt; 2, 'TRUE', 'FALSE') AS result1, IIF(1 &gt; 2, 'TRUE', 'FALSE') AS result2;

    result1    |    result2
---------------+---------------
TRUE           |FALSE</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT IIF(1 &lt; 2, 'TRUE') AS result1, IIF(1 &gt; 2 , 'TRUE') AS result2;

    result1    |    result2
---------------+---------------
TRUE           |null</pre>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p><span class="strong strong"><strong>IIF</strong></span> functions can be combined to implement more complex logic simulating the <a class="xref" href="sql-functions.html#sql-functions-conditional-case" title="CASE"><code class="literal">CASE</code></a>
expression. E.g.:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">IIF(a = 1, 'one', IIF(a = 2, 'two', IIF(a = 3, 'three', 'many')))</pre>
</div>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-conditional-isnull"></a><code class="literal">ISNULL</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ISNULL(
    expression, <a id="CO504-1"></a><i class="conum" data-value="1"></i>
    expression) <a id="CO504-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO504-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>1st expression</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO504-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>2nd expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: 2nd expression if 1st expression is null, otherwise 1st expression.</p>
<p><span class="strong strong"><strong>Description</strong></span>: Variant of <a class="xref" href="sql-functions.html#sql-functions-conditional-coalesce" title="COALESCE"><code class="literal">COALESCE</code></a> with only two arguments.
Returns the first of its arguments that is not null.
If all arguments are null, then it returns <code class="literal">null</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ISNULL('elastic', null) AS "isnull";

    isnull
---------------
elastic</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ISNULL(null, 'search') AS "isnull";

    isnull
---------------
search</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-conditional-least"></a><code class="literal">LEAST</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">LEAST(
    expression, <a id="CO505-1"></a><i class="conum" data-value="1"></i>
    expression, <a id="CO505-2"></a><i class="conum" data-value="2"></i>
    ...)</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO505-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>1st expression</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO505-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>2nd expression</p>
</td>
</tr>
</table>
</div>
<p>&#8230;&#8203;</p>
<p><span class="strong strong"><strong>N</strong></span>th expression</p>
<p>LEAST can take an arbitrary number of arguments and
all of them must be of the same data type.</p>
<p><span class="strong strong"><strong>Output</strong></span>: one of the expressions or <code class="literal">null</code></p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the argument that has the smallest value which is not null.
If all arguments are null, then it returns <code class="literal">null</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LEAST(null, 2, 1) AS "least";

    least
---------------
1</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT LEAST(null, null, null, null) AS "least";

    least
---------------
null</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-conditional-nullif"></a><code class="literal">NULLIF</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">NULLIF(
    expression, <a id="CO506-1"></a><i class="conum" data-value="1"></i>
    expression) <a id="CO506-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO506-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>1st expression</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO506-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>2nd expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">null</code> if the 2 expressions are equal, otherwise the 1st expression.</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns <code class="literal">null</code> when the two input expressions are equal and
if not, it returns the 1st expression.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT NULLIF('elastic', 'search') AS "nullif";
    nullif
---------------
elastic</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT NULLIF('elastic', 'elastic') AS "nullif";

    nullif:s
---------------
null</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-conditional-nvl"></a><code class="literal">NVL</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/conditional.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">NVL(
    expression, <a id="CO507-1"></a><i class="conum" data-value="1"></i>
    expression) <a id="CO507-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO507-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>1st expression</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO507-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>2nd expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: 2nd expression if 1st expression is null, otherwise 1st expression.</p>
<p><span class="strong strong"><strong>Description</strong></span>: Variant of <a class="xref" href="sql-functions.html#sql-functions-conditional-coalesce" title="COALESCE"><code class="literal">COALESCE</code></a> with only two arguments.
Returns the first of its arguments that is not null.
If all arguments are null, then it returns <code class="literal">null</code>.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT NVL('elastic', null) AS "nvl";

    nvl
---------------
elastic</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT NVL(null, 'search') AS "nvl";

    nvl
---------------
search</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-system"></a>System Functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/system.asciidoc">edit</a></h2>
</div></div></div>
<p>These functions return metadata type of information about the system being queried.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-system-database"></a><code class="literal">DATABASE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/system.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DATABASE()</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>: <em>none</em></p>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the name of the database being queried. In the case of Elasticsearch SQL, this
is the name of the Elasticsearch cluster. This function should always return a non-null
value.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DATABASE();

   DATABASE
---------------
elasticsearch</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-system-user"></a><code class="literal">USER</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/sql/functions/system.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">USER()</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>: <em>none</em></p>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><span class="strong strong"><strong>Description</strong></span>: Returns the username of the authenticated user executing the query. This function can
return <code class="literal">null</code> in case <a class="xref" href="configuring-stack-security.html" title="Start the Elastic Stack with security enabled automatically">security</a> is disabled.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT USER();

     USER
---------------
elastic</pre>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="sql-spec.html">« SQL Language</a>
</span>
<span class="next">
<a href="sql-syntax-reserved.html">Reserved keywords »</a>
</span>
</div>
</div>
</body>
</html>
