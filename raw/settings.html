<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configuring Elasticsearch | Elasticsearch Guide | Elastic</title>
<meta class="elastic" name="content" content="Configuring Elasticsearch | Elasticsearch Guide">

<link rel="home" href="index.html" title="Elasticsearch Guide"/>
<link rel="up" href="setup.html" title="Set up Elasticsearch"/>
<link rel="prev" href="run-elasticsearch-locally.html" title="Run Elasticsearch locally"/>
<link rel="next" href="system-config.html" title="Important system configuration"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="run-elasticsearch-locally.html">« Run Elasticsearch locally</a>
</span>
<span class="next">
<a href="system-config.html">Important system configuration »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="settings"></a>Configuring Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/configuration.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch ships with good defaults and requires very little configuration.
Most settings can be changed on a running cluster using the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Cluster update settings</a> API.</p>
<p>The configuration files should contain settings which are node-specific (such
as <code class="literal">node.name</code> and paths), or settings which a node requires in order to be
able to join a cluster, such as <code class="literal">cluster.name</code> and <code class="literal">network.host</code>.</p>
<h3><a id="config-files-location"></a>Config files location<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/configuration.asciidoc">edit</a></h3>
<p>Elasticsearch has three configuration files:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">elasticsearch.yml</code> for configuring Elasticsearch
</li>
<li class="listitem">
<code class="literal">jvm.options</code> for configuring Elasticsearch JVM settings
</li>
<li class="listitem">
<code class="literal">log4j2.properties</code> for configuring Elasticsearch logging
</li>
</ul>
</div>
<p>These files are located in the config directory, whose default location depends
on whether or not the installation is from an archive distribution (<code class="literal">tar.gz</code> or
<code class="literal">zip</code>) or a package distribution (Debian or RPM packages).</p>
<p>For the archive distributions, the config directory location defaults to
<code class="literal">$ES_HOME/config</code>. The location of the config directory can be changed via the
<code class="literal">ES_PATH_CONF</code> environment variable as follows:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">ES_PATH_CONF=/path/to/my/config ./bin/elasticsearch</pre>
</div>
<p>Alternatively, you can <code class="literal">export</code> the <code class="literal">ES_PATH_CONF</code> environment variable via the
command line or via your shell profile.</p>
<p>For the package distributions, the config directory location defaults to
<code class="literal">/etc/elasticsearch</code>. The location of the config directory can also be changed
via the <code class="literal">ES_PATH_CONF</code> environment variable, but note that setting this in your
shell is not sufficient. Instead, this variable is sourced from
<code class="literal">/etc/default/elasticsearch</code> (for the Debian package) and
<code class="literal">/etc/sysconfig/elasticsearch</code> (for the RPM package). You will need to edit the
<code class="literal">ES_PATH_CONF=/etc/elasticsearch</code> entry in one of these files accordingly to
change the config directory location.</p>
<h3><a id="_config_file_format"></a>Config file format<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/configuration.asciidoc">edit</a></h3>
<p>The configuration format is <a href="https://yaml.org/" class="ulink" target="_top">YAML</a>. Here is an
example of changing the path of the data and logs directories:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path:
    data: /var/lib/elasticsearch
    logs: /var/log/elasticsearch</pre>
</div>
<p>Settings can also be flattened as follows:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path.data: /var/lib/elasticsearch
path.logs: /var/log/elasticsearch</pre>
</div>
<p>In YAML, you can format non-scalar values as sequences:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">discovery.seed_hosts:
   - 192.168.1.10:9300
   - 192.168.1.11
   - seeds.mydomain.com</pre>
</div>
<p>Though less common, you can also format non-scalar values as arrays:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">discovery.seed_hosts: ["192.168.1.10:9300", "192.168.1.11", "seeds.mydomain.com"]</pre>
</div>
<h3><a id="_environment_variable_substitution"></a>Environment variable substitution<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/configuration.asciidoc">edit</a></h3>
<p>Environment variables referenced with the <code class="literal">${...}</code> notation within the
configuration file will be replaced with the value of the environment
variable. For example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.name:    ${HOSTNAME}
network.host: ${ES_NETWORK_HOST}</pre>
</div>
<p>Values for environment variables must be simple strings. Use a comma-separated string to provide values that Elasticsearch will parse as a list. For example, Elasticsearch will split the following string into a list of values for the <code class="literal">${HOSTNAME}</code> environment variable:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">export HOSTNAME="host1,host2"</pre>
</div>
<h3><a id="cluster-setting-types"></a>Cluster and node setting types<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/configuration.asciidoc">edit</a></h3>
<p>Cluster and node settings can be categorized based on how they are configured:</p>
<div class="variablelist">
<a id="dynamic-cluster-setting"></a>
<dl class="variablelist">
<dt>
<span class="term">
Dynamic
</span>
</dt>
<dd>
<p>You can configure and update dynamic settings on a running cluster using the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a>.
You can also configure dynamic settings locally on an unstarted or shut down
node using <code class="literal">elasticsearch.yml</code>.</p>
<p>Updates made using the cluster update settings API can be <em>persistent</em>, which
apply across cluster restarts, or <em>transient</em>, which reset after a cluster
restart. You can also reset transient or persistent settings by assigning them
a <code class="literal">null</code> value using the API.</p>
<p>If you configure the same setting using multiple methods, Elasticsearch applies the
settings in following order of precedence:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Transient setting
</li>
<li class="listitem">
Persistent setting
</li>
<li class="listitem">
<code class="literal">elasticsearch.yml</code> setting
</li>
<li class="listitem">
Default setting value
</li>
</ol>
</div>
<p>For example, you can apply a transient setting to override a persistent setting
or <code class="literal">elasticsearch.yml</code> setting. However, a change to an <code class="literal">elasticsearch.yml</code>
setting will not override a defined transient or persistent setting.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use Elasticsearch Service, use the <a href="https://www.elastic.co/guide/en/cloud/current/ec-add-user-settings.html" class="ulink" target="_top">user settings</a>
feature to configure all cluster settings. This method lets Elasticsearch Service automatically
reject unsafe settings that could break your cluster.</p>
<p>If you run Elasticsearch on your own hardware, use the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a>
to configure dynamic cluster settings. Only use <code class="literal">elasticsearch.yml</code> for static
cluster settings and node settings. The API doesn&#8217;t require a restart and
ensures a setting&#8217;s value is the same on all nodes.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>We no longer recommend using transient cluster settings. Use persistent cluster
settings instead. If a cluster becomes unstable, transient settings can clear
unexpectedly, resulting in a potentially undesired cluster configuration. See
the <a class="xref" href="migrating-8.0.html#transient-settings-migration-guide" title="Transient settings migration guide">Transient settings migration guide</a>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="static-cluster-setting"></a>
<dl class="variablelist">
<dt>
<span class="term">
Static
</span>
</dt>
<dd>
<p>
Static settings can only be configured on an unstarted or shut down node using
<code class="literal">elasticsearch.yml</code>.
</p>
<p>Static settings must be set on every relevant node in the cluster.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="important-settings"></a>Important Elasticsearch configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch requires very little configuration to get started, but there are a number
of items which <span class="strong strong"><strong>must</strong></span> be considered before using your cluster in production:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="settings.html#path-settings" title="Path settings">Path settings</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#cluster-name" title="Cluster name setting">Cluster name setting</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#node-name" title="Node name setting">Node name setting</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#network.host" title="Network host setting">Network host settings</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#discovery-settings" title="Discovery and cluster formation settings">Discovery settings</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#heap-size-settings" title="Heap size settings">Heap size settings</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#heap-dump-path" title="JVM heap dump path setting">JVM heap dump path setting</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#gc-logging" title="GC logging settings">GC logging settings</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#es-tmpdir" title="Temporary directory settings">Temporary directory settings</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#error-file-path" title="JVM fatal error log setting">JVM fatal error log setting</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#important-settings-backups" title="Cluster backups">Cluster backups</a>
</li>
</ul>
</div>
<p>Our <a href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elastic Cloud</a> service configures these items automatically, making
your cluster production-ready by default.</p>
<h4><a id="path-settings"></a>Path settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/path-settings.asciidoc">edit</a></h4>
<p>Elasticsearch writes the data you index to indices and data streams to a <code class="literal">data</code>
directory. Elasticsearch writes its own application logs, which contain information about
cluster health and operations, to a <code class="literal">logs</code> directory.</p>
<p>For <a class="xref" href="install-elasticsearch.html#targz" title="Install Elasticsearch from archive on Linux or MacOS">macOS <code class="literal">.tar.gz</code></a>, <a class="xref" href="install-elasticsearch.html#targz" title="Install Elasticsearch from archive on Linux or MacOS">Linux <code class="literal">.tar.gz</code></a>, and
<a class="xref" href="install-elasticsearch.html#zip-windows" title="Install Elasticsearch with .zip on Windows">Windows <code class="literal">.zip</code></a> installations, <code class="literal">data</code> and <code class="literal">logs</code> are
subdirectories of <code class="literal">$ES_HOME</code> by default. However, files in <code class="literal">$ES_HOME</code> risk
deletion during an upgrade.</p>
<p>In production, we strongly recommend you set the <code class="literal">path.data</code> and <code class="literal">path.logs</code> in
<code class="literal">elasticsearch.yml</code> to locations outside of <code class="literal">$ES_HOME</code>. <a class="xref" href="install-elasticsearch.html#docker" title="Install Elasticsearch with Docker">Docker</a>,
<a class="xref" href="install-elasticsearch.html#deb" title="Install Elasticsearch with Debian Package">Debian</a>, and <a class="xref" href="install-elasticsearch.html#rpm" title="Install Elasticsearch with RPM">RPM</a> installations write
data and log to locations outside of <code class="literal">$ES_HOME</code> by default.</p>
<p>Supported <code class="literal">path.data</code> and <code class="literal">path.logs</code> values vary by platform:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="data-log-path">
    <button role="tab"
            aria-selected="true"
            aria-controls="unix-tab-data-log-path"
            id="unix-data-log-path">
      Unix-like systems
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-data-log-path"
            id="win-data-log-path">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="unix-tab-data-log-path"
       aria-labelledby="unix-data-log-path">
<p>Linux and macOS installations support Unix-style paths:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path:
  data: /var/data/elasticsearch
  logs: /var/log/elasticsearch</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-data-log-path"
       aria-labelledby="win-data-log-path"
       hidden="">
<p>Windows installations support DOS paths with escaped backslashes:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path:
  data: "C:\\Elastic\\Elasticsearch\\data"
  logs: "C:\\Elastic\\Elasticsearch\\logs"</pre>
</div>
  </div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Don&#8217;t modify anything within the data directory or run processes that
might interfere with its contents. If something other than Elasticsearch modifies the
contents of the data directory, then Elasticsearch may fail, reporting corruption or
other data inconsistencies, or may appear to work correctly having silently
lost some of your data. Don&#8217;t attempt to take filesystem backups of the data
directory; there is no supported way to restore such a backup. Instead, use
<a class="xref" href="snapshot-restore.html" title="Snapshot and restore">Snapshot and restore</a> to take backups safely. Don&#8217;t run virus scanners on the
data directory. A virus scanner can prevent Elasticsearch from working correctly and may
modify the contents of the data directory. The data directory contains no
executables so a virus scan will only find false positives.</p>
</div>
</div>
<h4><a id="_multiple_data_paths"></a>Multiple data paths<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/path-settings.asciidoc">edit</a></h4>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Deprecated in 7.13.0.</p>
</div>
</div>
<p>If needed, you can specify multiple paths in <code class="literal">path.data</code>. Elasticsearch stores the node&#8217;s
data across all provided paths but keeps each shard&#8217;s data on the same path.</p>
<p>Elasticsearch does not balance shards across a node&#8217;s data paths. High disk
usage in a single path can trigger a <a class="xref" href="settings.html#disk-based-shard-allocation" title="Disk-based shard allocation settings">high disk
usage watermark</a> for the entire node. If triggered, Elasticsearch will not add shards to
the node, even if the node’s other paths have available disk space. If you need
additional disk space, we recommend you add a new node rather than additional
data paths.</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="multi-data-path">
    <button role="tab"
            aria-selected="true"
            aria-controls="unix-tab-multi-data-path"
            id="unix-multi-data-path">
      Unix-like systems
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-multi-data-path"
            id="win-multi-data-path">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="unix-tab-multi-data-path"
       aria-labelledby="unix-multi-data-path">
<p>Linux and macOS installations support multiple Unix-style paths in <code class="literal">path.data</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path:
  data:
    - /mnt/elasticsearch_1
    - /mnt/elasticsearch_2
    - /mnt/elasticsearch_3</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-multi-data-path"
       aria-labelledby="win-multi-data-path"
       hidden="">
<p>Windows installations support multiple DOS paths in <code class="literal">path.data</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path:
  data:
    - "C:\\Elastic\\Elasticsearch_1"
    - "E:\\Elastic\\Elasticsearch_1"
    - "F:\\Elastic\\Elasticsearch_3"</pre>
</div>
  </div>
</div>
<h4><a id="mdp-migrate"></a>Migrate from multiple data paths<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/path-settings.asciidoc">edit</a></h4>
<p>Support for multiple data paths was deprecated in 7.13 and will be removed
in a future release.</p>
<p>As an alternative to multiple data paths, you can create a filesystem which
spans multiple disks with a hardware virtualisation layer such as RAID, or a
software virtualisation layer such as Logical Volume Manager (LVM) on Linux or
Storage Spaces on Windows. If you wish to use multiple data paths on a single
machine then you must run one node for each data path.</p>
<p>If you currently use multiple data paths in a
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/high-availability-cluster-design.html" class="ulink" target="_top">highly available cluster</a> then you
can migrate to a setup that uses a single path for each node without downtime
using a process similar to a
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/restart-cluster.html#restart-cluster-rolling" class="ulink" target="_top">rolling restart</a>: shut each
node down in turn and replace it with one or more nodes each configured to use
a single data path. In more detail, for each node that currently has multiple
data paths you should follow the following process. In principle you can
perform this migration during a rolling upgrade to 8.0, but we recommend
migrating to a single-data-path setup before starting to upgrade.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Take a snapshot to protect your data in case of disaster.
</li>
<li class="listitem">
<p>Optionally, migrate the data away from the target node by using an
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/modules-cluster.html#cluster-shard-allocation-filtering" class="ulink" target="_top">allocation filter</a>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster.routing.allocation.exclude._name": "target-node-name"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/5.console"></div>
<p>You can use the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/cat-allocation.html" class="ulink" target="_top">cat allocation API</a> to track progress
of this data migration. If some shards do not migrate then the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/cluster-allocation-explain.html" class="ulink" target="_top">cluster allocation explain API</a> will help
you to determine why.</p>
</li>
<li class="listitem">
Follow the steps in the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/restart-cluster.html#restart-cluster-rolling" class="ulink" target="_top">rolling restart process</a>
up to and including shutting the target node down.
</li>
<li class="listitem">
Ensure your cluster health is <code class="literal">yellow</code> or <code class="literal">green</code>, so that there is a copy
of every shard assigned to at least one of the other nodes in your cluster.
</li>
<li class="listitem">
<p>If applicable, remove the allocation filter applied in the earlier step.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster.routing.allocation.exclude._name": null
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/6.console"></div>
</li>
<li class="listitem">
Discard the data held by the stopped node by deleting the contents of its
data paths.
</li>
<li class="listitem">
Reconfigure your storage. For instance, combine your disks into a single
filesystem using LVM or Storage Spaces. Ensure that your reconfigured storage
has sufficient space for the data that it will hold.
</li>
<li class="listitem">
Reconfigure your node by adjusting the <code class="literal">path.data</code> setting in its
<code class="literal">elasticsearch.yml</code> file. If needed, install more nodes each with their own
<code class="literal">path.data</code> setting pointing at a separate data path.
</li>
<li class="listitem">
Start the new nodes and follow the rest of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/restart-cluster.html#restart-cluster-rolling" class="ulink" target="_top">rolling restart process</a> for
them.
</li>
<li class="listitem">
Ensure your cluster health is <code class="literal">green</code>, so that every shard has been
assigned.
</li>
</ol>
</div>
<p>You can alternatively add some number of single-data-path nodes to your
cluster, migrate all your data over to these new nodes using
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/modules-cluster.html#cluster-shard-allocation-filtering" class="ulink" target="_top">allocation filters</a>,
and then remove the old nodes from the cluster. This approach will temporarily
double the size of your cluster so it will only work if you have the capacity to
expand your cluster like this.</p>
<p>If you currently use multiple data paths but your cluster is not highly
available then the you can migrate to a non-deprecated configuration by taking
a snapshot, creating a new cluster with the desired configuration and restoring
the snapshot into it.</p>
<h4><a id="cluster-name"></a>Cluster name setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/cluster-name.asciidoc">edit</a></h4>
<p>A node can only join a cluster when it shares its <code class="literal">cluster.name</code> with all the
other nodes in the cluster. The default name is <code class="literal">elasticsearch</code>, but you should
change it to an appropriate name that describes the purpose of the cluster.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cluster.name: logging-prod</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Do not reuse the same cluster names in different environments.
Otherwise, nodes might join the wrong cluster.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Changing the name of a cluster requires a <a class="xref" href="restart-cluster.html#restart-cluster-full" title="Full-cluster restart">full
cluster restart</a>.</p>
</div>
</div>
<h4><a id="node-name"></a>Node name setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/node-name.asciidoc">edit</a></h4>
<p>Elasticsearch uses <code class="literal">node.name</code> as a human-readable identifier for a
particular instance of Elasticsearch. This name is included in the response
of many APIs. The node name defaults to the hostname of the machine when
Elasticsearch starts, but can be configured explicitly in
<code class="literal">elasticsearch.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.name: prod-data-2</pre>
</div>
<h4><a id="network.host"></a>Network host setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/network-host.asciidoc">edit</a></h4>
<p>By default, Elasticsearch only binds to loopback addresses such as <code class="literal">127.0.0.1</code> and
<code class="literal">[::1]</code>. This is sufficient to run a cluster of one or more nodes on a single
server for development and testing, but a
<a class="xref" href="high-availability-cluster-design.html" title="Designing for resilience">resilient production cluster</a> must involve
nodes on other servers. There are many <a class="xref" href="settings.html#modules-network" title="Networking">network settings</a> but
usually all you need to configure is <code class="literal">network.host</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">network.host: 192.168.1.10</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>When you provide a value for <code class="literal">network.host</code>, Elasticsearch assumes that you
are moving from development mode to production mode, and upgrades a number of
system startup checks from warnings to exceptions. See the differences between
<a class="xref" href="system-config.html#dev-vs-prod" title="Development mode vs production mode">development and production modes</a>.</p>
</div>
</div>
<h4><a id="discovery-settings"></a>Discovery and cluster formation settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/discovery-settings.asciidoc">edit</a></h4>
<p>Configure two important discovery and cluster formation settings before going
to production so that nodes in the cluster can discover each other and elect a
master node.</p>
<h5><a id="unicast.hosts"></a><code class="literal">discovery.seed_hosts</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/discovery-settings.asciidoc">edit</a></h5>
<p>Out of the box, without any network configuration, Elasticsearch will bind to
the available loopback addresses and scan local ports <code class="literal">9300</code> to <code class="literal">9305</code> to
connect with other nodes running on the same server. This behavior provides an
auto-clustering experience without having to do any configuration.</p>
<p>When you want to form a cluster with nodes on other hosts, use the
<a class="xref" href="settings.html#static-cluster-setting">static</a> <code class="literal">discovery.seed_hosts</code> setting. This setting
provides a list of other nodes in the cluster
that are master-eligible and likely to be live and contactable to seed
the <a class="xref" href="modules-discovery.html#discovery-hosts-providers" title="Discovery">discovery process</a>. This setting
accepts a YAML sequence or array of the addresses of all the master-eligible
nodes in the cluster. Each address can be either an IP address or a hostname
that resolves to one or more IP addresses via DNS.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">discovery.seed_hosts:
   - 192.168.1.10:9300
   - 192.168.1.11 <a id="CO10-1"></a><i class="conum" data-value="1"></i>
   - seeds.mydomain.com <a id="CO10-2"></a><i class="conum" data-value="2"></i>
   - [0:0:0:0:0:ffff:c0a8:10c]:9301 <a id="CO10-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO10-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The port is optional and defaults to <code class="literal">9300</code>, but can
be <a class="xref" href="modules-discovery.html#built-in-hosts-providers" title="Seed hosts providers">overridden</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO10-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>If a hostname resolves to multiple IP addresses, the node will attempt to
discover other nodes at all resolved addresses.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO10-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>IPv6 addresses must be enclosed in square brackets.</p>
</td>
</tr>
</table>
</div>
<p>If your master-eligible nodes do not have fixed names or addresses, use an
<a class="xref" href="modules-discovery.html#built-in-hosts-providers" title="Seed hosts providers">alternative hosts provider</a> to find their addresses
dynamically.</p>
<h5><a id="initial_master_nodes"></a><code class="literal">cluster.initial_master_nodes</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/discovery-settings.asciidoc">edit</a></h5>
<p>When you start an Elasticsearch cluster for the first time, a
<a class="xref" href="modules-discovery.html#modules-discovery-bootstrap-cluster" title="Bootstrapping a cluster">cluster bootstrapping</a> step
determines the set of master-eligible nodes whose votes are counted in the
first election. In <a class="xref" href="bootstrap-checks.html#dev-vs-prod-mode" title="Development vs. production mode">development mode</a>, with no discovery
settings configured, this step is performed automatically by the nodes
themselves.</p>
<p>Because auto-bootstrapping is <a class="xref" href="modules-discovery.html#modules-discovery-quorums" title="Quorum-based decision making">inherently
unsafe</a>, when starting a new cluster in production
mode, you must explicitly list the master-eligible nodes whose votes should be
counted in the very first election. You set this list using the
<code class="literal">cluster.initial_master_nodes</code> setting.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>After the cluster forms successfully for the first time, remove the
<code class="literal">cluster.initial_master_nodes</code> setting from each node&#8217;s configuration. Do not
use this setting when restarting a cluster or adding a new node to an existing
cluster.</p>
</div>
</div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">discovery.seed_hosts:
   - 192.168.1.10:9300
   - 192.168.1.11
   - seeds.mydomain.com
   - [0:0:0:0:0:ffff:c0a8:10c]:9301
cluster.initial_master_nodes: <a id="CO11-1"></a><i class="conum" data-value="1"></i>
   - master-node-a
   - master-node-b
   - master-node-c</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO11-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Identify the initial master nodes by their <a class="xref" href="settings.html#node-name" title="Node name setting"><code class="literal">node.name</code></a>, which
defaults to their hostname. Ensure that the value in
<code class="literal">cluster.initial_master_nodes</code> matches the <code class="literal">node.name</code> exactly. If you use a
fully-qualified domain name (FQDN) such as <code class="literal">master-node-a.example.com</code> for your
node names, then you must use the FQDN in this list. Conversely, if <code class="literal">node.name</code>
is a bare hostname without any trailing qualifiers, you must also omit the
trailing qualifiers in <code class="literal">cluster.initial_master_nodes</code>.</p>
</td>
</tr>
</table>
</div>
<p>See <a class="xref" href="modules-discovery.html#modules-discovery-bootstrap-cluster" title="Bootstrapping a cluster">bootstrapping a cluster</a> and
<a class="xref" href="settings.html#modules-discovery-settings" title="Discovery and cluster formation settings">discovery and cluster formation settings</a>.</p>
<h4><a id="heap-size-settings"></a>Heap size settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/heap-size.asciidoc">edit</a></h4>
<p>By default, Elasticsearch automatically sets the JVM heap size based on a node&#8217;s
<a class="xref" href="settings.html#node-roles" title="Node roles">roles</a> and total memory.
We recommend the default sizing for most production environments.</p>
<p>If needed, you can override the default sizing by manually
<a class="xref" href="settings.html#set-jvm-heap-size" title="Set the JVM heap size">setting the JVM heap size</a>.</p>
<h4><a id="heap-dump-path"></a>JVM heap dump path setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/heap-dump-path.asciidoc">edit</a></h4>
<p>By default, Elasticsearch configures the JVM to dump the heap on out of
memory exceptions to the default data directory. On <a class="xref" href="install-elasticsearch.html#rpm" title="Install Elasticsearch with RPM">RPM</a> and
<a class="xref" href="install-elasticsearch.html#deb" title="Install Elasticsearch with Debian Package">Debian</a> packages, the data directory is <code class="literal">/var/lib/elasticsearch</code>. On
<a class="xref" href="install-elasticsearch.html#targz" title="Install Elasticsearch from archive on Linux or MacOS">Linux and MacOS</a> and <a class="xref" href="install-elasticsearch.html#zip-windows" title="Install Elasticsearch with .zip on Windows">Windows</a> distributions,
the <code class="literal">data</code> directory is located under the root of the Elasticsearch installation.</p>
<p>If this path is not suitable for receiving heap dumps, modify the
<code class="literal">-XX:HeapDumpPath=...</code> entry in <a class="xref" href="settings.html#set-jvm-options" title="Set JVM options"><code class="literal">jvm.options</code></a>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you specify a directory, the JVM will generate a filename for the heap
dump based on the PID of the running instance.
</li>
<li class="listitem">
If you specify a fixed filename instead of a directory, the file must
not exist when the JVM needs to perform a heap dump on an out of memory
exception. Otherwise, the heap dump will fail.
</li>
</ul>
</div>
<h4><a id="gc-logging"></a>GC logging settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/gc-logging.asciidoc">edit</a></h4>
<p>By default, Elasticsearch enables garbage collection (GC) logs. These are configured in
<a class="xref" href="settings.html#set-jvm-options" title="Set JVM options"><code class="literal">jvm.options</code></a> and output to the same default location as
the Elasticsearch logs. The default configuration rotates the logs every 64 MB and
can consume up to 2 GB of disk space.</p>
<p>You can reconfigure JVM logging using the command line options described in
<a href="https://openjdk.java.net/jeps/158" class="ulink" target="_top">JEP 158: Unified JVM Logging</a>. Unless you
change the default <code class="literal">jvm.options</code> file directly, the Elasticsearch default
configuration is applied in addition to your own settings. To disable the
default configuration, first disable logging by supplying the
<code class="literal">-Xlog:disable</code> option, then supply your own command line options. This
disables <em>all</em> JVM logging, so be sure to review the available options
and enable everything that you require.</p>
<p>To see further options not contained in the original JEP, see
<a href="https://docs.oracle.com/en/java/javase/13/docs/specs/man/java.html#enable-logging-with-the-jvm-unified-logging-framework" class="ulink" target="_top">Enable
Logging with the JVM Unified Logging Framework</a>.</p>
<h4><a id="gc-logging-examples"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/gc-logging.asciidoc">edit</a></h4>
<p>Change the default GC log output location to <code class="literal">/opt/my-app/gc.log</code> by
  creating <code class="literal">$ES_HOME/config/jvm.options.d/gc.options</code> with some sample
  options:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell"># Turn off all previous logging configuratons
-Xlog:disable

# Default settings from JEP 158, but with `utctime` instead of `uptime` to match the next line
-Xlog:all=warning:stderr:utctime,level,tags

# Enable GC logging to a custom location with a variety of options
-Xlog:gc*,gc+age=trace,safepoint:file=/opt/my-app/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m</pre>
</div>
<p>Configure an Elasticsearch <a class="xref" href="install-elasticsearch.html#docker" title="Install Elasticsearch with Docker">Docker container</a> to send GC debug logs to
  standard error (<code class="literal">stderr</code>). This lets the container orchestrator
  handle the output. If using the <code class="literal">ES_JAVA_OPTS</code> environment variable,
  specify:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">MY_OPTS="-Xlog:disable -Xlog:all=warning:stderr:utctime,level,tags -Xlog:gc=debug:stderr:utctime"
docker run -e ES_JAVA_OPTS="$MY_OPTS" # etc</pre>
</div>
<h4><a id="es-tmpdir"></a>Temporary directory settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/es-tmpdir.asciidoc">edit</a></h4>
<p>By default, Elasticsearch uses a private temporary directory that the startup
script creates immediately below the system temporary directory.</p>
<p>On some Linux distributions, a system utility will clean files and directories
from <code class="literal">/tmp</code> if they have not been recently accessed. This behavior can lead to
the private temporary directory being removed while Elasticsearch is running if
features that require the temporary directory are not used for a long time.
Removing the private temporary directory causes problems if a feature that
requires this directory is subsequently used.</p>
<p>If you install Elasticsearch using the <code class="literal">.deb</code> or <code class="literal">.rpm</code> packages and run it
under <code class="literal">systemd</code>, the private temporary directory that Elasticsearch uses
is excluded from periodic cleanup.</p>
<p>If you intend to run the <code class="literal">.tar.gz</code> distribution on Linux or MacOS for
an extended period, consider creating a dedicated temporary
directory for Elasticsearch that is not under a path that will have old files
and directories cleaned from it. This directory should have permissions set
so that only the user that Elasticsearch runs as can access it. Then, set the
<code class="literal">$ES_TMPDIR</code> environment variable to point to this directory before starting
Elasticsearch.</p>
<h4><a id="error-file-path"></a>JVM fatal error log setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/error-file.asciidoc">edit</a></h4>
<p>By default, Elasticsearch configures the JVM to write fatal error logs
to the default logging directory. On <a class="xref" href="install-elasticsearch.html#rpm" title="Install Elasticsearch with RPM">RPM</a> and <a class="xref" href="install-elasticsearch.html#deb" title="Install Elasticsearch with Debian Package">Debian</a> packages,
this directory is <code class="literal">/var/log/elasticsearch</code>. On <a class="xref" href="install-elasticsearch.html#targz" title="Install Elasticsearch from archive on Linux or MacOS">Linux and MacOS</a> and <a class="xref" href="install-elasticsearch.html#zip-windows" title="Install Elasticsearch with .zip on Windows">Windows</a> distributions, the <code class="literal">logs</code>
directory is located under the root of the Elasticsearch installation.</p>
<p>These are logs produced by the JVM when it encounters a fatal error, such as a
segmentation fault. If this path is not suitable for receiving logs,
modify the <code class="literal">-XX:ErrorFile=...</code> entry in <a class="xref" href="settings.html#set-jvm-options" title="Set JVM options"><code class="literal">jvm.options</code></a>.</p>
<h4><a id="important-settings-backups"></a>Cluster backups<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/important-settings/snapshot.asciidoc">edit</a></h4>
<p>In a disaster, <a class="xref" href="snapshot-restore.html" title="Snapshot and restore">snapshots</a> can prevent permanent data loss.
<a class="xref" href="snapshots-take-snapshot.html#automate-snapshots-slm" title="Automate snapshots with SLM">Snapshot lifecycle management</a> is the easiest way to take regular
backups of your cluster. For more information, see <a class="xref" href="snapshots-take-snapshot.html" title="Create a snapshot"><em>Create a snapshot</em></a>.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p><span class="strong strong"><strong>Taking a snapshot is the only reliable and supported way to back up a
cluster.</strong></span> You cannot back up an Elasticsearch cluster by making copies of the data
directories of its nodes. There are no supported methods to restore any data
from a filesystem-level backup. If you try to restore a cluster from such a
backup, it may fail with reports of corruption or missing files or other data
inconsistencies, or it may appear to have succeeded having silently lost some of
your data.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="secure-settings"></a>Secure settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/secure-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>Some settings are sensitive, and relying on filesystem permissions to protect
their values is not sufficient. For this use case, Elasticsearch provides a
keystore and the <a class="xref" href="elasticsearch-keystore.html" title="elasticsearch-keystore"><code class="literal">elasticsearch-keystore</code> tool</a> to
manage the settings in the keystore.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Only some settings are designed to be read from the keystore. However,
the keystore has no validation to block unsupported settings. Adding unsupported
settings to the keystore causes Elasticsearch to fail to start. To see whether a setting
is supported in the keystore, look for a "Secure" qualifier in the setting
reference.</p>
</div>
</div>
<p>All the modifications to the keystore take effect only after restarting Elasticsearch.</p>
<p>These settings, just like the regular ones in the <code class="literal">elasticsearch.yml</code> config file,
need to be specified on each node in the cluster. Currently, all secure settings
are node-specific settings that must have the same value on every node.</p>
<h3><a id="reloadable-secure-settings"></a>Reloadable secure settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/secure-settings.asciidoc">edit</a></h3>
<p>Just like the settings values in <code class="literal">elasticsearch.yml</code>, changes to the keystore
contents are not automatically applied to the running Elasticsearch node. Re-reading
settings requires a node restart. However, certain secure settings are marked as
<span class="strong strong"><strong>reloadable</strong></span>. Such settings can be <a class="xref" href="cluster.html#cluster-nodes-reload-secure-settings" title="Nodes reload secure settings API">re-read and applied on a running node</a>.</p>
<p>The values of all secure settings, <span class="strong strong"><strong>reloadable</strong></span> or not, must be identical
across all cluster nodes. After making the desired secure settings changes,
using the <code class="literal">bin/elasticsearch-keystore add</code> command, call:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST _nodes/reload_secure_settings
{
  "secure_settings_password": "keystore-password" <a id="CO12-1"></a><i class="conum" data-value="1"></i>
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/7.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO12-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The password that the Elasticsearch keystore is encrypted with.</p>
</td>
</tr>
</table>
</div>
<p>This API decrypts and re-reads the entire keystore, on every cluster node,
but only the <span class="strong strong"><strong>reloadable</strong></span> secure settings are applied. Changes to other
settings do not go into effect until the next restart. Once the call returns,
the reload has been completed, meaning that all internal data structures
dependent on these settings have been changed. Everything should look as if the
settings had the new value from the start.</p>
<p>When changing multiple <span class="strong strong"><strong>reloadable</strong></span> secure settings, modify all of them on each
cluster node, then issue a <a class="xref" href="cluster.html#cluster-nodes-reload-secure-settings" title="Nodes reload secure settings API"><code class="literal">reload_secure_settings</code></a>
call instead of reloading after each modification.</p>
<p>There are reloadable secure settings for:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="snapshots-register-repository.html#repository-azure" title="Azure repository">The Azure repository plugin</a>
</li>
<li class="listitem">
<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/8.9/discovery-ec2-usage.html#_configuring_ec2_discovery" class="ulink" target="_top">The EC2 discovery plugin</a>
</li>
<li class="listitem">
<a class="xref" href="snapshots-register-repository.html#repository-gcs" title="Google Cloud Storage repository">The GCS repository plugin</a>
</li>
<li class="listitem">
<a class="xref" href="snapshots-register-repository.html#repository-s3" title="S3 repository">The S3 repository plugin</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#monitoring-settings" title="Monitoring settings in Elasticsearch">Monitoring settings</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#notification-settings" title="Watcher settings in Elasticsearch">Watcher settings</a>
</li>
</ul>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="auditing-settings"></a>Auditing security settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/audit-settings.asciidoc">edit</a></h2>
</div></div></div>

<p><a id="auditing-settings-description"></a>You can use <a class="xref" href="enable-audit-logging.html" title="Enable audit logging">audit logging</a> to record security-related
events, such as authentication failures, refused connections, and data-access
events. In addition, changes via the APIs to the security configuration, such
as creating, updating and removing <a class="xref" href="setting-up-authentication.html#native-realm" title="Native user authentication">native</a> and
<a class="xref" href="setting-up-authentication.html#built-in-users" title="Built-in users">built-in</a> users, <a class="xref" href="security-api.html#security-api-put-role" title="Create or update roles API">roles</a>,
<a class="xref" href="security-api.html#security-api-put-role-mapping" title="Create or update role mappings API">role mappings</a> and
<a class="xref" href="security-api.html#security-api-create-api-key" title="Create API key API">API keys</a> are also recorded.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Audit logs are only available on certain subscription levels.
For more information, see <a href="https://www.elastic.co/subscriptions" class="ulink" target="_top">https://www.elastic.co/subscriptions</a>.</p>
</div>
</div>
<p>If configured, auditing settings must be set on every node in the cluster.
Static settings, such as <code class="literal">xpack.security.audit.enabled</code>, must be configured in
<code class="literal">elasticsearch.yml</code> on each node. For dynamic auditing settings, use the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a> to ensure the setting is
the same on all nodes.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="general-audit-settings"></a>General Auditing Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/audit-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<a id="xpack-security-audit-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">true</code> to enable auditing on the node. The default value is <code class="literal">false</code>. This
puts the auditing events in a dedicated file named <code class="literal">&lt;clustername&gt;_audit.json</code> on
each node.
</p>
<p>If enabled, this setting must be configured in <code class="literal">elasticsearch.yml</code> on all nodes
in the cluster.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="event-audit-settings"></a>Audited Event Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/audit-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>The events and some other information about what gets logged can be controlled
by using the following settings:</p>
<div class="variablelist">
<a id="xpack-sa-lf-events-include"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.include</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies the <a class="xref" href="enable-audit-logging.html#audit-event-types" title="Audit events">kind of events</a> to print in the auditing output.
In addition, <code class="literal">_all</code> can be used to exhaustively audit all the events, but this is usually
discouraged since it will get very verbose.
The default list value contains:
<code class="literal">access_denied, access_granted, anonymous_access_denied, authentication_failed,
connection_denied, tampered_request, run_as_denied, run_as_granted,
security_config_change</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-exclude"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.exclude</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Excludes the specified <a class="xref" href="enable-audit-logging.html#audit-event-types" title="Audit events">kind of events</a> from the include list.
This is useful in the case where the <code class="literal">events.include</code> setting contains the special value <code class="literal">_all</code>.
The default is the empty list.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-emit-request"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.emit_request_body</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies whether to include the full request body from REST requests as an
attribute of certain kinds of audit events. This setting can be used to
<a class="xref" href="enable-audit-logging.html#auditing-search-queries" title="Auditing search queries">audit search queries</a>.
</p>
<p>The default value is <code class="literal">false</code>, so request bodies are not printed.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Be advised that sensitive data may be audited in plain text when including
the request body in audit events, even though all the security APIs, such as those that
change the user&#8217;s password, have the credentials filtered out when audited.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="node-audit-settings"></a>Local Node Info Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/audit-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<a id="xpack-sa-lf-emit-node-name"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.emit_node_name</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies whether to include the <a class="xref" href="settings.html#node-name" title="Node name setting">node name</a> as a field in
each audit event. The default value is <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-emit-node-host-address"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.emit_node_host_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies whether to include the node&#8217;s IP address as a field in each audit event.
The default value is <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-emit-node-host-name"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.emit_node_host_name</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies whether to include the node&#8217;s host name as a field in each audit event.
The default value is <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-emit-node-id"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.emit_node_id</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies whether to include the node id as a field in each audit event.
Unlike <a class="xref" href="settings.html#node-name" title="Node name setting">node name</a>, whose value might change if the administrator
changes the setting in the config file, the node id will persist across cluster
restarts and the administrator cannot change it.
The default value is <code class="literal">true</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="audit-event-ignore-policies"></a>Audit Logfile Event Ignore Policies<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/audit-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>The following settings affect the <a class="xref" href="enable-audit-logging.html#audit-log-ignore-policy" title="Logfile audit events ignore policies">ignore policies</a>
that enable fine-grained control over which audit events are printed to the log file.
All of the settings with the same policy name combine to form a single policy.
If an event matches all the conditions of any policy, it is ignored and not printed.
Most audit events are subject to the ignore policies. The sole exception are
events of the <code class="literal">security_config_change</code> type, which cannot be filtered out, unless
<a class="xref" href="settings.html#xpack-sa-lf-events-exclude">excluded</a> altogether.</p>
<div class="variablelist">
<a id="xpack-sa-lf-events-ignore-users"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.ignore_filters.&lt;policy_name&gt;.users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of user names or wildcards. The specified policy will
not print audit events for users matching these values.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-ignore-realms"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.ignore_filters.&lt;policy_name&gt;.realms</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of authentication realm names or wildcards. The specified policy will
not print audit events for users in these realms.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-ignore-actions"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.ignore_filters.&lt;policy_name&gt;.actions</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of action names or wildcards. Action name can be found in the <code class="literal">action</code>
field of the audit event. The specified policy will not print audit events
for actions matching these values.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-ignore-roles"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.ignore_filters.&lt;policy_name&gt;.roles</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of role names or wildcards. The specified policy will
not print audit events for users that have these roles. If the user has several
roles, some of which are <span class="strong strong"><strong>not</strong></span> covered by the policy, the policy will
<span class="strong strong"><strong>not</strong></span> cover this event.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-ignore-indices"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.ignore_filters.&lt;policy_name&gt;.indices</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of index names or wildcards. The specified policy will
not print audit events when all the indices in the event match
these values. If the event concerns several indices, some of which are
<span class="strong strong"><strong>not</strong></span> covered by the policy, the policy will <span class="strong strong"><strong>not</strong></span> cover this event.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="circuit-breaker"></a>Circuit breaker settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h2>
</div></div></div>
<p><a id="circuit-breaker-description"></a>Elasticsearch contains multiple circuit breakers used to prevent operations from causing an OutOfMemoryError. Each breaker specifies a limit for how much memory it can use. Additionally, there is a parent-level breaker that specifies the total amount of memory that can be used across all breakers.</p>
<p>Except where noted otherwise, these settings can be dynamically updated on a
live cluster with the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster-update-settings</a> API.</p>
<p>For information about circuit breaker errors, see <a class="xref" href="fix-common-cluster-issues.html#circuit-breaker-errors" title="Circuit breaker errors">Circuit breaker errors</a>.</p>
<h4><a id="parent-circuit-breaker"></a>Parent circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>The parent-level breaker can be configured with the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.total.use_real_memory</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Determines whether the parent breaker should take real
memory usage into account (<code class="literal">true</code>) or only consider the amount that is
reserved by child circuit breakers (<code class="literal">false</code>). Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="indices-breaker-total-limit"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.total.limit</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Starting limit for overall parent breaker. Defaults to 70% of JVM heap if
<code class="literal">indices.breaker.total.use_real_memory</code> is <code class="literal">false</code>. If <code class="literal">indices.breaker.total.use_real_memory</code>
is <code class="literal">true</code>, defaults to 95% of the JVM heap.
</dd>
</dl>
</div>
<h4><a id="fielddata-circuit-breaker"></a>Field data circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>The field data circuit breaker estimates the heap memory required to load a
field into the <a class="xref" href="settings.html#modules-fielddata" title="Field data cache settings">field data cache</a>. If loading the field would
cause the cache to exceed a predefined memory limit, the circuit breaker stops the
operation and returns an error.</p>
<div class="variablelist">
<a id="fielddata-circuit-breaker-limit"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.fielddata.limit</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limit for fielddata breaker. Defaults to 40% of JVM heap.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="fielddata-circuit-breaker-overhead"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.fielddata.overhead</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A constant that all field data estimations are multiplied with to determine a
final estimation. Defaults to <code class="literal">1.03</code>.
</dd>
</dl>
</div>
<h4><a id="request-circuit-breaker"></a>Request circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>The request circuit breaker allows Elasticsearch to prevent per-request data
structures (for example, memory used for calculating aggregations during a
request) from exceeding a certain amount of memory.</p>
<div class="variablelist">
<a id="request-breaker-limit"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.request.limit</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limit for request breaker, defaults to 60% of JVM heap.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="request-breaker-overhead"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.request.overhead</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A constant that all request estimations are multiplied with to determine a
final estimation. Defaults to <code class="literal">1</code>.
</dd>
</dl>
</div>
<h4><a id="in-flight-circuit-breaker"></a>In flight requests circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>The in flight requests circuit breaker allows Elasticsearch to limit the memory usage of all
currently active incoming requests on transport or HTTP level from exceeding a certain amount of
memory on a node. The memory usage is based on the content length of the request itself. This
circuit breaker also considers that memory is not only needed for representing the raw request but
also as a structured object which is reflected by default overhead.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">network.breaker.inflight_requests.limit</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limit for in flight requests breaker, defaults to 100% of JVM heap. This means that it is bound
by the limit configured for the parent circuit breaker.
</dd>
<dt>
<span class="term">
<code class="literal">network.breaker.inflight_requests.overhead</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A constant that all in flight requests estimations are multiplied with to determine a
final estimation. Defaults to 2.
</dd>
</dl>
</div>
<h4><a id="accounting-circuit-breaker"></a>Accounting requests circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>The accounting circuit breaker allows Elasticsearch to limit the memory
usage of things held in memory that are not released when a request is
completed. This includes things like the Lucene segment memory.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.accounting.limit</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limit for accounting breaker, defaults to 100% of JVM heap. This means that it is bound
by the limit configured for the parent circuit breaker.
</dd>
<dt>
<span class="term">
<code class="literal">indices.breaker.accounting.overhead</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A constant that all accounting estimations are multiplied with to determine a
final estimation. Defaults to 1
</dd>
</dl>
</div>
<h4><a id="script-compilation-circuit-breaker"></a>Script compilation circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>Slightly different than the previous memory-based circuit breaker, the script
compilation circuit breaker limits the number of inline script compilations
within a period of time.</p>
<p>See the "prefer-parameters" section of the <a class="xref" href="modules-scripting-using.html" title="How to write scripts">scripting</a>
documentation for more information.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">script.max_compilations_rate</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limit for the number of unique dynamic scripts within a certain interval
that are allowed to be compiled. Defaults to <code class="literal">150/5m</code>,
meaning 150 every 5 minutes.
</dd>
</dl>
</div>
<p>If the cluster regularly hits the given <code class="literal">max_compilation_rate</code>, it&#8217;s possible the
script cache is undersized, use <a class="xref" href="cluster.html#cluster-nodes-stats" title="Nodes stats API">Nodes Stats</a> to inspect
the number of recent cache evictions, <code class="literal">script.cache_evictions_history</code> and
compilations <code class="literal">script.compilations_history</code>.  If there are a large
number of recent cache evictions or compilations, the script cache may be
undersized, consider doubling the size of the script cache via the setting
<code class="literal">script.cache.max_size</code>.</p>
<h4><a id="regex-circuit-breaker"></a>Regex circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>Poorly written regular expressions can degrade cluster stability and
performance. The regex circuit breaker limits the use and complexity of
<a href="https://www.elastic.co/guide/en/elasticsearch/painless/8.9/painless-regexes.html" class="ulink" target="_top">regex in Painless scripts</a>.</p>
<div class="variablelist">
<a id="script-painless-regex-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">script.painless.regex.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Enables regex in Painless scripts. Accepts:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">limited</code> (Default)
</span>
</dt>
<dd>
Enables regex but limits complexity using the
<a class="xref" href="settings.html#script-painless-regex-limit-factor"><code class="literal">script.painless.regex.limit-factor</code></a>
cluster setting.
</dd>
<dt>
<span class="term">
<code class="literal">true</code>
</span>
</dt>
<dd>
Enables regex with no complexity limits. Disables the regex circuit breaker.
</dd>
<dt>
<span class="term">
<code class="literal">false</code>
</span>
</dt>
<dd>
Disables regex. Any Painless script containing a regular expression returns an
error.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="script-painless-regex-limit-factor"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">script.painless.regex.limit-factor</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Limits the number of characters a regular
expression in a Painless script can consider. Elasticsearch calculates this limit by
multiplying the setting value by the script input&#8217;s character length.
</p>
<p>For example, the input <code class="literal">foobarbaz</code> has a character length of <code class="literal">9</code>. If
<code class="literal">script.painless.regex.limit-factor</code> is <code class="literal">6</code>, a regular expression on <code class="literal">foobarbaz</code>
can consider up to 54 (9 * 6) characters. If the expression exceeds this limit,
it triggers the regex circuit breaker and returns an error.</p>
<p>Elasticsearch only applies this limit if
<a class="xref" href="settings.html#script-painless-regex-enabled"><code class="literal">script.painless.regex.enabled</code></a> is <code class="literal">limited</code>.</p>
</dd>
</dl>
</div>
<h3><a id="circuit-breakers-page-eql"></a>EQL circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h3>
<p>When a <a class="xref" href="eql-syntax.html#eql-sequences" title="Sequences">sequence</a> query is executed, the node handling the query
needs to keep some structures in memory, which are needed by the algorithm
implementing the sequence matching. When large amounts of data need to be processed,
and/or a large amount of matched sequences is requested by the user (by setting the
<a class="xref" href="eql-apis.html#eql-search-api-params-size">size</a> query param), the memory occupied by those
structures could potentially exceed the available memory of the JVM. This would cause
an <code class="literal">OutOfMemory</code> exception which would bring down the node.</p>
<p>To prevent this from happening, a special <a class="xref" href="settings.html#circuit-breaker" title="Circuit breaker settings">circuit breaker</a> is used,
which limits the memory allocation during the execution of a <a class="xref" href="eql-syntax.html#eql-sequences" title="Sequences">sequence</a>
query. When the breaker is triggered, an <code class="literal">org.elasticsearch.common.breaker.CircuitBreakingException</code>
is thrown and a descriptive error message is returned to the user.</p>
<p>This <a class="xref" href="settings.html#circuit-breaker" title="Circuit breaker settings">circuit breaker</a> can be configured using the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">breaker.eql_sequence.limit</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The limit for circuit breaker used to restrict
the memory utilisation during the execution of an EQL sequence query. This value is
defined as a percentage of the JVM heap. Defaults to <code class="literal">50%</code>. If the
<a class="xref" href="settings.html#parent-circuit-breaker" title="Parent circuit breaker">parent circuit breaker</a> is set to a value less than <code class="literal">50%</code>,
this setting uses that value as its default instead.
</dd>
<dt>
<span class="term">
<code class="literal">breaker.eql_sequence.overhead</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) A constant that sequence query memory
estimates are multiplied by to determine a final estimate. Defaults to <code class="literal">1</code>.
</dd>
<dt>
<span class="term">
<code class="literal">breaker.eql_sequence.type</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Circuit breaker type. Valid values are:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">memory</code> (Default)
</span>
</dt>
<dd>
The breaker limits memory usage for EQL sequence queries.
</dd>
<dt>
<span class="term">
<code class="literal">noop</code>
</span>
</dt>
<dd>
Disables the breaker.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<h4><a id="circuit-breakers-page-model-inference"></a>Machine learning circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">breaker.model_inference.limit</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The limit for the trained model circuit
breaker. This value is defined as a percentage of the JVM heap. Defaults to
<code class="literal">50%</code>. If the <a class="xref" href="settings.html#parent-circuit-breaker" title="Parent circuit breaker">parent circuit breaker</a> is set to a
value less than <code class="literal">50%</code>, this setting uses that value as its default instead.
</dd>
<dt>
<span class="term">
<code class="literal">breaker.model_inference.overhead</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) A constant that all trained model
estimations are multiplied by to determine a final estimation. See
<a class="xref" href="settings.html#circuit-breaker" title="Circuit breaker settings">Circuit breaker settings</a>. Defaults to <code class="literal">1</code>.
</dd>
<dt>
<span class="term">
<code class="literal">breaker.model_inference.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The underlying type of the circuit breaker.
There are two valid options: <code class="literal">noop</code> and <code class="literal">memory</code>. <code class="literal">noop</code> means the circuit
breaker does nothing to prevent too much memory usage. <code class="literal">memory</code> means the
circuit breaker tracks the memory used by trained models and can potentially
break and prevent <code class="literal">OutOfMemory</code> errors. The default value is <code class="literal">memory</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-cluster"></a>Cluster-level shard allocation and routing settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster.asciidoc">edit</a></h2>
</div></div></div>
<p><em>Shard allocation</em> is the process of allocating shards to nodes. This can
happen during initial recovery, replica allocation, rebalancing, or
when nodes are added or removed.</p>
<p>One of the main roles of the master is to decide which shards to allocate to
which nodes, and when to move shards between nodes in order to rebalance the
cluster.</p>
<p>There are a number of settings available to control the shard allocation process:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="settings.html#cluster-shard-allocation-settings" title="Cluster-level shard allocation settings">Cluster-level shard allocation settings</a> control allocation and
rebalancing operations.
</li>
<li class="listitem">
<a class="xref" href="settings.html#disk-based-shard-allocation" title="Disk-based shard allocation settings">Disk-based shard allocation settings</a> explains how Elasticsearch takes available
disk space into account, and the related settings.
</li>
<li class="listitem">
<a class="xref" href="settings.html#shard-allocation-awareness" title="Shard allocation awareness">Shard allocation awareness</a> and <a class="xref" href="settings.html#forced-awareness" title="Forced awareness">Forced awareness</a> control how shards
can be distributed across different racks or availability zones.
</li>
<li class="listitem">
<a class="xref" href="settings.html#cluster-shard-allocation-filtering" title="Cluster-level shard allocation filtering">Cluster-level shard allocation filtering</a> allows certain nodes or groups of
nodes excluded from allocation so that they can be decommissioned.
</li>
</ul>
</div>
<p>Besides these, there are a few other <a class="xref" href="settings.html#misc-cluster-settings" title="Miscellaneous cluster settings">miscellaneous cluster-level settings</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="cluster-shard-allocation-settings"></a>Cluster-level shard allocation settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/shards_allocation.asciidoc">edit</a></h3>
</div></div></div>
<p>You can use the following settings to control shard allocation and recovery:</p>
<div class="variablelist">
<a id="cluster-routing-allocation-enable"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.enable</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Enable or disable allocation for specific kinds of shards:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">all</code> -             (default) Allows shard allocation for all kinds of shards.
</li>
<li class="listitem">
<code class="literal">primaries</code> -       Allows shard allocation only for primary shards.
</li>
<li class="listitem">
<code class="literal">new_primaries</code> -   Allows shard allocation only for primary shards for new indices.
</li>
<li class="listitem">
<code class="literal">none</code> -            No shard allocations of any kind are allowed for any indices.
</li>
</ul>
</div>
<p>This setting does not affect the recovery of local primary shards when
restarting a node. A restarted node that has a copy of an unassigned primary
shard will recover that primary immediately, assuming that its allocation id matches
one of the active allocation ids in the cluster state.</p>
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.node_concurrent_incoming_recoveries</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
How many concurrent incoming shard recoveries are allowed to happen on a node. Incoming recoveries are the recoveries
where the target shard (most likely the replica unless a shard is relocating) is allocated on the node. Defaults to <code class="literal">2</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.node_concurrent_outgoing_recoveries</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
How many concurrent outgoing shard recoveries are allowed to happen on a node. Outgoing recoveries are the recoveries
where the source shard (most likely the primary unless a shard is relocating) is allocated on the node. Defaults to <code class="literal">2</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.node_concurrent_recoveries</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A shortcut to set both <code class="literal">cluster.routing.allocation.node_concurrent_incoming_recoveries</code> and
<code class="literal">cluster.routing.allocation.node_concurrent_outgoing_recoveries</code>. Defaults to 2.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.node_initial_primaries_recoveries</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
While the recovery of replicas happens over the network, the recovery of
an unassigned primary after node restart uses data from the local disk.
These should be fast so more initial primary recoveries can happen in
parallel on the same node. Defaults to <code class="literal">4</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-routing-allocation-same-shard-host"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.same_shard.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If <code class="literal">true</code>, forbids multiple copies of a shard from being allocated to
distinct nodes on the same host, i.e. which have the same network
address. Defaults to <code class="literal">false</code>, meaning that copies of a shard may
sometimes be allocated to nodes on the same host. This setting is only
relevant if you run multiple nodes on each host.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shards-rebalancing-settings"></a>Shard rebalancing settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/shards_allocation.asciidoc">edit</a></h3>
</div></div></div>
<p>A cluster is <em>balanced</em> when it has an equal number of shards on each node, with
all nodes needing equal resources, without having a concentration of shards from
any index on any node. Elasticsearch runs an automatic process called <em>rebalancing</em> which
moves shards between the nodes in your cluster to improve its balance.
Rebalancing obeys all other shard allocation rules such as
<a class="xref" href="settings.html#cluster-shard-allocation-filtering" title="Cluster-level shard allocation filtering">allocation filtering</a> and
<a class="xref" href="settings.html#forced-awareness" title="Forced awareness">forced awareness</a> which may prevent it from completely
balancing the cluster. In that case, rebalancing strives to achieve the most
balanced cluster possible within the rules you have configured. If you are using
<a class="xref" href="data-tiers.html" title="Data tiers">data tiers</a> then Elasticsearch automatically applies allocation filtering
rules to place each shard within the appropriate tier. These rules mean that the
balancer works independently within each tier.</p>
<p>You can use the following settings to control the rebalancing of shards across
the cluster:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.rebalance.enable</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Enable or disable rebalancing for specific kinds of shards:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">all</code> -         (default) Allows shard balancing for all kinds of shards.
</li>
<li class="listitem">
<code class="literal">primaries</code> -   Allows shard balancing only for primary shards.
</li>
<li class="listitem">
<code class="literal">replicas</code> -    Allows shard balancing only for replica shards.
</li>
<li class="listitem">
<code class="literal">none</code> -        No shard balancing of any kind are allowed for any indices.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.allow_rebalance</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specify when shard rebalancing is allowed:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">always</code> -                    Always allow rebalancing.
</li>
<li class="listitem">
<code class="literal">indices_primaries_active</code> -  Only when all primaries in the cluster are allocated.
</li>
<li class="listitem">
<code class="literal">indices_all_active</code> -        (default) Only when all shards (primaries and replicas) in the cluster are allocated.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.cluster_concurrent_rebalance</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Defines the number of concurrent shard rebalances are allowed across the whole
cluster. Defaults to <code class="literal">2</code>. Note that this setting only controls the number of
concurrent shard relocations due to imbalances in the cluster. This setting does
not limit shard relocations due to
<a class="xref" href="settings.html#cluster-shard-allocation-filtering" title="Cluster-level shard allocation filtering">allocation filtering</a> or
<a class="xref" href="settings.html#forced-awareness" title="Forced awareness">forced awareness</a>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.type</code>
</span>
</dt>
<dd>
<p>Selects the algorithm used for computing the cluster balance. Defaults to
<code class="literal">desired_balance</code> which selects the <em>desired balance allocator</em>. This allocator
runs a background task which computes the desired balance of shards in the
cluster. Once this background task completes, Elasticsearch moves shards to their
desired locations.</p>
<p><span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">8.8</span>]
<span class="Admonishment-detail">
Deprecated in 8.8. The <code class="literal">balanced</code> allocator type is deprecated and no longer recommended
</span>
</span>
May also be set to <code class="literal">balanced</code> to select the legacy <em>balanced allocator</em>. This
allocator was the default allocator in versions of Elasticsearch before 8.6.0. It runs
in the foreground, preventing the master from doing other work in parallel. It
works by selecting a small number of shard movements which immediately improve
the balance of the cluster, and when those shard movements complete it runs
again and selects another few shards to move. Since this allocator makes its
decisions based only on the current state of the cluster, it will sometimes
move a shard several times while balancing the cluster.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shards-rebalancing-heuristics"></a>Shard balancing heuristics settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/shards_allocation.asciidoc">edit</a></h3>
</div></div></div>
<p>Rebalancing works by computing a <em>weight</em> for each node based on its allocation
of shards, and then moving shards between nodes to reduce the weight of the
heavier nodes and increase the weight of the lighter ones. The cluster is
balanced when there is no possible shard movement that can bring the weight of
any node closer to the weight of any other node by more than a configurable
threshold.</p>
<p>The weight of a node depends on the number of shards it holds and on the total
estimated resource usage of those shards expressed in terms of the size of the
shard on disk and the number of threads needed to support write traffic to the
shard. Elasticsearch estimates the resource usage of shards belonging to data streams
when they are created by a rollover. The estimated disk size of the new shard
is the mean size of the other shards in the data stream. The estimated write
load of the new shard is a weighted average of the actual write loads of recent
shards in the data stream. Shards that do not belong to the write index of a
data stream have an estimated write load of zero.</p>
<p>The following settings control how Elasticsearch combines these values into an overall
measure of each node&#8217;s weight.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.balance.shard</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Defines the weight factor for the total number of shards allocated to each node.
Defaults to <code class="literal">0.45f</code>. Raising this value increases the tendency of Elasticsearch to
equalize the total number of shards across nodes ahead of the other balancing
variables.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.balance.index</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Defines the weight factor for the number of shards per index allocated to each
node. Defaults to <code class="literal">0.55f</code>. Raising this value increases the tendency of Elasticsearch to
equalize the number of shards of each index across nodes ahead of the other
balancing variables.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.balance.disk_usage</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Defines the weight factor for balancing shards according to their predicted disk
size in bytes. Defaults to <code class="literal">2e-11f</code>. Raising this value increases the tendency
of Elasticsearch to equalize the total disk usage across nodes ahead of the other
balancing variables.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.balance.write_load</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Defines the weight factor for the write load of each shard, in terms of the
estimated number of indexing threads needed by the shard. Defaults to <code class="literal">10.0f</code>.
Raising this value increases the tendency of Elasticsearch to equalize the total write
load across nodes ahead of the other balancing variables.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.balance.threshold</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The minimum improvement in weight which triggers a rebalancing shard movement.
Defaults to <code class="literal">1.0f</code>. Raising this value will cause Elasticsearch to stop rebalancing
shards sooner, leaving the cluster in a more unbalanced state.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Regardless of the result of the balancing algorithm, rebalancing might
not be allowed due to allocation rules such as forced awareness and allocation
filtering.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="disk-based-shard-allocation"></a>Disk-based shard allocation settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/disk_allocator.asciidoc">edit</a></h3>
</div></div></div>
<p><a id="disk-based-shard-allocation-description"></a>The disk-based shard allocator ensures that all nodes have enough disk space
without performing more shard movements than necessary. It allocates shards
based on a pair of thresholds known as the <em>low watermark</em> and the <em>high
watermark</em>. Its primary goal is to ensure that no node exceeds the high
watermark, or at least that any such overage is only temporary. If a node
exceeds the high watermark then Elasticsearch will solve this by moving some of its
shards onto other nodes in the cluster.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>It is normal for nodes to temporarily exceed the high watermark from time
to time.</p>
</div>
</div>
<p>The allocator also tries to keep nodes clear of the high watermark by
forbidding the allocation of more shards to a node that exceeds the low
watermark. Importantly, if all of your nodes have exceeded the low watermark
then no new shards can be allocated and Elasticsearch will not be able to move any
shards between nodes in order to keep the disk usage below the high watermark.
You must ensure that your cluster has enough disk space in total and that there
are always some nodes below the low watermark.</p>
<p>Shard movements triggered by the disk-based shard allocator must also satisfy
all other shard allocation rules such as
<a class="xref" href="settings.html#cluster-shard-allocation-filtering" title="Cluster-level shard allocation filtering">allocation filtering</a> and
<a class="xref" href="settings.html#forced-awareness" title="Forced awareness">forced awareness</a>. If these rules are too strict then they
can also prevent the shard movements needed to keep the nodes' disk usage under
control. If you are using <a class="xref" href="data-tiers.html" title="Data tiers">data tiers</a> then Elasticsearch automatically
configures allocation filtering rules to place shards within the appropriate
tier, which means that the disk-based shard allocator works independently
within each tier.</p>
<p>If a node is filling up its disk faster than Elasticsearch can move shards elsewhere
then there is a risk that the disk will completely fill up. To prevent this, as
a last resort, once the disk usage reaches the <em>flood-stage</em> watermark Elasticsearch
will block writes to indices with a shard on the affected node. It will also
continue to move shards onto the other nodes in the cluster. When disk usage
on the affected node drops below the high watermark, Elasticsearch automatically removes
the write block. Refer to <a class="xref" href="fix-common-cluster-issues.html#fix-watermark-errors" title="Fix watermark errors">Fix watermark errors</a> to
resolve persistent watermark errors.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<a id="disk-based-shard-allocation-does-not-balance"></a>
<p>It is normal for the nodes in your cluster to be using very different amounts
of disk space. The <a class="xref" href="settings.html#shards-rebalancing-settings" title="Shard rebalancing settings">balance</a> of the cluster
depends only on the number of shards on each node and the indices to which
those shards belong. It considers neither the sizes of these shards nor the
available disk space on each node, for the following reasons:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Disk usage changes over time. Balancing the disk usage of individual nodes
would require a lot more shard movements, perhaps even wastefully undoing
earlier movements. Moving a shard consumes resources such as I/O and network
bandwidth and may evict data from the filesystem cache. These resources are
better spent handling your searches and indexing where possible.
</li>
<li class="listitem">
A cluster with equal disk usage on every node typically performs no better
than one that has unequal disk usage, as long as no disk is too full.
</li>
</ul>
</div>
</div>
</div>
<p>You can use the following settings to control disk-based allocation:</p>
<div class="variablelist">
<a id="cluster-routing-disk-threshold"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.threshold_enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Defaults to <code class="literal">true</code>. Set to <code class="literal">false</code> to disable the disk allocation decider. Upon disabling, it will also remove any existing <code class="literal">index.blocks.read_only_allow_delete</code> index blocks.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-routing-watermark-low"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.low</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Controls the low watermark for disk usage. It defaults to <code class="literal">85%</code>, meaning that Elasticsearch will not allocate shards to nodes that have more than 85% disk used. It can alternatively be set to a ratio value, e.g., <code class="literal">0.85</code>. It can also be set to an absolute byte value (like <code class="literal">500mb</code>) to prevent Elasticsearch from allocating shards if less than the specified amount of space is available. This setting has no effect on the primary shards of newly-created indices but will prevent their replicas from being allocated.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.low.max_headroom</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>) Controls the max headroom for the low watermark (in case of a percentage/ratio value).
Defaults to 200GB when <code class="literal">cluster.routing.allocation.disk.watermark.low</code> is not explicitly set.
This caps the amount of free space required.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-routing-watermark-high"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.high</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Controls the high watermark. It defaults to <code class="literal">90%</code>, meaning that Elasticsearch will attempt to relocate shards away from a node whose disk usage is above 90%. It can alternatively be set to a ratio value, e.g., <code class="literal">0.9</code>. It can also be set to an absolute byte value (similarly to the low watermark) to relocate shards away from a node if it has less than the specified amount of free space. This setting affects the allocation of all shards, whether previously allocated or not.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.high.max_headroom</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>) Controls the max headroom for the high watermark (in case of a percentage/ratio value).
Defaults to 150GB when <code class="literal">cluster.routing.allocation.disk.watermark.high</code> is not explicitly set.
This caps the amount of free space required.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.enable_for_single_data_node</code>
</span>
</dt>
<dd>
    (<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
In earlier releases, the default behaviour was to disregard disk watermarks for a single
data node cluster when making an allocation decision. This is deprecated behavior
since 7.14 and has been removed in 8.0. The only valid value for this setting
is now <code class="literal">true</code>. The setting will be removed in a future release.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-routing-flood-stage"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.flood_stage</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Controls the flood stage watermark, which defaults to 95%. Elasticsearch enforces a read-only index block (<code class="literal">index.blocks.read_only_allow_delete</code>) on every index that has one or more shards allocated on the node, and that has at least one disk exceeding the flood stage. This setting is a last resort to prevent nodes from running out of disk space. The index block is automatically released when the disk utilization falls below the high watermark. Similarly to the low and high watermark values, it can alternatively be set to a ratio value, e.g., <code class="literal">0.95</code>, or an absolute byte value.</p>
<p>An example of resetting the read-only index block on the <code class="literal">my-index-000001</code> index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_settings
{
  "index.blocks.read_only_allow_delete": null
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/8.console"></div>
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.flood_stage.max_headroom</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>) Controls the max headroom for the flood stage watermark (in case of a percentage/ratio value).
Defaults to 100GB when
<code class="literal">cluster.routing.allocation.disk.watermark.flood_stage</code> is not explicitly set.
This caps the amount of free space required.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot mix the usage of percentage/ratio values and byte values across
the <code class="literal">cluster.routing.allocation.disk.watermark.low</code>, <code class="literal">cluster.routing.allocation.disk.watermark.high</code>,
and <code class="literal">cluster.routing.allocation.disk.watermark.flood_stage</code> settings. Either all values
are set to percentage/ratio values, or all are set to byte values. This enforcement is
so that Elasticsearch can validate that the settings are internally consistent, ensuring that the
low disk threshold is less than the high disk threshold, and the high disk threshold is
less than the flood stage threshold. A similar comparison check is done for the max
headroom values.</p>
</div>
</div>
<div class="variablelist">
<a id="cluster-routing-flood-stage-frozen"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.flood_stage.frozen</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Controls the flood stage watermark for dedicated frozen nodes, which defaults to
95%.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.flood_stage.frozen.max_headroom</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Controls the max headroom for the flood stage watermark (in case of a
percentage/ratio value) for dedicated frozen nodes. Defaults to 20GB when
<code class="literal">cluster.routing.allocation.disk.watermark.flood_stage.frozen</code> is not explicitly
set. This caps the amount of free space required on dedicated frozen nodes.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.info.update.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
How often Elasticsearch should check on disk usage for each node in the
cluster. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Percentage values refer to used disk space, while byte values refer to
free disk space. This can be confusing, since it flips the meaning of high and
low. For example, it makes sense to set the low watermark to 10gb and the high
watermark to 5gb, but not the other way around.</p>
</div>
</div>
<p>An example of updating the low watermark to at least 100 gigabytes free, a high
watermark of at least 50 gigabytes free, and a flood stage watermark of 10
gigabytes free, and updating the information about the cluster every minute:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster.routing.allocation.disk.watermark.low": "100gb",
    "cluster.routing.allocation.disk.watermark.high": "50gb",
    "cluster.routing.allocation.disk.watermark.flood_stage": "10gb",
    "cluster.info.update.interval": "1m"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/9.console"></div>
<p>Concerning the max headroom settings for the watermarks, please note
that these apply only in the case that the watermark settings are percentages/ratios.
The aim of a max headroom value is to cap the required free disk space before hitting
the respective watermark. This is especially useful for servers with larger
disks, where a percentage/ratio watermark could translate to a big free disk space requirement,
and the max headroom can be used to cap the required free disk space amount.
As an example, let us take the default settings for the flood watermark.
It has a 95% default value, and the flood max headroom setting has a default value of 100GB.
This means that:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
For a smaller disk, e.g., of 100GB, the flood watermark will hit at 95%, meaning at 5GB
of free space, since 5GB is smaller than the 100GB max headroom value.
</li>
<li class="listitem">
For a larger disk, e.g., of 100TB, the flood watermark will hit at 100GB of free space.
That is because the 95% flood watermark alone would require 5TB of free disk space, but
that is capped by the max headroom setting to 100GB.
</li>
</ul>
</div>
<p>Finally, the max headroom settings have their default values only if their respective watermark
settings are not explicitly set (thus, they have their default percentage values).
If watermarks are explicitly set, then the max headroom settings do not have their default values,
and would need to be explicitly set if they are desired.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shard-allocation-awareness"></a>Shard allocation awareness<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/allocation_awareness.asciidoc">edit</a></h3>
</div></div></div>
<p>You can use custom node attributes as <em>awareness attributes</em> to enable Elasticsearch
to take your physical hardware configuration into account when allocating shards.
If Elasticsearch knows which nodes are on the same physical server, in the same rack, or
in the same zone, it can distribute the primary shard and its replica shards to
minimise the risk of losing all shard copies in the event of a failure.</p>
<p>When shard allocation awareness is enabled with the
<a class="xref" href="settings.html#dynamic-cluster-setting">dynamic</a>
<code class="literal">cluster.routing.allocation.awareness.attributes</code> setting, shards are only
allocated to nodes that have values set for the specified awareness attributes.
If you use multiple awareness attributes, Elasticsearch considers each attribute
separately when allocating shards.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The number of attribute values determines how many shard copies are
allocated in each location. If the number of nodes in each location is
unbalanced and there are a lot of replicas, replica shards might be left
unassigned.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="enabling-awareness"></a>Enabling shard allocation awareness<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/allocation_awareness.asciidoc">edit</a></h4>
</div></div></div>
<p>To enable shard allocation awareness:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Specify the location of each node with a custom node attribute. For example,
if you want Elasticsearch to distribute shards across different racks, you might
set an awareness attribute called <code class="literal">rack_id</code> in each node&#8217;s <code class="literal">elasticsearch.yml</code>
config file.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.attr.rack_id: rack_one</pre>
</div>
<p>You can also set custom attributes when you start a node:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/elasticsearch -Enode.attr.rack_id=rack_one</pre>
</div>
</li>
<li class="listitem">
<p>Tell Elasticsearch to take one or more awareness attributes into account when
allocating shards by setting
<code class="literal">cluster.routing.allocation.awareness.attributes</code> in <span class="strong strong"><strong>every</strong></span> master-eligible
node&#8217;s <code class="literal">elasticsearch.yml</code> config file.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cluster.routing.allocation.awareness.attributes: rack_id <a id="CO13-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO13-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify multiple attributes as a comma-separated list.</p>
</td>
</tr>
</table>
</div>
<p>You can also use the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster-update-settings</a> API to set or update
a cluster&#8217;s awareness attributes.</p>
</li>
</ol>
</div>
<p>With this example configuration, if you start two nodes with
<code class="literal">node.attr.rack_id</code> set to <code class="literal">rack_one</code> and create an index with 5 primary
shards and 1 replica of each primary, all primaries and replicas are
allocated across the two nodes.</p>
<p>If you add two nodes with <code class="literal">node.attr.rack_id</code> set to <code class="literal">rack_two</code>,
Elasticsearch moves shards to the new nodes, ensuring (if possible)
that no two copies of the same shard are in the same rack.</p>
<p>If <code class="literal">rack_two</code> fails and takes down both its nodes, by default Elasticsearch
allocates the lost shard copies to nodes in <code class="literal">rack_one</code>. To prevent multiple
copies of a particular shard from being allocated in the same location, you can
enable forced awareness.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="forced-awareness"></a>Forced awareness<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/allocation_awareness.asciidoc">edit</a></h4>
</div></div></div>
<p>By default, if one location fails, Elasticsearch assigns all of the missing
replica shards to the remaining locations. While you might have sufficient
resources across all locations to host your primary and replica shards, a single
location might be unable to host <span class="strong strong"><strong>ALL</strong></span> of the shards.</p>
<p>To prevent a single location from being overloaded in the event of a failure,
you can set <code class="literal">cluster.routing.allocation.awareness.force</code> so no replicas are
allocated until nodes are available in another location.</p>
<p>For example, if you have an awareness attribute called <code class="literal">zone</code> and configure nodes
in <code class="literal">zone1</code> and <code class="literal">zone2</code>, you can use forced awareness to prevent Elasticsearch
from allocating replicas if only one zone is available:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cluster.routing.allocation.awareness.attributes: zone
cluster.routing.allocation.awareness.force.zone.values: zone1,zone2 <a id="CO14-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO14-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify all possible values for the awareness attribute.</p>
</td>
</tr>
</table>
</div>
<p>With this example configuration, if you start two nodes with <code class="literal">node.attr.zone</code> set
to <code class="literal">zone1</code> and create an index with 5 shards and 1 replica, Elasticsearch creates
the index and allocates the 5 primary shards but no replicas. Replicas are
only allocated once nodes with <code class="literal">node.attr.zone</code> set to <code class="literal">zone2</code> are available.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="cluster-shard-allocation-filtering"></a>Cluster-level shard allocation filtering<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/allocation_filtering.asciidoc">edit</a></h3>
</div></div></div>
<p>You can use cluster-level shard allocation filters to control where Elasticsearch
allocates shards from any index. These cluster wide filters are applied in
conjunction with <a class="xref" href="index-modules-allocation.html#shard-allocation-filtering" title="Index-level shard allocation filtering">per-index allocation filtering</a>
and <a class="xref" href="settings.html#shard-allocation-awareness" title="Shard allocation awareness">allocation awareness</a>.</p>
<p>Shard allocation filters can be based on custom node attributes or the built-in
<code class="literal">_name</code>, <code class="literal">_host_ip</code>, <code class="literal">_publish_ip</code>, <code class="literal">_ip</code>, <code class="literal">_host</code>, <code class="literal">_id</code> and <code class="literal">_tier</code> attributes.</p>
<p>The <code class="literal">cluster.routing.allocation</code> settings are <a class="xref" href="settings.html#dynamic-cluster-setting">dynamic</a>, enabling live indices to
be moved from one set of nodes to another. Shards are only relocated if it is
possible to do so without breaking another routing constraint, such as never
allocating a primary and replica shard on the same node.</p>
<p>The most common use case for cluster-level shard allocation filtering is when
you want to decommission a node. To move shards off of a node prior to shutting
it down, you could create a filter that excludes the node by its IP address:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent" : {
    "cluster.routing.allocation.exclude._ip" : "10.0.0.1"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/10.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="cluster-routing-settings"></a>Cluster routing settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/allocation_filtering.asciidoc">edit</a></h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.include.{attribute}</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Allocate shards to a node whose <code class="literal">{attribute}</code> has at least one of the
comma-separated values.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.require.{attribute}</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Only allocate shards to a node whose <code class="literal">{attribute}</code> has <em>all</em> of the
comma-separated values.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.exclude.{attribute}</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Do not allocate shards to a node whose <code class="literal">{attribute}</code> has <em>any</em> of the
comma-separated values.
</dd>
</dl>
</div>
<p>The cluster allocation settings support the following built-in attributes:</p>
<div class="informaltable">
<table border="0" cellpadding="4px">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody valign="top">
<tr>
<td valign="top">
<p>
<code class="literal">_name</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by node name
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_host_ip</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by host IP address (IP associated with hostname)
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_publish_ip</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by publish IP address
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_ip</code>
</p>
</td>
<td valign="top">
<p>
Match either <code class="literal">_host_ip</code> or <code class="literal">_publish_ip</code>
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_host</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by hostname
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_id</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by node id
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_tier</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by the node&#8217;s <a class="xref" href="data-tiers.html" title="Data tiers">data tier</a> role
</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">_tier</code> filtering is based on <a class="xref" href="settings.html#modules-node" title="Node">node</a> roles. Only
a subset of roles are <a class="xref" href="data-tiers.html" title="Data tiers">data tier</a> roles, and the generic
<a class="xref" href="settings.html#data-node" title="Data node">data role</a> will match any tier filtering.
a subset of roles that are <a class="xref" href="data-tiers.html" title="Data tiers">data tier</a> roles, but the generic
<a class="xref" href="settings.html#data-node" title="Data node">data role</a> will match any tier filtering.</p>
</div>
</div>
<p>You can use wildcards when specifying attribute values, for example:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster.routing.allocation.exclude._ip": "192.168.2.*"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/11.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="misc-cluster-settings"></a>Miscellaneous cluster settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/misc.asciidoc">edit</a></h2>
</div></div></div>
<h4><a id="cluster-read-only"></a>Metadata<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
<p>An entire cluster may be set to read-only with the following setting:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.blocks.read_only</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Make the whole cluster read only (indices do not accept write
operations), metadata is not allowed to be modified (create or delete
indices).
</dd>
<dt>
<span class="term">
<code class="literal">cluster.blocks.read_only_allow_delete</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Identical to <code class="literal">cluster.blocks.read_only</code> but allows to delete indices
to free up resources.
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Don&#8217;t rely on this setting to prevent changes to your cluster. Any
user with access to the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster-update-settings</a>
API can make the cluster read-write again.</p>
</div>
</div>
<h4><a id="cluster-shard-limit"></a>Cluster shard limit<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
<p>There is a soft limit on the number of shards in a cluster, based on the number
of nodes in the cluster. This is intended to prevent operations which may
unintentionally destabilize the cluster.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This limit is intended as a safety net, not a sizing recommendation. The
exact number of shards your cluster can safely support depends on your hardware
configuration and workload, but should remain well below this limit in almost
all cases, as the default limit is set quite high.</p>
</div>
</div>
<p>If an operation, such as creating a new index, restoring a snapshot of an index,
or opening a closed index would lead to the number of shards in the cluster
going over this limit, the operation will fail with an error indicating the
shard limit.</p>
<p>If the cluster is already over the limit, due to changes in node membership or
setting changes, all operations that create or open indices will fail until
either the limit is increased as described below, or some indices are
<a class="xref" href="indices.html#indices-open-close" title="Open index API">closed</a> or <a class="xref" href="indices.html#indices-delete-index" title="Delete index API">deleted</a> to bring the
number of shards below the limit.</p>
<p>The cluster shard limit defaults to 1,000 shards per non-frozen data node for
normal (non-frozen) indices and 3000 shards per frozen data node for frozen
indices.
Both primary and replica shards of all open indices count toward the limit,
including unassigned shards.
For example, an open index with 5 primary shards and 2 replicas counts as 15 shards.
Closed indices do not contribute to the shard count.</p>
<p>You can dynamically adjust the cluster shard limit with the following setting:</p>
<div class="variablelist">
<a id="cluster-max-shards-per-node"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.max_shards_per_node</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limits the total number of primary and replica shards for the cluster. Elasticsearch
calculates the limit as follows:</p>
<p><code class="literal">cluster.max_shards_per_node * number of non-frozen data nodes</code></p>
<p>Shards for closed indices do not count toward this limit. Defaults to <code class="literal">1000</code>.
A cluster with no data nodes is unlimited.</p>
<p>Elasticsearch rejects any request that creates more shards than this limit allows. For
example, a cluster with a <code class="literal">cluster.max_shards_per_node</code> setting of <code class="literal">100</code> and
three data nodes has a shard limit of 300. If the cluster already contains 296
shards, Elasticsearch rejects any request that adds five or more shards to the cluster.</p>
<p>Notice that frozen shards have their own independent limit.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-max-shards-per-node-frozen"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.max_shards_per_node.frozen</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limits the total number of primary and replica frozen shards for the cluster.
Elasticsearch calculates the limit as follows:</p>
<p><code class="literal">cluster.max_shards_per_node.frozen * number of frozen data nodes</code></p>
<p>Shards for closed indices do not count toward this limit. Defaults to <code class="literal">3000</code>.
A cluster with no frozen data nodes is unlimited.</p>
<p>Elasticsearch rejects any request that creates more frozen shards than this limit allows.
For example, a cluster with a <code class="literal">cluster.max_shards_per_node.frozen</code> setting of
<code class="literal">100</code> and three frozen data nodes has a frozen shard limit of 300. If the
cluster already contains 296 shards, Elasticsearch rejects any request that adds five or
more frozen shards to the cluster.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These setting do not limit shards for individual nodes. To limit the
number of shards for each node, use the
<a class="xref" href="index-modules-allocation.html#cluster-total-shards-per-node"><code class="literal">cluster.routing.allocation.total_shards_per_node</code></a>
setting.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4><a id="user-defined-data"></a>User-defined cluster metadata<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
<p>User-defined metadata can be stored and retrieved using the Cluster Settings API.
This can be used to store arbitrary, infrequently-changing data about the cluster
without the need to create an index to store it. This data may be stored using
any key prefixed with <code class="literal">cluster.metadata.</code>. For example, to store the email
address of the administrator of a cluster under the key <code class="literal">cluster.metadata.administrator</code>,
issue this request:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
  "persistent": {
    "cluster.metadata.administrator": "sysadmin@example.com"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/12.console"></div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>User-defined cluster metadata is not intended to store sensitive or
confidential information. Any information stored in user-defined cluster
metadata will be viewable by anyone with access to the
<a class="xref" href="cluster.html#cluster-get-settings" title="Cluster get settings API">Cluster Get Settings</a> API, and is recorded in the
Elasticsearch logs.</p>
</div>
</div>
<h4><a id="cluster-max-tombstones"></a>Index tombstones<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
<p>The cluster state maintains index tombstones to explicitly denote indices that
have been deleted. The number of tombstones maintained in the cluster state is
controlled by the following setting:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.indices.tombstones.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Index tombstones prevent nodes that are not part of the cluster when a delete
occurs from joining the cluster and reimporting the index as though the delete
was never issued. To keep the cluster state from growing huge we only keep the
last <code class="literal">cluster.indices.tombstones.size</code> deletes, which defaults to 500. You can
increase it if you expect nodes to be absent from the cluster and miss more
than 500 deletes. We think that is rare, thus the default. Tombstones don&#8217;t take
up much space, but we also think that a number like 50,000 is probably too big.
</dd>
</dl>
</div>
<p>If Elasticsearch encounters index data that is absent from the current cluster
state, those indices are considered to be dangling. For example,
this can happen if you delete more than
<code class="literal">cluster.indices.tombstones.size</code> indices while an Elasticsearch node is offline.</p>
<p>You can use the <a class="xref" href="indices.html#dangling-indices-api" title="Dangling indices:">Dangling indices API</a> to manage
this situation.</p>
<h4><a id="cluster-logger"></a>Logger<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
<p>The settings which control logging can be updated <a class="xref" href="settings.html#dynamic-cluster-setting">dynamically</a> with the
<code class="literal">logger.</code> prefix. For instance, to increase the logging level of the
<code class="literal">indices.recovery</code> module to <code class="literal">DEBUG</code>, issue this request:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
  "persistent": {
    "logger.org.elasticsearch.indices.recovery": "DEBUG"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/13.console"></div>
<h4><a id="persistent-tasks-allocation"></a>Persistent tasks allocation<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
<p>Plugins can create a kind of tasks called persistent tasks. Those tasks are
usually long-lived tasks and are stored in the cluster state, allowing the
tasks to be revived after a full cluster restart.</p>
<p>Every time a persistent task is created, the master node takes care of
assigning the task to a node of the cluster, and the assigned node will then
pick up the task and execute it locally. The process of assigning persistent
tasks to nodes is controlled by the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.persistent_tasks.allocation.enable</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Enable or disable allocation for persistent tasks:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">all</code> -             (default) Allows persistent tasks to be assigned to nodes
</li>
<li class="listitem">
<code class="literal">none</code> -            No allocations are allowed for any type of persistent task
</li>
</ul>
</div>
<p>This setting does not affect the persistent tasks that are already being executed.
Only newly created persistent tasks, or tasks that must be reassigned (after a node
left the cluster, for example), are impacted by this setting.</p>
</dd>
<dt>
<span class="term">
<code class="literal">cluster.persistent_tasks.allocation.recheck_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The master node will automatically check whether persistent tasks need to
be assigned when the cluster state changes significantly. However, there
may be other factors, such as memory usage, that affect whether persistent
tasks can be assigned to nodes but do not cause the cluster state to change.
This setting controls how often assignment checks are performed to react to
these factors. The default is 30 seconds. The minimum permitted value is 10
seconds.
</dd>
</dl>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ccr-settings"></a>Cross-cluster replication settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ccr-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>These cross-cluster replication settings can be dynamically updated on a live cluster with the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a>.</p>
<h4><a id="ccr-recovery-settings"></a>Remote recovery settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ccr-settings.asciidoc">edit</a></h4>
<p>The following setting can be used to rate-limit the data transmitted during
<a class="xref" href="xpack-ccr.html#ccr-remote-recovery" title="Initializing followers using remote recovery">remote recoveries</a>:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ccr.indices.recovery.max_bytes_per_sec</code> (<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
</span>
</dt>
<dd>
Limits the total inbound and outbound remote recovery traffic on each node.
Since this limit applies on each node, but there may be many nodes performing
remote recoveries concurrently, the total amount of remote recovery bytes may be
much higher than this limit. If you set this limit too high then there is a risk
that ongoing remote recoveries will consume an excess of bandwidth (or other
resources) which could destabilize the cluster. This setting is used by both the
leader and follower clusters. For example if it is set to <code class="literal">20mb</code> on a leader,
the leader will only send <code class="literal">20mb/s</code> to the follower even if the follower is
requesting and can accept <code class="literal">60mb/s</code>. Defaults to <code class="literal">40mb</code>.
</dd>
</dl>
</div>
<h4><a id="ccr-advanced-recovery-settings"></a>Advanced remote recovery settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ccr-settings.asciidoc">edit</a></h4>
<p>The following <em>expert</em> settings can be set to manage the resources consumed by
remote recoveries:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ccr.indices.recovery.max_concurrent_file_chunks</code> (<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
</span>
</dt>
<dd>
Controls the number of file chunk requests that can be sent in parallel per
recovery. As multiple remote recoveries might already running in parallel,
increasing this expert-level setting might only help in situations where remote
recovery of a single shard is not reaching the total inbound and outbound remote recovery traffic as configured by <code class="literal">ccr.indices.recovery.max_bytes_per_sec</code>.
Defaults to <code class="literal">5</code>. The maximum allowed value is <code class="literal">10</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ccr.indices.recovery.chunk_size</code>(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
</span>
</dt>
<dd>
Controls the chunk size requested by the follower during file transfer. Defaults to
<code class="literal">1mb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ccr.indices.recovery.recovery_activity_timeout</code>(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
</span>
</dt>
<dd>
Controls the timeout for recovery activity. This timeout primarily applies on
the leader cluster. The leader cluster must open resources in-memory to supply
data to the follower during the recovery process. If the leader does not receive recovery requests from the follower for this period of time, it will close the resources. Defaults to 60 seconds.
</dd>
<dt>
<span class="term">
<code class="literal">ccr.indices.recovery.internal_action_timeout</code> (<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
</span>
</dt>
<dd>
Controls the timeout for individual network requests during the remote recovery
process. An individual action timing out can fail the recovery. Defaults to
60 seconds.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-discovery-settings"></a>Discovery and cluster formation settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/discovery/discovery-settings.asciidoc">edit</a></h2>
</div></div></div>
<p><a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">Discovery and cluster formation</a> are affected by the
following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">discovery.seed_hosts</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Provides a list of the addresses of the master-eligible nodes in the cluster.
May also be a single string containing the addresses separated by commas. Each
address has the format <code class="literal">host:port</code> or <code class="literal">host</code>. The <code class="literal">host</code> is either a host name
to be resolved by DNS, an IPv4 address, or an IPv6 address. IPv6 addresses
must be enclosed in square brackets. If a host name resolves via DNS to multiple
addresses, Elasticsearch uses all of them. DNS lookups are subject to
<a class="xref" href="system-config.html#networkaddress-cache-ttl" title="DNS cache settings">JVM DNS caching</a>. If the <code class="literal">port</code> is not given then it
is determined by checking the following settings in order:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<code class="literal">transport.profiles.default.port</code>
</li>
<li class="listitem">
<code class="literal">transport.port</code>
</li>
</ol>
</div>
<p>If neither of these is set then the default port is <code class="literal">9300</code>. The default value
for <code class="literal">discovery.seed_hosts</code> is <code class="literal">["127.0.0.1", "[::1]"]</code>. See <a class="xref" href="settings.html#unicast.hosts" title="discovery.seed_hosts"><code class="literal">discovery.seed_hosts</code></a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">discovery.seed_providers</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies which types of <a class="xref" href="modules-discovery.html#built-in-hosts-providers" title="Seed hosts providers">seed hosts provider</a> to use
to obtain the addresses of the seed nodes used to start the discovery process.
By default, it is the <a class="xref" href="modules-discovery.html#settings-based-hosts-provider" title="Settings-based seed hosts provider">settings-based seed hosts
provider</a> which obtains the seed node addresses from the <code class="literal">discovery.seed_hosts</code>
setting.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether Elasticsearch should form a multiple-node cluster. Defaults to
<code class="literal">multi-node</code>, which means that Elasticsearch discovers other nodes when forming a cluster
and allows other nodes to join the cluster later. If set to <code class="literal">single-node</code>, Elasticsearch
forms a single-node cluster and suppresses the timeout set by
<code class="literal">cluster.publish.timeout</code>. For more information about when you might use this
setting, see <a class="xref" href="bootstrap-checks.html#single-node-discovery" title="Single-node discovery">Single-node discovery</a>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.initial_master_nodes</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets the initial set of master-eligible nodes in a brand-new cluster. By
default this list is empty, meaning that this node expects to join a cluster
that has already been bootstrapped. Remove this setting once the cluster has
formed. Do not use this setting when restarting nodes or when adding new nodes
to an existing cluster. See <a class="xref" href="settings.html#initial_master_nodes" title="cluster.initial_master_nodes"><code class="literal">cluster.initial_master_nodes</code></a>.
</dd>
</dl>
</div>
<h4><a id="_expert_settings"></a>Expert settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/discovery/discovery-settings.asciidoc">edit</a></h4>
<p>Discovery and cluster formation are also affected by the following
<em>expert-level</em> settings, although it is not recommended to change any of these
from their default values.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you adjust these settings then your cluster may not form correctly
or may become unstable or intolerant of certain failures.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">discovery.cluster_formation_warning_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long a node will try to form a cluster before logging a warning that
the cluster did not form. Defaults to <code class="literal">10s</code>. If a cluster has not formed after
<code class="literal">discovery.cluster_formation_warning_timeout</code> has elapsed then the node will log
a warning message that starts with the phrase <code class="literal">master not discovered</code> which
describes the current state of the discovery process.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.find_peers_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long a node will wait before attempting another discovery round.
Defaults to <code class="literal">1s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.probe.connect_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long to wait when attempting to connect to each address. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.probe.handshake_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long to wait when attempting to identify the remote node via a
handshake. Defaults to <code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.request_peers_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long a node will wait after asking its peers again before considering
the request to have failed. Defaults to <code class="literal">3s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.find_peers_warning_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long a node will attempt to discover its peers before it starts to log
verbose messages describing why the connection attempts are failing. Defaults
to <code class="literal">3m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.seed_resolver.max_concurrent_resolvers</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies how many concurrent DNS lookups to perform when resolving the
addresses of seed nodes. Defaults to <code class="literal">10</code>.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.seed_resolver.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies how long to wait for each DNS lookup performed when resolving the
addresses of seed nodes. Defaults to <code class="literal">5s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.auto_shrink_voting_configuration</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Controls whether the <a class="xref" href="modules-discovery.html#modules-discovery-voting" title="Voting configurations">voting configuration</a> sheds
departed nodes automatically, as long as it still contains at least 3 nodes. The
default value is <code class="literal">true</code>. If set to <code class="literal">false</code>, the voting configuration never
shrinks automatically and you must remove departed nodes manually with the
<a class="xref" href="cluster.html#voting-config-exclusions" title="Voting configuration exclusions API">voting configuration exclusions API</a>.
</dd>
<dt>
<span class="term">
<a id="master-election-settings"></a><code class="literal">cluster.election.back_off_time</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets the amount to increase the upper bound on the wait before an election on
each election failure. Note that this is <em>linear</em> backoff. This defaults to
<code class="literal">100ms</code>. Changing this setting from the default may cause your cluster to fail
to elect a master node.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.election.duration</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long each election is allowed to take before a node considers it to
have failed and schedules a retry. This defaults to <code class="literal">500ms</code>. Changing this
setting from the default may cause your cluster to fail to elect a master node.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.election.initial_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets the upper bound on how long a node will wait initially, or after the
elected master fails, before attempting its first election. This defaults to
<code class="literal">100ms</code>. Changing this setting from the default may cause your cluster to fail
to elect a master node.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.election.max_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets the maximum upper bound on how long a node will wait before attempting an
first election, so that an network partition that lasts for a long time does not
result in excessively sparse elections. This defaults to <code class="literal">10s</code>. Changing this
setting from the default may cause your cluster to fail to elect a master node.
</dd>
<dt>
<span class="term">
<a id="fault-detection-settings"></a><code class="literal">cluster.fault_detection.follower_check.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long the elected master waits between follower checks to each other
node in the cluster. Defaults to <code class="literal">1s</code>. Changing this setting from the default
may cause your cluster to become unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.fault_detection.follower_check.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long the elected master waits for a response to a follower check before
considering it to have failed. Defaults to <code class="literal">10s</code>. Changing this setting from the
default may cause your cluster to become unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.fault_detection.follower_check.retry_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how many consecutive follower check failures must occur to each node before
the elected master considers that node to be faulty and removes it from the
cluster. Defaults to <code class="literal">3</code>. Changing this setting from the default may cause your
cluster to become unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.fault_detection.leader_check.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long each node waits between checks of the elected master. Defaults to
<code class="literal">1s</code>. Changing this setting from the default may cause your cluster to become
unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.fault_detection.leader_check.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long each node waits for a response to a leader check from the elected
master before considering it to have failed. Defaults to <code class="literal">10s</code>. Changing this
setting from the default may cause your cluster to become unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.fault_detection.leader_check.retry_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how many consecutive leader check failures must occur before a node
considers the elected master to be faulty and attempts to find or elect a new
master. Defaults to <code class="literal">3</code>. Changing this setting from the default may cause your
cluster to become unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.follower_lag.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long the master node waits to receive acknowledgements for cluster
state updates from lagging nodes. The default value is <code class="literal">90s</code>. If a node does not
successfully apply the cluster state update within this period of time, it is
considered to have failed and is removed from the cluster. See
<a class="xref" href="modules-discovery.html#cluster-state-publishing" title="Publishing the cluster state">Publishing the cluster state</a>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.max_voting_config_exclusions</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Sets a limit on the number of voting configuration exclusions at any one time.
The default value is <code class="literal">10</code>. See <a class="xref" href="add-elasticsearch-nodes.html" title="Add and remove nodes in your cluster"><em>Add and remove nodes in your cluster</em></a>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.publish.info_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long the master node waits for each cluster state update to be
completely published to all nodes before logging a message indicating that some
nodes are responding slowly. The default value is <code class="literal">10s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.publish.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long the master node waits for each cluster state update to be
completely published to all nodes, unless <code class="literal">discovery.type</code> is set to
<code class="literal">single-node</code>. The default value is <code class="literal">30s</code>. See <a class="xref" href="modules-discovery.html#cluster-state-publishing" title="Publishing the cluster state">Publishing the cluster state</a>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.discovery_configuration_check.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets the interval of some checks that will log warnings about an
incorrect discovery configuration. The default value is <code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.join_validation.cache_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
When a node requests to join the cluster, the elected master node sends it a
copy of a recent cluster state to detect certain problems which might prevent
the new node from joining the cluster. The master caches the state it sends and
uses the cached state if another node joins the cluster soon after. This
setting controls how long the master waits until it clears this cache. Defaults
to <code class="literal">60s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="no-master-block"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.no_master_block</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies which operations are rejected when there is no active master in a
cluster. This setting has three valid values:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
All operations on the node (both read and write operations) are rejected.
This also applies for API cluster state read or write operations, like the get
index settings, update mapping, and cluster state API.
</dd>
<dt>
<span class="term">
<code class="literal">write</code>
</span>
</dt>
<dd>
(default) Write operations are rejected. Read operations succeed,
based on the last known cluster configuration. This situation may result in
partial reads of stale data as this node may be isolated from the rest of the
cluster.
</dd>
<dt>
<span class="term">
<code class="literal">metadata_write</code>
</span>
</dt>
<dd>
Only metadata write operations (e.g. mapping updates,
routing table changes) are rejected but regular indexing operations continue
to work. Read and write operations succeed, based on the last known cluster
configuration. This situation may result in partial reads of stale data as
this node may be isolated from the rest of the cluster.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">cluster.no_master_block</code> setting doesn&#8217;t apply to nodes-based APIs
(for example, cluster stats, node info, and node stats APIs). Requests to these
APIs are not be blocked and can run on any available node.
</li>
<li class="listitem">
For the cluster to be fully operational, it must have an active master.
</li>
</ul>
</div>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">monitor.fs.health.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If <code class="literal">true</code>, the node runs periodic
<a class="xref" href="modules-discovery.html#cluster-fault-detection-filesystem-health">filesystem health checks</a>. Defaults
to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">monitor.fs.health.refresh_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Interval between successive
<a class="xref" href="modules-discovery.html#cluster-fault-detection-filesystem-health">filesystem health checks</a>. Defaults
to <code class="literal">2m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">monitor.fs.health.slow_path_logging_threshold</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If a <a class="xref" href="modules-discovery.html#cluster-fault-detection-filesystem-health">filesystem health checks</a>
takes longer than this threshold then Elasticsearch logs a warning. Defaults to <code class="literal">5s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-fielddata"></a>Field data cache settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/fielddata.asciidoc">edit</a></h2>
</div></div></div>
<p>The field data cache contains <a class="xref" href="mapping-types.html#fielddata-mapping-param" title="fielddata mapping parameter">field data</a> and <a class="xref" href="mapping-params.html#eager-global-ordinals" title="eager_global_ordinals">global ordinals</a>,
which are both used to support aggregations on certain field types.
Since these are on-heap data structures, it is important to monitor the cache&#8217;s use.</p>
<h4><a id="fielddata-sizing"></a>Cache size<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/fielddata.asciidoc">edit</a></h4>
<p>The entries in the cache are expensive to build, so the default behavior is
to keep the cache loaded in memory. The default cache size is unlimited,
causing the cache to grow until it reaches the limit set by the <a class="xref" href="settings.html#fielddata-circuit-breaker" title="Field data circuit breaker">field data circuit breaker</a>. This behavior can be configured.</p>
<p>If the cache size limit is set, the cache will begin clearing the least-recently-updated
entries in the cache. This setting can automatically avoid the circuit breaker limit,
at the cost of rebuilding the cache as needed.</p>
<p>If the circuit breaker limit is reached, further requests that increase the cache
size will be prevented. In this case you should manually <a class="xref" href="indices.html#indices-clearcache" title="Clear cache API">clear the cache</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.fielddata.cache.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The max size of the field data cache, eg <code class="literal">38%</code> of node heap space, or an
absolute value, eg <code class="literal">12GB</code>. Defaults to unbounded. If you choose to set it,
it should be smaller than <a class="xref" href="settings.html#fielddata-circuit-breaker" title="Field data circuit breaker">Field data circuit breaker</a> limit.
</dd>
</dl>
</div>
<h4><a id="fielddata-monitoring"></a>Monitoring field data<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/fielddata.asciidoc">edit</a></h4>
<p>You can monitor memory usage for field data as well as the field data circuit
breaker using
the <a class="xref" href="cluster.html#cluster-nodes-stats" title="Nodes stats API">nodes stats API</a> or the <a class="xref" href="cat.html#cat-fielddata" title="cat fielddata API">cat fielddata API</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="health-diagnostic-settings"></a>Health diagnostic settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/health-diagnostic-settings.asciidoc">edit</a></h2>
</div></div></div>

<p>The following are the <em>expert-level</em> settings available for configuring an internal diagnostics service.
The output of this service is currently exposed through the Health API <a class="xref" href="cluster.html#health-api" title="Health API">Health API</a>. It
is not recommended to change any of these from their default values.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_cluster_level_settings"></a>Cluster level settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/health-diagnostic-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">health.master_history.has_master_lookup_timeframe</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The amount of time a node looks back to see if it has observed
a master at all, before moving on with other checks. Defaults to <code class="literal">30s</code> (30 seconds).
</dd>
<dt>
<span class="term">
<code class="literal">master_history.max_age</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The timeframe we record the master history
to be used for diagnosing the cluster health. Master node changes older than this time will not be considered when
diagnosing the cluster health. Defaults to <code class="literal">30m</code> (30 minutes).
</dd>
<dt>
<span class="term">
<code class="literal">health.master_history.identity_changes_threshold</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The number of master identity changes witnessed by a node that indicates the cluster is not healthy.
Defaults to <code class="literal">4</code>.
</dd>
<dt>
<span class="term">
<code class="literal">health.master_history.no_master_transitions_threshold</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The number of transitions to no master witnessed by a node that indicates the cluster is not healthy.
Defaults to <code class="literal">4</code>.
</dd>
<dt>
<span class="term">
<code class="literal">health.node.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Enables the health node, which allows the health API to provide indications about
cluster wide health aspects such as disk space.
</dd>
<dt>
<span class="term">
<code class="literal">health.reporting.local.monitor.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Determines the interval in which each node of the cluster monitors aspects that
comprise its local health such as its disk usage.
</dd>
<dt>
<span class="term">
<code class="literal">health.ilm.max_time_on_action</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The minimum amount of time an index has to be in an index lifecycle management (ILM) action before it is considered stagnant. Defaults to <code class="literal">1d</code> (1 day).
</dd>
<dt>
<span class="term">
<code class="literal">health.ilm.max_time_on_step</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The minimum amount of time an index has to be in an ILM step before it is considered stagnant. Defaults to <code class="literal">1d</code> (1 day).
</dd>
<dt>
<span class="term">
<code class="literal">health.ilm.max_retries_per_step</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The minimum amount of times an index has retried by an ILM step before it is considered stagnant. Defaults to <code class="literal">100</code>
</dd>
</dl>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-settings"></a>Index lifecycle management settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ilm-settings.asciidoc">edit</a></h2>
</div></div></div>

<p>These are the settings available for configuring <a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">index lifecycle management</a> (ILM).</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_cluster_level_settings_2"></a>Cluster level settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ilm-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.ilm.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Boolean)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.8.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.8.0. Basic License features are always enabled
</span>
</span><br>
This deprecated setting has no effect and will be removed in Elasticsearch 8.0.
</dd>
<dt>
<span class="term">
<code class="literal">indices.lifecycle.history_index_enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, Boolean)
Whether ILM&#8217;s history index is enabled. If enabled, ILM will record the
history of actions taken as part of ILM policies to the <code class="literal">ilm-history-*</code>
indices. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="indices-lifecycle-poll-interval"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.lifecycle.poll_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, <a class="xref" href="api-conventions.html#time-units" title="Time units">time unit value</a>)
How often index lifecycle management checks for indices that meet policy criteria. Defaults to <code class="literal">10m</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="indices-lifecycle-rollover-only-if-has-documents"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.lifecycle.rollover.only_if_has_documents</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, Boolean)
Whether ILM will only roll over non-empty indices. If enabled, ILM will only roll over indices
as long as they contain at least one document. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_index_level_settings"></a>Index level settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ilm-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>These index-level ILM settings are typically configured through index
templates. For more information, see <a class="xref" href="getting-started-index-lifecycle-management.html#ilm-gs-create-policy" title="Create a lifecycle policy">Create a lifecycle policy</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.indexing_complete</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, Boolean)
Indicates whether or not the index has been rolled over.
Automatically set to <code class="literal">true</code> when ILM completes the rollover action.
You can explicitly set it to <a class="xref" href="skipping-rollover.html" title="Skip rollover">skip rollover</a>.
Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="index-lifecycle-name"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.name</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, string)
The name of the policy to use to manage the index. For information about how
Elasticsearch applies policy changes, see <a class="xref" href="ilm-concepts.html#update-lifecycle-policy" title="Lifecycle policy updates">Policy updates</a>.
If you are restoring an index from snapshot that was previously managed by index lifecycle management,
you can override this setting to null during the restore operation to disable
further management of the index. See also <a class="xref" href="settings.html#index-lifecycle-rollover-alias">Index level settings</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="index-lifecycle-origination-date"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.origination_date</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, long)
If specified, this is the timestamp used to calculate the index age for its phase transitions.
Use this setting if you create a new index that contains old data and
want to use the original creation date to calculate the index age.
Specified as a Unix epoch value in milliseconds.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="index-lifecycle-parse-origination-date"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.parse_origination_date</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, Boolean)
Set to <code class="literal">true</code> to parse the origination date from the index name.
This origination date is used to calculate the index age for its phase transitions.
The index name must match the pattern <code class="literal">^.*-{date_format}-\\d+</code>,
where the <code class="literal">date_format</code> is <code class="literal">yyyy.MM.dd</code> and the trailing digits are optional.
An index that was rolled over would normally match the full format,
for example <code class="literal">logs-2016.10.31-000002</code>).
If the index name doesn&#8217;t match the pattern, index creation fails.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="index-lifecycle-step-wait-time-threshold"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.step.wait_time_threshold</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, <a class="xref" href="api-conventions.html#time-units" title="Time units">time value</a>)
Time to wait for the cluster to resolve allocation issues during an ILM
<a class="xref" href="ilm-actions.html#ilm-shrink" title="Shrink"><code class="literal">shrink</code></a> action. Must be greater than <code class="literal">1h</code> (1 hour). Defaults to
<code class="literal">12h</code> (12 hours). See <a class="xref" href="ilm-actions.html#ilm-shrink-shard-allocation" title="Shard allocation for shrink">Shard allocation for shrink</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="index-lifecycle-rollover-alias"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.rollover_alias</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, string)
The index alias to update when the index rolls over. Specify when using a
policy that contains a rollover action. When the index rolls over, the alias is
updated to reflect that the index is no longer the write index. For more
information about rolling indices, see <a class="xref" href="ilm-concepts.html#index-rollover" title="Rollover">Rollover</a>.
If you are restoring an index from snapshot that was previously managed by index lifecycle management,
you can override this setting to null during the restore operation to disable
further management of future indices. See also <a class="xref" href="settings.html#index-lifecycle-name">Index level settings</a>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="index-management-settings"></a>Index management settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/index_management.asciidoc">edit</a></h2>
</div></div></div>
<p>You can use the following cluster settings to enable or disable index management
features.</p>
<div class="variablelist">
<a id="auto-create-index"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">action.auto_create_index</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
<a class="xref" href="docs.html#index-creation" title="Automatically create data streams and indices">Automatically create an index</a> if it doesn&#8217;t already exist and apply any configured index templates. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="action-destructive-requires-name"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">action.destructive_requires_name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
When set to <code class="literal">true</code>, you must specify the index name to <a class="xref" href="indices.html#indices-delete-index" title="Delete index API">delete an index</a>. It is not possible to delete all indices with <code class="literal">_all</code> or use wildcards. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-indices-close-enable"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.indices.close.enable</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Enables <a class="xref" href="indices.html#indices-close" title="Close index API">closing of open indices</a> in Elasticsearch. If <code class="literal">false</code>, you
cannot close open indices. Defaults to <code class="literal">true</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Closed indices still consume a significant amount of disk space.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="reindex-remote-whitelist"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">reindex.remote.whitelist</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the hosts that can be <a class="xref" href="docs.html#reindex-from-remote" title="Reindex from remote">reindexed from remotely</a>. Expects a YAML array of <code class="literal">host:port</code> strings. Consists of a comma-delimited list of <code class="literal">host:port</code> entries. Defaults to <code class="literal">["\*.io:*", "\*.com:*"]</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="stack-templates-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">stack.templates.enabled</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If <code class="literal">true</code>, enables built-in index and component templates.
<a href="https://www.elastic.co/guide/en/fleet/8.9/fleet-overview.html" class="ulink" target="_top">Elastic Agent</a> uses these templates to create data
streams. If <code class="literal">false</code>, Elasticsearch disables these index and component templates. Defaults
to <code class="literal">true</code>.</p>
<p>This setting affects the following built-in index templates:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">logs-*-*</code>
</li>
<li class="listitem">
<code class="literal">metrics-*-*</code>
</li>
<li class="listitem">
<code class="literal">synthetics-*-*</code>
</li>
<li class="listitem">
<code class="literal">profiling-*</code>
</li>
</ul>
</div>
<p>This setting also affects the following built-in component templates:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">logs-mappings</code>
</li>
<li class="listitem">
<code class="literal">logs-settings</code>
</li>
<li class="listitem">
<code class="literal">metrics-mappings</code>
</li>
<li class="listitem">
<code class="literal">metrics-settings</code>
</li>
<li class="listitem">
<code class="literal">synthetics-mapping</code>
</li>
<li class="listitem">
<code class="literal">synthetics-settings</code>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="recovery"></a>Index recovery settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/recovery.asciidoc">edit</a></h2>
</div></div></div>
<p>Peer recovery syncs data from a primary shard to a new or existing shard copy.</p>
<p>Peer recovery automatically occurs when Elasticsearch:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Recreates a shard lost during node failure
</li>
<li class="listitem">
Relocates a shard to another node due to a cluster rebalance or changes to the
<a class="xref" href="settings.html#modules-cluster" title="Cluster-level shard allocation and routing settings">shard allocation settings</a>
</li>
</ul>
</div>
<p>You can view a list of in-progress and completed recoveries using the
<a class="xref" href="cat.html#cat-recovery" title="cat recovery API">cat recovery API</a>.</p>
<h4><a id="recovery-settings"></a>Recovery settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/recovery.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.recovery.max_bytes_per_sec</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Limits total inbound and outbound
recovery traffic for each node. Applies to both peer recoveries as well
as snapshot recoveries (i.e., restores from a snapshot). Defaults to <code class="literal">40mb</code>
unless the node is a dedicated <a class="xref" href="data-tiers.html#cold-tier" title="Cold tier">cold</a> or
<a class="xref" href="data-tiers.html#frozen-tier" title="Frozen tier">frozen</a> node, in which case the default relates to the
total memory available to the node:
</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Total memory</th>
<th align="left" valign="top">Default recovery rate on cold and frozen nodes</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>&le; 4 GB</p></td>
<td align="left" valign="top"><p>40 MB/s</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>&gt; 4 GB and &le; 8 GB</p></td>
<td align="left" valign="top"><p>60 MB/s</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>&gt; 8 GB and &le; 16 GB</p></td>
<td align="left" valign="top"><p>90 MB/s</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>&gt; 16 GB and &le; 32 GB</p></td>
<td align="left" valign="top"><p>125 MB/s</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>&gt; 32 GB</p></td>
<td align="left" valign="top"><p>250 MB/s</p></td>
</tr>
</tbody>
</table>
</div>
<p>This limit applies to each node separately. If multiple nodes in a cluster
perform recoveries at the same time, the cluster&#8217;s total recovery traffic may
exceed this limit.</p>
<p>If this limit is too high, ongoing recoveries may consume an excess of bandwidth
and other resources, which can destabilize the cluster.</p>
<p>This is a dynamic setting, which means you can set it in each node&#8217;s
<code class="literal">elasticsearch.yml</code> config file and you can update it dynamically using the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a>. If you set it
dynamically then the same limit applies on every node in the cluster. If you do
not set it dynamically then you can set a different limit on each node, which is
useful if some of your nodes have better bandwidth than others. For example, if
you are using <a class="xref" href="overview-index-lifecycle-management.html" title="ILM overview">Index Lifecycle Management</a>
then you may be able to give your hot nodes a higher recovery bandwidth limit
than your warm nodes.</p>
</dd>
</dl>
</div>
<h4><a id="_expert_peer_recovery_settings"></a>Expert peer recovery settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/recovery.asciidoc">edit</a></h4>
<p>You can use the following <em>expert</em> setting to manage resources for peer
recoveries.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.recovery.max_concurrent_file_chunks</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>, Expert) Number of file chunks sent in
parallel for each recovery. Defaults to <code class="literal">2</code>.
</p>
<p>You can increase the value of this setting when the recovery of a single shard
is not reaching the traffic limit set by <code class="literal">indices.recovery.max_bytes_per_sec</code>,
up to a maximum of <code class="literal">8</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">indices.recovery.max_concurrent_operations</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>, Expert) Number of operations sent
in parallel for each recovery. Defaults to <code class="literal">1</code>.
</p>
<p>Concurrently replaying operations during recovery can be very resource-intensive
and may interfere with indexing, search, and other activities in your cluster.
Do not increase this setting without carefully verifying that your cluster has
the resources available to handle the extra load that will result.</p>
</dd>
<dt>
<span class="term">
<code class="literal">indices.recovery.use_snapshots</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>, Expert) Enables snapshot-based peer recoveries.
</p>
<p>Elasticsearch recovers replicas and relocates primary shards using the <em>peer recovery</em>
process, which involves constructing a new copy of a shard on the target node.
When <code class="literal">indices.recovery.use_snapshots</code> is <code class="literal">false</code> Elasticsearch will construct this new
copy by transferring the index data from the current primary. When this setting
is <code class="literal">true</code> Elasticsearch will attempt to copy the index data from a recent snapshot
first, and will only copy data from the primary if it cannot identify a
suitable snapshot. Defaults to <code class="literal">true</code>.</p>
<p>Setting this option to <code class="literal">true</code> reduces your operating costs if your cluster runs
in an environment where the node-to-node data transfer costs are higher than
the costs of recovering data from a snapshot. It also reduces the amount of
work that the primary must do during a recovery.</p>
<p>Additionally, repositories having the setting <code class="literal">use_for_peer_recovery=true</code>
will be consulted to find a good snapshot when recovering a shard. If none
of the registered repositories have this setting defined, index files will
be recovered from the source node.</p>
</dd>
<dt>
<span class="term">
<code class="literal">indices.recovery.max_concurrent_snapshot_file_downloads</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>, Expert) Number of snapshot file downloads requests
sent in parallel to the target node for each recovery. Defaults to <code class="literal">5</code>.
</p>
<p>Do not increase this setting without carefully verifying that your cluster has
the resources available to handle the extra load that will result.</p>
</dd>
<dt>
<span class="term">
<code class="literal">indices.recovery.max_concurrent_snapshot_file_downloads_per_node</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>, Expert) Number of snapshot file downloads requests
executed in parallel in the target node for all recoveries. Defaults to <code class="literal">25</code>.
</p>
<p>Do not increase this setting without carefully verifying that your cluster has
the resources available to handle the extra load that will result.</p>
</dd>
</dl>
</div>
<h4><a id="recovery-settings-for-managed-services"></a>Recovery settings for managed services<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/recovery.asciidoc">edit</a></h4>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is designed for indirect use by <a href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elasticsearch Service</a>, <a href="https://www.elastic.co/guide/en/cloud-enterprise/current" class="ulink" target="_top">Elastic Cloud Enterprise</a>, and <a href="https://www.elastic.co/guide/en/cloud-on-k8s/current" class="ulink" target="_top">Elastic Cloud on Kubernetes</a>. Direct use is not supported.</p>
</div>
</div>
<p>When running Elasticsearch as a managed service, the following settings allow the
service to specify absolute maximum bandwidths for disk reads, disk writes, and
network traffic on each node, and permit you to control the maximum recovery
bandwidth on each node in terms of these absolute maximum values. They have two
effects:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
They determine the bandwidth used for recovery if
<code class="literal">indices.recovery.max_bytes_per_sec</code> is not set, overriding the default
behaviour described above.
</li>
<li class="listitem">
They impose a node-wide limit on recovery bandwidth which is independent of
the value of <code class="literal">indices.recovery.max_bytes_per_sec</code>.
</li>
</ol>
</div>
<p>If you do not set <code class="literal">indices.recovery.max_bytes_per_sec</code> then the maximum
recovery bandwidth is computed as a proportion of the absolute maximum
bandwidth. The computation is performed separately for read and write traffic.
The service defines the absolute maximum bandwidths for disk reads, disk
writes, and network transfers using <code class="literal">node.bandwidth.recovery.disk.read</code>,
<code class="literal">node.bandwidth.recovery.disk.write</code> and <code class="literal">node.bandwidth.recovery.network</code>
respectively, and you can set the proportion of the absolute maximum bandwidth
that may be used for recoveries by adjusting
<code class="literal">node.bandwidth.recovery.factor.read</code> and
<code class="literal">node.bandwidth.recovery.factor.write</code>. If the operator privileges feature is enabled
then the service may also set default proportions using operator-only variants
of these settings.</p>
<p>If you set <code class="literal">indices.recovery.max_bytes_per_sec</code> then Elasticsearch will use its value
for the maximum recovery bandwidth, as long as this does not exceed the
node-wide limit. Elasticsearch computes the node-wide limit by multiplying the absolute
maximum bandwidths by the
<code class="literal">node.bandwidth.recovery.operator.factor.max_overcommit</code> factor. If you set
<code class="literal">indices.recovery.max_bytes_per_sec</code> in excess of the node-wide limit then the
node-wide limit takes precedence.</p>
<p>The service should determine values for the absolute maximum bandwidths
settings by experiment, using a recovery-like workload in which there are
several concurrent workers each processing files sequentially in chunks of
512kiB.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">node.bandwidth.recovery.disk.read</code>
</span>
</dt>
<dd>
(<a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a> per second) The absolute maximum disk read speed for
a recovery-like workload on the node. If set,
<code class="literal">node.bandwidth.recovery.disk.write</code> and <code class="literal">node.bandwidth.recovery.network</code> must
also be set.
</dd>
<dt>
<span class="term">
<code class="literal">node.bandwidth.recovery.disk.write</code>
</span>
</dt>
<dd>
(<a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a> per second) The absolute maximum disk write speed
for a recovery-like workload on the node. If set,
<code class="literal">node.bandwidth.recovery.disk.read</code> and <code class="literal">node.bandwidth.recovery.network</code> must
also be set.
</dd>
<dt>
<span class="term">
<code class="literal">node.bandwidth.recovery.network</code>
</span>
</dt>
<dd>
(<a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a> per second) The absolute maximum network throughput
for a recovery-like workload on the node, which applies to both reads and
writes. If set, <code class="literal">node.bandwidth.recovery.disk.read</code> and
<code class="literal">node.bandwidth.recovery.disk.write</code> must also be set.
</dd>
<dt>
<span class="term">
<code class="literal">node.bandwidth.recovery.factor.read</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">dynamic</a>) The proportion of the maximum read
bandwidth that may be used for recoveries if
<code class="literal">indices.recovery.max_bytes_per_sec</code> is not set. Must be greater than <code class="literal">0</code> and
not greater than <code class="literal">1</code>. If not set, the value of
<code class="literal">node.bandwidth.recovery.operator.factor.read</code> is used. If no factor settings
are set then the value <code class="literal">0.4</code> is used.
</dd>
<dt>
<span class="term">
<code class="literal">node.bandwidth.recovery.factor.write</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">dynamic</a>) The proportion of the maximum
write bandwidth that may be used for recoveries if
<code class="literal">indices.recovery.max_bytes_per_sec</code> is not set. Must be greater than <code class="literal">0</code> and
not greater than <code class="literal">1</code>. If not set, the value of
<code class="literal">node.bandwidth.recovery.operator.factor.write</code> is used. If no factor settings
are set then the value <code class="literal">0.4</code> is used.
</dd>
<dt>
<span class="term">
<code class="literal">node.bandwidth.recovery.operator.factor.read</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">dynamic</a>) The proportion of the maximum read
bandwidth that may be used for recoveries if
<code class="literal">indices.recovery.max_bytes_per_sec</code> and <code class="literal">node.bandwidth.recovery.factor.read</code>
are not set. Must be greater than <code class="literal">0</code> and not greater than <code class="literal">1</code>. If not set, the
value of <code class="literal">node.bandwidth.recovery.operator.factor</code> is used. If no factor
settings are set then the value <code class="literal">0.4</code> is used. When the operator privileges feature is
enabled, this setting can be updated only by operator users.
</dd>
<dt>
<span class="term">
<code class="literal">node.bandwidth.recovery.operator.factor.write</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">dynamic</a>) The proportion of the maximum
write bandwidth that may be used for recoveries if
<code class="literal">indices.recovery.max_bytes_per_sec</code> and <code class="literal">node.bandwidth.recovery.factor.write</code>
are not set. Must be greater than <code class="literal">0</code> and not greater than <code class="literal">1</code>. If not set, the
value of <code class="literal">node.bandwidth.recovery.operator.factor</code> is used. If no factor
settings are set then the value <code class="literal">0.4</code> is used. When the operator privileges feature is
enabled, this setting can be updated only by operator users.
</dd>
<dt>
<span class="term">
<code class="literal">node.bandwidth.recovery.operator.factor</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">dynamic</a>) The proportion of the maximum
bandwidth that may be used for recoveries if neither
<code class="literal">indices.recovery.max_bytes_per_sec</code> nor any other factor settings are set.
Must be greater than <code class="literal">0</code> and not greater than <code class="literal">1</code>. Defaults to <code class="literal">0.4</code>. When the
operator privileges feature is enabled, this setting can be updated only by operator
users.
</dd>
<dt>
<span class="term">
<code class="literal">node.bandwidth.recovery.operator.factor.max_overcommit</code>
</span>
</dt>
<dd>
(float, <a class="xref" href="settings.html#dynamic-cluster-setting">dynamic</a>) The proportion of the absolute
maximum bandwidth that may be used for recoveries regardless of any other
settings. Must be greater than <code class="literal">0</code>. Defaults to <code class="literal">100</code>. When the
operator privileges feature is enabled, this setting can be updated only by operator
users.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indexing-buffer"></a>Indexing buffer settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/indexing_buffer.asciidoc">edit</a></h2>
</div></div></div>
<p>The indexing buffer is used to store newly indexed documents. When it fills
up, the documents in the buffer are written to a segment on disk. It is divided
between all shards on the node.</p>
<p>The following settings are <em>static</em> and must be configured on every data node
in the cluster:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.memory.index_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Accepts either a percentage or a byte size value. It defaults to <code class="literal">10%</code>,
meaning that <code class="literal">10%</code> of the total heap allocated to a node will be used as the
indexing buffer size shared across all shards.
</dd>
<dt>
<span class="term">
<code class="literal">indices.memory.min_index_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If the <code class="literal">index_buffer_size</code> is specified as a percentage, then this
setting can be used to specify an absolute minimum. Defaults to <code class="literal">48mb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">indices.memory.max_index_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If the <code class="literal">index_buffer_size</code> is specified as a percentage, then this
setting can be used to specify an absolute maximum. Defaults to unbounded.
</dd>
</dl>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="license-settings"></a>License settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/license-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>You can configure this licensing setting in the <code class="literal">elasticsearch.yml</code> file.
For more information, see
<a href="https://www.elastic.co/guide/en/kibana/8.9/managing-licenses.html" class="ulink" target="_top">License management</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.license.self_generated.type</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">basic</code> (default) to enable basic X-Pack features.<br>
</p>
<p>If set to <code class="literal">trial</code>, the self-generated license gives access only to all the features
of a x-pack for 30 days. You can later downgrade the cluster to a basic license if
needed.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-gateway"></a>Local gateway settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/gateway.asciidoc">edit</a></h2>
</div></div></div>
<p>The local gateway stores the cluster state and shard data across full
cluster restarts.</p>
<p>The following <em>static</em> settings, which must be set on every master node,
control how long a freshly elected master should wait before it tries to
recover the cluster state and the cluster&#8217;s data.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings only take effect on a full cluster restart.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">gateway.expected_data_nodes</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Number of data nodes expected in the cluster.
Recovery of local shards begins when the expected number of
data nodes join the cluster. Defaults to <code class="literal">0</code>.
</dd>
<dt>
<span class="term">
<code class="literal">gateway.recover_after_time</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If the expected number of nodes is not achieved, the recovery process waits
for the configured amount of time before trying to recover.
Defaults to <code class="literal">5m</code>.
</p>
<p>Once the <code class="literal">recover_after_time</code> duration has timed out, recovery will start
as long as the following condition is met:</p>
</dd>
<dt>
<span class="term">
<code class="literal">gateway.recover_after_data_nodes</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Recover as long as this many data nodes have joined the cluster.
</dd>
</dl>
</div>
<p>These settings can be configured in <code class="literal">elasticsearch.yml</code> as follows:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">gateway.expected_data_nodes: 3
gateway.recover_after_time: 600s
gateway.recover_after_data_nodes: 3</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-indices"></a>Dangling indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/gateway.asciidoc">edit</a></h3>
</div></div></div>
<p>When a node joins the cluster, if it finds any shards stored in its local
data directory that do not already exist in the cluster, it will consider
those shards to belong to a "dangling" index. You can list, import or
delete dangling indices using the <a class="xref" href="indices.html#dangling-indices-api" title="Dangling indices:">Dangling indices
API</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The API cannot offer any guarantees as to whether the imported data
truly represents the latest state of the data when the index was still part
of the cluster.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="logging"></a>Logging<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/logging-config.asciidoc">edit</a></h2>
</div></div></div>
<p>You can use Elasticsearch&#8217;s application logs to monitor your cluster and diagnose issues.
If you run Elasticsearch as a service, the default location of the logs varies based on
your platform and installation method:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="logs">
    <button role="tab"
            aria-selected="true"
            aria-controls="docker-tab-logs"
            id="docker-logs">
      Docker
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="deb-tab-logs"
            id="deb-logs">
      Debian (APT)
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-logs"
            id="rpm-logs"
            tabindex="-1">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-logs"
            id="mac-logs"
            tabindex="-1">
      macOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-logs"
            id="linux-logs"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-zip-tab-logs"
            id="win-zip-logs"
            tabindex="-1">
      Windows .zip
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="docker-tab-logs"
       aria-labelledby="docker-logs">
<p>On <a class="xref" href="install-elasticsearch.html#docker" title="Install Elasticsearch with Docker">Docker</a>, log messages go to the console and are handled by the
configured Docker logging driver. To access logs, run <code class="literal">docker logs</code>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-logs"
       aria-labelledby="deb-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#deb" title="Install Elasticsearch with Debian Package">Debian installations</a>, Elasticsearch writes logs to <code class="literal">/var/log/elasticsearch</code>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-logs"
       aria-labelledby="rpm-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#rpm" title="Install Elasticsearch with RPM">RPM installations</a>, Elasticsearch writes logs to <code class="literal">/var/log/elasticsearch</code>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-logs"
       aria-labelledby="mac-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#targz" title="Install Elasticsearch from archive on Linux or MacOS">macOS <code class="literal">.tar.gz</code></a> installations, Elasticsearch writes logs to
<code class="literal">$ES_HOME/logs</code>.</p>
<p>Files in <code class="literal">$ES_HOME</code> risk deletion during an upgrade. In production, we strongly
recommend you set <code class="literal">path.logs</code> to a location outside of <code class="literal">$ES_HOME</code>.
See <a class="xref" href="settings.html#path-settings" title="Path settings">Path settings</a>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-logs"
       aria-labelledby="linux-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#targz" title="Install Elasticsearch from archive on Linux or MacOS">Linux <code class="literal">.tar.gz</code></a> installations, Elasticsearch writes logs to
<code class="literal">$ES_HOME/logs</code>.</p>
<p>Files in <code class="literal">$ES_HOME</code> risk deletion during an upgrade. In production, we strongly
recommend you set <code class="literal">path.logs</code> to a location outside of <code class="literal">$ES_HOME</code>.
See <a class="xref" href="settings.html#path-settings" title="Path settings">Path settings</a>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-zip-tab-logs"
       aria-labelledby="win-zip-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#zip-windows" title="Install Elasticsearch with .zip on Windows">Windows <code class="literal">.zip</code></a> installations, Elasticsearch writes logs to
<code class="literal">%ES_HOME%\logs</code>.</p>
<p>Files in <code class="literal">%ES_HOME%</code> risk deletion during an upgrade. In production, we strongly
recommend you set <code class="literal">path.logs</code> to a location outside of <code class="literal">%ES_HOME%`</code>.
See <a class="xref" href="settings.html#path-settings" title="Path settings">Path settings</a>.</p>
  </div>
</div>
<p>If you run Elasticsearch from the command line, Elasticsearch prints logs to the standard output
(<code class="literal">stdout</code>).</p>
<h3><a id="loggin-configuration"></a>Logging configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/logging-config.asciidoc">edit</a></h3>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic strongly recommends using the Log4j 2 configuration that is shipped by default.</p>
</div>
</div>
<p>Elasticsearch uses <a href="https://logging.apache.org/log4j/2.x/" class="ulink" target="_top">Log4j 2</a> for
logging. Log4j 2 can be configured using the log4j2.properties
file. Elasticsearch exposes three properties, <code class="literal">${sys:es.logs.base_path}</code>,
<code class="literal">${sys:es.logs.cluster_name}</code>, and <code class="literal">${sys:es.logs.node_name}</code> that can be
referenced in the configuration file to determine the location of the log
files. The property <code class="literal">${sys:es.logs.base_path}</code> will resolve to the log directory,
<code class="literal">${sys:es.logs.cluster_name}</code> will resolve to the cluster name (used as the
prefix of log filenames in the default configuration), and
<code class="literal">${sys:es.logs.node_name}</code> will resolve to the node name (if the node name is
explicitly set).</p>
<p>For example, if your log directory (<code class="literal">path.logs</code>) is <code class="literal">/var/log/elasticsearch</code> and
your cluster is named <code class="literal">production</code> then <code class="literal">${sys:es.logs.base_path}</code> will resolve
to <code class="literal">/var/log/elasticsearch</code> and
<code class="literal">${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}.log</code>
will resolve to <code class="literal">/var/log/elasticsearch/production.log</code>.</p>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">######## Server JSON ############################
appender.rolling.type = RollingFile <a id="CO15-1"></a><i class="conum" data-value="1"></i>
appender.rolling.name = rolling
appender.rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_server.json <a id="CO15-2"></a><i class="conum" data-value="2"></i>
appender.rolling.layout.type = ECSJsonLayout <a id="CO15-3"></a><i class="conum" data-value="3"></i>
appender.rolling.layout.dataset = elasticsearch.server <a id="CO15-4"></a><i class="conum" data-value="4"></i>
appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.json.gz <a id="CO15-5"></a><i class="conum" data-value="5"></i>
appender.rolling.policies.type = Policies
appender.rolling.policies.time.type = TimeBasedTriggeringPolicy <a id="CO15-6"></a><i class="conum" data-value="6"></i>
appender.rolling.policies.time.interval = 1 <a id="CO15-7"></a><i class="conum" data-value="7"></i>
appender.rolling.policies.time.modulate = true <a id="CO15-8"></a><i class="conum" data-value="8"></i>
appender.rolling.policies.size.type = SizeBasedTriggeringPolicy <a id="CO15-9"></a><i class="conum" data-value="9"></i>
appender.rolling.policies.size.size = 256MB <a id="CO15-10"></a><i class="conum" data-value="10"></i>
appender.rolling.strategy.type = DefaultRolloverStrategy
appender.rolling.strategy.fileIndex = nomax
appender.rolling.strategy.action.type = Delete <a id="CO15-11"></a><i class="conum" data-value="11"></i>
appender.rolling.strategy.action.basepath = ${sys:es.logs.base_path}
appender.rolling.strategy.action.condition.type = IfFileName <a id="CO15-12"></a><i class="conum" data-value="12"></i>
appender.rolling.strategy.action.condition.glob = ${sys:es.logs.cluster_name}-* <a id="CO15-13"></a><i class="conum" data-value="13"></i>
appender.rolling.strategy.action.condition.nested_condition.type = IfAccumulatedFileSize <a id="CO15-14"></a><i class="conum" data-value="14"></i>
appender.rolling.strategy.action.condition.nested_condition.exceeds = 2GB <a id="CO15-15"></a><i class="conum" data-value="15"></i>
################################################</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configure the <code class="literal">RollingFile</code> appender</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Log to <code class="literal">/var/log/elasticsearch/production_server.json</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use JSON layout.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">dataset</code> is a flag populating the <code class="literal">event.dataset</code> field in a <code class="literal">ECSJsonLayout</code>.
It can be used to distinguish different types of logs more easily when parsing them.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>Roll logs to <code class="literal">/var/log/elasticsearch/production-yyyy-MM-dd-i.json</code>; logs
will be compressed on each roll and <code class="literal">i</code> will be incremented</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use a time-based roll policy</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-7"><i class="conum" data-value="7"></i></a></p>
</td>
<td align="left" valign="top">
<p>Roll logs on a daily basis</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-8"><i class="conum" data-value="8"></i></a></p>
</td>
<td align="left" valign="top">
<p>Align rolls on the day boundary (as opposed to rolling every twenty-four
hours)</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-9"><i class="conum" data-value="9"></i></a></p>
</td>
<td align="left" valign="top">
<p>Using a size-based roll policy</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-10"><i class="conum" data-value="10"></i></a></p>
</td>
<td align="left" valign="top">
<p>Roll logs after 256 MB</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-11"><i class="conum" data-value="11"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use a delete action when rolling logs</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-12"><i class="conum" data-value="12"></i></a></p>
</td>
<td align="left" valign="top">
<p>Only delete logs matching a file pattern</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-13"><i class="conum" data-value="13"></i></a></p>
</td>
<td align="left" valign="top">
<p>The pattern is to only delete the main logs</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-14"><i class="conum" data-value="14"></i></a></p>
</td>
<td align="left" valign="top">
<p>Only delete if we have accumulated too many compressed logs</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO15-15"><i class="conum" data-value="15"></i></a></p>
</td>
<td align="left" valign="top">
<p>The size condition on the compressed logs is 2 GB</p>
</td>
</tr>
</table>
</div>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">######## Server -  old style pattern ###########
appender.rolling_old.type = RollingFile
appender.rolling_old.name = rolling_old
appender.rolling_old.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_server.log <a id="CO16-1"></a><i class="conum" data-value="1"></i>
appender.rolling_old.layout.type = PatternLayout
appender.rolling_old.layout.pattern = [%d{ISO8601}][%-5p][%-25c{1.}] [%node_name]%marker %m%n
appender.rolling_old.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.old_log.gz</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO16-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The configuration for <code class="literal">old style</code> pattern appenders. These logs will be saved in <code class="literal">*.log</code> files and if archived will be in <code class="literal">*
.log.gz</code> files. Note that these should be considered deprecated and will be removed in the future.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Log4j&#8217;s configuration parsing gets confused by any extraneous whitespace;
if you copy and paste any Log4j settings on this page, or enter any Log4j
configuration in general, be sure to trim any leading and trailing whitespace.</p>
</div>
</div>
<p>Note than you can replace <code class="literal">.gz</code> by <code class="literal">.zip</code> in <code class="literal">appender.rolling.filePattern</code> to
compress the rolled logs using the zip format. If you remove the <code class="literal">.gz</code>
extension then logs will not be compressed as they are rolled.</p>
<p>If you want to retain log files for a specified period of time, you can use a
rollover strategy with a delete action.</p>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">appender.rolling.strategy.type = DefaultRolloverStrategy <a id="CO17-1"></a><i class="conum" data-value="1"></i>
appender.rolling.strategy.action.type = Delete <a id="CO17-2"></a><i class="conum" data-value="2"></i>
appender.rolling.strategy.action.basepath = ${sys:es.logs.base_path} <a id="CO17-3"></a><i class="conum" data-value="3"></i>
appender.rolling.strategy.action.condition.type = IfFileName <a id="CO17-4"></a><i class="conum" data-value="4"></i>
appender.rolling.strategy.action.condition.glob = ${sys:es.logs.cluster_name}-* <a id="CO17-5"></a><i class="conum" data-value="5"></i>
appender.rolling.strategy.action.condition.nested_condition.type = IfLastModified <a id="CO17-6"></a><i class="conum" data-value="6"></i>
appender.rolling.strategy.action.condition.nested_condition.age = 7D <a id="CO17-7"></a><i class="conum" data-value="7"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configure the <code class="literal">DefaultRolloverStrategy</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configure the <code class="literal">Delete</code> action for handling rollovers</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The base path to the Elasticsearch logs</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The condition to apply when handling rollovers</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>Delete files from the base path matching the glob
<code class="literal">${sys:es.logs.cluster_name}-*</code>; this is the glob that log files are rolled
to; this is needed to only delete the rolled Elasticsearch logs but not also
delete the deprecation and slow logs</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>A nested condition to apply to files matching the glob</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-7"><i class="conum" data-value="7"></i></a></p>
</td>
<td align="left" valign="top">
<p>Retain logs for seven days</p>
</td>
</tr>
</table>
</div>
<p>Multiple configuration files can be loaded (in which case they will get merged)
as long as they are named <code class="literal">log4j2.properties</code> and have the Elasticsearch config
directory as an ancestor; this is useful for plugins that expose additional
loggers. The logger section contains the java packages and their corresponding
log level. The appender section contains the destinations for the logs.
Extensive information on how to customize logging and all the supported
appenders can be found on the
<a href="https://logging.apache.org/log4j/2.x/manual/configuration.html" class="ulink" target="_top">Log4j
documentation</a>.</p>
<h3><a id="configuring-logging-levels"></a>Configuring logging levels<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/logging-config.asciidoc">edit</a></h3>
<p>Each Java package in the <a href="https://github.com/elastic/elasticsearch/" class="ulink" target="_top">Elasticsearch source code</a> has a related logger. For
example, the <code class="literal">org.elasticsearch.discovery</code> package has
<code class="literal">logger.org.elasticsearch.discovery</code> for logs related to the
<a class="xref" href="modules-discovery.html#discovery-hosts-providers" title="Discovery">discovery</a> process.</p>
<p>To get more or less verbose logs, use the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster
update settings API</a> to change the related logger&#8217;s log level. Each logger
accepts Log4j 2&#8217;s built-in log levels, from least to most verbose: <code class="literal">OFF</code>,
<code class="literal">FATAL</code>, <code class="literal">ERROR</code>, <code class="literal">WARN</code>, <code class="literal">INFO</code>, <code class="literal">DEBUG</code>, and <code class="literal">TRACE</code>. The default log level is
<code class="literal">INFO</code>. Messages logged at higher verbosity levels (<code class="literal">DEBUG</code> and <code class="literal">TRACE</code>) are
only intended for expert use.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
  "persistent": {
    "logger.org.elasticsearch.discovery": "DEBUG"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/14.console"></div>
<p>To reset a logger&#8217;s verbosity to its default level, set the logger setting to
<code class="literal">null</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
  "persistent": {
    "logger.org.elasticsearch.discovery": null
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/15.console"></div>
<p>Other ways to change log levels include:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p><code class="literal">elasticsearch.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">logger.org.elasticsearch.discovery: DEBUG</pre>
</div>
<p>This is most appropriate when debugging a problem on a single node.</p>
</li>
<li class="listitem">
<p><code class="literal">log4j2.properties</code>:</p>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">logger.discovery.name = org.elasticsearch.discovery
logger.discovery.level = debug</pre>
</div>
<p>This is most appropriate when you already need to change your Log4j 2
configuration for other reasons. For example, you may want to send logs for a
particular logger to another file. However, these use cases are rare.</p>
</li>
</ol>
</div>
<h3><a id="deprecation-logging"></a>Deprecation logging<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/logging-config.asciidoc">edit</a></h3>
<p>Elasticsearch also writes deprecation logs to the log directory. These logs record a
message when you use deprecated Elasticsearch functionality. You can use the deprecation
logs to update your application before upgrading Elasticsearch to a new major version.</p>
<p>By default, Elasticsearch rolls and compresses deprecation logs at 1GB. The default
configuration preserves a maximum of five log files: four rolled logs and an
active log.</p>
<p>Elasticsearch emits deprecation log messages at the <code class="literal">CRITICAL</code> level. Those messages
are indicating that a used deprecation feature will be removed in a next major
version. Deprecation log messages at the <code class="literal">WARN</code> level indicates that a less
critical feature was used, it won&#8217;t be removed in next major version, but might
be removed in the future.</p>
<p>To stop writing deprecation log messages, set <code class="literal">logger.deprecation.level</code>
to <code class="literal">OFF</code> in <code class="literal">log4j2.properties</code> :</p>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">logger.deprecation.level = OFF</pre>
</div>
<p>Alternatively, you can change the logging level dynamically:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
  "persistent": {
    "logger.org.elasticsearch.deprecation": "OFF"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/16.console"></div>
<p>Refer to <a class="xref" href="settings.html#configuring-logging-levels" title="Configuring logging levels">Configuring logging levels</a>.</p>
<p>You can identify what is triggering deprecated functionality if <code class="literal">X-Opaque-Id</code> was used as an HTTP header.
The user ID is included in the <code class="literal">X-Opaque-ID</code> field in deprecation JSON logs.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "type": "deprecation",
  "timestamp": "2019-08-30T12:07:07,126+02:00",
  "level": "WARN",
  "component": "o.e.d.r.a.a.i.RestCreateIndexAction",
  "cluster.name": "distribution_run",
  "node.name": "node-0",
  "message": "[types removal] Using include_type_name in create index requests is deprecated. The parameter will be removed in the next major version.",
  "x-opaque-id": "MY_USER_ID",
  "cluster.uuid": "Aq-c-PAeQiK3tfBYtig9Bw",
  "node.id": "D7fUYfnfTLa2D7y-xw6tZg"
}</pre>
</div>
<p>Deprecation logs can be indexed into <code class="literal">.logs-deprecation.elasticsearch-default</code> data stream
<code class="literal">cluster.deprecation_indexing.enabled</code> setting is set to true.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_deprecation_logs_throttling"></a>Deprecation logs throttling<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/logging-config.asciidoc">edit</a></h3>
</div></div></div>
<p>Deprecation logs are deduplicated based on a deprecated feature key
and x-opaque-id so that if a feature is repeatedly used, it will not overload the deprecation logs.
This applies to both indexed deprecation logs and logs emitted to log files.
You can disable the use of <code class="literal">x-opaque-id</code> in throttling by changing
<code class="literal">cluster.deprecation_indexing.x_opaque_id_used.enabled</code> to false,
refer to this class <a href="https://artifacts.elastic.co/javadoc/org/elasticsearch/elasticsearch/8.9.2/org.elasticsearch.server/org/elasticsearch/common/logging/RateLimitingFilter.html" class="ulink" target="_top">javadoc</a> for more details.</p>
<h3><a id="json-logging"></a>JSON log format<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/logging-config.asciidoc">edit</a></h3>
<p>To make parsing Elasticsearch logs easier, logs are now printed in a JSON format.
This is configured by a Log4J layout property <code class="literal">appender.rolling.layout.type = ECSJsonLayout</code>.
This layout requires a <code class="literal">dataset</code> attribute to be set which is used to distinguish
logs streams when parsing.</p>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">appender.rolling.layout.type = ECSJsonLayout
appender.rolling.layout.dataset = elasticsearch.server</pre>
</div>
<p>Each line contains a single JSON document with the properties configured in <code class="literal">ECSJsonLayout</code>.
See this class <a href="https://artifacts.elastic.co/javadoc/org/elasticsearch/elasticsearch/8.9.2/org.elasticsearch.server/org/elasticsearch/common/logging/ESJsonLayout.html" class="ulink" target="_top">javadoc</a> for more details.
However if a JSON document contains an exception, it will be printed over multiple lines.
The first line will contain regular properties and subsequent lines will contain the
stacktrace formatted as a JSON array.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can still use your own custom layout. To do that replace the line
<code class="literal">appender.rolling.layout.type</code> with a different layout. See sample below:</p>
</div>
</div>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">appender.rolling.type = RollingFile
appender.rolling.name = rolling
appender.rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_server.log
appender.rolling.layout.type = PatternLayout
appender.rolling.layout.pattern = [%d{ISO8601}][%-5p][%-25c{1.}] [%node_name]%marker %.-10000m%n
appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.log.gz</pre>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-settings"></a>Machine learning settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ml-settings.asciidoc">edit</a></h2>
</div></div></div>

<p><a id="ml-settings-description"></a>You do not need to configure any settings to use machine learning. It is enabled by default.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Machine learning uses SSE4.2 instructions, so it works only on machines whose
CPUs <a href="https://en.wikipedia.org/wiki/SSE4#Supporting_CPUs" class="ulink" target="_top">support</a> SSE4.2. If you run Elasticsearch on older
hardware, you must disable machine learning (by setting <code class="literal">xpack.ml.enabled</code> to <code class="literal">false</code>).</p>
</div>
</div>
<h4><a id="general-ml-settings"></a>General machine learning settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ml-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">node.roles: [ ml ]</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Set <code class="literal">node.roles</code> to contain <code class="literal">ml</code> to identify
the node as a <em>machine learning node</em>. If you want to run machine learning jobs, there must be at least
one machine learning node in your cluster.
</p>
<p>If you set <code class="literal">node.roles</code>, you must explicitly specify all the required roles for
the node. To learn more, refer to <a class="xref" href="settings.html#modules-node" title="Node">Node</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
On dedicated coordinating nodes or dedicated master nodes, do not set
the <code class="literal">ml</code> role.
</li>
<li class="listitem">
It is strongly recommended that dedicated machine learning nodes also have the
<code class="literal">remote_cluster_client</code> role; otherwise, cross-cluster search fails when used in machine learning jobs or
datafeeds. See <a class="xref" href="settings.html#remote-node" title="Remote-eligible node">Remote-eligible node</a>.
</li>
</ul>
</div>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The default value (<code class="literal">true</code>) enables machine learning APIs
on the node.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you want to use machine learning features in your cluster, it is recommended
that you use the default value for this setting on all nodes.</p>
</div>
</div>
<p>If set to <code class="literal">false</code>, the machine learning APIs are disabled on the node. For example, the node
cannot open jobs, start datafeeds, receive transport (internal) communication
requests, or requests from clients (including Kibana) related to machine learning APIs.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.inference_model.cache_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The maximum inference cache size allowed.
The inference cache exists in the JVM heap on each ingest node. The cache
affords faster processing times for the <code class="literal">inference</code> processor. The value can be
a static byte sized value (such as <code class="literal">2gb</code>) or a percentage of total allocated
heap. Defaults to <code class="literal">40%</code>. See also <a class="xref" href="settings.html#model-inference-circuit-breaker" title="Machine learning circuit breaker settings">Machine learning circuit breaker settings</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-interference-model-ttl"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.ml.inference_model.time_to_live</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The time to live (TTL) for trained models in
the inference model cache. The TTL is calculated from last access. Users of the
cache (such as the inference processor or inference aggregator) cache a model on
its first use and reset the TTL on every use. If a cached model is not accessed
for the duration of the TTL, it is flagged for eviction from the cache. If a
document is processed later, the model is again loaded into the cache. To update
this setting in Elasticsearch Service, see
<a href="https://www.elastic.co/guide/en/cloud/current/ec-add-user-settings.html" class="ulink" target="_top">Add Elasticsearch user settings</a>. Defaults to <code class="literal">5m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_inference_processors</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The total number of <code class="literal">inference</code> type
processors allowed across all ingest pipelines. Once the limit is reached,
adding an <code class="literal">inference</code> processor to a pipeline is disallowed. Defaults to <code class="literal">50</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_machine_memory_percent</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum percentage of the machine&#8217;s
memory that machine learning may use for running analytics processes. These processes are
separate to the Elasticsearch JVM. The limit is based on the total memory of the machine,
not current free memory. Jobs are not allocated to a node if doing so would
cause the estimated memory use of machine learning jobs to exceed the limit. When the
operator privileges feature is enabled, this setting can be updated only by operator
users. The minimum value is <code class="literal">5</code>; the maximum value is <code class="literal">200</code>. Defaults to <code class="literal">30</code>.
</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Do not configure this setting to a value higher than the amount of memory
left over after running the Elasticsearch JVM unless you have enough swap space to
accommodate it and have determined this is an appropriate configuration for a
specialist use case. The maximum setting value is for the special case where it
has been determined that using swap space for machine learning jobs is acceptable. The
general best practice is to not use swap on Elasticsearch nodes.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_model_memory_limit</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum <code class="literal">model_memory_limit</code> property
value that can be set for any machine learning jobs in this cluster. If you try to create a
job with a <code class="literal">model_memory_limit</code> property value that is greater than this setting
value, an error occurs. Existing jobs are not affected when you update this
setting. If this setting is <code class="literal">0</code> or unset, there is no maximum
<code class="literal">model_memory_limit</code> value. If there are no nodes that meet the memory
requirements for a job, this lack of a maximum memory limit means it&#8217;s possible
to create jobs that cannot be assigned to any available nodes. For more
information about the <code class="literal">model_memory_limit</code> property, see
<a class="xref" href="ml-ad-apis.html#ml-put-job" title="Create anomaly detection jobs API">Create anomaly detection jobs</a> or <a class="xref" href="ml-df-analytics-apis.html#put-dfanalytics" title="Create data frame analytics jobs API">Create data frame analytics jobs</a>. Defaults to <code class="literal">0</code> if
<code class="literal">xpack.ml.use_auto_machine_memory_percent</code> is <code class="literal">false</code>. If
<code class="literal">xpack.ml.use_auto_machine_memory_percent</code> is <code class="literal">true</code> and
<code class="literal">xpack.ml.max_model_memory_limit</code> is not explicitly set then it will default to
the largest <code class="literal">model_memory_limit</code> that could be assigned in the cluster.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack.ml.max_open_jobs"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.ml.max_open_jobs</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum number of jobs that can run
simultaneously on a node. In this context, jobs include both anomaly detection jobs and
data frame analytics jobs. The maximum number of jobs is also constrained by memory
usage. Thus if the estimated memory usage of the jobs would be higher than
allowed, fewer jobs will run on a node. Prior to version 7.1, this setting was a
per-node non-dynamic setting. It became a cluster-wide dynamic setting in
version 7.1. As a result, changes to its value after node startup are used only
after every node in the cluster is running version 7.1 or higher. The minimum
value is <code class="literal">1</code>; the maximum value is <code class="literal">512</code>. Defaults to <code class="literal">512</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.nightly_maintenance_requests_per_second</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The rate at which the nightly maintenance
task deletes expired model snapshots and results. The setting is a proxy to the
<a class="xref" href="docs.html#docs-delete-by-query-throttle" title="Throttling delete requests"><code class="literal">requests_per_second</code></a> parameter used in the
delete by query requests and controls throttling. When the operator privileges feature is
enabled, this setting can be updated only by operator users. Valid values must
be greater than <code class="literal">0.0</code> or equal to <code class="literal">-1.0</code>, where <code class="literal">-1.0</code> means a default value is
used. Defaults to <code class="literal">-1.0</code>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.node_concurrent_job_allocations</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum number of jobs that can
concurrently be in the <code class="literal">opening</code> state on each node. Typically, jobs spend a
small amount of time in this state before they move to <code class="literal">open</code> state. Jobs that
must restore large models when they are opening spend more time in the <code class="literal">opening</code>
state. When the operator privileges feature is enabled, this setting can be updated only
by operator users. Defaults to <code class="literal">2</code>.
</dd>
</dl>
</div>
<h4><a id="advanced-ml-settings"></a>Advanced machine learning settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ml-settings.asciidoc">edit</a></h4>
<p>These settings are for advanced use cases; the default values are generally
sufficient:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.ml.enable_config_migration</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Reserved. When the operator privileges feature is
enabled, this setting can be updated only by operator users.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_anomaly_records</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum number of records that are
output per bucket. Defaults to <code class="literal">500</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_lazy_ml_nodes</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The number of lazily spun up machine learning nodes.
Useful in situations where machine learning nodes are not desired until the first machine learning job
opens. If the current number of machine learning nodes is greater than or equal to this
setting, it is assumed that there are no more lazy nodes available as the
desired number of nodes have already been provisioned. If a job is opened and
this setting has a value greater than zero and there are no nodes that can
accept the job, the job stays in the <code class="literal">OPENING</code> state until a new machine learning node is
added to the cluster and the job is assigned to run on that node. When the
operator privileges feature is enabled, this setting can be updated only by operator
users. Defaults to <code class="literal">0</code>.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This setting assumes some external process is capable of adding machine learning
nodes to the cluster. This setting is only useful when used in conjunction with
such an external process.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_ml_node_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
The maximum node size for machine learning nodes in a deployment that supports automatic
cluster scaling. If you set it to the maximum possible size of future machine learning nodes,
when a machine learning job is assigned to a lazy node it can check (and fail quickly) when
scaling cannot support the size of the job. When the operator privileges feature is
enabled, this setting can be updated only by operator users. Defaults to <code class="literal">0b</code>,
which means it will be assumed that automatic cluster scaling can add
arbitrarily large nodes to the cluster.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack.ml.model_repository"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.ml.model_repository</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
The location of the machine learning model repository where the model artifact files are
available in case of a model installation in a restricted or closed network.
<code class="literal">xpack.ml.model_repository</code> can be a string of a file location or an HTTP/HTTPS
server. Example values are:
</p>
<pre class="screen">xpack.ml.model_repository: file://${path.home}/config/models/</pre>
<p>or</p>
<pre class="screen">xpack.ml.model_repository: https://my-custom-backend</pre>
<p>If <code class="literal">xpack.ml.model_repository</code> is a file location, it must point to a
subdirectory of the <code class="literal">config</code> directory of Elasticsearch.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.persist_results_max_retries</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum number of times to retry bulk
indexing requests that fail while processing machine learning results. If the limit is
reached, the machine learning job stops processing data and its status is <code class="literal">failed</code>. When the
operator privileges feature is enabled, this setting can be updated only by operator
users. The minimum value is <code class="literal">0</code>; the maximum value is <code class="literal">50</code>. Defaults to <code class="literal">20</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.process_connect_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The connection timeout for machine learning processes
that run separately from the Elasticsearch JVM. When such processes are started they must
connect to the Elasticsearch JVM. If the process does not connect within the time period
specified by this setting then the process is assumed to have failed. When the
operator privileges feature is enabled, this setting can be updated only by operator
users. The minimum value is <code class="literal">5s</code>. Defaults to <code class="literal">10s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.use_auto_machine_memory_percent</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) If this setting is <code class="literal">true</code>, the
<code class="literal">xpack.ml.max_machine_memory_percent</code> setting is ignored. Instead, the maximum
percentage of the machine&#8217;s memory that can be used for running machine learning analytics
processes is calculated automatically and takes into account the total node size
and the size of the JVM on the node. When the operator privileges feature is enabled, this
setting can be updated only by operator users. The default value is <code class="literal">false</code>.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you do not have dedicated machine learning nodes (that is to say, the node has
multiple roles), do not enable this setting. Its calculations assume that machine learning
analytics are the main purpose of the node.
</li>
<li class="listitem">
The calculation assumes that dedicated machine learning nodes have at least
<code class="literal">256MB</code> memory reserved outside of the JVM. If you have tiny machine learning
nodes in your cluster, you shouldn&#8217;t use this setting.
</li>
</ul>
</div>
</div>
</div>
<p>If this setting is <code class="literal">true</code> it also affects the default value for
<code class="literal">xpack.ml.max_model_memory_limit</code>. In this case <code class="literal">xpack.ml.max_model_memory_limit</code>
defaults to the largest size that could be assigned in the current cluster.</p>
</dd>
</dl>
</div>
<h4><a id="model-inference-circuit-breaker"></a>Machine learning circuit breaker settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ml-settings.asciidoc">edit</a></h4>
<p>The relevant circuit breaker settings can be found in the <a class="xref" href="settings.html#circuit-breakers-page-model-inference" title="Machine learning circuit breaker">Circuit Breakers page</a>.</p>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="monitoring-settings"></a>Monitoring settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h2>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 7.16.</h3>
<p>Using the Elasticsearch Monitoring plugin to collect and ship monitoring data is deprecated. Elastic Agent and Metricbeat are the recommended methods for collecting and shipping monitoring data to a monitoring cluster. If you previously configured legacy collection methods, you should migrate to using <a class="xref" href="configuring-elastic-agent.html" title="Collecting Elasticsearch monitoring data with Elastic Agent">Elastic Agent</a> or <a class="xref" href="configuring-metricbeat.html" title="Collecting Elasticsearch monitoring data with Metricbeat">Metricbeat</a> collection methods.</p>
</div>
</div>
<p>By default, Elasticsearch monitoring features are enabled but data collection is disabled.
To enable data collection, use the <code class="literal">xpack.monitoring.collection.enabled</code> setting.</p>
<p>Except where noted otherwise, these settings can be dynamically updated on a
live cluster with the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster-update-settings</a> API.</p>
<p>To adjust how monitoring data is displayed in the monitoring UI, configure
<a href="https://www.elastic.co/guide/en/kibana/8.9/monitoring-settings-kb.html" class="ulink" target="_top"><code class="literal">xpack.monitoring</code> settings</a> in
<code class="literal">kibana.yml</code>. To control how monitoring data is collected from Logstash,
configure monitoring settings in <code class="literal">logstash.yml</code>.</p>
<p>For more information, see <a class="xref" href="monitor-elasticsearch-cluster.html" title="Monitor a cluster">Monitor a cluster</a>.</p>
<h4><a id="general-monitoring-settings"></a>General monitoring settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.enabled</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.8.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.8.0. Basic License features should always be enabled
</span>
</span>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) This deprecated setting has no effect.
</dd>
</dl>
</div>
<h4><a id="monitoring-collection-settings"></a>Monitoring collection settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
<p><a id="monitoring-settings-description"></a>The <code class="literal">xpack.monitoring.collection</code> settings control how data is collected from
your Elasticsearch nodes.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>  Set to <code class="literal">true</code> to enable the collection of
monitoring data. When this setting is <code class="literal">false</code> (default), Elasticsearch monitoring data is
not collected and all monitoring data from other sources such as Kibana, Beats,
and Logstash is ignored.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-monitoring-collection-interval"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.interval</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">6.3.0</span>]
<span class="Admonishment-detail">
Deprecated in 6.3.0. Use <code class="literal">xpack.monitoring.collection.enabled</code> set to <code class="literal">false</code> instead.
</span>
</span>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Setting to <code class="literal">-1</code> to disable data collection
is no longer supported beginning with 7.0.0.
</p>
<p>Controls how often data samples are collected. Defaults to <code class="literal">10s</code>. If you
modify the collection interval, set the <code class="literal">xpack.monitoring.min_interval_seconds</code>
option in <code class="literal">kibana.yml</code> to the same value.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.collection.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Controls whether statistics about your
Elasticsearch cluster should be collected. Defaults to <code class="literal">true</code>. This is different from
<code class="literal">xpack.monitoring.collection.enabled</code>, which allows you to enable or disable all
monitoring collection. However, this setting simply disables the collection of
Elasticsearch data while still allowing other data (e.g., Kibana, Logstash, Beats, or APM
Server monitoring data) to pass through this cluster.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.cluster.stats.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Timeout for collecting the cluster
statistics, in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">10s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.node.stats.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Timeout for collecting the node statistics,
in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">10s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.indices</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Controls which indices the
monitoring features collect data from. Defaults to all indices. Specify the index
names as a comma-separated list, for example <code class="literal">test1,test2,test3</code>. Names can
include wildcards, for example <code class="literal">test*</code>. You can explicitly exclude indices by
prepending <code class="literal">-</code>. For example <code class="literal">test*,-test3</code> will monitor all indexes that start
with <code class="literal">test</code> except for <code class="literal">test3</code>. System indices like .security* or .kibana*
always start with a <code class="literal">.</code> and generally should be monitored. Consider adding <code class="literal">.*</code>
to the list of indices ensure monitoring of system indices. For example:
<code class="literal">.*,test*,-test3</code>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.index.stats.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Timeout for collecting index statistics,
in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">10s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.index.recovery.active_only</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Controls whether or not all recoveries are
collected. Set to <code class="literal">true</code> to collect only active recoveries. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.index.recovery.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Timeout for collecting the recovery
information, in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">10s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-monitoring-history-duration"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.history.duration</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Retention duration beyond which the
indices created by a monitoring exporter are automatically deleted, in
<a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">7d</code> (7 days).
</p>
<p>This setting has a minimum value of <code class="literal">1d</code> (1 day) to ensure that something is
being monitored and it cannot be disabled.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This setting currently impacts only <code class="literal">local</code>-type exporters. Indices
created using the <code class="literal">http</code> exporter are not deleted automatically.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Configures where the agent stores monitoring
data. By default, the agent uses a local exporter that indexes monitoring data
on the cluster where it is installed. Use an HTTP exporter to send data to a
separate monitoring cluster. For more information, see
<a class="xref" href="settings.html#local-exporter-settings" title="Local exporter settings">Local exporter settings</a>,
<a class="xref" href="settings.html#http-exporter-settings" title="HTTP exporter settings">HTTP exporter settings</a>, and <a class="xref" href="how-monitoring-works.html" title="How monitoring works"><em>How it works</em></a>.
</dd>
</dl>
</div>
<h4><a id="local-exporter-settings"></a>Local exporter settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
<p>The <code class="literal">local</code> exporter is the default exporter used by monitoring features. As the
name is meant to imply, it exports data to the <em>local</em> cluster, which means that
there is not much needed to be configured.</p>
<p>If you do not supply <em>any</em> exporters, then the monitoring features automatically
create one for you. If any exporter is provided, then no default is added.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.exporters.my_local:
  type: local</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">type</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> The value for a Local exporter must always be <code class="literal">local</code> and it is required.
</dd>
<dt>
<span class="term">
<code class="literal">use_ingest</code>
</span>
</dt>
<dd>
Whether to supply a placeholder pipeline to the cluster and a pipeline processor
with every bulk request. The default value is <code class="literal">true</code>. If disabled, then it means
that it will not use pipelines, which means that a future release cannot
automatically upgrade bulk requests to future-proof them.
</dd>
<dt>
<span class="term">
<code class="literal">cluster_alerts.management.enabled</code>
</span>
</dt>
<dd>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Whether to create cluster alerts for this cluster. The default value is <code class="literal">true</code>.
To use this feature, Watcher must be enabled. If you have a basic license,
cluster alerts are not displayed.
</dd>
<dt>
<span class="term">
<code class="literal">wait_master.timeout</code>
</span>
</dt>
<dd>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Time to wait for the master node to setup <code class="literal">local</code> exporter for monitoring, in
<a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. After that wait period, the non-master nodes warn the
user for possible missing configuration. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
<h4><a id="http-exporter-settings"></a>HTTP exporter settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
<p>The following lists settings that can be supplied with the <code class="literal">http</code> exporter.
All settings are shown as what follows the name you select for your exporter:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.exporters.my_remote:
  type: http
  host: ["host:port", ...]</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">type</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> The value for an HTTP exporter must always be <code class="literal">http</code> and it is required.
</dd>
<dt>
<span class="term">
<code class="literal">host</code>
</span>
</dt>
<dd>
<p>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Host supports multiple formats, both as an array or as a single value. Supported
formats include <code class="literal">hostname</code>, <code class="literal">hostname:port</code>,
<code class="literal">http://hostname</code> <code class="literal">http://hostname:port</code>, <code class="literal">https://hostname</code>, and
<code class="literal">https://hostname:port</code>. Hosts cannot be assumed. The default scheme is always
<code class="literal">http</code> and the default port is always <code class="literal">9200</code> if not supplied as part of the
<code class="literal">host</code> string.
</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.exporters:
  example1:
    type: http
    host: "10.1.2.3"
  example2:
    type: http
    host: ["http://10.1.2.4"]
  example3:
    type: http
    host: ["10.1.2.5", "10.1.2.6"]
  example4:
    type: http
    host: ["https://10.1.2.3:9200"]</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">auth.username</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> The username is required if <code class="literal">auth.secure_password</code> is supplied.
</dd>
<dt>
<span class="term">
<code class="literal">auth.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> The
password for the <code class="literal">auth.username</code>.
</dd>
<dt>
<span class="term">
<code class="literal">connection.timeout</code>
</span>
</dt>
<dd>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Amount of time that the HTTP connection is supposed to wait for a socket to open
for the request, in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. The default value is <code class="literal">6s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">connection.read_timeout</code>
</span>
</dt>
<dd>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Amount of time that the HTTP connection is supposed to wait for a socket to
send back a response, in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. The default value is
<code class="literal">10 * connection.timeout</code> (<code class="literal">60s</code> if neither are set).
</dd>
<dt>
<span class="term">
<code class="literal">ssl</code>
</span>
</dt>
<dd>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Each HTTP exporter can define its own TLS / SSL settings or inherit them. See
<a class="xref" href="settings.html#ssl-monitoring-settings" title="X-Pack monitoring TLS/SSL settings">X-Pack monitoring TLS/SSL settings</a>.
</dd>
<dt>
<span class="term">
<code class="literal">proxy.base_path</code>
</span>
</dt>
<dd>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> The base path to prefix any outgoing request, such as <code class="literal">/base/path</code> (e.g., bulk
requests would then be sent as <code class="literal">/base/path/_bulk</code>). There is no default value.
</dd>
<dt>
<span class="term">
<code class="literal">headers</code>
</span>
</dt>
<dd>
<p>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Optional headers that are added to every request, which can assist with routing
requests through proxies.
</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.exporters.my_remote:
  headers:
    X-My-Array: [abc, def, xyz]
    X-My-Header: abc123</pre>
</div>
<p>Array-based headers are sent <code class="literal">n</code> times where <code class="literal">n</code> is the size of the array.
<code class="literal">Content-Type</code> and <code class="literal">Content-Length</code> cannot be set. Any headers created by the
monitoring agent will override anything defined here.</p>
</dd>
<dt>
<span class="term">
<code class="literal">index.name.time_format</code>
</span>
</dt>
<dd>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> A mechanism for changing the default date suffix for daily monitoring indices.
The default format is <code class="literal">yyyy.MM.dd</code>. For example, <code class="literal">.monitoring-es-7-2021.08.26</code>.
</dd>
<dt>
<span class="term">
<code class="literal">use_ingest</code>
</span>
</dt>
<dd>
Whether to supply a placeholder pipeline to the monitoring cluster and a
pipeline processor with every bulk request. The default value is <code class="literal">true</code>. If
disabled, then it means that it will not use pipelines, which means that a
future release cannot automatically upgrade bulk requests to future-proof them.
</dd>
<dt>
<span class="term">
<code class="literal">cluster_alerts.management.enabled</code>
</span>
</dt>
<dd>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Whether to create cluster alerts for this cluster. The default value is <code class="literal">true</code>.
To use this feature, Watcher must be enabled. If you have a basic license,
cluster alerts are not displayed.
</dd>
<dt>
<span class="term">
<code class="literal">cluster_alerts.management.blacklist</code>
</span>
</dt>
<dd>
<p>
 <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span> Prevents the creation of specific cluster alerts. It also removes any applicable
watches that already exist in the current cluster.
</p>
<p>You can add any of the following watch identifiers to the list of blocked alerts:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">elasticsearch_cluster_status</code>
</li>
<li class="listitem">
<code class="literal">elasticsearch_version_mismatch</code>
</li>
<li class="listitem">
<code class="literal">elasticsearch_nodes</code>
</li>
<li class="listitem">
<code class="literal">kibana_version_mismatch</code>
</li>
<li class="listitem">
<code class="literal">logstash_version_mismatch</code>
</li>
<li class="listitem">
<code class="literal">xpack_license_expiration</code>
</li>
</ul>
</div>
<p>For example: <code class="literal">["elasticsearch_version_mismatch","xpack_license_expiration"]</code>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ssl-monitoring-settings"></a>X-Pack monitoring TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<p>Elasticsearch relies on your JDK’s implementation of SSL and TLS.
View <a class="xref" href="manually-configure-security.html#jdk-tls-versions" title="Supported SSL/TLS versions by JDK version">Supported SSL/TLS versions by JDK version</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
Controls the verification of certificates.
</p>
<details open>
<summary class="title">Valid values</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Validates that the provided certificate: has an issue date that&#8217;s
within the <code class="literal">not_before</code> and <code class="literal">not_after</code> dates; chains to a trusted Certificate
Authority (CA); has a <code class="literal">hostname</code> or IP address that matches the names within
the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Validates the provided certificate and verifies that it&#8217;s signed by a
trusted authority (CA), but doesn&#8217;t check the certificate <code class="literal">hostname</code>.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
<p>
Performs no certificate validation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Setting certificate validation to <code class="literal">none</code> disables many security
benefits of SSL/TLS, which is very dangerous. Only set this value if instructed
by Elastic Support as a temporary diagnostic mechanism when attempting to
resolve TLS errors.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
<p>Defaults to <code class="literal">full</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)  <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitoring-tls-ssl-key-trusted-certificate-settings"></a>X-Pack monitoring TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate are optional and would be used if the server requires client authentication for PKI
authentication.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pem_encoded_files"></a>PEM encoded files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_java_keystore_files"></a>Java keystore files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitoring-pkcs12-files"></a>PKCS#12 files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span>
Password for the truststore.
</dd>
</dl>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-node"></a>Node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h2>
</div></div></div>
<p>Any time that you start an instance of Elasticsearch, you are starting a <em>node</em>. A
collection of connected nodes is called a <a class="xref" href="settings.html#modules-cluster" title="Cluster-level shard allocation and routing settings">cluster</a>. If you
are running a single node of Elasticsearch, then you have a cluster of one node.</p>
<p>Every node in the cluster can handle <a class="xref" href="settings.html#modules-network" title="Networking">HTTP and transport</a>
traffic by default. The transport layer is used exclusively for communication
between nodes; the HTTP layer is used by REST clients.</p>
<p><a id="modules-node-description"></a>All nodes know about all the other nodes in the cluster and can forward client
requests to the appropriate node.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="node-roles"></a>Node roles<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>You define a node&#8217;s roles by setting <code class="literal">node.roles</code> in <code class="literal">elasticsearch.yml</code>. If you
set <code class="literal">node.roles</code>, the node is only assigned the roles you specify. If you don&#8217;t
set <code class="literal">node.roles</code>, the node is assigned the following roles:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">master</code>
</li>
<li class="listitem">
<code class="literal">data</code>
</li>
<li class="listitem">
<code class="literal">data_content</code>
</li>
<li class="listitem">
<code class="literal">data_hot</code>
</li>
<li class="listitem">
<code class="literal">data_warm</code>
</li>
<li class="listitem">
<code class="literal">data_cold</code>
</li>
<li class="listitem">
<code class="literal">data_frozen</code>
</li>
<li class="listitem">
<code class="literal">ingest</code>
</li>
<li class="listitem">
<code class="literal">ml</code>
</li>
<li class="listitem">
<code class="literal">remote_cluster_client</code>
</li>
<li class="listitem">
<code class="literal">transform</code>
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you set <code class="literal">node.roles</code>, ensure you specify every node role your cluster needs.
Every cluster requires the following node roles:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">master</code>
</li>
<li class="listitem">
<p></p>
<p><code class="literal">data_content</code> and <code class="literal">data_hot</code><br>
OR<br>
<code class="literal">data</code></p>
</li>
</ul>
</div>
<p>Some Elastic Stack features also require specific node roles:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Cross-cluster search and cross-cluster replication require the <code class="literal">remote_cluster_client</code> role.
</li>
<li class="listitem">
Stack Monitoring and ingest pipelines require the <code class="literal">ingest</code> role.
</li>
<li class="listitem">
Fleet, the Elastic Security app, and transforms require the <code class="literal">transform</code> role.
The <code class="literal">remote_cluster_client</code> role is also required to use cross-cluster search with these
features.
</li>
<li class="listitem">
Machine learning features, such as anomaly detection, require the <code class="literal">ml</code> role.
</li>
</ul>
</div>
</div>
</div>
<p>As the cluster grows and in particular if you have large machine learning jobs or
continuous transforms, consider separating dedicated master-eligible nodes from
dedicated data nodes, machine learning nodes, and transform nodes.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a class="xref" href="settings.html#master-node" title="Master-eligible node">Master-eligible node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">master</code> role, which makes it eligible to be
<a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">elected as the <em>master</em> node</a>, which controls the cluster.
</dd>
<dt>
<span class="term">
<a class="xref" href="settings.html#data-node" title="Data node">Data node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">data</code> role. Data nodes hold data and perform data
related operations such as CRUD, search, and aggregations. A node with the <code class="literal">data</code> role can fill any of the specialised data node roles.
</dd>
<dt>
<span class="term">
<a class="xref" href="settings.html#node-ingest-node" title="Ingest node">Ingest node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">ingest</code> role. Ingest nodes are able to apply an
<a class="xref" href="ingest.html" title="Ingest pipelines">ingest pipeline</a> to a document in order to transform and enrich the
document before indexing. With a heavy ingest load, it makes sense to use
dedicated ingest nodes and to not include the <code class="literal">ingest</code> role from nodes that have
the <code class="literal">master</code> or <code class="literal">data</code> roles.
</dd>
<dt>
<span class="term">
<a class="xref" href="settings.html#remote-node" title="Remote-eligible node">Remote-eligible node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">remote_cluster_client</code> role, which makes it eligible to act
as a remote client.
</dd>
<dt>
<span class="term">
<a class="xref" href="settings.html#ml-node" title="Machine learning node">Machine learning node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">ml</code> role. If you want to use machine learning features, there must be
at least one machine learning node in your cluster. For more information, see
<a class="xref" href="settings.html#ml-settings" title="Machine learning settings in Elasticsearch">Machine learning settings</a> and <a href="https://www.elastic.co/guide/en/machine-learning/8.9/index.html" class="ulink" target="_top">Machine learning in the Elastic Stack</a>.
</dd>
<dt>
<span class="term">
<a class="xref" href="settings.html#transform-node" title="Transform node">Transform node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">transform</code> role. If you want to use transforms, there
must be at least one transform node in your cluster. For more information, see
<a class="xref" href="settings.html#transform-settings" title="Transforms settings in Elasticsearch">Transforms settings</a> and <a class="xref" href="transforms.html" title="Transforming data"><em>Transforming data</em></a>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Coordinating node<a id="coordinating-node"></a></h3>
<p>Requests like search requests or bulk-indexing requests may involve data held
on different data nodes. A search request, for example, is executed in two
phases which are coordinated by the node which receives the client request&#8201;&#8212;&#8201;the <em>coordinating node</em>.</p>
<p>In the <em>scatter</em> phase, the coordinating node forwards the request to the data
nodes which hold the data. Each data node executes the request locally and
returns its results to the coordinating node. In the <em>gather</em> phase, the
coordinating node reduces each data node&#8217;s results into a single global
result set.</p>
<p>Every node is implicitly a coordinating node. This means that a node that has
an explicit empty list of roles via <code class="literal">node.roles</code> will only act as a coordinating
node, which cannot be disabled. As a result, such a node needs to have enough
memory and CPU in order to deal with the gather phase.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="master-node"></a>Master-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>The master node is responsible for lightweight cluster-wide actions such as
creating or deleting an index, tracking which nodes are part of the cluster,
and deciding which shards to allocate to which nodes. It is important for
cluster health to have a stable master node.</p>
<p>Any master-eligible node that is not a <a class="xref" href="settings.html#voting-only-node" title="Voting-only master-eligible node">voting-only node</a> may
be elected to become the master node by the <a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">master election
process</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Master nodes must have a <code class="literal">path.data</code> directory whose contents
persist across restarts, just like data nodes, because this is where the
cluster metadata is stored. The cluster metadata describes how to read the data
stored on the data nodes, so if it is lost then the data stored on the data
nodes cannot be read.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="dedicated-master-node"></a>Dedicated master-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h4>
</div></div></div>
<p>It is important for the health of the cluster that the elected master node has
the resources it needs to fulfill its responsibilities. If the elected master
node is overloaded with other tasks then the cluster will not operate well. The
most reliable way to avoid overloading the master with other tasks is to
configure all the master-eligible nodes to be <em>dedicated master-eligible nodes</em>
which only have the <code class="literal">master</code> role, allowing them to focus on managing the
cluster. Master-eligible nodes will still also behave as
<a class="xref" href="settings.html#coordinating-node" title="Coordinating node">coordinating nodes</a> that route requests from clients to
the other nodes in the cluster, but you should <em>not</em> use dedicated master nodes
for this purpose.</p>
<p>A small or lightly-loaded cluster may operate well if its master-eligible nodes
have other roles and responsibilities, but once your cluster comprises more
than a handful of nodes it usually makes sense to use dedicated master-eligible
nodes.</p>
<p>To create a dedicated master-eligible node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ master ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="voting-only-node"></a>Voting-only master-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h4>
</div></div></div>
<p>A voting-only master-eligible node is a node that participates in
<a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">master elections</a> but which will not act as the cluster&#8217;s
elected master node. In particular, a voting-only node can serve as a tiebreaker
in elections.</p>
<p>It may seem confusing to use the term "master-eligible" to describe a
voting-only node since such a node is not actually eligible to become the master
at all. This terminology is an unfortunate consequence of history:
master-eligible nodes are those nodes that participate in elections and perform
certain tasks during cluster state publications, and voting-only nodes have the
same responsibilities even if they can never become the elected master.</p>
<p>To configure a master-eligible node as a voting-only node, include <code class="literal">master</code> and
<code class="literal">voting_only</code> in the list of roles. For example to create a voting-only data
node:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data, master, voting_only ]</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Only nodes with the <code class="literal">master</code> role can be marked as having the
<code class="literal">voting_only</code> role.</p>
</div>
</div>
<p>High availability (HA) clusters require at least three master-eligible nodes, at
least two of which are not voting-only nodes. Such a cluster will be able to
elect a master node even if one of the nodes fails.</p>
<p>Voting-only master-eligible nodes may also fill other roles in your cluster.
For instance, a node may be both a data node and a voting-only master-eligible
node. A <em>dedicated</em> voting-only master-eligible nodes is a voting-only
master-eligible node that fills no other roles in the cluster. To create a
dedicated voting-only master-eligible node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ master, voting_only ]</pre>
</div>
<p>Since dedicated voting-only nodes never act as the cluster&#8217;s elected master,
they may require less heap and a less powerful CPU than the true master nodes.
However all master-eligible nodes, including voting-only nodes, are on the
critical path for <a class="xref" href="modules-discovery.html#cluster-state-publishing" title="Publishing the cluster state">publishing cluster state
updates</a>. Cluster state updates are usually independent of
performance-critical workloads such as indexing or searches, but they are
involved in management activities such as index creation and rollover, mapping
updates, and recovery after a failure. The performance characteristics of these
activities are a function of the speed of the storage on each master-eligible
node, as well as the reliability and latency of the network interconnections
between the elected master node and the other nodes in the cluster. You must
therefore ensure that the storage and networking available to the nodes in your
cluster are good enough to meet your performance goals.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-node"></a>Data node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Data nodes hold the shards that contain the documents you have indexed. Data
nodes handle data related operations like CRUD, search, and aggregations.
These operations are I/O-, memory-, and CPU-intensive. It is important to
monitor these resources and to add more data nodes if they are overloaded.</p>
<p>The main benefit of having dedicated data nodes is the separation of the master
and data roles.</p>
<p>To create a dedicated data node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data ]</pre>
</div>
<p>In a multi-tier deployment architecture, you use specialized data roles to
assign data nodes to specific tiers: <code class="literal">data_content</code>,<code class="literal">data_hot</code>, <code class="literal">data_warm</code>,
<code class="literal">data_cold</code>, or <code class="literal">data_frozen</code>. A node can belong to multiple tiers, but a node
that has one of the specialized data roles cannot have the generic <code class="literal">data</code> role.</p>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-content-node"></a>Content data node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Content data nodes are part of the content tier.
Data stored in the content tier is generally a collection of items such as a product catalog or article archive.
Unlike time series data, the value of the content remains relatively constant over time,
so it doesn&#8217;t make sense to move it to a tier with different performance characteristics as it ages.
Content data typically has long data retention requirements, and you want to be able to retrieve
items quickly regardless of how old they are.</p>
<p>Content tier nodes are usually optimized for query performance&#8212;&#8203;they prioritize processing power over IO throughput
so they can process complex searches and aggregations and return results quickly.
While they are also responsible for indexing, content data is generally not ingested at as high a rate
as time series data such as logs and metrics. From a resiliency perspective the indices in this
tier should be configured to use one or more replicas.</p>
<p>The content tier is required. System indices and other indices that aren&#8217;t part
of a data stream are automatically allocated to the content tier.</p>
<p>To create a dedicated content node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_content ]</pre>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-hot-node"></a>Hot data node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Hot data nodes are part of the hot tier.
The hot tier is the Elasticsearch entry point for time series data and holds your most-recent,
most-frequently-searched time series data.
Nodes in the hot tier need to be fast for both reads and writes,
which requires more hardware resources and faster storage (SSDs).
For resiliency, indices in the hot tier should be configured to use one or more replicas.</p>
<p>The hot tier is required. New indices that are part of a <a class="xref" href="data-streams.html" title="Data streams">data stream</a> are automatically allocated to the hot tier.</p>
<p>To create a dedicated hot node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_hot ]</pre>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-warm-node"></a>Warm data node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Warm data nodes are part of the warm tier.
Time series data can move to the warm tier once it is being queried less frequently
than the recently-indexed data in the hot tier.
The warm tier typically holds data from recent weeks.
Updates are still allowed, but likely infrequent.
Nodes in the warm tier generally don&#8217;t need to be as fast as those in the hot tier.
For resiliency, indices in the warm tier should be configured to use one or more replicas.</p>
<p>To create a dedicated warm node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_warm ]</pre>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-cold-node"></a>Cold data node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Cold data nodes are part of the cold tier.
When you no longer need to search time series data regularly, it can move from
the warm tier to the cold tier. While still searchable, this tier is typically
optimized for lower storage costs rather than search speed.</p>
<p>For better storage savings, you can keep <a class="xref" href="searchable-snapshots.html#fully-mounted">fully mounted indices</a>
of <a class="xref" href="ilm-actions.html#ilm-searchable-snapshot" title="Searchable snapshot">searchable snapshots</a> on the cold tier. Unlike regular
indices, these fully mounted indices don&#8217;t require replicas for reliability. In
the event of a failure, they can recover data from the underlying snapshot
instead. This potentially halves the local storage needed for the data. A
snapshot repository is required to use fully mounted indices in the cold tier.
Fully mounted indices are read-only.</p>
<p>Alternatively, you can use the cold tier to store regular indices with replicas instead
of using searchable snapshots. This lets you store older data on less expensive hardware
but doesn&#8217;t reduce required disk space compared to the warm tier.</p>
<p>To create a dedicated cold node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_cold ]</pre>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-frozen-node"></a>Frozen data node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Frozen data nodes are part of the frozen tier.
Once data is no longer being queried, or being queried rarely, it may move from
the cold tier to the frozen tier where it stays for the rest of its life.</p>
<p>The frozen tier requires a snapshot repository.
The frozen tier uses <a class="xref" href="searchable-snapshots.html#partially-mounted">partially mounted indices</a> to store
and load data from a snapshot repository. This reduces local storage and
operating costs while still letting you search frozen data. Because Elasticsearch must
sometimes fetch frozen data from the snapshot repository, searches on the frozen
tier are typically slower than on the cold tier.</p>
<p>To create a dedicated frozen node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_frozen ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="node-ingest-node"></a>Ingest node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Ingest nodes can execute pre-processing pipelines, composed of one or more
ingest processors. Depending on the type of operations performed by the ingest
processors and the required resources, it may make sense to have dedicated
ingest nodes, that will only perform this specific task.</p>
<p>To create a dedicated ingest node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ ingest ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="coordinating-only-node"></a>Coordinating only node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>If you take away the ability to be able to handle master duties, to hold data,
and pre-process documents, then you are left with a <em>coordinating</em> node that
can only route requests, handle the search reduce phase, and distribute bulk
indexing. Essentially, coordinating only nodes behave as smart load balancers.</p>
<p>Coordinating only nodes can benefit large clusters by offloading the
coordinating node role from data and master-eligible nodes. They join the
cluster and receive the full <a class="xref" href="cluster.html#cluster-state" title="Cluster state API">cluster state</a>, like every other
node, and they use the cluster state to route requests directly to the
appropriate place(s).</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Adding too many coordinating only nodes to a cluster can increase the
burden on the entire cluster because the elected master node must await
acknowledgement of cluster state updates from every node! The benefit of
coordinating only nodes should not be overstated&#8201;&#8212;&#8201;data nodes can happily
serve the same purpose.</p>
</div>
</div>
<p>To create a dedicated coordinating node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-node"></a>Remote-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>A remote-eligible node acts as a cross-cluster client and connects to
<a class="xref" href="remote-clusters.html" title="Remote clusters">remote clusters</a>. Once connected, you can search
remote clusters using <a class="xref" href="modules-cross-cluster-search.html" title="Search across clusters">cross-cluster search</a>. You can also sync
data between clusters using <a class="xref" href="xpack-ccr.html" title="Cross-cluster replication">cross-cluster replication</a>.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ remote_cluster_client ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-node"></a><span class="xpack">Machine learning node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Machine learning nodes run jobs and handle machine learning API requests. For more information, see
<a class="xref" href="settings.html#ml-settings" title="Machine learning settings in Elasticsearch">Machine learning settings</a>.</p>
<p>To create a dedicated machine learning node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ ml, remote_cluster_client]</pre>
</div>
<p>The <code class="literal">remote_cluster_client</code> role is optional but strongly recommended.
Otherwise, cross-cluster search fails when used in machine learning jobs or datafeeds. If you use cross-cluster search in
your anomaly detection jobs, the <code class="literal">remote_cluster_client</code> role is also required on all
master-eligible nodes. Otherwise, the datafeed cannot start. See <a class="xref" href="settings.html#remote-node" title="Remote-eligible node">Remote-eligible node</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="transform-node"></a><span class="xpack">Transform node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Transform nodes run transforms and handle transform API requests. For
more information, see <a class="xref" href="settings.html#transform-settings" title="Transforms settings in Elasticsearch">Transforms settings</a>.</p>
<p>To create a dedicated transform node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ transform, remote_cluster_client ]</pre>
</div>
<p>The <code class="literal">remote_cluster_client</code> role is optional but strongly recommended.
Otherwise, cross-cluster search fails when used in transforms. See <a class="xref" href="settings.html#remote-node" title="Remote-eligible node">Remote-eligible node</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="change-node-role"></a>Changing the role of a node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Each data node maintains the following data on disk:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
the shard data for every shard allocated to that node,
</li>
<li class="listitem">
the index metadata corresponding with every shard allocated to that node, and
</li>
<li class="listitem">
the cluster-wide metadata, such as settings and index templates.
</li>
</ul>
</div>
<p>Similarly, each master-eligible node maintains the following data on disk:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
the index metadata for every index in the cluster, and
</li>
<li class="listitem">
the cluster-wide metadata, such as settings and index templates.
</li>
</ul>
</div>
<p>Each node checks the contents of its data path at startup. If it discovers
unexpected data then it will refuse to start. This is to avoid importing
unwanted <a class="xref" href="settings.html#dangling-indices" title="Dangling indices">dangling indices</a> which can lead
to a red cluster health. To be more precise, nodes without the <code class="literal">data</code> role will
refuse to start if they find any shard data on disk at startup, and nodes
without both the <code class="literal">master</code> and <code class="literal">data</code> roles will refuse to start if they have any
index metadata on disk at startup.</p>
<p>It is possible to change the roles of a node by adjusting its
<code class="literal">elasticsearch.yml</code> file and restarting it. This is known as <em>repurposing</em> a
node. In order to satisfy the checks for unexpected data described above, you
must perform some extra steps to prepare a node for repurposing when starting
the node without the <code class="literal">data</code> or <code class="literal">master</code> roles.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you want to repurpose a data node by removing the <code class="literal">data</code> role then you
should first use an <a class="xref" href="settings.html#cluster-shard-allocation-filtering" title="Cluster-level shard allocation filtering">allocation filter</a> to safely
migrate all the shard data onto other nodes in the cluster.
</li>
<li class="listitem">
If you want to repurpose a node to have neither the <code class="literal">data</code> nor <code class="literal">master</code> roles
then it is simplest to start a brand-new node with an empty data path and the
desired roles. You may find it safest to use an
<a class="xref" href="settings.html#cluster-shard-allocation-filtering" title="Cluster-level shard allocation filtering">allocation filter</a> to migrate the shard data elsewhere
in the cluster first.
</li>
</ul>
</div>
<p>If it is not possible to follow these extra steps then you may be able to use
the <a class="xref" href="node-tool.html#node-tool-repurpose" title="Changing the role of a node"><code class="literal">elasticsearch-node repurpose</code></a> tool to delete any
excess data that prevents a node from starting.</p>
<h3><a id="_node_data_path_settings"></a>Node data path settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-path"></a><code class="literal">path.data</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Every data and master-eligible node requires access to a data directory where
shards and index and cluster metadata will be stored. The <code class="literal">path.data</code> defaults
to <code class="literal">$ES_HOME/data</code> but can be configured in the <code class="literal">elasticsearch.yml</code> config
file an absolute path or a path relative to <code class="literal">$ES_HOME</code> as follows:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path.data:  /var/elasticsearch/data</pre>
</div>
<p>Like all node settings, it can also be specified on the command line as:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/elasticsearch -Epath.data=/var/elasticsearch/data</pre>
</div>
<p>The contents of the <code class="literal">path.data</code> directory must persist across restarts, because
this is where your data is stored. Elasticsearch requires the filesystem to act as if it
were backed by a local disk, but this means that it will work correctly on
properly-configured remote block devices (e.g. a SAN) and remote filesystems
(e.g. NFS) as long as the remote storage behaves no differently from local
storage. You can run multiple Elasticsearch nodes on the same filesystem, but each Elasticsearch
node must have its own data path.</p>
<p>The performance of an Elasticsearch cluster is often limited by the performance of the
underlying storage, so you must ensure that your storage supports acceptable
performance. Some remote storage performs very poorly, especially under the
kind of load that Elasticsearch imposes, so make sure to benchmark your system carefully
before committing to a particular storage architecture.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>When using the <code class="literal">.zip</code> or <code class="literal">.tar.gz</code> distributions, the <code class="literal">path.data</code> setting
should be configured to locate the data directory outside the Elasticsearch home
directory, so that the home directory can be deleted without deleting your data!
The RPM and Debian distributions do this for you already.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Don&#8217;t modify anything within the data directory or run processes that
might interfere with its contents. If something other than Elasticsearch modifies the
contents of the data directory, then Elasticsearch may fail, reporting corruption or
other data inconsistencies, or may appear to work correctly having silently
lost some of your data. Don&#8217;t attempt to take filesystem backups of the data
directory; there is no supported way to restore such a backup. Instead, use
<a class="xref" href="snapshot-restore.html" title="Snapshot and restore">Snapshot and restore</a> to take backups safely. Don&#8217;t run virus scanners on the
data directory. A virus scanner can prevent Elasticsearch from working correctly and may
modify the contents of the data directory. The data directory contains no
executables so a virus scan will only find false positives.</p>
</div>
</div>
<h3><a id="other-node-settings"></a>Other node settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/node.asciidoc">edit</a></h3>
<p>More node settings can be found in <a class="xref" href="settings.html" title="Configuring Elasticsearch"><em>Configuring Elasticsearch</em></a> and <a class="xref" href="settings.html#important-settings" title="Important Elasticsearch configuration">Important Elasticsearch configuration</a>,
including:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="settings.html#cluster-name" title="Cluster name setting"><code class="literal">cluster.name</code></a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#node-name" title="Node name setting"><code class="literal">node.name</code></a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#modules-network" title="Networking">network settings</a>
</li>
</ul>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-network"></a>Networking<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network.asciidoc">edit</a></h2>
</div></div></div>
<p>Each Elasticsearch node has two different network interfaces. Clients send requests to
Elasticsearch&#8217;s REST APIs using its <a class="xref" href="settings.html#http-settings" title="Advanced HTTP settings">HTTP interface</a>, but nodes
communicate with other nodes using the <a class="xref" href="settings.html#transport-settings" title="Advanced transport settings">transport
interface</a>. The transport interface is also used for communication with
<a class="xref" href="remote-clusters.html" title="Remote clusters">remote clusters</a>.</p>
<p>You can configure both of these interfaces at the same time using the
<code class="literal">network.*</code> settings. If you have a more complicated network, you might need to
configure the interfaces independently using the <code class="literal">http.*</code> and <code class="literal">transport.*</code>
settings. Where possible, use the <code class="literal">network.*</code> settings that apply to both
interfaces to simplify your configuration and reduce duplication.</p>
<p>By default Elasticsearch binds only to <code class="literal">localhost</code> which means it cannot be accessed
remotely. This configuration is sufficient for a local development cluster made
of one or more nodes all running on the same host. To form a cluster across
multiple hosts, or which is accessible to remote clients, you must adjust some
<a class="xref" href="settings.html#common-network-settings" title="Commonly used network settings">network settings</a> such as <code class="literal">network.host</code>.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Be careful with the network configuration!</h3>
<p>Never expose an unprotected node to the public internet. If you do, you are
permitting anyone in the world to download, modify, or delete any of the data
in your cluster.</p>
</div>
</div>
<p>Configuring Elasticsearch to bind to a non-local address will <a class="xref" href="system-config.html#dev-vs-prod" title="Development mode vs production mode">convert some
warnings into fatal exceptions</a>. If a node refuses to start after configuring
its network settings then you must address the logged exceptions before
proceeding.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="common-network-settings"></a>Commonly used network settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network.asciidoc">edit</a></h3>
</div></div></div>
<p>Most users will need to configure only the following network settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">network.host</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
Sets the address of this node for both HTTP and transport traffic. The node
will bind to this address and will also use it as its publish address. Accepts
an IP address, a hostname, or a <a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special value</a>.
</p>
<p>Defaults to <code class="literal">_local_</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">http.port</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
The port to bind for HTTP client communication. Accepts a single value or a
range. If a range is specified, the node will bind to the first available port
in the range.
</p>
<p>Defaults to <code class="literal">9200-9300</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">transport.port</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
The port to bind for communication between nodes. Accepts a single value or a
range. If a range is specified, the node will bind to the first available port
in the range. Set this setting to a single port, not a range, on every
master-eligible node.
</p>
<p>Defaults to <code class="literal">9300-9400</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="network-interface-values"></a>Special values for network addresses<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure Elasticsearch to automatically determine its addresses by using the
following special values. Use these values when configuring
<code class="literal">network.host</code>, <code class="literal">network.bind_host</code>, <code class="literal">network.publish_host</code>, and the
corresponding settings for the HTTP and transport interfaces.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">_local_</code>
</span>
</dt>
<dd>
Any loopback addresses on the system, for example <code class="literal">127.0.0.1</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_site_</code>
</span>
</dt>
<dd>
Any site-local addresses on the system, for example <code class="literal">192.168.0.1</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_global_</code>
</span>
</dt>
<dd>
Any globally-scoped addresses on the system, for example <code class="literal">8.8.8.8</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_[networkInterface]_</code>
</span>
</dt>
<dd>
Use the addresses of the network interface called <code class="literal">[networkInterface]</code>. For
example if you wish to use the addresses of an interface called <code class="literal">en0</code> then
set <code class="literal">network.host: _en0_</code>.
</dd>
<dt>
<span class="term">
<code class="literal">0.0.0.0</code>
</span>
</dt>
<dd>
The addresses of all available network interfaces.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>In some systems these special values resolve to multiple addresses. If
so, Elasticsearch will select one of them as its publish address and may change its
selection on each node restart. Ensure your node is accessible at every possible
address.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Any values containing a <code class="literal">:</code> (e.g. an IPv6 address or some of the
<a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special values</a>) must be quoted because <code class="literal">:</code> is a
special character in YAML.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="network-interface-values-ipv4-vs-ipv6"></a>IPv4 vs IPv6<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network.asciidoc">edit</a></h4>
</div></div></div>
<p>These special values yield both IPv4 and IPv6 addresses by default, but you can
also add an <code class="literal">:ipv4</code> or <code class="literal">:ipv6</code> suffix to limit them to just IPv4 or IPv6
addresses respectively. For example, <code class="literal">network.host: "_en0:ipv4_"</code> would set this
node&#8217;s addresses to the IPv4 addresses of interface <code class="literal">en0</code>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Discovery in the Cloud</h3>
<p>More special settings are available when running in the Cloud with either the
<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/8.9/discovery-ec2.html" class="ulink" target="_top">EC2 discovery plugin</a> or the
<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/8.9/discovery-gce-network-host.html#discovery-gce-network-host" class="ulink" target="_top">Google Compute Engine discovery plugin</a>
installed.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="modules-network-binding-publishing"></a>Binding and publishing<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network.asciidoc">edit</a></h3>
</div></div></div>
<p>Elasticsearch uses network addresses for two distinct purposes known as binding and
publishing. Most nodes will use the same address for everything, but more
complicated setups may need to configure different addresses for different
purposes.</p>
<p>When an application such as Elasticsearch wishes to receive network communications, it
must indicate to the operating system the address or addresses whose traffic it
should receive. This is known as <em>binding</em> to those addresses. Elasticsearch can bind to
more than one address if needed, but most nodes only bind to a single address.
Elasticsearch can only bind to an address if it is running on a host that has a network
interface with that address. If necessary, you can configure the transport and
HTTP interfaces to bind to different addresses.</p>
<p>Each Elasticsearch node has an address at which clients and other nodes can contact it,
known as its <em>publish address</em>. Each node has one publish address for its HTTP
interface and one for its transport interface. These two addresses can be
anything, and don&#8217;t need to be addresses of the network interfaces on the host.
The only requirements are that each node must be:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Accessible at its HTTP publish address by all clients that will discover it
using sniffing.
</li>
<li class="listitem">
Accessible at its transport publish address by all other nodes in its
cluster, and by any remote clusters that will discover it using
<a class="xref" href="remote-clusters.html#sniff-mode" title="Sniff mode">Sniff mode</a>.
</li>
</ul>
</div>
<p>If you specify the transport publish address using a hostname then Elasticsearch will
resolve this hostname to an IP address once during startup, and other nodes
will use the resulting IP address instead of resolving the name again
themselves. To avoid confusion, use a hostname which resolves to the node&#8217;s
address in all network locations.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_using_a_single_address"></a>Using a single address<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network.asciidoc">edit</a></h4>
</div></div></div>
<p>The most common configuration is for Elasticsearch to bind to a single address at which
it is accessible to clients and other nodes. In this configuration you should
just set <code class="literal">network.host</code> to that address. You should not separately set any bind
or publish addresses, nor should you separately configure the addresses for the
HTTP or transport interfaces.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_using_multiple_addresses"></a>Using multiple addresses<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network.asciidoc">edit</a></h4>
</div></div></div>
<p>Use the <a class="xref" href="settings.html#advanced-network-settings" title="Advanced network settings">advanced network settings</a> if you wish to
bind Elasticsearch to multiple addresses, or to publish a different address from the
addresses to which you are binding. Set <code class="literal">network.bind_host</code> to the bind
addresses, and <code class="literal">network.publish_host</code> to the address at which this node is
exposed. In complex configurations, you can configure these addresses
differently for the HTTP and transport interfaces.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="advanced-network-settings"></a>Advanced network settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network.asciidoc">edit</a></h3>
</div></div></div>
<p>These advanced settings let you bind to multiple addresses, or to use different
addresses for binding and publishing. They are not required in most cases and
you should not use them if you can use the <a class="xref" href="settings.html#common-network-settings" title="Commonly used network settings">commonly
used settings</a> instead.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">network.bind_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
The network address(es) to which the node should bind in order to listen for
incoming connections. Accepts a list of IP addresses, hostnames, and
<a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special values</a>. Defaults to the address given by
<code class="literal">network.host</code>. Use this setting only if binding to multiple addresses or using
different addresses for publishing and binding.
</dd>
<dt>
<span class="term">
<code class="literal">network.publish_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
The network address that clients and other nodes can use to contact this node.
Accepts an IP address, a hostname, or a <a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special
value</a>. Defaults to the address given by <code class="literal">network.host</code>. Use this setting only
if binding to multiple addresses or using different addresses for publishing
and binding.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can specify a list of addresses for <code class="literal">network.host</code> and
<code class="literal">network.publish_host</code>. You can also specify one or more hostnames or
<a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special values</a> that resolve to multiple addresses.
If you do this then Elasticsearch chooses one of the addresses for its publish address.
This choice uses heuristics based on IPv4/IPv6 stack preference and
reachability and may change when the node restarts. Ensure
each node is accessible at all possible publish addresses.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="tcp-settings"></a>Advanced TCP settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network.asciidoc">edit</a></h4>
</div></div></div>
<p>Use the following settings to control the low-level parameters of the TCP
connections used by the HTTP and transport interfaces.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">network.tcp.keep_alive</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Configures the <code class="literal">SO_KEEPALIVE</code> option for network sockets, which determines
whether each connection sends TCP keepalive probes. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.keep_idle</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Configures the <code class="literal">TCP_KEEPIDLE</code> option for network sockets, which determines the
time in seconds that a connection must be idle before starting to send TCP
keepalive probes. Defaults to <code class="literal">-1</code>, which means to use the system default. This
value cannot exceed <code class="literal">300</code> seconds. Only applicable on Linux and macOS.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.keep_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Configures the <code class="literal">TCP_KEEPINTVL</code> option for network sockets, which determines the
time in seconds between sending TCP keepalive probes. Defaults to <code class="literal">-1</code>, which
means to use the system default. This value cannot exceed <code class="literal">300</code> seconds. Only
applicable on Linux and macOS.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.keep_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Configures the <code class="literal">TCP_KEEPCNT</code> option for network sockets, which determines the
number of unacknowledged TCP keepalive probes that may be sent on a connection
before it is dropped. Defaults to <code class="literal">-1</code>, which means to use the system default.
Only applicable on Linux and macOS.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.no_delay</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Configures the <code class="literal">TCP_NODELAY</code> option on network sockets, which determines
whether <a href="https://en.wikipedia.org/wiki/Nagle%27s_algorithm" class="ulink" target="_top">TCP no delay</a> is enabled. Defaults to
<code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.reuse_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Configures the <code class="literal">SO_REUSEADDR</code> option for network sockets, which determines
whether the address can be reused or not. Defaults to <code class="literal">false</code> on Windows and
<code class="literal">true</code> otherwise.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.send_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
Configures the size of the TCP send buffer for network sockets. Defaults to
<code class="literal">-1</code> which means to use the system default.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.receive_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
Configures the size of the TCP receive buffer. Defaults to <code class="literal">-1</code> which means to
use the system default.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="http-settings"></a>Advanced HTTP settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/http.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the following advanced settings to configure the HTTP interface
independently of the <a class="xref" href="settings.html#transport-settings" title="Advanced transport settings">transport interface</a>. You can also
configure both interfaces together using the <a class="xref" href="settings.html#common-network-settings" title="Commonly used network settings">network settings</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.host</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
Sets the address of this node for HTTP traffic. The node will bind to this
address and will also use it as its HTTP publish address. Accepts an IP
address, a hostname, or a <a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special value</a>.
Use this setting only if you require different configurations for the
transport and HTTP interfaces.
</p>
<p>Defaults to the address given by <code class="literal">network.host</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">http.bind_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
The network address(es) to which the node should bind in order to listen for
incoming HTTP connections. Accepts a list of IP addresses, hostnames, and
<a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special values</a>. Defaults to the address given by
<code class="literal">http.host</code> or <code class="literal">network.bind_host</code>. Use this setting only if you require to
bind to multiple addresses or to use different addresses for publishing and
binding, and you also require different binding configurations for the
transport and HTTP interfaces.
</dd>
<dt>
<span class="term">
<code class="literal">http.publish_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
The network address for HTTP clients to contact the node using sniffing.
Accepts an IP address, a hostname, or a <a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special
value</a>. Defaults to the address given by <code class="literal">http.host</code> or
<code class="literal">network.publish_host</code>. Use this setting only if you require to bind to
multiple addresses or to use different addresses for publishing and binding,
and you also require different binding configurations for the transport and
HTTP interfaces.
</dd>
<dt>
<span class="term">
<code class="literal">http.publish_port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
The port of the <a class="xref" href="settings.html#modules-network-binding-publishing" title="Binding and publishing">HTTP publish address</a>.
Configure this setting only if you need the publish port to be different from
<code class="literal">http.port</code>. Defaults to the port assigned via <code class="literal">http.port</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_content_length</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
Maximum size of an HTTP request body. If the body is compressed, the limit applies
to the HTTP request body size before compression. Defaults to <code class="literal">100mb</code>. Configuring
this setting to greater than <code class="literal">100mb</code> can cause cluster instability and is not
recommended. If you hit this limit when sending a request to the <a class="xref" href="docs.html#docs-bulk" title="Bulk API">Bulk</a>
API, configure your client to send fewer documents in each bulk request. If you
wish to index individual documents that exceed <code class="literal">100mb</code>, pre-process them into
smaller documents before sending them to Elasticsearch. For instance, store the raw data
in a system outside Elasticsearch and include a link to the raw data in the documents
that Elasticsearch indexes.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_initial_line_length</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
Maximum size of an HTTP URL. Defaults to <code class="literal">4kb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_header_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
Maximum size of allowed headers. Defaults to <code class="literal">16kb</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-compression"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.compression</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Support for compression when possible (with Accept-Encoding). If HTTPS is enabled, defaults to <code class="literal">false</code>. Otherwise, defaults to <code class="literal">true</code>.
</p>
<p>Disabling compression for HTTPS mitigates potential security risks, such as a
<a href="https://en.wikipedia.org/wiki/BREACH" class="ulink" target="_top">BREACH attack</a>. To compress HTTPS traffic,
you must explicitly set <code class="literal">http.compression</code> to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">http.compression_level</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Defines the compression level to use for HTTP responses. Valid values are in the range of 1 (minimum compression) and 9 (maximum compression). Defaults to <code class="literal">3</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.enabled</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Enable or disable cross-origin resource sharing, which determines whether a browser on another origin can execute requests against Elasticsearch. Set to <code class="literal">true</code> to enable Elasticsearch to process pre-flight
<a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing" class="ulink" target="_top">CORS</a> requests.
Elasticsearch will respond to those requests with the <code class="literal">Access-Control-Allow-Origin</code> header if the <code class="literal">Origin</code> sent in the request is permitted by the <code class="literal">http.cors.allow-origin</code> list. Set to <code class="literal">false</code> (the default) to make Elasticsearch ignore the <code class="literal">Origin</code> request header, effectively disabling CORS requests because Elasticsearch will never respond with the <code class="literal">Access-Control-Allow-Origin</code> response header.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the client does not send a pre-flight request with an <code class="literal">Origin</code> header or it does not check the response headers from the server to validate the
<code class="literal">Access-Control-Allow-Origin</code> response header, then cross-origin security is
compromised. If CORS is not enabled on Elasticsearch, the only way for the client to know is to send a pre-flight request and realize the required response headers are missing.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-origin"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-origin</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
Which origins to allow. If you prepend and append a forward slash (<code class="literal">/</code>) to the value, this will be treated as a regular expression, allowing you to support HTTP and HTTPs. For example, using <code class="literal">/https?:\/\/localhost(:[0-9]+)?/</code> would return the request header appropriately in both cases. Defaults to no origins allowed.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>A wildcard (<code class="literal">*</code>) is a valid value but is considered a security risk, as your Elasticsearch instance is open to cross origin requests from <span class="strong strong"><strong>anywhere</strong></span>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-max-age"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.max-age</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Browsers send a "preflight" OPTIONS-request to determine CORS settings.
<code class="literal">max-age</code> defines for how long, in seconds, the result should be cached.
Defaults to <code class="literal">1728000</code> (20 days).
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-methods"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-methods</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
Which methods to allow. Defaults to <code class="literal">OPTIONS, HEAD, GET, POST, PUT, DELETE</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-headers"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-headers</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
Which headers to allow. Defaults to <code class="literal">X-Requested-With, Content-Type, Content-Length, Authorization, Accept, User-Agent, X-Elastic-Client-Meta</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-expose-headers"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.expose-headers</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Which response headers to expose in the client. Defaults to <code class="literal">X-elastic-product</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-credentials"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-credentials</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Whether the <code class="literal">Access-Control-Allow-Credentials</code> header should be returned. Defaults to <code class="literal">false</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This header is only returned when the setting is set to <code class="literal">true</code>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.detailed_errors.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Configures whether detailed error reporting in HTTP responses is enabled.
Defaults to <code class="literal">true</code>, which means that HTTP requests that include the
<a class="xref" href="common-options.html#common-options-error-options" title="Enabling stack traces"><code class="literal">?error_trace</code> parameter</a> will return a
detailed error message including a stack trace if they encounter an exception.
If set to <code class="literal">false</code>, requests with the <code class="literal">?error_trace</code> parameter are rejected.
</dd>
<dt>
<span class="term">
<code class="literal">http.pipelining.max_events</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
The maximum number of events to be queued up in memory before an HTTP connection is closed, defaults to <code class="literal">10000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_warning_header_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
The maximum number of warning headers in client HTTP responses. Defaults to
<code class="literal">-1</code> which means the number of warning headers is unlimited.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_warning_header_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
The maximum total size of warning headers in client HTTP responses. Defaults to
<code class="literal">-1</code> which means the size of the warning headers is unlimited.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_alive</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Configures the <code class="literal">SO_KEEPALIVE</code> option for this socket, which determines whether
it sends TCP keepalive probes. Defaults to <code class="literal">network.tcp.keep_alive</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_idle</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Configures the <code class="literal">TCP_KEEPIDLE</code> option for HTTP sockets, which determines the
time in seconds that a connection must be idle before starting to send TCP
keepalive probes. Defaults to <code class="literal">network.tcp.keep_idle</code>, which uses the system
default. This value cannot exceed <code class="literal">300</code> seconds. Only applicable on Linux and
macOS.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Configures the <code class="literal">TCP_KEEPINTVL</code> option for HTTP sockets, which determines the
time in seconds between sending TCP keepalive probes. Defaults to
<code class="literal">network.tcp.keep_interval</code>, which uses the system default. This value cannot
exceed <code class="literal">300</code> seconds. Only applicable on Linux and macOS.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Configures the <code class="literal">TCP_KEEPCNT</code> option for HTTP sockets, which determines the
number of unacknowledged TCP keepalive probes that may be sent on a connection
before it is dropped. Defaults to <code class="literal">network.tcp.keep_count</code>, which uses the
system default. Only applicable on Linux and macOS.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.no_delay</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Configures the <code class="literal">TCP_NODELAY</code> option on HTTP sockets, which determines whether
<a href="https://en.wikipedia.org/wiki/Nagle%27s_algorithm" class="ulink" target="_top">TCP no delay</a> is enabled. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.reuse_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Configures the <code class="literal">SO_REUSEADDR</code> option for HTTP sockets, which determines whether
the address can be reused or not. Defaults to <code class="literal">false</code> on Windows and <code class="literal">true</code>
otherwise.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.send_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
The size of the TCP send buffer for HTTP traffic. Defaults to
<code class="literal">network.tcp.send_buffer_size</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.receive_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
The size of the TCP receive buffer for HTTP traffic. Defaults to
<code class="literal">network.tcp.receive_buffer_size</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.client_stats.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, boolean)
Enable or disable collection of HTTP client stats. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.client_stats.closed_channels.max_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
When <code class="literal">http.client_stats.enabled</code> is <code class="literal">true</code>, sets the maximum number of closed
HTTP channels for which Elasticsearch reports statistics. Defaults to <code class="literal">10000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.client_stats.closed_channels.max_age</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#time-units" title="Time units">time value</a>)
When <code class="literal">http.client_stats.enabled</code> is <code class="literal">true</code>, sets the maximum length of time
after closing a HTTP channel that Elasticsearch will report that channel&#8217;s statistics.
Defaults to <code class="literal">5m</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="transport-settings"></a>Advanced transport settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/transport.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the following advanced settings to configure the transport interface
independently of the <a class="xref" href="settings.html#http-settings" title="Advanced HTTP settings">HTTP interface</a>. Use the
<a class="xref" href="settings.html#common-network-settings" title="Commonly used network settings">network
settings</a> to configure both interfaces together.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">transport.host</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
Sets the address of this node for transport traffic. The node will bind to this
address and will also use it as its transport publish address. Accepts an IP
address, a hostname, or a <a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special value</a>.
Use this setting only if you require different configurations for the
transport and HTTP interfaces.
</p>
<p>Defaults to the address given by <code class="literal">network.host</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">transport.bind_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
The network address(es) to which the node should bind in order to listen for
incoming transport connections. Accepts a list of IP addresses, hostnames, and
<a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special values</a>. Defaults to the address given by
<code class="literal">transport.host</code> or <code class="literal">network.bind_host</code>. Use this setting only if you require
to bind to multiple addresses or to use different addresses for publishing and
binding, and you also require different binding configurations for the
transport and HTTP interfaces.
</dd>
<dt>
<span class="term">
<code class="literal">transport.publish_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
The network address at which the node can be contacted by other nodes. Accepts
an IP address, a hostname, or a <a class="xref" href="settings.html#network-interface-values" title="Special values for network addresses">special value</a>.
Defaults to the address given by <code class="literal">transport.host</code> or <code class="literal">network.publish_host</code>.
Use this setting only if you require to bind to multiple addresses or to use
different addresses for publishing and binding, and you also require different
binding configurations for the transport and HTTP interfaces.
</dd>
<dt>
<span class="term">
<code class="literal">transport.publish_port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
The port of the <a class="xref" href="settings.html#modules-network-binding-publishing" title="Binding and publishing">transport publish
address</a>. Set this parameter only if you need the publish port to be
different from <code class="literal">transport.port</code>. Defaults to the port assigned via
<code class="literal">transport.port</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.connect_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#time-units" title="Time units">time value</a>)
The connect timeout for initiating a new connection (in
time setting format). Defaults to <code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.compress</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
Set to <code class="literal">true</code>, <code class="literal">indexing_data</code>, or <code class="literal">false</code> to configure transport compression
between nodes. The option <code class="literal">true</code> will compress all data. The option
<code class="literal">indexing_data</code> will compress only the raw index data sent between nodes during
ingest, ccr following (excluding bootstrap), and operations based shard recovery
(excluding transferring lucene files). Defaults to <code class="literal">indexing_data</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.compression_scheme</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, string)
Configures the compression scheme for <code class="literal">transport.compress</code>. The options are
<code class="literal">deflate</code> or <code class="literal">lz4</code>. If <code class="literal">lz4</code> is configured and the remote node has not been
upgraded to a version supporting <code class="literal">lz4</code>, the traffic will be sent uncompressed.
Defaults to <code class="literal">lz4</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.keep_alive</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Configures the <code class="literal">SO_KEEPALIVE</code> option for transport sockets, which determines
whether they send TCP keepalive probes. Defaults to <code class="literal">network.tcp.keep_alive</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.keep_idle</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Configures the <code class="literal">TCP_KEEPIDLE</code> option for transport sockets, which determines
the time in seconds that a connection must be idle before starting to send TCP
keepalive probes. Defaults to <code class="literal">network.tcp.keep_idle</code> if set, or the system
default otherwise. This value cannot exceed <code class="literal">300</code> seconds. In cases where the
system default is higher than <code class="literal">300</code>, the value is automatically lowered to
<code class="literal">300</code>. Only applicable on Linux and macOS.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.keep_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Configures the <code class="literal">TCP_KEEPINTVL</code> option for transport sockets, which determines
the time in seconds between sending TCP keepalive probes. Defaults to
<code class="literal">network.tcp.keep_interval</code> if set, or the system default otherwise. This value
cannot exceed <code class="literal">300</code> seconds. In cases where the system default is higher than
<code class="literal">300</code>, the value is automatically lowered to <code class="literal">300</code>. Only applicable on Linux
and macOS.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.keep_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Configures the <code class="literal">TCP_KEEPCNT</code> option for transport sockets, which determines the
number of unacknowledged TCP keepalive probes that may be sent on a connection
before it is dropped. Defaults to <code class="literal">network.tcp.keep_count</code> if set, or the
system default otherwise. Only applicable on Linux and macOS.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.no_delay</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Configures the <code class="literal">TCP_NODELAY</code> option on transport sockets, which determines
whether <a href="https://en.wikipedia.org/wiki/Nagle%27s_algorithm" class="ulink" target="_top">TCP no delay</a> is enabled. Defaults to
<code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.reuse_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, boolean)
Configures the <code class="literal">SO_REUSEADDR</code> option for network sockets, which determines
whether the address can be reused or not. Defaults to
<code class="literal">network.tcp.reuse_address</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.send_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
The size of the TCP send buffer for transport traffic. Defaults to
<code class="literal">network.tcp.send_buffer_size</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.receive_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>)
The size of the TCP receive buffer for transport traffic. Defaults to
<code class="literal">network.tcp.receive_buffer_size</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.ping_schedule</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, <a class="xref" href="api-conventions.html#time-units" title="Time units">time value</a>)
Configures the time between sending application-level pings on all transport
connections to promptly detect when a transport connection has failed. Defaults
to <code class="literal">-1</code> meaning that application-level pings are not sent. You should use TCP
keepalives (see <code class="literal">transport.tcp.keep_alive</code>) instead of application-level pings
wherever possible.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="transport-profiles"></a>Transport profiles<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/transport.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch allows you to bind to multiple ports on different interfaces by
the use of transport profiles. See this example configuration</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">transport.profiles.default.port: 9300-9400
transport.profiles.default.bind_host: 10.0.0.1
transport.profiles.client.port: 9500-9600
transport.profiles.client.bind_host: 192.168.0.1
transport.profiles.dmz.port: 9700-9800
transport.profiles.dmz.bind_host: 172.16.1.2</pre>
</div>
<p>The <code class="literal">default</code> profile is special. It is used as a fallback for any other
profiles, if those do not have a specific configuration setting set, and is how
this node connects to other nodes in the cluster.
Other profiles can have any name and can be used to set up specific endpoints
for incoming connections.</p>
<p>The following parameters can be configured on each transport profile, as in the
example above:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">port</code>: The port to which to bind.
</li>
<li class="listitem">
<code class="literal">bind_host</code>: The host to which to bind.
</li>
<li class="listitem">
<code class="literal">publish_host</code>: The host which is published in informational APIs.
</li>
</ul>
</div>
<p>Profiles also support all the other transport settings specified in the
<a class="xref" href="settings.html#transport-settings" title="Advanced transport settings">transport settings</a> section, and use these as defaults.
For example, <code class="literal">transport.profiles.client.tcp.reuse_address</code> can be explicitly
configured, and defaults otherwise to <code class="literal">transport.tcp.reuse_address</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="long-lived-connections"></a>Long-lived idle connections<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/transport.asciidoc">edit</a></h4>
</div></div></div>
<p>A transport connection between two nodes is made up of a number of long-lived
TCP connections, some of which may be idle for an extended period of time.
Nonetheless, Elasticsearch requires these connections to remain open, and it
can disrupt the operation of your cluster if any inter-node connections are
closed by an external influence such as a firewall. It is important to
configure your network to preserve long-lived idle connections between
Elasticsearch nodes, for instance by leaving <code class="literal">*.tcp.keep_alive</code> enabled and
ensuring that the keepalive interval is shorter than any timeout that might
cause idle connections to be closed, or by setting <code class="literal">transport.ping_schedule</code> if
keepalives cannot be configured. Devices which drop connections when they reach
a certain age are a common source of problems to Elasticsearch clusters, and
must not be used.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="request-compression"></a>Request compression<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/transport.asciidoc">edit</a></h4>
</div></div></div>
<p>The default <code class="literal">transport.compress</code> configuration option <code class="literal">indexing_data</code> will only
compress requests that relate to the transport of raw indexing source data
between nodes. This option primarily compresses data sent during ingest,
ccr, and shard recovery. This default normally makes sense for local cluster
communication as compressing raw documents tends significantly reduce inter-node
network usage with minimal CPU impact.</p>
<p>The <code class="literal">transport.compress</code> setting always configures local cluster request
compression and is the fallback setting for remote cluster request compression.
If you want to configure remote request compression differently than local
request compression, you can set it on a per-remote cluster basis using the
<a class="xref" href="remote-clusters.html#remote-clusters-settings" title="Remote cluster settings"><code class="literal">cluster.remote.${cluster_alias}.transport.compress</code> setting</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="response-compression"></a>Response compression<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/transport.asciidoc">edit</a></h4>
</div></div></div>
<p>The compression settings do not configure compression for responses. Elasticsearch will
compress a response if the inbound request was compressed&#8212;&#8203;even when compression
is not enabled. Similarly, Elasticsearch will not compress a response if the inbound
request was uncompressed&#8212;&#8203;even when compression is enabled. The compression
scheme used to compress a response will be the same scheme the remote node used
to compress the request.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_request_tracing"></a>Request tracing<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network/tracers.asciidoc">edit</a></h3>
</div></div></div>
<p>You can trace individual requests made on the HTTP and transport layers.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Tracing can generate extremely high log volumes that can destabilize
your cluster. Do not enable request tracing on busy or important clusters.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="http-rest-request-tracer"></a>REST request tracer<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network/tracers.asciidoc">edit</a></h4>
</div></div></div>
<p>The HTTP layer has a dedicated tracer that logs incoming requests and the
corresponding outgoing responses. Activate the tracer by setting the level of
the <code class="literal">org.elasticsearch.http.HttpTracer</code> logger to <code class="literal">TRACE</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "persistent" : {
      "logger.org.elasticsearch.http.HttpTracer" : "TRACE"
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/17.console"></div>
<p>You can also control which URIs will be traced, using a set of include and
exclude wildcard patterns. By default every request will be traced.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "persistent" : {
      "http.tracer.include" : "*",
      "http.tracer.exclude" : ""
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/18.console"></div>
<p>By default, the tracer logs a summary of each request and response which
matches these filters. To record the body of each request and response too, set
the system property <code class="literal">es.insecure_network_trace_enabled</code> to <code class="literal">true</code>, and then set
the levels of both the <code class="literal">org.elasticsearch.http.HttpTracer</code> and
<code class="literal">org.elasticsearch.http.HttpBodyTracer</code> loggers to <code class="literal">TRACE</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "persistent" : {
      "logger.org.elasticsearch.http.HttpTracer" : "TRACE",
      "logger.org.elasticsearch.http.HttpBodyTracer" : "TRACE"
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/19.console"></div>
<p>Each message body is compressed, encoded, and split into chunks to avoid
truncation:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">[TRACE][o.e.h.HttpBodyTracer     ] [master] [276] response body [part 1]: H4sIAAAAAAAA/9...
[TRACE][o.e.h.HttpBodyTracer     ] [master] [276] response body [part 2]: 2oJ93QyYLWWhcD...
[TRACE][o.e.h.HttpBodyTracer     ] [master] [276] response body (gzip compressed, base64-encoded, and split into 2 parts on preceding log lines)</pre>
</div>
<p>Each chunk is annotated with an internal request ID (<code class="literal">[276]</code> in this example)
which you should use to correlate the chunks with the corresponding summary
lines. To reconstruct the output, base64-decode the data and decompress it
using <code class="literal">gzip</code>. For instance, on Unix-like systems:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">cat httptrace.log | sed -e 's/.*://' | base64 --decode | gzip --decompress</pre>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>HTTP request and response bodies may contain sensitive information
such as credentials and keys, so HTTP body tracing is disabled by default. You
must explicitly enable it on each node by setting the system property
<code class="literal">es.insecure_network_trace_enabled</code> to <code class="literal">true</code>. This feature is primarily
intended for test systems which do not contain any sensitive information. If
you set this property on a system which contains sensitive information, you
must protect your logs from unauthorized access.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="transport-tracer"></a>Transport tracer<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network/tracers.asciidoc">edit</a></h4>
</div></div></div>
<p>The transport layer has a dedicated tracer that logs incoming and outgoing
requests and responses. Activate the tracer by setting the level of the
<code class="literal">org.elasticsearch.transport.TransportService.tracer</code> logger to <code class="literal">TRACE</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "persistent" : {
      "logger.org.elasticsearch.transport.TransportService.tracer" : "TRACE"
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/20.console"></div>
<p>You can also control which actions will be traced, using a set of include and
exclude wildcard patterns. By default every request will be traced except for
fault detection pings:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "persistent" : {
      "transport.tracer.include" : "*",
      "transport.tracer.exclude" : "internal:coordination/fault_detection/*"
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/21.console"></div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="modules-network-threading-model"></a>Networking threading model<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/network/threading.asciidoc">edit</a></h3>
</div></div></div>
<p>This section describes the threading model used by the networking subsystem in
Elasticsearch. This information isn&#8217;t required to use Elasticsearch, but it may be useful to
advanced users who are diagnosing network problems in a cluster.</p>
<p>Elasticsearch nodes communicate over a collection of TCP channels that together form a
transport connection. Elasticsearch clients communicate with the cluster over HTTP,
which also uses one or more TCP channels. Each of these TCP channels is owned
by exactly one of the <code class="literal">transport_worker</code> threads in the node. This owning
thread is chosen when the channel is opened and remains the same for the
lifetime of the channel.</p>
<p>Each <code class="literal">transport_worker</code> thread has sole responsibility for sending and
receiving data over the channels it owns. Additionally, each http and transport
server socket is assigned to one of the <code class="literal">transport_worker</code> threads. That worker
has the responsibility of accepting new incoming connections to the server
socket it owns.</p>
<p>If a thread in Elasticsearch wants to send data over a particular channel, it passes the
data to the owning <code class="literal">transport_worker</code> thread for the actual transmission.</p>
<p>Normally the <code class="literal">transport_worker</code> threads will not completely handle the messages
they receive. Instead, they will do a small amount of preliminary processing
and then dispatch (hand off) the message to a different
<a class="xref" href="settings.html#modules-threadpool" title="Thread pools">threadpool</a> for the rest of their handling. For instance,
bulk messages are dispatched to the <code class="literal">write</code> threadpool, searches are dispatched
to one of the <code class="literal">search</code> threadpools, and requests for statistics and other
management tasks are mostly dispatched to the <code class="literal">management</code> threadpool. However
in some cases the processing of a message is expected to be so quick that Elasticsearch
will do all of the processing on the <code class="literal">transport_worker</code> thread rather than
incur the overhead of dispatching it elsewhere.</p>
<p>By default, there is one <code class="literal">transport_worker</code> thread per CPU. In contrast, there
may sometimes be tens-of-thousands of TCP channels. If data arrives on a TCP
channel and its owning <code class="literal">transport_worker</code> thread is busy, the data isn&#8217;t
processed until the thread finishes whatever it is doing. Similarly, outgoing
data are not sent over a channel until the owning <code class="literal">transport_worker</code> thread is
free. This means that we require every <code class="literal">transport_worker</code> thread to be idle
frequently. An idle <code class="literal">transport_worker</code> looks something like this in a stack
dump:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">"elasticsearch[instance-0000000004][transport_worker][T#1]" #32 daemon prio=5 os_prio=0 cpu=9645.94ms elapsed=501.63s tid=0x00007fb83b6307f0 nid=0x1c4 runnable  [0x00007fb7b8ffe000]
   java.lang.Thread.State: RUNNABLE
	at sun.nio.ch.EPoll.wait(java.base@17.0.2/Native Method)
	at sun.nio.ch.EPollSelectorImpl.doSelect(java.base@17.0.2/EPollSelectorImpl.java:118)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(java.base@17.0.2/SelectorImpl.java:129)
	- locked &lt;0x00000000c443c518&gt; (a sun.nio.ch.Util$2)
	- locked &lt;0x00000000c38f7700&gt; (a sun.nio.ch.EPollSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(java.base@17.0.2/SelectorImpl.java:146)
	at io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:813)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:460)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at java.lang.Thread.run(java.base@17.0.2/Thread.java:833)</pre>
</div>
<p>In the <a class="xref" href="cluster.html#cluster-nodes-hot-threads" title="Nodes hot threads API">Nodes hot threads</a> API an idle <code class="literal">transport_worker</code> thread is
reported like this:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">   0.0% [cpu=0.0%, idle=100.0%] (500ms out of 500ms) cpu usage by thread 'elasticsearch[instance-0000000004][transport_worker][T#1]'
     10/10 snapshots sharing following 9 elements
       java.base@17.0.2/sun.nio.ch.EPoll.wait(Native Method)
       java.base@17.0.2/sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:118)
       java.base@17.0.2/sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:129)
       java.base@17.0.2/sun.nio.ch.SelectorImpl.select(SelectorImpl.java:146)
       io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:813)
       io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:460)
       io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)
       io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
       java.base@17.0.2/java.lang.Thread.run(Thread.java:833)</pre>
</div>
<p>Note that <code class="literal">transport_worker</code> threads should always be in state <code class="literal">RUNNABLE</code>, even
when waiting for input, because they block in the native <code class="literal">EPoll#wait</code> method. The <code class="literal">idle=</code>
time reports the proportion of time the thread spent waiting for input, whereas the <code class="literal">cpu=</code> time
reports the proportion of time the thread spent processing input it has received.</p>
<p>If a <code class="literal">transport_worker</code> thread is not frequently idle, it may build up a
backlog of work. This can cause delays in processing messages on the channels
that it owns. It&#8217;s hard to predict exactly which work will be delayed:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
There are many more channels than threads. If work related to one channel is
causing delays to its worker thread, all other channels owned by that thread
will also suffer delays.
</li>
<li class="listitem">
The mapping from TCP channels to worker threads is fixed but arbitrary. Each
channel is assigned an owning thread in a round-robin fashion when the channel
is opened. Each worker thread is responsible for many different kinds of
channel.
</li>
<li class="listitem">
There are many channels open between each pair of nodes. For each request,
Elasticsearch will choose from the appropriate channels in a round-robin fashion. Some
requests may end up on a channel owned by a delayed worker while other
identical requests will be sent on a channel that&#8217;s working smoothly.
</li>
</ul>
</div>
<p>If the backlog builds up too far, some messages may be delayed by many seconds.
The node might even <a class="xref" href="modules-discovery.html#cluster-fault-detection" title="Cluster fault detection">fail its health checks</a> and be
removed from the cluster. Sometimes, you can find evidence of busy
<code class="literal">transport_worker</code> threads using the <a class="xref" href="cluster.html#cluster-nodes-hot-threads" title="Nodes hot threads API">Nodes hot threads</a> API.
However, this API itself sends network messages so may not work correctly if
the <code class="literal">transport_worker</code> threads are too busy. It is more reliable to use
<code class="literal">jstack</code> to obtain stack dumps or use Java Flight Recorder to obtain a
profiling trace. These tools are independent of any work the JVM is performing.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="query-cache"></a>Node query cache settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/query_cache.asciidoc">edit</a></h2>
</div></div></div>
<p>The results of queries used in the filter context are cached in the node query
cache for fast lookup. There is one queries cache per node that is shared by all
shards. The cache uses an LRU eviction policy: when the cache is full, the least
recently used query results are evicted to make way for new data. You cannot
inspect the contents of the query cache.</p>
<p>Term queries and queries used outside of a filter context are not eligible for
caching.</p>
<p>By default, the cache holds a maximum of 10000 queries in up to 10% of the total
heap space. To determine if a query is eligible for caching, Elasticsearch maintains a
query history to track occurrences.</p>
<p>Caching is done on a per segment basis if a segment contains at least 10000
documents and the segment has at least 3% of the total documents of a shard.
Because caching is per segment, merging segments can invalidate cached queries.</p>
<p>The following setting is <em>static</em> and must be configured on every data node in
the cluster:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.queries.cache.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the memory size for the filter cache. Accepts
either a percentage value, like <code class="literal">5%</code>, or an exact value, like <code class="literal">512mb</code>. Defaults to <code class="literal">10%</code>.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="query-cache-index-settings"></a>Query cache index settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/query_cache.asciidoc">edit</a></h3>
</div></div></div>
<p>The following setting is an <em>index</em> setting that can be configured on a
per-index basis. Can only be set at index creation time or on a
<a class="xref" href="indices.html#indices-open-close" title="Open index API">closed index</a>:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.queries.cache.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Static</a>)
Controls whether to enable query caching. Accepts <code class="literal">true</code> (default) or
<code class="literal">false</code>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="search-settings"></a>Search settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/search-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>The following expert settings can be set to manage global search and aggregation
limits.</p>
<div class="variablelist">
<a id="indices-query-bool-max-clause-count"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.query.bool.max_clause_count</code>
</span>
</dt>
<dd>
<p>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">8.0.0</span>]
<span class="Admonishment-detail">
Deprecated in 8.0.0.
</span>
</span>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
This deprecated setting has no effect.
</p>
<p>Elasticsearch will now dynamically set the maximum number of allowed clauses in a query, using
a heuristic based on the size of the search thread pool and the size of the heap allocated to
the JVM. This limit has a minimum value of 1024 and will in most cases be larger (for example,
a node with 30Gb RAM and 48 CPUs will have a maximum clause count of around 27,000). Larger
heaps lead to higher values, and larger thread pools result in lower values.</p>
<p>Queries with many clauses should be avoided whenever possible. If you previously bumped this
setting to accommodate heavy queries, you might need to increase the amount of memory available
to Elasticsearch, or to reduce the size of your search thread pool so that more memory is
available to each concurrent search.</p>
<p>In previous versions of Lucene you could get around this limit by nesting boolean queries
within each other, but the limit is now based on the total number of leaf queries within the
query as a whole and this workaround will no longer help.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="search-settings-max-buckets"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">search.max_buckets</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>, integer)
Maximum number of <a class="xref" href="search-aggregations-bucket.html" title="Bucket aggregations">aggregation buckets</a> allowed in
a single response. Defaults to 65,536.
</p>
<p>Requests that attempt to return more than this limit will return an error.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="indices-query-bool-max-nested-depth"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.query.bool.max_nested_depth</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer) Maximum nested depth of queries. Defaults to <code class="literal">30</code>.
</p>
<p>This setting limits the nesting depth of queries. Deep nesting of queries may lead to
stack overflow errors.</p>
</dd>
</dl>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="security-settings"></a>Security settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h2>
</div></div></div>

<p>You configure <code class="literal">xpack.security</code> settings to
<a class="xref" href="settings.html#anonymous-access-settings" title="Anonymous access settings">enable anonymous access</a> and perform message
authentication,
<a class="xref" href="settings.html#field-document-security-settings" title="Document and field level security settings">set up document and field level security</a>,
<a class="xref" href="settings.html#realm-settings" title="Realm settings">configure realms</a>,
<a class="xref" href="settings.html#ssl-tls-settings" title="General TLS settings">encrypt communications with SSL</a>,and
<a class="xref" href="settings.html#auditing-settings" title="Auditing security settings">audit security events</a>.</p>
<p>All of these settings can be added to the <code class="literal">elasticsearch.yml</code> configuration file,
with the exception of the secure settings, which you add to the Elasticsearch keystore.
For more information about creating and updating the Elasticsearch keystore, see
<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure settings</a>.</p>
<h4><a id="general-security-settings"></a>General security settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Defaults to <code class="literal">true</code>, which enables Elasticsearch security features on the node.<br>
</p>
<p>If set to <code class="literal">false</code>, security features are disabled, which is not recommended.
It also affects all Kibana instances that connect to this Elasticsearch instance; you do
not need to disable security features in those <code class="literal">kibana.yml</code> files. For more
information about disabling security features in specific Kibana instances, see
<a href="https://www.elastic.co/guide/en/kibana/8.9/security-settings-kb.html" class="ulink" target="_top">Kibana security settings</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.autoconfiguration.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Defaults to <code class="literal">true</code>, which enables
<a class="xref" href="configuring-stack-security.html" title="Start the Elastic Stack with security enabled automatically">security auto configuration</a>.
</p>
<p>If set to <code class="literal">false</code>, security auto configuration is disabled, which is not
recommended. When disabled, security is not configured automatically when
starting Elasticsearch for the first time, which means that you must
<a class="xref" href="manually-configure-security.html" title="Manually configure security">manually configure security</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.enrollment.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Defaults to <code class="literal">false</code>. Controls enrollment (of nodes and Kibana) to a local node
that&#8217;s been <a class="xref" href="configuring-stack-security.html" title="Start the Elastic Stack with security enabled automatically">autoconfigured for security</a>.
When set to <code class="literal">true</code>, the local node can generate new enrollment tokens. Existing
tokens can be used for enrollment if they are still valid.
</p>
<p>The security autoconfiguration process will set this to <code class="literal">true</code> unless
an administrator sets it to <code class="literal">false</code> before starting Elasticsearch.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.hide_settings</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A comma-separated list of settings that are omitted from the results of the
<a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">cluster nodes info API</a>. You can use wildcards to include
multiple settings in the list. For example, the following value hides all the
settings for the ad1 active_directory realm:
<code class="literal">xpack.security.authc.realms.active_directory.ad1.*</code>.
The API already omits all <code class="literal">ssl</code> settings, <code class="literal">bind_dn</code>, and <code class="literal">bind_password</code> due to
the sensitive nature of the information.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.fips_mode.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enables fips mode of operation. Set this to <code class="literal">true</code> if you run this Elasticsearch instance in a FIPS 140-2 enabled JVM. For more information, see <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>. Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
<h4><a id="password-hashing-settings"></a>Password hashing settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.password_hashing.algorithm</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the hashing algorithm that is used for secure user credential storage.
See <a class="xref" href="settings.html#password-hashing-algorithms" title="Password hashing algorithms">Table 2, &#8220;Password hashing algorithms&#8221;</a>.
If <code class="literal">xpack.security.fips_mode.enabled</code> is true (see <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>), defaults to <code class="literal">pbkdf2_stretch</code>.
In all other cases, defaults to <code class="literal">bcrypt</code>.
</dd>
</dl>
</div>
<h4><a id="anonymous-access-settings"></a>Anonymous access settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You can configure the following anonymous access settings in
<code class="literal">elasticsearch.yml</code>. For more information, see <a class="xref" href="setting-up-authentication.html#anonymous-access" title="Enabling anonymous access">Enabling anonymous access</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.anonymous.username</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The username (principal) of the anonymous user. Defaults to <code class="literal">_es_anonymous_user</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.anonymous.roles</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The roles to associate with the anonymous user. Required.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.anonymous.authz_exception</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
When <code class="literal">true</code>, an HTTP 403 response is returned if the anonymous user
does not have the appropriate permissions for the requested action. The
user is not prompted to provide credentials to access the requested
resource. When set to <code class="literal">false</code>, an HTTP 401 response is returned and the user
can provide credentials with the appropriate permissions to gain
access. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h4><a id="security-automata-settings"></a>Automata Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>In places where the security features accept wildcard patterns (e.g. index
patterns in roles, group matches in the role mapping API), each pattern is
compiled into an Automaton. The follow settings are available to control this
behaviour.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.automata.max_determinized_states</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The upper limit on how many automaton states may be created by a single pattern.
This protects against too-difficult (e.g. exponentially hard) patterns.
Defaults to <code class="literal">100,000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.automata.cache.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Whether to cache the compiled automata. Compiling automata can be CPU intensive
and may slowdown some operations. The cache reduces the frequency with which
automata need to be compiled.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.automata.cache.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of items to retain in the automata cache.
Defaults to <code class="literal">10,000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.automata.cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The length of time to retain in an item in the automata cache (based on most
recent usage).
Defaults to <code class="literal">48h</code> (48 hours).
</dd>
</dl>
</div>
<h4><a id="field-document-security-settings"></a>Document and field level security settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You can set the following document and field level security
settings in <code class="literal">elasticsearch.yml</code>. For more information, see
<a class="xref" href="authorization.html#field-and-document-access-control" title="Setting up field and document level security">Setting up field and document level security</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.dls_fls.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">false</code> to prevent document and field level security
from being configured. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.dls.bitset.cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live for cached <code class="literal">BitSet</code> entries for document level security.
Document level security queries may depend on Lucene BitSet objects, and these are
automatically cached to improve performance. Defaults to expire entries that are
unused for <code class="literal">2h</code> (2 hours).
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.dls.bitset.cache.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum memory usage of cached <code class="literal">BitSet</code> entries for document level security.
Document level security queries may depend on Lucene BitSet objects, and these are
automatically cached to improve performance. Can be configured as a raw number
of bytes (such as <code class="literal">200mb</code> or <code class="literal">1g</code>) or a percentage of the node&#8217;s JVM heap
memory (such as <code class="literal">5%</code>). When the default value is exceeded, the least recently
used entries are evicted. Defaults to <code class="literal">10%</code> of the heap assigned to the node.
</dd>
</dl>
</div>
<h4><a id="token-service-settings"></a>Token service settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You can set the following token service settings in
<code class="literal">elasticsearch.yml</code>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.token.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">false</code> to disable the built-in token service. Defaults to <code class="literal">true</code> unless
 <code class="literal">xpack.security.http.ssl.enabled</code> is <code class="literal">false</code>. This prevents sniffing the token
  from a connection over plain http.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.token.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The length of time that a token is valid for. By default this value is <code class="literal">20m</code> or
20 minutes. The maximum value is 1 hour.
</dd>
</dl>
</div>
<h4><a id="api-key-service-settings"></a>API key service settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You can set the following API key service settings in
<code class="literal">elasticsearch.yml</code>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">false</code> to disable the built-in API key service. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.hashing.algorithm</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the hashing algorithm that is used for securing API key credentials.
See <a class="xref" href="settings.html#password-hashing-algorithms" title="Password hashing algorithms">Table 2, &#8220;Password hashing algorithms&#8221;</a>. Defaults to <code class="literal">pbkdf2</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live for cached API key entries. A API key id and a hash of its
API key are cached for this period of time. Specify the time period using
the standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">1d</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.cache.max_keys</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of API key entries that can live in the
cache at any given time. Defaults to 10,000.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.cache.hash_algo</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Expert)
The hashing algorithm that is used for the
in-memory cached API key credentials. For possible values, see <a class="xref" href="settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, &#8220;Cache hash algorithms&#8221;</a>.
Defaults to <code class="literal">ssha256</code>.
</dd>
</dl>
</div>
<h4><a id="security-domain-settings"></a>Security domain settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You configure security domain settings in the <code class="literal">xpack.security.authc.domains</code>
namespace in <code class="literal">elasticsearch.yml</code>.</p>
<p>For example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack:
  security:
    authc:
      domains:
        my_domain: <a id="CO18-1"></a><i class="conum" data-value="1"></i>
          realms: [ 'default_native', 'saml1' ] <a id="CO18-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO18-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specifies the name of the security domain</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO18-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specifies the realms that belong to the domain</p>
</td>
</tr>
</table>
</div>
<h4><a id="realm-settings"></a>Realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You configure realm settings in the <code class="literal">xpack.security.authc.realms</code>
namespace in <code class="literal">elasticsearch.yml</code>.</p>
<p>For example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.authc.realms:

    native.realm1: <a id="CO19-1"></a><i class="conum" data-value="1"></i>
        order: 0 <a id="CO19-2"></a><i class="conum" data-value="2"></i>
        ...

    ldap.realm2:
        order: 1
        ...

    active_directory.realm3:
        order: 2
        ...
    ...</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO19-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specifies the type of realm (for example, <code class="literal">native</code>, <code class="literal">ldap</code>,
<code class="literal">active_directory</code>, <code class="literal">pki</code>, <code class="literal">file</code>, <code class="literal">kerberos</code>, <code class="literal">saml</code>) and the realm name. This
information is required.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO19-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specifies priority of a realm in the realm chain. This information
is required.</p>
</td>
</tr>
</table>
</div>
<p>The valid settings vary depending on the realm type. For more
information, see <a class="xref" href="setting-up-authentication.html" title="User authentication"><em>User authentication</em></a>.</p>
<h5><a id="ref-realm-settings"></a>Settings valid for all realms<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">order</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The priority of the realm within the realm chain. Realms with a lower order are
consulted first. The value must be unique for each realm. This setting is required.
</dd>
<dt>
<span class="term">
<code class="literal">enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Indicates whether a realm is enabled. You can use this setting to disable a
realm without removing its configuration information. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-native-settings"></a>Native realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>In addition to the <a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>,
you can specify the following optional settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live for cached user entries. A user and a hash of its
credentials are cached for this period of time. Specify the time period using
the standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">20m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of user entries that can live in the
cache at any given time. Defaults to 100,000.
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Expert)
The hashing algorithm that is used for the
in-memory cached user credentials. For possible values, see <a class="xref" href="settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, &#8220;Cache hash algorithms&#8221;</a>.
Defaults to <code class="literal">ssha256</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">false</code>, disables authentication support in
this realm, so that it only supports user lookups.
(See the <a class="xref" href="authorization.html#run-as-privilege" title="Submitting requests on behalf of other users">run as</a> and
<a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">authorization realms</a> features).
Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-users-settings"></a>File realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>In addition to the <a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you can specify
the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live for cached user entries. A user and a hash of its credentials
are cached for this configured period of time. Defaults to <code class="literal">20m</code>. Specify values
using the standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>.
Defaults to <code class="literal">20m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of user entries that can live in the cache at a given time.
Defaults to 100,000.
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Expert)
The hashing algorithm that is used for the in-memory cached
user credentials. See <a class="xref" href="settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, &#8220;Cache hash algorithms&#8221;</a>. Defaults to <code class="literal">ssha256</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">false</code>, disables authentication support in
this realm, so that it only supports user lookups.
(See the <a class="xref" href="authorization.html#run-as-privilege" title="Submitting requests on behalf of other users">run as</a> and
<a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">authorization realms</a> features).
Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-ldap-settings"></a>LDAP realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>In addition to the <a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">Settings valid for all realms</a>, you can specify the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
One or more LDAP URLs in the <code class="literal">ldap[s]://&lt;server&gt;:&lt;port&gt;</code> format. Required.
</p>
<p>To provide multiple URLs, use a YAML array (<code class="literal">["ldap://server1:636", "ldap://server2:636"]</code>)
or comma-separated string (<code class="literal">"ldap://server1:636, ldap://server2:636"</code>).</p>
<p>While both are supported, you can&#8217;t mix the <code class="literal">ldap</code> and <code class="literal">ldaps</code> protocols.</p>
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The behavior to use when there are multiple LDAP URLs defined. For supported
values see <a class="xref" href="settings.html#load-balancing" title="Load balancing and failover">load balancing and failover types</a>.
Defaults to <code class="literal">failover</code>.
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.cache_ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
When using <code class="literal">dns_failover</code> or <code class="literal">dns_round_robin</code> as the load balancing type,
this setting controls the amount of time to cache DNS lookups. Defaults
to <code class="literal">1h</code>.
</dd>
<dt>
<span class="term">
<code class="literal">bind_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The DN of the user that is used to bind to the LDAP and perform searches.
Only applicable in user search mode.
If not specified, an anonymous bind is attempted.
Defaults to Empty. Due to its potential security impact, <code class="literal">bind_dn</code> is not
exposed via the <a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">nodes info API</a>.
</dd>
<dt>
<span class="term">
<code class="literal">bind_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">6.3</span>]
<span class="Admonishment-detail">
Deprecated in 6.3.
</span>
</span> Use <code class="literal">secure_bind_password</code> instead. The password for the user
that is used to bind to the LDAP directory.
Defaults to Empty. Due to its potential security impact, <code class="literal">bind_password</code> is not
exposed via the <a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">nodes info API</a>.
</dd>
<dt>
<span class="term">
<code class="literal">secure_bind_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the user that is used to bind to the LDAP directory.
Defaults to Empty.
</dd>
<dt>
<span class="term">
<code class="literal">user_dn_templates</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The DN template that replaces the user name with the string <code class="literal">{0}</code>.
This setting is multivalued; you can specify multiple user contexts.
Required to operate in user template mode. If <code class="literal">user_search.base_dn</code> is specified,
this setting is not valid. For more information on
the different modes, see <a class="xref" href="setting-up-authentication.html#ldap-realm" title="LDAP user authentication">LDAP user authentication</a>.
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the LDAP realm does not perform role mapping and
instead loads the user from the listed realms. The referenced realms are
consulted in the order that they are defined in this list.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If any settings starting with <code class="literal">user_search</code> are specified, the
<code class="literal">user_dn_templates</code> settings are ignored.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">user_group_attribute</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the attribute to examine on the user for group membership.
If any <code class="literal">group_search</code> settings are specified, this setting is ignored. Defaults
to <code class="literal">memberOf</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.base_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies a container DN to search for users. Required
to operated in user search mode. If <code class="literal">user_dn_templates</code> is specified, this
setting is not valid. For more information on
the different modes, see <a class="xref" href="setting-up-authentication.html#ldap-realm" title="LDAP user authentication">LDAP user authentication</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.scope</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The scope of the user search. Valid values are <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or
<code class="literal">base</code>. <code class="literal">one_level</code> only searches objects directly contained within the
<code class="literal">base_dn</code>. <code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>.
<code class="literal">base</code> specifies that the <code class="literal">base_dn</code> is the user object, and that it is
the only user considered. Defaults to <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.filter</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the filter used to search the directory in attempts to match
an entry with the username provided by the user. Defaults to <code class="literal">(uid={0})</code>.
<code class="literal">{0}</code> is substituted with the username provided when searching.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.attribute</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">5.6</span>]
<span class="Admonishment-detail">
Deprecated in 5.6.
</span>
</span> Use <code class="literal">user_search.filter</code> instead.
The attribute to match with the username sent with the request. Defaults to <code class="literal">uid</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enables or disables connection pooling for user search. If set to <code class="literal">false</code>, a new
connection is created for every search. The
default is <code class="literal">true</code> when <code class="literal">bind_dn</code> is set.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of connections to the LDAP server to allow in the
connection pool. Defaults to <code class="literal">20</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.initial_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The initial number of connections to create to the LDAP server on startup.
Defaults to <code class="literal">0</code>. If the LDAP server is down, values greater than <code class="literal">0</code> could cause
startup failures.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enables or disables a health check on LDAP connections in the connection
pool. Connections are checked in the background at the specified interval.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The distinguished name that is retrieved as part of the health check.
Defaults to the value of <code class="literal">bind_dn</code> if present; if
not, falls back to <code class="literal">user_search.base_dn</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The interval to perform background checks of connections in the pool.
Defaults to <code class="literal">60s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.base_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The container DN to search for groups in which the user has membership. When
this element is absent, Elasticsearch searches for the attribute specified by
<code class="literal">user_group_attribute</code> set on the user in order to determine group membership.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.scope</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether the group search should be <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or
<code class="literal">base</code>.  <code class="literal">one_level</code> only searches objects directly contained within the
<code class="literal">base_dn</code>. <code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>.
<code class="literal">base</code> specifies that the <code class="literal">base_dn</code> is a group object, and that it is the
only group considered. Defaults to  <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.filter</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies a filter to use to look up a group.
When not set, the realm searches for <code class="literal">group</code>, <code class="literal">groupOfNames</code>, <code class="literal">groupOfUniqueNames</code>,
or <code class="literal">posixGroup</code> with the attributes <code class="literal">member</code>, <code class="literal">memberOf</code>, or <code class="literal">memberUid</code>. Any
instance of <code class="literal">{0}</code> in the filter is replaced by the user attribute defined in
<code class="literal">group_search.user_attribute</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.user_attribute</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the user attribute that is fetched and provided as a parameter to
the filter. If not set, the user DN is passed into the filter. Defaults to Empty.
</dd>
<dt>
<span class="term">
<code class="literal">unmapped_groups_as_roles</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">true</code>, the names of any unmapped LDAP groups are used as role names
and assigned to the user. A group is considered to be <em>unmapped</em> if it is not
referenced in a <a class="xref" href="authorization.html#mapping-roles-file" title="Using role mapping files">role-mapping file</a>. API-based
role mappings are not considered. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">files.role_mapping</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The <a class="xref" href="manually-configure-security.html#security-files" title="Security files">location</a> for the
<a class="xref" href="authorization.html#mapping-roles" title="Mapping users and groups to roles">YAML role mapping configuration file</a>. Defaults to
<code class="literal">ES_PATH_CONF/role_mapping.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">follow_referrals</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether Elasticsearch should follow referrals returned
by the LDAP server. Referrals are URLs returned by the server that are to be
used to continue the LDAP operation (for example, search). Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">metadata</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A list of additional LDAP attributes that should be loaded from the
LDAP server and stored in the authenticated user&#8217;s metadata field.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_connect</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The TCP connect timeout period for establishing an LDAP connection.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_read</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.
</span>
</span> The TCP read timeout period after establishing an LDAP
connection. This is equivalent to and is deprecated in favor of
<code class="literal">timeout.response</code> and they cannot be used simultaneously. An <code class="literal">s</code> at the end
indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.response</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time interval to wait for the response from the LDAP server. An <code class="literal">s</code> at the
end indicates seconds, or <code class="literal">ms</code> indicates milliseconds. Defaults to the value of
<code class="literal">timeout.ldap_search</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.ldap_search</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The timeout period for an LDAP search. The value is specified in the request
and is enforced by the receiving LDAP Server.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
<p>If the LDAP server requires client authentication, it uses this file. You cannot
use this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
<p>This certificate is presented to clients when they connect.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
file name ends in ".p12", ".pfx" or "pkcs12", the default is <code class="literal">PKCS12</code>.
Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Indicates the type of verification when using <code class="literal">ldaps</code> to protect against man
in the middle attacks and certificate forgery.
</p>
<details open>
<summary class="title">Valid values</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Validates that the provided certificate: has an issue date that&#8217;s
within the <code class="literal">not_before</code> and <code class="literal">not_after</code> dates; chains to a trusted Certificate
Authority (CA); has a <code class="literal">hostname</code> or IP address that matches the names within
the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Validates the provided certificate and verifies that it&#8217;s signed by a
trusted authority (CA), but doesn&#8217;t check the certificate <code class="literal">hostname</code>.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
<p>
Performs no certificate validation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Setting certificate validation to <code class="literal">none</code> disables many security
benefits of SSL/TLS, which is very dangerous. Only set this value if instructed
by Elastic Support as a temporary diagnostic mechanism when attempting to
resolve TLS errors.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
<p>Defaults to <code class="literal">full</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<p>Elasticsearch relies on your JDK’s implementation of SSL and TLS.
View <a class="xref" href="manually-configure-security.html#jdk-tls-versions" title="Supported SSL/TLS versions by JDK version">Supported SSL/TLS versions by JDK version</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the cipher suites that should be supported when
communicating with the LDAP server.
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the time-to-live for cached user entries. A user and a hash of its
credentials are cached for this period of time. Use the standard Elasticsearch
<a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to  <code class="literal">20m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum number of user entries that the cache can contain.
Defaults to <code class="literal">100000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Expert)
Specifies the hashing algorithm that is used for the
in-memory cached user credentials. See <a class="xref" href="settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, &#8220;Cache hash algorithms&#8221;</a>. Defaults to <code class="literal">ssha256</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">false</code>, disables authentication support in
this realm, so that it only supports user lookups.
(See the <a class="xref" href="authorization.html#run-as-privilege" title="Submitting requests on behalf of other users">run as</a> and
<a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">authorization realms</a> features).
Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-ad-settings"></a>Active Directory realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>In addition to the <a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>,
you can specify the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
One or more LDAP URLs in the <code class="literal">ldap[s]://&lt;server&gt;:&lt;port&gt;</code> format. Defaults to
<code class="literal">ldap://&lt;domain_name&gt;:389</code>. This setting is required when connecting using
SSL/TLS or when using a custom port.
</p>
<p>To provide multiple URLs, use a YAML array (<code class="literal">["ldap://server1:636", "ldap://server2:636"]</code>)
or comma-separated string (<code class="literal">"ldap://server1:636, ldap://server2:636"</code>).</p>
<p>While both are supported, you can&#8217;t mix the <code class="literal">ldap</code> and <code class="literal">ldaps</code> protocols.</p>
<p>If no URL is provided, Elasticsearch uses a default of <code class="literal">ldap://&lt;domain_name&gt;:389</code>. This
default uses the <code class="literal">domain_name</code> setting value and assumes an unencrypted
connection to port 389.</p>
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The behavior to use when there are multiple LDAP URLs defined. For supported
values see <a class="xref" href="settings.html#load-balancing" title="Load balancing and failover">load balancing and failover types</a>.
Defaults to <code class="literal">failover</code>.
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.cache_ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
When using <code class="literal">dns_failover</code> or <code class="literal">dns_round_robin</code> as the load balancing type,
this setting controls the amount of time to cache DNS lookups. Defaults
to <code class="literal">1h</code>.
</dd>
<dt>
<span class="term">
<code class="literal">domain_name</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The domain name of Active Directory. If the <code class="literal">url</code> and the <code class="literal">user_search.base_dn</code>
settings are not specified, the cluster can derive those values from this
setting. Required.
</dd>
<dt>
<span class="term">
<code class="literal">bind_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The DN of the user that is used to bind to Active Directory and perform searches.
Defaults to Empty. Due to its potential security impact, <code class="literal">bind_dn</code> is not
exposed via the <a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">nodes info API</a>.
</dd>
<dt>
<span class="term">
<code class="literal">bind_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">6.3</span>]
<span class="Admonishment-detail">
Deprecated in 6.3.
</span>
</span> Use <code class="literal">secure_bind_password</code> instead. The password for the user
that is used to bind to Active Directory. Defaults to Empty. Due to its
potential security impact, <code class="literal">bind_password</code> is not exposed via the
<a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">nodes info API</a>.
</dd>
<dt>
<span class="term">
<code class="literal">secure_bind_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the user that is used to bind to Active Directory.
Defaults to Empty.
</dd>
<dt>
<span class="term">
<code class="literal">unmapped_groups_as_roles</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">true</code>, the names of any unmapped Active Directory groups are used as
role names and assigned to the user. A group is considered <em>unmapped</em> when it
is not referenced in any role-mapping files. API-based role mappings are not
considered. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">files.role_mapping</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The <a class="xref" href="manually-configure-security.html#security-files" title="Security files">location</a> for the YAML
role mapping configuration file. Defaults to <code class="literal">ES_PATH_CONF/role_mapping.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.base_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The context to search for a user. Defaults to the root
of the Active Directory domain.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.scope</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether the user search should be <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or <code class="literal">base</code>.
<code class="literal">one_level</code> only searches users directly contained within the <code class="literal">base_dn</code>.
<code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>. <code class="literal">base</code>
specifies that the <code class="literal">base_dn</code> is a user object, and that it is the
only user considered. Defaults to <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.filter</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies a filter to use to lookup a user given a username. The default
filter looks up <code class="literal">user</code> objects with either <code class="literal">sAMAccountName</code> or
<code class="literal">userPrincipalName</code>. If specified, this must be a valid LDAP user search filter.
For example <code class="literal">(&amp;(objectClass=user)(sAMAccountName={0}))</code>. For more information,
see
<a href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx" class="ulink" target="_top">Search Filter Syntax</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.upn_filter</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies a filter to use to lookup a user given a user principal name.
The default filter looks up <code class="literal">user</code> objects with
a matching <code class="literal">userPrincipalName</code>. If specified, this
must be a valid LDAP user search filter. For example,
<code class="literal">(&amp;(objectClass=user)(userPrincipalName={1}))</code>. <code class="literal">{1}</code> is the full user principal name
provided by the user. For more information, see
<a href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx" class="ulink" target="_top">Search Filter Syntax</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.down_level_filter</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies a filter to use to lookup a user given a down level logon name
(DOMAIN\user). The default filter looks up <code class="literal">user</code> objects with a matching
<code class="literal">sAMAccountName</code> in the domain provided. If specified, this
must be a valid LDAP user search filter. For example,
<code class="literal">(&amp;(objectClass=user)(sAMAccountName={0}))</code>. For more information, see
<a href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx" class="ulink" target="_top">Search Filter Syntax</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enables or disables connection pooling for user search. When
disabled a new connection is created for every search. The
default is <code class="literal">true</code> when <code class="literal">bind_dn</code> is provided.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of connections to the Active Directory server to allow in the
connection pool. Defaults to <code class="literal">20</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.initial_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The initial number of connections to create to the Active Directory server on startup.
Defaults to <code class="literal">0</code>. If the LDAP server is down, values greater than 0
could cause startup failures.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enables or disables a health check on Active Directory connections in the connection
pool. Connections are checked in the background at the specified interval.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The distinguished name to be retrieved as part of the health check.
Defaults to the value of <code class="literal">bind_dn</code> if that setting is present. Otherwise, it
defaults to the value of the <code class="literal">user_search.base_dn</code> setting.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The interval to perform background checks of connections in the pool.
Defaults to <code class="literal">60s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.base_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The context to search for groups in which the user has membership. Defaults
to the root of the Active Directory domain.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.scope</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether the group search should be <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or
<code class="literal">base</code>.  <code class="literal">one_level</code> searches for groups directly contained within the
<code class="literal">base_dn</code>. <code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>.
<code class="literal">base</code> specifies that the <code class="literal">base_dn</code> is a group object, and that it is
the only group considered. Defaults to <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">metadata</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A list of additional LDAP attributes that should be loaded from the
LDAP server and stored in the authenticated user&#8217;s metadata field.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_connect</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The TCP connect timeout period for establishing an LDAP connection.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_read</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.
</span>
</span> The TCP read timeout period after establishing an LDAP
connection. This is equivalent to and is deprecated in favor of
<code class="literal">timeout.response</code> and they cannot be used simultaneously. An <code class="literal">s</code> at the end
indicates seconds, or <code class="literal">ms</code> indicates milliseconds. Defaults to the value of
<code class="literal">timeout.ldap_search</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.response</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time interval to wait for the response from the AD server. An <code class="literal">s</code> at the
end indicates seconds, or <code class="literal">ms</code> indicates milliseconds. Defaults to the value of
<code class="literal">timeout.ldap_search</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.ldap_search</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The timeout period for an LDAP search. The value is specified in the request
and is enforced by the receiving LDAP Server.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
<p>This certificate is presented to clients when they connect.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
<p>If the Active Directory server requires client authentication, it uses this file.
You cannot use this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
file name ends in ".p12", ".pfx" or "pkcs12", the default is <code class="literal">PKCS12</code>.
Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Indicates the type of verification when using <code class="literal">ldaps</code> to protect against man
in the middle attacks and certificate forgery.
</p>
<details open>
<summary class="title">Valid values</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Validates that the provided certificate: has an issue date that&#8217;s
within the <code class="literal">not_before</code> and <code class="literal">not_after</code> dates; chains to a trusted Certificate
Authority (CA); has a <code class="literal">hostname</code> or IP address that matches the names within
the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Validates the provided certificate and verifies that it&#8217;s signed by a
trusted authority (CA), but doesn&#8217;t check the certificate <code class="literal">hostname</code>.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
<p>
Performs no certificate validation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Setting certificate validation to <code class="literal">none</code> disables many security
benefits of SSL/TLS, which is very dangerous. Only set this value if instructed
by Elastic Support as a temporary diagnostic mechanism when attempting to
resolve TLS errors.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
<p>Defaults to <code class="literal">full</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<p>Elasticsearch relies on your JDK’s implementation of SSL and TLS.
View <a class="xref" href="manually-configure-security.html#jdk-tls-versions" title="Supported SSL/TLS versions by JDK version">Supported SSL/TLS versions by JDK version</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the cipher suites that should be supported when
communicating with the Active Directory server.
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the time-to-live for cached user entries. A user and a hash of its
credentials are cached for this configured period of time. Use the
standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>).
Defaults to <code class="literal">20m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum number of user entries that the cache can contain.
Defaults to <code class="literal">100000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Expert)
Specifies the hashing algorithm that is used for
the in-memory cached user credentials. See <a class="xref" href="settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, &#8220;Cache hash algorithms&#8221;</a>. Defaults to <code class="literal">ssha256</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">false</code>, disables authentication support in
this realm, so that it only supports user lookups.
(See the <a class="xref" href="authorization.html#run-as-privilege" title="Submitting requests on behalf of other users">run as</a> and
<a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">authorization realms</a> features).
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">follow_referrals</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">true</code>, Elasticsearch follows referrals returned by the LDAP server.
Referrals are URLs returned by the server that are to be used to continue the
LDAP operation (such as <code class="literal">search</code>). Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-pki-settings"></a>PKI realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>In addition to the <a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you can specify
the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">username_pattern</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The regular expression pattern used to extract the username from the
certificate DN. The first match group is the used as the username.
Defaults to <code class="literal">CN=(.*?)(?:,\|$)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">certificate_authorities</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to the PEM certificate files that should be used to authenticate a
user&#8217;s certificate as trusted. Defaults to the trusted certificates configured
for SSL. This setting cannot be used with <code class="literal">truststore.path</code>.
</dd>
<dt>
<span class="term">
<code class="literal">truststore.algorithm</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Algorithm for the truststore. Defaults to <code class="literal">SunX509</code>.
</dd>
<dt>
<span class="term">
<code class="literal">truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
</dl>
</div>
<p>If <code class="literal">truststore.path</code> is set, this setting is required.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">truststore.path</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path of a truststore to use. Defaults to the trusted certificates configured
for SSL. This setting cannot be used with <code class="literal">certificate_authorities</code>.
</dd>
<dt>
<span class="term">
<code class="literal">files.role_mapping</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the <a class="xref" href="manually-configure-security.html#security-files" title="Security files">location</a> of the
<a class="xref" href="authorization.html#mapping-roles" title="Mapping users and groups to roles">YAML role mapping configuration file</a>.
Defaults to <code class="literal">ES_PATH_CONF/role_mapping.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the PKI realm does not perform role mapping and
instead loads the user from the listed realms.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the time-to-live for cached user entries. A user and a hash of its
credentials are cached for this period of time. Use the
standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>).
Defaults to <code class="literal">20m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum number of user entries that the cache can contain.
Defaults to <code class="literal">100000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">delegation.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Generally, in order for the clients to be authenticated by the PKI realm they
must connect directly to Elasticsearch. That is, they must not pass through proxies
which terminate the TLS connection. In order to allow for a <span class="strong strong"><strong>trusted</strong></span> and
<span class="strong strong"><strong>smart</strong></span> proxy, such as Kibana, to sit before Elasticsearch and terminate TLS
connections, but still allow clients to be authenticated on Elasticsearch by this realm,
you need to toggle this to <code class="literal">true</code>. Defaults to <code class="literal">false</code>. If delegation is
enabled, then either <code class="literal">truststore.path</code> or <code class="literal">certificate_authorities</code> setting
must be defined. For more details, see <a class="xref" href="setting-up-authentication.html#pki-realm-for-proxied-clients" title="PKI authentication for clients connecting to Kibana">Configuring authentication delegation for PKI realms</a>.
</dd>
</dl>
</div>
<h5><a id="ref-saml-settings"></a>SAML realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>In addition to the <a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you can specify
the following settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.entity_id</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
 (<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Entity ID of the SAML Identity Provider. An Entity ID is a URI with a
maximum length of 1024 characters. It can be a URL (<a href="https://idp.example.com/" class="ulink" target="_top">https://idp.example.com/</a>) or
a URN (<code class="literal">urn:example.com:idp</code>) and can be found in the configuration or the SAML
metadata of the Identity Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.metadata.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path <em>(recommended)</em> or URL to a SAML 2.0 metadata file describing the
capabilities and configuration of the Identity Provider.
If a path is provided, then it is resolved relative to the Elasticsearch config
directory.
If a URL is provided, then it must be either a <code class="literal">file</code> URL or a <code class="literal">https</code> URL.
</p>
<p>Elasticsearch automatically polls this metadata resource and reloads
the IdP configuration when changes are detected.
File based resources are polled at a frequency determined by the global Elasticsearch
<code class="literal">resource.reload.interval.high</code> setting, which defaults to 5 seconds.
HTTPS resources are polled at a frequency determined by the realm&#8217;s
<code class="literal">idp.metadata.http.refresh</code> and <code class="literal">idp.metadata.http.minimum_refresh</code> settings.</p>
<p>If the metadata resource is loaded from a file then the file must exist at node
startup, if it does not exist then the node will fail to start.
If the resource is loaded over HTTPS then (by default) the node will be tolerant
of a failure to load the resource - the node will start and will continue to
poll the URL for updates. The affected SAML realm will fail to authenticate
users until the problem is resolved. To force the node to fail if the metadata is
unavailable set <code class="literal">idp.metadata.http.fail_on_error</code> to <code class="literal">true</code>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.metadata.http.fail_on_error</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">true</code>, the realm will fail on startup (and prevent the node from starting)
if it attempts to load metadata over HTTPS and that metadata is not available.
If set to <code class="literal">false</code> (the default), the node will start but the affected SAML realm will
not support user authentication until the metadata can be successfully loaded.
This setting is ignored if metadata is loaded from a file.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.metadata.http.refresh</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the frequency with which <code class="literal">https</code> metadata is checked for changes.
Defaults to <code class="literal">1h</code> (1 hour).
</p>
<p>Under some circumstances Elasticsearch may determine that the metadata needs to be checked
more frequently. This may occur if previous attempts to load the metadata
encountered an error, or if the metadata indicates that it is due to expire in
less than the configured refresh interval. In these cases Elasticsearch will poll more
often, but never more frequently than <code class="literal">idp.metadata.http.minimum_refresh</code>.
If there is an attempt to authenticate against a realm that has not yet loaded
metadata successfully, that realm may attempt to load metadata outside of the
configured polling frequency.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.metadata.http.minimum_refresh</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the minimum frequency with which <code class="literal">https</code> metadata is checked for
changes. In regular operation Elasticsearch will use the value of
<code class="literal">idp.metadata.http.refresh</code> as the polling interval. However, under some
circumstances Elasticsearch may determine that it needs to poll more frequently.
In these cases, the <code class="literal">minimum_refresh</code> will set the minimum frequency at which
the metdata will be checked.
Defaults to <code class="literal">5m</code> (5 minutes) and must not be set to a value greater than
<code class="literal">idp.metadata.http.refresh</code>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.use_single_logout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Indicates whether to utilise the Identity Provider&#8217;s Single Logout service
(if one exists in the IdP metadata file).
Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">sp.entity_id</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Entity ID to use for this SAML Service Provider. This should be entered as a
URI. We recommend that you use the base URL of your Kibana instance. For example,
<code class="literal">https://kibana.example.com/</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">sp.acs</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL of the Assertion Consumer Service within Kibana. Typically this is the
"api/security/saml/callback" endpoint of your Kibana server. For example,
<code class="literal">https://kibana.example.com/api/security/saml/callback</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">sp.logout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL of the Single Logout service within Kibana. Typically this is the
"logout" endpoint of your Kibana server. For example,
<code class="literal">https://kibana.example.com/logout</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes.principal</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Name of the SAML attribute that contains the user&#8217;s principal (username).
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes.groups</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Name of the SAML attribute that contains the user&#8217;s groups.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes.name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Name of the SAML attribute that contains the user&#8217;s full name.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes.mail</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Name of the SAML attribute that contains the user&#8217;s email address.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes.dn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Name of the SAML attribute that contains the user&#8217;s X.50
<em>Distinguished Name</em>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attribute_patterns.principal</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A Java regular expression that is matched against the SAML attribute specified
by <code class="literal">attributes.pattern</code> before it is applied to the user&#8217;s <em>principal</em> property.
The attribute value must match the pattern and the value of the first
<em>capturing group</em> is used as the principal. For example, <code class="literal">^([^@]+)@example\\.com$</code>
matches email addresses from the "example.com" domain and uses the local-part as
the principal.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attribute_patterns.groups</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>group</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attribute_patterns.name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>name</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attribute_patterns.mail</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>mail</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attribute_patterns.dn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>dn</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">nameid_format</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The NameID format that should be requested when asking the IdP to authenticate
the current user. The default is to not include the <code class="literal">nameid_format</code> attribute.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">nameid.allow_create</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The value of the <code class="literal">AllowCreate</code> attribute of the
<code class="literal">NameIdPolicy</code> element in an authentication request. The default value is false.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">nameid.sp_qualifier</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The value of the <code class="literal">SPNameQualifier</code> attribute of the
<code class="literal">NameIdPolicy</code> element in an authentication request. The default is to not
include the <code class="literal">SPNameQualifier</code> attribute.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">force_authn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether to set the <code class="literal">ForceAuthn</code> attribute when requesting that the IdP
authenticate the current user. If set to <code class="literal">true</code>, the IdP is required to verify
the user’s identity, irrespective of any existing sessions they might have.
Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">populate_user_metadata</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether to populate the Elasticsearch user&#8217;s metadata with the values that are
provided by the SAML attributes. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the SAML realm does not perform role mapping and
instead loads the user from the listed realms.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allowed_clock_skew</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum amount of skew that can be tolerated between the IdP&#8217;s clock and the
Elasticsearch node&#8217;s clock.
Defaults to <code class="literal">3m</code> (3 minutes).
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">req_authn_context_class_ref</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A comma separated list of Authentication Context Class Reference values to be
included in the Requested Authentication Context when requesting the IdP to
authenticate the current user. The Authentication Context of the corresponding
authentication response should contain at least one of the requested values.
</p>
<p>For more information, see
<a class="xref" href="setting-up-authentication.html#req-authn-context" title="Requesting specific authentication methods">Requesting specific authentication methods</a>.</p>
</dd>
</dl>
</div>
<h5><a id="ref-saml-signing-settings"></a>SAML realm signing settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>If a signing key is configured (that is, either <code class="literal">signing.key</code> or
<code class="literal">signing.keystore.path</code> is set), then Elasticsearch signs outgoing SAML messages.
Signing can be configured using the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.saml_messages</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A list of SAML message types that should be signed or <code class="literal">*</code> to sign all messages.
Each element in the list should be the local name of a SAML XML Element.
Supported element types are <code class="literal">AuthnRequest</code>, <code class="literal">LogoutRequest</code> and <code class="literal">LogoutResponse</code>.
Only valid if <code class="literal">signing.key</code> or <code class="literal">signing.keystore.path</code> is also specified.
Defaults to <code class="literal">*</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.key</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path to the PEM encoded private key to use for SAML message signing.
<code class="literal">signing.key</code> and <code class="literal">signing.keystore.path</code> cannot be used at the same time.
</dd>
<dt>
<span class="term">
<code class="literal">signing.secure_key_passphrase</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Specifies the passphrase to decrypt the PEM encoded private key (<code class="literal">signing.key</code>)
if it is encrypted.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.certificate</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path to the PEM encoded certificate (or certificate chain) that
corresponds to the <code class="literal">signing.key</code>. This certificate must also be included in the
Service Provider metadata or manually configured within the IdP to allow for
signature validation. This setting can only be used if <code class="literal">signing.key</code> is set.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.keystore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path to the keystore that contains a private key and certificate. It must be
either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and
<code class="literal">signing.key</code> at the same time.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.keystore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The type of the keystore in <code class="literal">signing.keystore.path</code>.
Must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the keystore path ends in ".p12", ".pfx",
or "pkcs12", this setting defaults to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.keystore.alias</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the alias of the key within the keystore that should be
used for SAML message signing. If the keystore contains more than one private
key, this setting must be specified.
</dd>
<dt>
<span class="term">
<code class="literal">signing.keystore.secure_password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password to the keystore in <code class="literal">signing.keystore.path</code>.
</dd>
<dt>
<span class="term">
<code class="literal">signing.keystore.secure_key_password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore (<code class="literal">signing.keystore.path</code>).
Defaults to the keystore password.
</dd>
</dl>
</div>
<h5><a id="ref-saml-encryption-settings"></a>SAML realm encryption settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>If an encryption key is configured (that is, either <code class="literal">encryption.key</code> or
<code class="literal">encryption.keystore.path</code> is set), then Elasticsearch publishes an encryption
certificate when generating metadata and attempts to decrypt incoming SAML
content. Encryption can be configured using the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.key</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path to the PEM encoded private key to use for SAML message
decryption.
<code class="literal">encryption.key</code> and <code class="literal">encryption.keystore.path</code> cannot be used at the same time.
</dd>
<dt>
<span class="term">
<code class="literal">encryption.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Specifies the passphrase to decrypt the PEM encoded private key
(<code class="literal">encryption.key</code>) if it is encrypted.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.certificate</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path to the PEM encoded certificate (or certificate chain) that is
associated with the <code class="literal">encryption.key</code>. This certificate must also be included in
the Service Provider metadata or manually configured within the IdP to enable
message encryption. This setting can be used only if <code class="literal">encryption.key</code> is set.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.keystore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path to the keystore that contains a private key and certificate. It must be
either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and
<code class="literal">encryption.key</code> at the same time.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.keystore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The type of the keystore (<code class="literal">encryption.keystore.path</code>).
Must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the keystore path ends in ".p12", ".pfx",
or "pkcs12", this setting defaults to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.keystore.alias</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the alias of the key within the keystore (<code class="literal">encryption.keystore.path</code>)
that should be used for SAML message decryption. If not specified, all compatible
key pairs from the keystore are considered as candidate keys for decryption.
</dd>
<dt>
<span class="term">
<code class="literal">encryption.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password to the keystore (<code class="literal">encryption.keystore.path</code>).
</dd>
<dt>
<span class="term">
<code class="literal">encryption.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore (<code class="literal">encryption.keystore.path</code>). Only a
single password is supported. If you are using multiple decryption keys,
they cannot have individual passwords.
</dd>
</dl>
</div>
<h5><a id="ref-saml-ssl-settings"></a>SAML realm SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>If you are loading the IdP metadata over SSL/TLS (that is, <code class="literal">idp.metadata.path</code>
is a URL using the <code class="literal">https</code> protocol), the following settings can be used to
configure SSL.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings are not used for any purpose other than loading metadata
over https.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.key_passphrase</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.certificate</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_key_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
</dl>
</div>
<p>You cannot use this setting and <code class="literal">ssl.keystore.key_password</code> at the same time.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
file name ends in ".p12", ".pfx" or "pkcs12", the default is <code class="literal">PKCS12</code>.
Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</p>
<p>This setting cannot be used with <code class="literal">ssl.truststore.password</code>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the verification of certificates.
</p>
<details open>
<summary class="title">Valid values</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Validates that the provided certificate: has an issue date that&#8217;s
within the <code class="literal">not_before</code> and <code class="literal">not_after</code> dates; chains to a trusted Certificate
Authority (CA); has a <code class="literal">hostname</code> or IP address that matches the names within
the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Validates the provided certificate and verifies that it&#8217;s signed by a
trusted authority (CA), but doesn&#8217;t check the certificate <code class="literal">hostname</code>.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
<p>
Performs no certificate validation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Setting certificate validation to <code class="literal">none</code> disables many security
benefits of SSL/TLS, which is very dangerous. Only set this value if instructed
by Elastic Support as a temporary diagnostic mechanism when attempting to
resolve TLS errors.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
<p>Defaults to <code class="literal">full</code>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<p>Elasticsearch relies on your JDK’s implementation of SSL and TLS.
View <a class="xref" href="manually-configure-security.html#jdk-tls-versions" title="Supported SSL/TLS versions by JDK version">Supported SSL/TLS versions by JDK version</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<h5><a id="ref-kerberos-settings"></a>Kerberos realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>In addition to the
<a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you can specify
the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">keytab.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path to the Kerberos keytab file that contains the
service principal used by this Elasticsearch node. This must be a location within the
Elasticsearch configuration directory and the file must have read permissions. Required.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">remove_realm_name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">true</code> to remove the realm part of principal names.
Principal names in Kerberos have the form <code class="literal">user/instance@REALM</code>. If this option
is <code class="literal">true</code>, the realm part (<code class="literal">@REALM</code>) will not be included in the username.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">krb.debug</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">true</code> to enable debug logs for the Java login module that
provides support for Kerberos authentication. Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.ttl</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live for cached user entries. A user is cached for
this period of time. Specify the time period using the standard Elasticsearch
<a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">20m</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.max_users</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of user entries that can live in the
cache at any given time. Defaults to 100,000.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">authorization_realms</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the Kerberos realm does not perform role mapping and
instead loads the user from the listed realms.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</dd>
</dl>
</div>
<h5><a id="ref-oidc-settings"></a>OpenID Connect realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>In addition to the <a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you
can specify the following settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.issuer</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A verifiable Identifier for your OpenID Connect Provider. An Issuer
Identifier is usually a case sensitive URL using the https scheme that contains
scheme, host, and optionally, port number and path components and no query or
fragment components. The value for this setting should be provided by your OpenID
Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.authorization_endpoint</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL for the Authorization Endpoint at the
OpenID Connect Provider. The value for this setting should be provided by your OpenID
Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.token_endpoint</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL for the Token Endpoint at the OpenID Connect Provider.
The value for this setting should be provided by your OpenID Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.userinfo_endpoint</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL for the User Info Endpoint at the OpenID Connect Provider.
The value for this setting should be provided by your OpenID Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.endsession_endpoint</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL for the End Session Endpoint at the OpenID Connect
Provider. The value for this setting should be provided by your OpenID Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.jwkset_path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path or URL to a JSON Web Key Set with the key material that the OpenID Connect
Provider uses for signing tokens and claims responses.
If a path is provided, then it is resolved relative to the Elasticsearch config
directory.
If a URL is provided, then it must be either a <code class="literal">file</code> URL or a <code class="literal">https</code> URL.
Elasticsearch automatically caches the retrieved JWK set to avoid unnecessary HTTP
requests but will attempt to refresh the JWK upon signature verification
failure, as this might indicate that the OpenID Connect Provider has
rotated the signing keys.
</p>
<p>File-based resources are polled at a frequency determined by the global Elasticsearch
<code class="literal">resource.reload.interval.high</code> setting, which defaults to 5 seconds.</p>
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the OpenID Connect realm does not perform role
mapping and instead loads the user from the listed realms.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.client_id</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The OAuth 2.0 Client Identifier that was assigned to Elasticsearch during registration
at the OpenID Connect Provider.
</dd>
<dt>
<span class="term">
<code class="literal">rp.client_secret</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The OAuth 2.0 Client Secret that was assigned to Elasticsearch during registration
at the OpenID Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.client_auth_method</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The client authentication method used by Elasticsearch to authenticate
to the OpenID Connect Provider. Can be <code class="literal">client_secret_basic</code>, <code class="literal">client_secret_post</code>,
or <code class="literal">client_secret_jwt</code>. Defaults to <code class="literal">client_secret_basic</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.client_auth_jwt_signature_algorithm</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The signature algorithm that Elasticsearch uses to sign the JWT with which it authenticates
as a client to the OpenID Connect Provider when <code class="literal">client_secret_jwt</code> is selected for
<code class="literal">rp.client_auth_method</code>. Can be either <code class="literal">HS256</code>, <code class="literal">HS384</code>, or <code class="literal">HS512</code>. Defaults to
<code class="literal">HS384</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.redirect_uri</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Redirect URI within Kibana. If you want to use the authorization code flow, this is the
<code class="literal">api/security/oidc/callback</code> endpoint of your Kibana server. If you want to use the implicit flow,  it is the <code class="literal">api/security/oidc/implicit</code> endpoint.
For example, <code class="literal">https://kibana.example.com/api/security/oidc/callback</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.response_type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
OAuth 2.0 Response Type value that determines the authorization
processing flow to be used. Can be <code class="literal">code</code> for authorization code grant flow,
or one of <code class="literal">id_token</code>, <code class="literal">id_token token</code> for the implicit flow.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.signature_algorithm</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The signature algorithm that will be used by Elasticsearch in order to verify the
signature of the id tokens it will receive from the OpenID Connect Provider.
Allowed values are <code class="literal">HS256</code>, <code class="literal">HS384</code>, <code class="literal">HS512</code>, <code class="literal">ES256</code>, <code class="literal">ES384</code>, <code class="literal">ES512</code>,
<code class="literal">RS256</code>, <code class="literal">RS384</code>, <code class="literal">RS512</code>, <code class="literal">PS256</code>, <code class="literal">PS384</code>, <code class="literal">PS512</code>.
Defaults to <code class="literal">RS256</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.requested_scopes</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The scope values that will be requested by the OpenID Connect Provider as
part of the Authentication Request. Optional, defaults to <code class="literal">openid</code>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.post_logout_redirect_uri</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Redirect URI (usually within Kibana) that the OpenID Connect Provider
should redirect the browser to after a successful Single Logout.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.principal</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the OpenID Connect claim that contains the user&#8217;s principal (username).
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.groups</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the OpenID Connect claim that contains the user&#8217;s groups.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the OpenID Connect claim that contains the user&#8217;s full name.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.mail</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the OpenID Connect claim that contains the user&#8217;s email address.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.dn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the OpenID Connect claim that contains the user&#8217;s X.509
<em>Distinguished Name</em>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.principal</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A Java regular expression that is matched against the OpenID Connect claim specified
by <code class="literal">claims.principal</code> before it is applied to the user&#8217;s <em>principal</em> property.
The attribute value must match the pattern and the value of the first
<em>capturing group</em> is used as the principal. For example, <code class="literal">^([^@]+)@example\\.com$</code>
matches email addresses from the "example.com" domain and uses the local-part as
the principal.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.groups</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">claim_patterns.principal</code>, but for the <em>group</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">claim_patterns.principal</code>, but for the <em>name</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.mail</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">claim_patterns.principal</code>, but for the <em>mail</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.dn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">claim_patterns.principal</code>, but for the <em>dn</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allowed_clock_skew</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum allowed clock skew to be taken into consideration when validating
id tokens with regards to their creation and expiration times.
Defaults to <code class="literal">60s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">populate_user_metadata</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether to populate the Elasticsearch user&#8217;s metadata with the values that are
provided by the OpenID Connect claims. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.proxy.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the address of the proxy server that will be used by the internal
http client for all back-channel communication to the OpenID Connect Provider
endpoints. This includes requests to the Token Endpoint, the Userinfo Endpoint
and requests to fetch the JSON Web Key Set from the OP if <code class="literal">op.jwkset_path</code> is
set as a URL.
</dd>
<dt>
<span class="term">
<code class="literal">http.proxy.scheme</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the protocol to use to connect to the proxy server that will be
used by the http client for all back-channel communication to the OpenID
Connect Provider endpoints. Defaults to <code class="literal">http</code>. Allowed values are
<code class="literal">http</code> or <code class="literal">https</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.proxy.port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the port of the proxy server that will be used by the http
client for all backchannel communication to the OpenID Connect Provider
endpoints. Defaults to <code class="literal">80</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.connect_timeout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the timeout until a connection
 is established. A value of zero means the timeout is not used. Defaults to <code class="literal">5s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.connection_read_timeout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the timeout used when
requesting a connection from the connection manager. Defaults to <code class="literal">5s</code>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.socket_timeout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the socket timeout (SO_TIMEOUT)
in milliseconds, which is the timeout for waiting for data or, put differently,
a maximum period inactivity between two consecutive data packets). Defaults to
<code class="literal">5s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.max_connections</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the maximum number of
connections allowed across all endpoints.
Defaults to <code class="literal">200</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.max_endpoint_connections</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the maximum number of
connections allowed per endpoint.
Defaults to <code class="literal">200</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.tcp.keep_alive</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Whether to enable TCP keepalives on HTTP connections used for back-channel communication
to the OpenID Connect Provider endpoints. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.connection_pool_ttl</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the time-to-live of connections
in the connection pool (default to 3 minutes). A connection is closed if it is
idle for more than the specified timeout.
</dd>
</dl>
</div>
<p>The server can also set the <code class="literal">Keep-Alive</code> HTTP response header. The effective
time-to-live value is the smaller value between this setting and the <code class="literal">Keep-Alive</code>
reponse header. Configure this setting to <code class="literal">-1</code> to let the server dictate the value.
If the header is not set by the server and the setting has value of <code class="literal">-1</code>,
the time-to-live is infinite and connections never expire.</p>
<h5><a id="ref-oidc-ssl-settings"></a>OpenID Connect realm SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The following settings can be used to configure SSL for all outgoing http connections
to the OpenID Connect Provider endpoints.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings are <em>only</em> used for the back-channel communication between
Elasticsearch and the OpenID Connect Provider</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.key_passphrase</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.certificate</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_key_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.key_password</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
file name ends in ".p12", ".pfx" or "pkcs12", the default is <code class="literal">PKCS12</code>.
Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.password</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the verification of certificates.
</p>
<details open>
<summary class="title">Valid values</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Validates that the provided certificate: has an issue date that&#8217;s
within the <code class="literal">not_before</code> and <code class="literal">not_after</code> dates; chains to a trusted Certificate
Authority (CA); has a <code class="literal">hostname</code> or IP address that matches the names within
the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Validates the provided certificate and verifies that it&#8217;s signed by a
trusted authority (CA), but doesn&#8217;t check the certificate <code class="literal">hostname</code>.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
<p>
Performs no certificate validation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Setting certificate validation to <code class="literal">none</code> disables many security
benefits of SSL/TLS, which is very dangerous. Only set this value if instructed
by Elastic Support as a temporary diagnostic mechanism when attempting to
resolve TLS errors.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
<p>Defaults to <code class="literal">full</code>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<p>Elasticsearch relies on your JDK’s implementation of SSL and TLS.
View <a class="xref" href="manually-configure-security.html#jdk-tls-versions" title="Supported SSL/TLS versions by JDK version">Supported SSL/TLS versions by JDK version</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<h5><a id="ref-jwt-settings"></a>JWT realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>In addition to the <a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you
can specify the following settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">token_type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The token type, <code class="literal">id_token</code> or <code class="literal">access_token</code>, that the JWT realm uses to verify
incoming JWTs. Defaults to <code class="literal">id_token</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allowed_audiences</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A list of allowed JWT audiences that Elasticsearch should verify. Elasticsearch will only consume
JWTs that were intended for any of these audiences, as denoted by the <code class="literal">aud</code>
claim in the JWT).
The audiences are compared with exact string matches and do not support wildcards or regex.
Examples of <code class="literal">aud</code> claim are <code class="literal">https://example.com/client1</code>
and <code class="literal">other_service,elasticsearch</code>. When <code class="literal">token_type</code> is <code class="literal">access_token</code>, the audiences can
be optionally denoted by a different claim in the JWT if <code class="literal">aud</code> does not exist.
See also <a class="xref" href="settings.html#security-settings-jwt-fallback-claims-aud"><code class="literal">fallback_claims.aud</code></a>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allowed_clock_skew</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum allowed clock skew to be taken into consideration when validating
JWTs with regards to their creation, not before, and expiration times.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allowed_issuer</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A verifiable Identifier for your JWT Issuer. An Issuer
Identifier is usually a case sensitive URL using the https scheme that contains
scheme, host, and optionally, port number and path components and no query or
fragment components. However, it can be any string. The value for this setting
should be provided by your JWT Issuer.
The issuer is compared with exact string matches and do not support wildcards or regex.
Examples of <code class="literal">iss</code> claim are <code class="literal">https://example.com:8443/jwt</code> and <code class="literal">issuer123</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allowed_subjects</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A list of allowed JWT subjects that Elasticsearch should verify. Elasticsearch will only consume
JWTs that were issued for any of these subjects, as denoted by the <code class="literal">sub</code>
claim in the JWT.
The subjects are compared with exact string matches and do not support wildcards or regex.
Examples of <code class="literal">sub</code> claim are <code class="literal">https://example.com/user1</code>
and <code class="literal">user_1,user2</code>.
When <code class="literal">token_type</code> is <code class="literal">access_token</code>, this setting is mandatory and the subject can be
optionally denoted by a different claim in the JWT if <code class="literal">sub</code> does not exist.
See also <a class="xref" href="settings.html#security-settings-jwt-fallback-claims-sub"><code class="literal">fallback_claims.sub</code></a>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="security-settings-jwt-fallback-claims-sub"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">fallback_claims.sub</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The alternative claim to look for the subject information if the <code class="literal">sub</code> claim
does not exist. It is configurable only when the <code class="literal">token_type</code> is <code class="literal">access_token</code>.
The fallback is applied everywhere the <code class="literal">sub</code> claim is used.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="security-settings-jwt-fallback-claims-aud"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">fallback_claims.aud</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The alternative claim to look for the audiences information if the <code class="literal">aud</code> claim
does not exist. It is configurable only when the <code class="literal">token_type</code> is <code class="literal">access_token</code>.
The fallback is applied everywhere the <code class="literal">aud</code> claim is used.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">required_claims</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Additional claims and associated values that Elasticsearch should verify.
This is a group setting that takes key/value pairs, where the key is a string
and the value must be either a string or an array of strings.
The values are compared with exact string matches and do not support wildcards or regex.
</dd>
</dl>
</div>
<p>For example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.authc.realms.jwt.jwt1:
  required_claims:
    token_use: "id"
    versions: ["1.0", "2.0"]</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allowed_signature_algorithms</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A list of signature algorithms that will be used by Elasticsearch in order to verify the
signature of the JWT it will receive from the JWT Issuer.
Defaults to <code class="literal">RS256</code>. Examples are <code class="literal">HS512,RS512,ES512</code> and <code class="literal">ES384</code>.
Allowed values are <code class="literal">HS256</code>, <code class="literal">HS384</code>, <code class="literal">HS512</code>, <code class="literal">ES256</code>, <code class="literal">ES384</code>, <code class="literal">ES512</code>,
<code class="literal">RS256</code>, <code class="literal">RS384</code>, <code class="literal">RS512</code>, <code class="literal">PS256</code>, <code class="literal">PS384</code>, <code class="literal">PS512</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the JWT realm does not perform role
mapping and instead loads the user from the listed realms.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.dn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the JWT claim that contains the user&#8217;s Distinguished Name (DN),
which uniquely identifies a user or group.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.dn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Accepts the same Java regular expression as
<a class="xref" href="settings.html#jwt-claim-pattern-principal"><code class="literal">claim_patterns.principal</code></a>, but for the <code class="literal">dn</code>
property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.groups</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the JWT claim that contains the user&#8217;s groups, such as <code class="literal">groups</code> and
<code class="literal">roles</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.group</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Accepts the same Java regular expression as
<a class="xref" href="settings.html#jwt-claim-pattern-principal"><code class="literal">claim_patterns.principal</code></a>, but for the <code class="literal">group</code>
property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.mail</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the JWT claim that contains the user&#8217;s e-mail address.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.mail</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Accepts the same Java regular expression as
<a class="xref" href="settings.html#jwt-claim-pattern-principal"><code class="literal">claim_patterns.principal</code></a>, but for the <code class="literal">mail</code>
property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the JWT claim that contains the user&#8217;s username.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Accepts the same Java regular expression as
<a class="xref" href="settings.html#jwt-claim-pattern-principal"><code class="literal">claim_patterns.principal</code></a>, but for the <code class="literal">name</code>
property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.principal</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the JWT claim that contains the user&#8217;s principal (username), such as
<code class="literal">sub</code>, <code class="literal">name</code>, <code class="literal">email</code>, and <code class="literal">dn</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="jwt-claim-pattern-principal"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.principal</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
An optional Java regular expression that is matched against the JWT claim specified
by <code class="literal">claims.principal</code> before it is applied to the user&#8217;s <code class="literal">principal</code> property.
The value must match the pattern and the value of the first
<em>capturing group</em> is used as the principal. For example, <code class="literal">^([^@]+)@example\\.com$</code>
matches email addresses from the <code class="literal">example.com</code> domain and uses the local-part as
the principal. Another example is <code class="literal">sub</code> which may not need a pattern setting.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">client_authentication.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether to use <code class="literal">shared_secret</code> or <code class="literal">none</code> to authenticate
incoming client requests. If this value is <code class="literal">shared_secret</code>, the client is
authenticated using an HTTP request header that must match a pre-configured
secret value. The client must provide this shared secret with every request in
the <code class="literal">ES-Client-Authentication</code> header. If this value is <code class="literal">none</code>, then the
request header <code class="literal">ES-Client-Authentication</code> is ignored. Defaults to
<code class="literal">shared_secret</code>.
</p>
<p>Enabling client authentication is recommended. If JWT bearer
tokens are shared with other clients or services, client authentication
restricts which ones are allowed to submit those JWTs to Elasticsearch.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">client_authentication.shared_secret</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Secret value string for client authentication.
Required if <code class="literal">client_authentication.type</code> is <code class="literal">shared_secret</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.connect_timeout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets the timeout for the HTTP client that is used for fetching the JSON Web Key
Set from a remote URL. A value of zero means the timeout is not used. Defaults
to <code class="literal">5s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.connection_read_timeout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the HTTP timeout used when requesting a connection from the connection
manager. Defaults to <code class="literal">5s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.socket_timeout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum socket timeout (SO_TIMEOUT) for the HTTP client to wait
for inactivity between two consecutive data packets. Defaults to <code class="literal">5s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.max_connections</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum number of connections allowed across all endpoints.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.max_endpoint_connections</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum number of connections allowed per endpoint.
</dd>
<dt>
<span class="term">
<code class="literal">jwt.cache.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum number of JWT cache entries. If clients use a different
JWT for every request, set to <code class="literal">0</code> to disable the JWT cache. Defaults to <code class="literal">100000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">jwt.cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the time-to-live for the period of time to cache JWT entries.
JWTs can only be cached if client authentication is successful (or disabled).
Uses the standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. If clients use a different JWT
for every request, set to <code class="literal">0</code> to disable the JWT cache. Defaults to <code class="literal">20m</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">pkc_jwkset_path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The file path or URL to a JSON Web Key Set (JWKS) with the public key material that
the JWT Realm uses for verifying token signatures. If a path is provided,
then it is resolved relative to the Elasticsearch configuration directory. In Elastic Cloud,
use an absolute path starting with <code class="literal">/app/config/</code>.
</p>
<p>If a URL is provided, then it must be either a <code class="literal">file</code> URL or an <code class="literal">https</code> URL.
Elasticsearch automatically caches the retrieved JWK set to avoid unnecessary HTTP
requests, but will attempt to refresh the JWK upon signature verification
failure, as this might indicate that the JWT Provider has
rotated the signing keys.</p>
<p>File-based resources are polled at a frequency determined by the global Elasticsearch
<code class="literal">resource.reload.interval.high</code> setting, which defaults to <code class="literal">5s</code>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">hmac_jwkset</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Contents of a JSON Web Key Set (JWKS), including the secret key that the JWT
realm uses to verify token signatures. This format supports multiple keys and
optional attributes, and is preferred over the <code class="literal">hmac_key</code> setting. Cannot be
used in conjunction with the <code class="literal">hmac_key</code> setting. Refer to
<a class="xref" href="setting-up-authentication.html#jwt-auth-realm" title="JWT authentication">Configure Elasticsearch to use a JWT realm</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">hmac_key</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Contents of a single JSON Web Key (JWK), including the secret key that the JWT
realm uses to verify token signatures. This format only supports a single key
without attributes, and cannot be used with the <code class="literal">hmac_jwkset</code> setting. This
format is compatible with OIDC. The HMAC key must be a UNICODE string, where
the key bytes are the UTF-8 encoding of the UNICODE string.
The <code class="literal">hmac_jwkset</code> setting is preferred. Refer to
<a class="xref" href="setting-up-authentication.html#jwt-auth-realm" title="JWT authentication">Configure Elasticsearch to use a JWT realm</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">populate_user_metadata</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether to populate the Elasticsearch user&#8217;s metadata with the values that are
provided by the JWT claims. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-jwt-ssl-settings"></a>JWT realm SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The following settings can be used to configure SSL for fetching the JSON Web
Key Set from a remote URL.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings are <em>only</em> used for the back-channel communication between
Elasticsearch and the JWT Issuer.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.key_passphrase</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.certificate</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_key_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.key_password</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
file name ends in ".p12", ".pfx" or "pkcs12", the default is <code class="literal">PKCS12</code>.
Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.password</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the verification of certificates.
</p>
<details open>
<summary class="title">Valid values</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Validates that the provided certificate: has an issue date that&#8217;s
within the <code class="literal">not_before</code> and <code class="literal">not_after</code> dates; chains to a trusted Certificate
Authority (CA); has a <code class="literal">hostname</code> or IP address that matches the names within
the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Validates the provided certificate and verifies that it&#8217;s signed by a
trusted authority (CA), but doesn&#8217;t check the certificate <code class="literal">hostname</code>.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
<p>
Performs no certificate validation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Setting certificate validation to <code class="literal">none</code> disables many security
benefits of SSL/TLS, which is very dangerous. Only set this value if instructed
by Elastic Support as a temporary diagnostic mechanism when attempting to
resolve TLS errors.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
<p>Defaults to <code class="literal">full</code>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<p>Elasticsearch relies on your JDK’s implementation of SSL and TLS.
View <a class="xref" href="manually-configure-security.html#jdk-tls-versions" title="Supported SSL/TLS versions by JDK version">Supported SSL/TLS versions by JDK version</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<h5><a id="load-balancing"></a>Load balancing and failover<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The <a class="xref" href="settings.html#static-cluster-setting">static</a> <code class="literal">load_balance.type</code> setting can have the
following values:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">failover</code>: The URLs specified are used in the order that they are specified.
The first server that can be connected to will be used for all subsequent
connections. If a connection to that server fails then the next server that a
connection can be established to will be used for subsequent connections.
</li>
<li class="listitem">
<code class="literal">dns_failover</code>: In this mode of operation, only a single URL may be specified.
This URL must contain a DNS name. The system will be queried for all IP
addresses that correspond to this DNS name. Connections to the Active Directory
or LDAP server will always be tried in the order in which they were retrieved.
This differs from <code class="literal">failover</code> in that there is no reordering of the list and if a
server has failed at the beginning of the list, it will still be tried for each
subsequent connection.
</li>
<li class="listitem">
<code class="literal">round_robin</code>: Connections will continuously iterate through the list of
provided URLs. If a server is unavailable, iterating through the list of URLs
will continue until a successful connection is made.
</li>
<li class="listitem">
<code class="literal">dns_round_robin</code>: In this mode of operation, only a single URL may be
specified. This URL must contain a DNS name. The system will be queried for all
IP addresses that correspond to this DNS name. Connections will continuously
iterate through the list of addresses. If a server is unavailable, iterating
through the list of URLs will continue until a successful connection is made.
</li>
</ul>
</div>
<h4><a id="ssl-tls-settings"></a>General TLS settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.ssl.diagnose.trust</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls whether to output diagnostic messages for SSL/TLS trust failures.
If this is <code class="literal">true</code> (the default), a message will be printed to the Elasticsearch
log whenever an SSL connection (incoming or outgoing) is rejected due to a failure
to establish trust.
This diagnostic message contains information that can be used to determine the
cause of the failure and assist with resolving the problem.
Set to <code class="literal">false</code> to disable these messages.
</dd>
</dl>
</div>
<h5><a id="tls-ssl-key-settings"></a>TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS
connection. If no trusted certificates are configured, the default certificates
that are trusted by the JVM will be trusted along with the certificate(s)
associated with a key in the same context. The key and certificate must be in
place for connections that require client authentication or when acting as a
SSL enabled server.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<a id="pkcs12-truststore-note"></a>
<p>Storing trusted certificates in a PKCS#12 file, although supported, is
uncommon in practice. The <a class="xref" href="certutil.html" title="elasticsearch-certutil"><code class="literal">elasticsearch-certutil</code> tool</a>,
as well as Java&#8217;s <code class="literal">keytool</code>, are designed to generate PKCS#12 files that
can be used both as a keystore and as a truststore, but this may not be the
case for container files that are created using other tools. Usually,
PKCS#12 files only contain secret and private entries. To confirm that
a PKCS#12 container includes trusted certificate ("anchor") entries look for
<code class="literal">2.16.840.1.113894.746875.1.1: &lt;Unsupported tag 6&gt;</code> in the
<code class="literal">openssl pkcs12 -info</code> output, or <code class="literal">trustedCertEntry</code> in the
<code class="literal">keytool -list</code> output.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="http-tls-ssl-settings"></a>HTTP TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Used to enable or disable TLS/SSL on the HTTP networking layer, which Elasticsearch uses to communicate with other clients. The default is <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<p>Elasticsearch relies on your JDK’s implementation of SSL and TLS.
View <a class="xref" href="manually-configure-security.html#jdk-tls-versions" title="Supported SSL/TLS versions by JDK version">Supported SSL/TLS versions by JDK version</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.client_authentication</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the server&#8217;s behavior in regard to requesting a certificate
from client connections. Valid values are <code class="literal">required</code>, <code class="literal">optional</code>, and <code class="literal">none</code>.
<code class="literal">required</code> forces a client to present a certificate, while <code class="literal">optional</code>
requests a client certificate but the client is not required to present one.
Defaults to <code class="literal">none</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The SSL settings in <code class="literal">xpack.security.http.ssl</code> control a <em>server context</em> for TLS, which
defines the settings for the TLS connection. The use of <code class="literal">verification_mode</code> in
a TLS <em>server</em> is discouraged.
Defines how to verify the certificates presented by another party in the TLS
connection:
</p>
<details open>
<summary class="title">Valid values</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Validates that the provided certificate: has an issue date that&#8217;s
within the <code class="literal">not_before</code> and <code class="literal">not_after</code> dates; chains to a trusted Certificate
Authority (CA); has a <code class="literal">hostname</code> or IP address that matches the names within
the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Validates the provided certificate and verifies that it&#8217;s signed by a
trusted authority (CA), but doesn&#8217;t check the certificate <code class="literal">hostname</code>.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
<p>
Performs no certificate validation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Setting certificate validation to <code class="literal">none</code> disables many security
benefits of SSL/TLS, which is very dangerous. Only set this value if instructed
by Elastic Support as a temporary diagnostic mechanism when attempting to
resolve TLS errors.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
<p>Defaults to <code class="literal">full</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="security-http-tls-ssl-key-trusted-certificate-settings"></a>HTTP TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate must be configured.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pem_encoded_files_2"></a>PEM encoded files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_java_keystore_files_2"></a>Java keystore files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="security-http-pkcs12-files"></a>PKCS#12 files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="transport-tls-ssl-settings"></a>Transport TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Used to enable or disable TLS/SSL on the transport networking layer, which nodes use to communicate with each other. The default is <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<p>Elasticsearch relies on your JDK’s implementation of SSL and TLS.
View <a class="xref" href="manually-configure-security.html#jdk-tls-versions" title="Supported SSL/TLS versions by JDK version">Supported SSL/TLS versions by JDK version</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.client_authentication</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the server&#8217;s behavior in regard to requesting a certificate
from client connections. Valid values are <code class="literal">required</code>, <code class="literal">optional</code>, and <code class="literal">none</code>.
<code class="literal">required</code> forces a client to present a certificate, while <code class="literal">optional</code>
requests a client certificate but the client is not required to present one.
Defaults to <code class="literal">required</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Defines how to verify the certificates presented by another party in the TLS
connection:
</p>
<details open>
<summary class="title">Valid values</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Validates that the provided certificate: has an issue date that&#8217;s
within the <code class="literal">not_before</code> and <code class="literal">not_after</code> dates; chains to a trusted Certificate
Authority (CA); has a <code class="literal">hostname</code> or IP address that matches the names within
the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Validates the provided certificate and verifies that it&#8217;s signed by a
trusted authority (CA), but doesn&#8217;t check the certificate <code class="literal">hostname</code>.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
<p>
Performs no certificate validation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Setting certificate validation to <code class="literal">none</code> disables many security
benefits of SSL/TLS, which is very dangerous. Only set this value if instructed
by Elastic Support as a temporary diagnostic mechanism when attempting to
resolve TLS errors.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
<p>Defaults to <code class="literal">full</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="security-transport-tls-ssl-key-trusted-certificate-settings"></a>Transport TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate must be configured.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pem_encoded_files_3"></a>PEM encoded files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_java_keystore_files_3"></a>Java keystore files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="security-transport-pkcs12-files"></a>PKCS#12 files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
<h5><a id="ssl-tls-profile-settings"></a>Transport profile TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The same settings that are available for the <a class="xref" href="settings.html#transport-tls-ssl-settings" title="Transport TLS/SSL settings">default transport</a>
are also available for each transport profile. By default, the settings for a
transport profile will be the same as the default transport unless they
are specified.</p>
<p>As an example, lets look at the key setting. For the default transport
this is <code class="literal">xpack.security.transport.ssl.key</code>. In order to use this setting in a
transport profile, use the prefix <code class="literal">transport.profiles.$PROFILE.xpack.security.</code> and
append the portion of the setting after <code class="literal">xpack.security.transport.</code>. For the key
setting, this would be <code class="literal">transport.profiles.$PROFILE.xpack.security.ssl.key</code>.</p>
<h4><a id="ip-filtering-settings"></a>IP filtering settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You can configure the following settings for <a class="xref" href="ip-filtering.html" title="Restricting connections with IP filtering">IP filtering</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.filter.allow</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to allow.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.filter.deny</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to deny.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.filter.allow</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to allow just for HTTP.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.filter.deny</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to deny just for HTTP.
</dd>
<dt>
<span class="term">
<code class="literal">transport.profiles.$PROFILE.xpack.security.filter.allow</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to allow for this profile.
</dd>
<dt>
<span class="term">
<code class="literal">transport.profiles.$PROFILE.xpack.security.filter.deny</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to deny for this profile.
</dd>
</dl>
</div>
<h4><a id="hashing-settings"></a>User cache and password hash algorithms<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/security-hash-settings.asciidoc">edit</a></h4>
<p>Certain realms store user credentials in memory. To limit exposure
to credential theft and mitigate credential compromise, the cache only stores
a hashed version of the user credentials in memory. By default, the user cache
is hashed with a salted <code class="literal">sha-256</code> hash algorithm. You can use a different
hashing algorithm by setting the <a class="xref" href="settings.html#static-cluster-setting">static</a>
<code class="literal">cache.hash_algo</code> realm settings to any of the following values:</p>
<div class="table">
<a id="cache-hash-algo"></a>
<p class="title"><strong>Table 1. Cache hash algorithms</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Cache hash algorithms">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p>Algorithm</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Description</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">ssha256</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses a salted <code class="literal">sha-256</code> algorithm (default).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">md5</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">MD5</code> algorithm.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">sha1</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">SHA1</code> algorithm.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 1024 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt4</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 16 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt5</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 32 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt6</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 64 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt7</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 128 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt8</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 256 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt9</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 512 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_10000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_50000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 50000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_100000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 100000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_500000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                              pseudorandom function using 500000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_1000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_10000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_50000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 50000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_100000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 100000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_500000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 500000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_1000000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">noop</code>,<code class="literal">clear_text</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Doesn&#8217;t hash the credentials and keeps it in clear text in
                            memory. CAUTION: keeping clear text is considered insecure
                            and can be compromised at the OS level (for example through
                            memory dumps and using <code class="literal">ptrace</code>).</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Likewise, realms that store passwords hash them using cryptographically strong
and password-specific salt values. You can configure the algorithm for password
hashing by setting the <a class="xref" href="settings.html#static-cluster-setting">static</a>
<code class="literal">xpack.security.authc.password_hashing.algorithm</code> setting to one of the
following:</p>
<div class="table">
<a id="password-hashing-algorithms"></a>
<p class="title"><strong>Table 2. Password hashing algorithms</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Password hashing algorithms">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Algorithm</th>
<th align="left" valign="top"></th>
<th align="left" valign="top"></th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 1024 rounds. (default)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt4</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 16 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt5</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 32 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt6</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 64 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt7</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 128 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt8</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 256 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt9</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 512 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt10</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 1024 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt11</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 2048 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt12</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 4096 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt13</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 8192 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt14</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 16384 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_10000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_50000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 50000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_100000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 100000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_500000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                              pseudorandom function using 500000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_1000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_10000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_50000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 50000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_100000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 100000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_500000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 500000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_stretch_1000000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000000 iterations, after hashing the
                             initial input with SHA512 first.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="shard-request-cache"></a>Shard request cache settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h2>
</div></div></div>
<p>When a search request is run against an index or against many indices, each
involved shard executes the search locally and returns its local results to
the <em>coordinating node</em>, which combines these shard-level results into a
&#8220;global&#8221; result set.</p>
<p>The shard-level request cache module caches the local results on each shard.
This allows frequently used (and potentially heavy) search requests to return
results almost instantly. The requests cache is a very good fit for the logging
use case, where only the most recent index is being actively updated&#8201;&#8212;&#8201;results from older indices will be served directly from the cache.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>By default, the requests cache will only cache the results of search requests
where <code class="literal">size=0</code>, so it will not cache <code class="literal">hits</code>,
but it will cache <code class="literal">hits.total</code>,  <a class="xref" href="search-aggregations.html" title="Aggregations">aggregations</a>, and
<a class="xref" href="search.html#search-suggesters" title="Suggesters">suggestions</a>.</p>
<p>Most queries that use <code class="literal">now</code> (see <a class="xref" href="common-options.html#date-math" title="Date Math">Date Math</a>) cannot be cached.</p>
<p>Scripted queries that use the API calls which are non-deterministic, such as
<code class="literal">Math.random()</code> or <code class="literal">new Date()</code> are not cached.</p>
</div>
</div>
<h4><a id="_cache_invalidation"></a>Cache invalidation<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The cache is smart&#8201;&#8212;&#8201;it keeps the same <em>near real-time</em> promise as uncached
search.</p>
<p>Cached results are invalidated automatically whenever the shard refreshes to
pick up changes to the documents or when you update the mapping. In other
words you will always get the same results from the cache as you would for an
uncached search request.</p>
<p>The longer the refresh interval, the longer that cached entries will remain
valid even if there are changes to the documents. If the cache is full, the
least recently used cache keys will be evicted.</p>
<p>The cache can be expired manually with the <a class="xref" href="indices.html#indices-clearcache" title="Clear cache API"><code class="literal">clear-cache</code> API</a>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001,my-index-000002/_cache/clear?request=true</pre>
</div>
<div class="console_widget" data-snippet="snippets/22.console"></div>
<h4><a id="_enabling_and_disabling_caching"></a>Enabling and disabling caching<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The cache is enabled by default, but can be disabled when creating a new
index as follows:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "settings": {
    "index.requests.cache.enable": false
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/23.console"></div>
<p>It can also be enabled or disabled dynamically on an existing index with the
<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API"><code class="literal">update-settings</code></a> API:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_settings
{ "index.requests.cache.enable": true }</pre>
</div>
<div class="console_widget" data-snippet="snippets/24.console"></div>
<h4><a id="_enabling_and_disabling_caching_per_request"></a>Enabling and disabling caching per request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The <code class="literal">request_cache</code> query-string parameter can be used to enable or disable
caching on a <span class="strong strong"><strong>per-request</strong></span> basis. If set, it overrides the index-level setting:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_search?request_cache=true
{
  "size": 0,
  "aggs": {
    "popular_colors": {
      "terms": {
        "field": "colors"
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/25.console"></div>
<p>Requests where <code class="literal">size</code> is greater than 0 will not be cached even if the request cache is
enabled in the index settings. To cache these requests you will need to use the
query-string parameter detailed here.</p>
<h4><a id="_cache_key"></a>Cache key<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>A hash of the whole JSON body is used as the cache key. This means that if the JSON
changes&#8201;&#8212;&#8201;for instance if keys are output in a different order&#8201;&#8212;&#8201;then the
cache key will not be recognised.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Most JSON libraries support a <em>canonical</em> mode which ensures that JSON
keys are always emitted in the same order. This canonical mode can be used in
the application to ensure that a request is always serialized in the same way.</p>
</div>
</div>
<h4><a id="_cache_settings"></a>Cache settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The cache is managed at the node level, and has a default maximum size of <code class="literal">1%</code>
of the heap. This can be changed in the <code class="literal">config/elasticsearch.yml</code> file with:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">indices.requests.cache.size: 2%</pre>
</div>
<p>Also, you can use the <code class="literal">indices.requests.cache.expire</code> setting to specify a TTL
for cached results, but there should be no reason to do so. Remember that
stale results are automatically invalidated when the index is refreshed. This
setting is provided for completeness' sake only.</p>
<h4><a id="_monitoring_cache_usage"></a>Monitoring cache usage<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The size of the cache (in bytes) and the number of evictions can be viewed
by index, with the <a class="xref" href="indices.html#indices-stats" title="Index stats API"><code class="literal">indices-stats</code></a> API:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_stats/request_cache?human</pre>
</div>
<div class="console_widget" data-snippet="snippets/26.console"></div>
<p>or by node with the <a class="xref" href="cluster.html#cluster-nodes-stats" title="Nodes stats API"><code class="literal">nodes-stats</code></a> API:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_nodes/stats/indices/request_cache?human</pre>
</div>
<div class="console_widget" data-snippet="snippets/27.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="snapshot-settings"></a>Snapshot and restore settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/snapshot-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>The following cluster settings configure <a class="xref" href="snapshot-restore.html" title="Snapshot and restore">snapshot and
restore</a>.</p>
<div class="variablelist">
<a id="snapshot-max-concurrent-ops"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">snapshot.max_concurrent_operations</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, integer) Maximum number of concurrent
snapshot operations. Defaults to <code class="literal">1000</code>.
</p>
<p>This limit applies in total to all ongoing snapshot creation, cloning, and
deletion operations. Elasticsearch will reject any operations that would exceed this
limit.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_slm_settings"></a>SLM settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/snapshot-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>The following cluster settings configure <a class="xref" href="snapshots-take-snapshot.html#automate-snapshots-slm" title="Automate snapshots with SLM">snapshot lifecycle management
(SLM)</a>.</p>
<div class="variablelist">
<a id="slm-history-index-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">slm.history_index_enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, Boolean)
Controls whether SLM records the history of actions taken as part of SLM policies
to the <code class="literal">slm-history-*</code> indices. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="slm-retention-schedule"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">slm.retention_schedule</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, <a class="xref" href="trigger.html#schedule-cron" title="Watcher cron schedule">cron scheduler value</a>)
Controls when the <a class="xref" href="snapshots-take-snapshot.html#slm-retention-task" title="SLM retention">retention task</a> runs.
Can be a periodic or absolute time schedule.
Supports all values supported by the <a class="xref" href="trigger.html#schedule-cron" title="Watcher cron schedule">cron scheduler</a>.
Defaults to daily at 1:30am UTC: <code class="literal">0 30 1 * * ?</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="slm-retention-duration"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">slm.retention_duration</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, <a class="xref" href="api-conventions.html#time-units" title="Time units">time value</a>)
Limits how long SLM should spend deleting old snapshots.
Defaults to one hour: <code class="literal">1h</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="slm-health-failed-snapshot-warn-threshold"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">slm.health.failed_snapshot_warn_threshold</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, Long)
The number of failed invocations since last successful snapshot that
indicate a problem with the policy in the health api.
Defaults to a health api warning after five repeated failures: <code class="literal">5L</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="repositories-url-allowed"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">repositories.url.allowed_urls</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the <a class="xref" href="snapshots-register-repository.html#snapshots-read-only-repository" title="Read-only URL repository">read-only URL repositories</a> that snapshots can be restored from.
</dd>
</dl>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="transform-settings"></a>Transforms  settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/transform-settings.asciidoc">edit</a></h2>
</div></div></div>

<p>You do not need to configure any settings to use transforms. It is enabled by
default.</p>
<h4><a id="general-transform-settings"></a>General transforms settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/transform-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">node.roles: [ transform ]</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Set <code class="literal">node.roles</code> to contain <code class="literal">transform</code> to
identify the node as a <em>transform node</em>. If you want to run transforms, there
must be at least one transform node in your cluster.
</p>
<p>If you set <code class="literal">node.roles</code>, you must explicitly specify all the required roles for
the node. To learn more, refer to <a class="xref" href="settings.html#modules-node" title="Node">Node</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>It is strongly recommended that dedicated transform nodes also have
the <code class="literal">remote_cluster_client</code> role; otherwise, cross-cluster search fails when used in
transforms. See <a class="xref" href="settings.html#remote-node" title="Remote-eligible node">Remote-eligible node</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.transform.enabled</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.8.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.8.0. Basic License features should always be enabled
</span>
</span>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) This deprecated setting no longer has any
effect.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.transform.num_transform_failure_retries</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The number of times that a transform
retries when it experiences a non-fatal error. Once the number of retries is
exhausted, the transform task is marked as <code class="literal">failed</code>. The default value is <code class="literal">10</code>
with a valid minimum of <code class="literal">0</code> and maximum of <code class="literal">100</code>. If a transform is already
running, it has to be restarted to use the changed setting.
The <code class="literal">num_failure_retries</code> setting can also be specified on an individual transform level.
Specifying this setting for each transform individually is recommended.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-threadpool"></a>Thread pools<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/threadpool.asciidoc">edit</a></h2>
</div></div></div>
<p>A node uses several thread pools to manage memory consumption.
Queues associated with many of the thread pools enable pending requests
to be held instead of discarded.</p>
<p>There are several thread pools, but the important ones include:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">generic</code>
</span>
</dt>
<dd>
For generic operations (for example, background node discovery).
Thread pool type is <code class="literal">scaling</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="search-threadpool"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">search</code>
</span>
</dt>
<dd>
For count/search/suggest operations. Thread pool type is
<code class="literal">fixed</code> with a size of <code class="literal">int((</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal"> * 3) / 2) + 1</code>, and queue_size of <code class="literal">1000</code>.
</dd>
<dt>
<span class="term">
<a id="search-throttled"></a><code class="literal">search_throttled</code>
</span>
</dt>
<dd>
For count/search/suggest/get operations on <code class="literal">search_throttled indices</code>.
Thread pool type is <code class="literal">fixed</code> with a size of <code class="literal">1</code>, and queue_size of <code class="literal">100</code>.
</dd>
<dt>
<span class="term">
<code class="literal">search_coordination</code>
</span>
</dt>
<dd>
    For lightweight search-related coordination operations. Thread pool type is
    <code class="literal">fixed</code> with a size of a max of <code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>, and queue_size of <code class="literal">1000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">get</code>
</span>
</dt>
<dd>
For get operations. Thread pool type is
<code class="literal">fixed</code> with a size of <code class="literal">int((</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal"> * 3) / 2) + 1</code>, and queue_size of <code class="literal">1000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">analyze</code>
</span>
</dt>
<dd>
For analyze requests. Thread pool type is <code class="literal">fixed</code> with a size of <code class="literal">1</code>, queue
size of <code class="literal">16</code>.
</dd>
<dt>
<span class="term">
<code class="literal">write</code>
</span>
</dt>
<dd>
For single-document index/delete/update, ingest processors, and bulk requests. Thread pool type
is <code class="literal">fixed</code> with a size of <a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a>,
queue_size of <code class="literal">10000</code>. The maximum size for this pool is
<code class="literal">1 + </code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a>.
</dd>
<dt>
<span class="term">
<code class="literal">snapshot</code>
</span>
</dt>
<dd>
For snapshot/restore operations. Thread pool type is <code class="literal">scaling</code> with a
keep-alive of <code class="literal">5m</code>. On nodes with at least 750MB of heap the maximum size
of this pool is <code class="literal">10</code> by default. On nodes with less than 750MB of heap the
maximum size of this pool is <code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code> by default.
</dd>
<dt>
<span class="term">
<code class="literal">snapshot_meta</code>
</span>
</dt>
<dd>
For snapshot repository metadata read operations. Thread pool type is <code class="literal">scaling</code> with a
keep-alive of <code class="literal">5m</code> and a max of <code class="literal">min(50, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">* 3))</code>.
</dd>
<dt>
<span class="term">
<code class="literal">warmer</code>
</span>
</dt>
<dd>
For segment warm-up operations. Thread pool type is <code class="literal">scaling</code> with a
keep-alive of <code class="literal">5m</code> and a max of <code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">refresh</code>
</span>
</dt>
<dd>
For refresh operations. Thread pool type is <code class="literal">scaling</code> with a
keep-alive of <code class="literal">5m</code> and a max of <code class="literal">min(10, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">fetch_shard_started</code>
</span>
</dt>
<dd>
For listing shard states.
Thread pool type is <code class="literal">scaling</code> with keep-alive of <code class="literal">5m</code> and a default maximum
size of <code class="literal">2 * </code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a>.
</dd>
<dt>
<span class="term">
<code class="literal">fetch_shard_store</code>
</span>
</dt>
<dd>
For listing shard stores.
Thread pool type is <code class="literal">scaling</code> with keep-alive of <code class="literal">5m</code> and a default maximum
size of <code class="literal">2 * </code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a>.
</dd>
<dt>
<span class="term">
<code class="literal">flush</code>
</span>
</dt>
<dd>
For <a class="xref" href="indices.html#indices-flush" title="Flush API">flush</a> and <a class="xref" href="index-modules-translog.html" title="Translog">translog</a> <code class="literal">fsync</code>
operations. Thread pool type is <code class="literal">scaling</code> with a keep-alive of <code class="literal">5m</code> and a
default maximum size of <code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">force_merge</code>
</span>
</dt>
<dd>
    For <a class="xref" href="indices.html#indices-forcemerge" title="Force merge API">force merge</a> operations.
    Thread pool type is <code class="literal">fixed</code> with a size of <code class="literal">max(1, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 8)</code> and an unbounded queue size.
</dd>
<dt>
<span class="term">
<code class="literal">management</code>
</span>
</dt>
<dd>
For cluster management.
Thread pool type is <code class="literal">scaling</code> with a keep-alive of <code class="literal">5m</code> and a default
maximum size of <code class="literal">5</code>.
</dd>
<dt>
<span class="term">
<code class="literal">system_read</code>
</span>
</dt>
<dd>
For read operations on system indices.
Thread pool type is <code class="literal">fixed</code> with a default maximum size of
<code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">system_write</code>
</span>
</dt>
<dd>
For write operations on system indices.
Thread pool type is <code class="literal">fixed</code> with a default maximum size of
<code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">system_critical_read</code>
</span>
</dt>
<dd>
For critical read operations on system indices.
Thread pool type is <code class="literal">fixed</code> with a default maximum size of
<code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">system_critical_write</code>
</span>
</dt>
<dd>
For critical write operations on system indices.
Thread pool type is <code class="literal">fixed</code> with a default maximum size of
<code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">watcher</code>
</span>
</dt>
<dd>
For <a class="xref" href="xpack-alerting.html" title="Watcher">watch executions</a>.
Thread pool type is <code class="literal">fixed</code> with a default maximum size of
<code class="literal">min(5 * (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">), 50)</code>
and queue_size of <code class="literal">1000</code>.
</dd>
</dl>
</div>
<p>Thread pool settings are <a class="xref" href="settings.html#static-cluster-setting">static</a> and can be changed by
editing <code class="literal">elasticsearch.yml</code>. Changing a specific thread pool can be done by
setting its type-specific parameters; for example, changing the number of
threads in the <code class="literal">write</code> thread pool:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">thread_pool:
    write:
        size: 30</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="thread-pool-types"></a>Thread pool types<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/threadpool.asciidoc">edit</a></h3>
</div></div></div>
<p>The following are the types of thread pools and their respective parameters:</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="fixed-thread-pool"></a><code class="literal">fixed</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/threadpool.asciidoc">edit</a></h4>
</div></div></div>
<p>The <code class="literal">fixed</code> thread pool holds a fixed size of threads to handle the
requests with a queue (optionally bounded) for pending requests that
have no threads to service them.</p>
<p>The <code class="literal">size</code> parameter controls the number of threads.</p>
<p>The <code class="literal">queue_size</code> allows to control the size of the queue of pending
requests that have no threads to execute them. By default, it is set to
<code class="literal">-1</code> which means its unbounded. When a request comes in and the queue is
full, it will abort the request.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">thread_pool:
    write:
        size: 30
        queue_size: 1000</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="scaling-thread-pool"></a><code class="literal">scaling</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/threadpool.asciidoc">edit</a></h4>
</div></div></div>
<p>The <code class="literal">scaling</code> thread pool holds a dynamic number of threads. This
number is proportional to the workload and varies between the value of
the <code class="literal">core</code> and <code class="literal">max</code> parameters.</p>
<p>The <code class="literal">keep_alive</code> parameter determines how long a thread should be kept
around in the thread pool without it doing any work.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">thread_pool:
    warmer:
        core: 1
        max: 8
        keep_alive: 2m</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="node.processors"></a>Allocated processors setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/modules/threadpool.asciidoc">edit</a></h3>
</div></div></div>
<p>The number of processors is automatically detected, and the thread pool settings
are automatically set based on it. In some cases it can be useful to override
the number of detected processors. This can be done by explicitly setting the
<code class="literal">node.processors</code> setting. This setting is bounded by the number of available
processors and accepts floating point numbers, which can be useful in environments
where the Elasticsearch nodes are configured to run with CPU limits, such as cpu
shares or quota under <code class="literal">Cgroups</code>.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.processors: 2</pre>
</div>
<p>There are a few use-cases for explicitly overriding the <code class="literal">node.processors</code>
setting:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
If you are running multiple instances of Elasticsearch on the same host but want
Elasticsearch to size its thread pools as if it only has a fraction of the CPU, you
should override the <code class="literal">node.processors</code> setting to the desired fraction, for
example, if you&#8217;re running two instances of Elasticsearch on a 16-core machine, set
<code class="literal">node.processors</code> to 8. Note that this is an expert-level use case and there&#8217;s
a lot more involved than just setting the <code class="literal">node.processors</code> setting as there are
other considerations like changing the number of garbage collector threads,
pinning processes to cores, and so on.
</li>
<li class="listitem">
Sometimes the number of processors is wrongly detected and in such cases
explicitly setting the <code class="literal">node.processors</code> setting will workaround such issues.
</li>
</ol>
</div>
<p>In order to check the number of processors detected, use the nodes info
API with the <code class="literal">os</code> flag.</p>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="notification-settings"></a>Watcher settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/notification-settings.asciidoc">edit</a></h2>
</div></div></div>

<p><a id="notification-settings-description"></a>You configure Watcher settings to set up Watcher and send notifications via
<a class="xref" href="settings.html#email-notification-settings" title="Email Notification Settings">email</a>,
<a class="xref" href="settings.html#slack-notification-settings" title="Slack Notification Settings">Slack</a>, and
<a class="xref" href="settings.html#pagerduty-notification-settings" title="PagerDuty Notification Settings">PagerDuty</a>.</p>
<p>All of these settings can be added to the <code class="literal">elasticsearch.yml</code> configuration file,
with the exception of the secure settings, which you add to the Elasticsearch keystore.
For more information about creating and updating the Elasticsearch keystore, see
<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure settings</a>. Dynamic settings can also be updated across a cluster with the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="general-notification-settings"></a>General Watcher Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/notification-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.watcher.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">false</code> to disable Watcher on the node.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-watcher-encrypt-sensitive-data"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.watcher.encrypt_sensitive_data</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">true</code> to encrypt sensitive data. If this setting is enabled, you
must also specify the <code class="literal">xpack.watcher.encryption_key</code> setting. For more
information, see <a class="xref" href="encrypting-data.html" title="Encrypting sensitive data in Watcher"><em>Encrypting sensitive data in Watcher</em></a>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.watcher.encryption_key</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Specifies the path to a file that contains a key for encrypting sensitive data.
If <code class="literal">xpack.watcher.encrypt_sensitive_data</code> is set to <code class="literal">true</code>, this setting is
required. For more information, see <a class="xref" href="encrypting-data.html" title="Encrypting sensitive data in Watcher"><em>Encrypting sensitive data in Watcher</em></a>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.proxy.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the address of the proxy server to use to connect to HTTP services.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.proxy.port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the port number to use to connect to the proxy server.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.proxy.scheme</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Protocol used to communicate with the proxy server. Valid values are <code class="literal">http</code> and
<code class="literal">https</code>. Defaults to the protocol used in the request.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.default_connection_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum period to wait until abortion of the request, when a
connection is being initiated.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.default_read_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum period of inactivity between two data packets, before the
request is aborted.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.tcp.keep_alive</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Whether to enable TCP keepalives on HTTP connections. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.connection_pool_ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live of connections in the connection pool. If a connection is not
re-used within this timeout, it is closed. By default, the time-to-live is
infinite meaning that connections never expire.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.max_response_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum size an HTTP response is allowed to have, defaults to
<code class="literal">10mb</code>, the maximum configurable value is <code class="literal">50mb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.whitelist</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of URLs, that the internal HTTP client is allowed to connect to. This
client is used in the HTTP input, the webhook, the slack, pagerduty,
and jira actions. This setting can be updated dynamically. It defaults to <code class="literal">*</code>
allowing everything. Note: If you configure this setting and you are using one
of the slack/pagerduty actions, you have to ensure that the
corresponding endpoints are explicitly allowed as well.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ssl-notification-settings"></a>Watcher HTTP TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<p>Elasticsearch relies on your JDK’s implementation of SSL and TLS.
View <a class="xref" href="manually-configure-security.html#jdk-tls-versions" title="Supported SSL/TLS versions by JDK version">Supported SSL/TLS versions by JDK version</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Defines how to verify the certificates presented by another party in the TLS
connection:
</p>
<details open>
<summary class="title">Valid values</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Validates that the provided certificate: has an issue date that&#8217;s
within the <code class="literal">not_before</code> and <code class="literal">not_after</code> dates; chains to a trusted Certificate
Authority (CA); has a <code class="literal">hostname</code> or IP address that matches the names within
the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Validates the provided certificate and verifies that it&#8217;s signed by a
trusted authority (CA), but doesn&#8217;t check the certificate <code class="literal">hostname</code>.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
<p>
Performs no certificate validation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Setting certificate validation to <code class="literal">none</code> disables many security
benefits of SSL/TLS, which is very dangerous. Only set this value if instructed
by Elastic Support as a temporary diagnostic mechanism when attempting to
resolve TLS errors.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
<p>Defaults to <code class="literal">full</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="watcher-tls-ssl-key-trusted-certificate-settings"></a>Watcher HTTP TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate are optional and would be used if the server requires client authentication for PKI
authentication.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pem_encoded_files_4"></a>PEM encoded files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_java_keystore_files_4"></a>Java keystore files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="watcher-pkcs12-files"></a>PKCS#12 files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="email-notification-settings"></a>Email Notification Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/notification-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following email notification settings in
<code class="literal">elasticsearch.yml</code>. For more information about sending notifications
via email, see <a class="xref" href="actions.html#configuring-email-actions" title="Configuring email actions">Configuring email actions</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.default_account</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default email account to use.
</p>
<p>If you configure multiple email accounts, you must either configure this setting
or specify the email account to use in the <a class="xref" href="actions.html#actions-email" title="Watcher email action"><code class="literal">email</code></a> action. See
<a class="xref" href="actions.html#configuring-email" title="Configuring email accounts">Configuring email accounts</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.account</code>
</span>
</dt>
<dd>
Specifies account information for sending notifications via email. You
can specify the following email account attributes:
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.account.domain_allowlist</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies domains to which emails are allowed to be sent. Emails with recipients (<code class="literal">To:</code>, <code class="literal">Cc:</code>, or
<code class="literal">Bcc:</code>) outside of these domains will be rejected and an error thrown. This setting defaults to
<code class="literal">["*"]</code> which means all domains are allowed. Simple globbing is supported, such as <code class="literal">*.company.com</code>
in the list of allowed domains.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="email-account-attributes"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">profile</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The <a class="xref" href="actions.html#configuring-email" title="Configuring email accounts">email profile</a> to use to build the MIME
messages that are sent from the account. Valid values: <code class="literal">standard</code>, <code class="literal">gmail</code> and
<code class="literal">outlook</code>. Defaults to <code class="literal">standard</code>.
</dd>
<dt>
<span class="term">
<code class="literal">email_defaults.*</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
An optional set of email attributes to use as defaults
for the emails sent from the account. See
<a class="xref" href="actions.html#email-action-attributes" title="Email action attributes">Email action attributes</a> for the supported
attributes.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.auth</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Set to <code class="literal">true</code> to attempt to authenticate the user using the
AUTH command. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The SMTP server to connect to. Required.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The SMTP server port to connect to. Defaults to 25.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.user</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The user name for SMTP. Required.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The password for the specified SMTP user.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.starttls.enable</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Set to <code class="literal">true</code> to enable the use of the <code class="literal">STARTTLS</code>
command (if supported by the server) to switch the connection to a
TLS-protected connection before issuing any login commands. Note that
an appropriate trust store must be configured so that the client will
trust the server&#8217;s certificate. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.starttls.required</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If <code class="literal">true</code>, then <code class="literal">STARTTLS</code> will be required. If that command fails, the
connection will fail. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.ssl.trust</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of SMTP server hosts that are assumed trusted and for which
certificate verification is disabled. If set to "*", all hosts are
trusted. If set to a whitespace separated list of hosts, those hosts
are trusted. Otherwise, trust depends on the certificate the server
presents.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The socket read timeout. Default is two minutes.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.connection_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The socket connection timeout. Default is two minutes.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.write_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The socket write timeout. Default is two minutes.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.local_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A configurable local address when sending emails. Not configured by default.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.local_port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A configurable local port when sending emails. Not configured by default.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.send_partial</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Send an email, despite one of the receiver addresses being invalid.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.wait_on_quit</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If set to false the QUIT command is sent and the connection closed. If set to
true, the QUIT command is sent and a reply is waited for. True by default.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.html.sanitization.allow</code>
</span>
</dt>
<dd>
<p>
Specifies the HTML elements that are allowed in email notifications. For
more information, see
<a class="xref" href="actions.html#email-html-sanitization" title="Configuring HTML sanitization options">Configuring HTML sanitization options</a>. You can
specify individual HTML elements and the following HTML feature groups:
</p>
<div class="variablelist">
<a id="html-feature-groups"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">_tables</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
All table related elements: <code class="literal">&lt;table&gt;</code>, <code class="literal">&lt;th&gt;</code>, <code class="literal">&lt;tr&gt;</code>, <code class="literal">&lt;td&gt;</code>, <code class="literal">&lt;caption&gt;</code>,
<code class="literal">&lt;col&gt;</code>, <code class="literal">&lt;colgroup&gt;</code>, <code class="literal">&lt;thead&gt;</code>, <code class="literal">&lt;tbody&gt;</code>, and <code class="literal">&lt;tfoot&gt;</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_blocks</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The following block elements: <code class="literal">&lt;p&gt;</code>, <code class="literal">&lt;div&gt;</code>, <code class="literal">&lt;h1&gt;</code>,
<code class="literal">&lt;h2&gt;</code>, <code class="literal">&lt;h3&gt;</code>, <code class="literal">&lt;h4&gt;</code>, <code class="literal">&lt;h5&gt;</code>, <code class="literal">&lt;h6&gt;</code>, <code class="literal">&lt;ul&gt;</code>, <code class="literal">&lt;ol&gt;</code>,
<code class="literal">&lt;li&gt;</code>, and <code class="literal">&lt;blockquote&gt;</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_formatting</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The following inline formatting elements: <code class="literal">&lt;b&gt;</code>, <code class="literal">&lt;i&gt;</code>,
<code class="literal">&lt;s&gt;</code>, <code class="literal">&lt;u&gt;</code>, <code class="literal">&lt;o&gt;</code>, <code class="literal">&lt;sup&gt;</code>, <code class="literal">&lt;sub&gt;</code>, <code class="literal">&lt;ins&gt;</code>, <code class="literal">&lt;del&gt;</code>,
<code class="literal">&lt;strong&gt;</code>, <code class="literal">&lt;strike&gt;</code>, <code class="literal">&lt;tt&gt;</code>, <code class="literal">&lt;code&gt;</code>, <code class="literal">&lt;big&gt;</code>,
<code class="literal">&lt;small&gt;</code>, <code class="literal">&lt;hr&gt;</code>, <code class="literal">&lt;br&gt;</code>, <code class="literal">&lt;span&gt;</code>, and <code class="literal">&lt;em&gt;</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_links</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The <code class="literal">&lt;a&gt;</code> element with an <code class="literal">href</code> attribute that points
to a URL using the following protocols: <code class="literal">http</code>, <code class="literal">https</code>
and <code class="literal">mailto</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_styles</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The <code class="literal">style</code> attribute on all elements. Note that CSS
attributes are also sanitized to prevent XSS attacks.
</dd>
<dt>
<span class="term">
<code class="literal">img</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">img:all</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
All images (external and embedded).
</dd>
<dt>
<span class="term">
<code class="literal">img:embedded</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Only embedded images. Embedded images can only use the
<code class="literal">cid:</code> URL protocol in their <code class="literal">src</code> attribute.
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.html.sanitization.disallow</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the HTML elements that are NOT allowed in email notifications.
You can specify individual HTML elements and <a class="xref" href="settings.html#html-feature-groups">HTML feature groups</a>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.html.sanitization.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">false</code> to completely disable HTML sanitation. Not recommended.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.reporting.warning.kbn-csv-contains-formulas.text</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies a custom message, which is sent if the formula verification criteria
for CSV files from Kibana&#8217;s <a href="https://www.elastic.co/guide/en/kibana/8.9/reporting-settings-kb.html#reporting-csv-settings" class="ulink" target="_top"><code class="literal">xpack.reporting.csv.checkForFormulas</code></a> is <code class="literal">true</code>.
Use <code class="literal">%s</code> in the message as a placeholder for the filename.
Defaults to <code class="literal">Warning: The attachment [%s] contains characters which spreadsheet applications may interpret as formulas. Please ensure that the attachment is safe prior to opening.</code>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ssl-notification-smtp-settings"></a>Watcher Email TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<p>Elasticsearch relies on your JDK’s implementation of SSL and TLS.
View <a class="xref" href="manually-configure-security.html#jdk-tls-versions" title="Supported SSL/TLS versions by JDK version">Supported SSL/TLS versions by JDK version</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="manually-configure-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Defines how to verify the certificates presented by another party in the TLS
connection:
</p>
<details open>
<summary class="title">Valid values</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Validates that the provided certificate: has an issue date that&#8217;s
within the <code class="literal">not_before</code> and <code class="literal">not_after</code> dates; chains to a trusted Certificate
Authority (CA); has a <code class="literal">hostname</code> or IP address that matches the names within
the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Validates the provided certificate and verifies that it&#8217;s signed by a
trusted authority (CA), but doesn&#8217;t check the certificate <code class="literal">hostname</code>.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
<p>
Performs no certificate validation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Setting certificate validation to <code class="literal">none</code> disables many security
benefits of SSL/TLS, which is very dangerous. Only set this value if instructed
by Elastic Support as a temporary diagnostic mechanism when attempting to
resolve TLS errors.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
<p>Defaults to <code class="literal">full</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="watcher-email-tls-ssl-key-trusted-certificate-settings"></a>Watcher Email TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate are optional and would be used if the server requires client authentication for PKI
authentication.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pem_encoded_files_5"></a>PEM encoded files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_java_keystore_files_5"></a>Java keystore files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="watcher-email-pkcs12-files"></a>PKCS#12 files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="slack-notification-settings"></a>Slack Notification Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/notification-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following Slack notification settings in
<code class="literal">elasticsearch.yml</code>. For more information about sending notifications
via Slack, see <a class="xref" href="actions.html#configuring-slack-actions" title="Configuring Slack actions">Configuring Slack actions</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.slack.default_account</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default Slack account to use.
</p>
<p>If you configure multiple Slack accounts, you must either configure this setting
or specify the Slack account to use in the <a class="xref" href="actions.html#actions-slack" title="Watcher Slack Action"><code class="literal">slack</code></a> action. See
<a class="xref" href="actions.html#configuring-slack" title="Configuring Slack Accounts">Configuring Slack Accounts</a>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="slack-account-attributes"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.slack.account</code>
</span>
</dt>
<dd>
<p>
Specifies account information for sending notifications
via Slack. You can specify the following Slack account attributes:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">secure_url</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The Incoming Webhook URL to use to post messages to Slack. Required.
</dd>
<dt>
<span class="term">
<code class="literal">message_defaults</code>
</span>
</dt>
<dd>
<p>
Default values for
<a class="xref" href="actions.html#slack-action-attributes" title="Slack action attributes">Slack message attributes</a>.
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">from</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The sender name to display in the
Slack message. Defaults to the watch ID.
</dd>
<dt>
<span class="term">
<code class="literal">to</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The default Slack channels or groups you
want to send messages to.
</dd>
<dt>
<span class="term">
<code class="literal">icon</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The icon to display in the Slack messages.
Overrides the incoming webhook&#8217;s configured
icon. Accepts a public URL to an image.
</dd>
<dt>
<span class="term">
<code class="literal">text</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The default message content.
</dd>
<dt>
<span class="term">
<code class="literal">attachment</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default message attachments. Slack message attachments
enable you to create more richly-formatted messages.
Specified as an array as defined in the
<a href="https://api.slack.com/docs/attachments" class="ulink" target="_top">
Slack attachments documentation</a>.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="jira-notification-settings"></a>Jira Notification Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/notification-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following Jira notification settings in
<code class="literal">elasticsearch.yml</code>. For more information about using notifications
to create issues in Jira, see <a class="xref" href="actions.html#configuring-jira-actions" title="Configuring Jira actions">Configuring Jira actions</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.jira.default_account</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default Jira account to use.
</p>
<p>If you configure multiple Jira accounts, you must either configure this setting
or specify the Jira account to use in the <a class="xref" href="actions.html#actions-jira" title="Watcher Jira action"><code class="literal">jira</code></a> action. See
<a class="xref" href="actions.html#configuring-jira" title="Configuring Jira accounts">Configuring Jira accounts</a>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="jira-account-attributes"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.jira.account</code>
</span>
</dt>
<dd>
<p>
Specifies account information for using notifications to create
issues in Jira. You can specify the following Jira account attributes:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_http</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If <code class="literal">false</code>, Watcher rejects URL settings that use a HTTP protocol. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">secure_url</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The URL of the Jira Software server. Required.
</dd>
<dt>
<span class="term">
<code class="literal">secure_user</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The name of the user to connect to the Jira Software server. Required.
</dd>
<dt>
<span class="term">
<code class="literal">secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The password of the user to connect to the Jira Software server. Required.
</dd>
<dt>
<span class="term">
<code class="literal">issue_defaults</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default fields values for the issue created in Jira. See
<a class="xref" href="actions.html#jira-action-attributes" title="Jira action attributes">Jira action attributes</a> for more information.
Optional.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="pagerduty-notification-settings"></a>PagerDuty Notification Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/settings/notification-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following PagerDuty notification settings in
<code class="literal">elasticsearch.yml</code>. For more information about sending notifications
via PagerDuty, see <a class="xref" href="actions.html#configuring-pagerduty-actions" title="Configuring PagerDuty actions">Configuring PagerDuty actions</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.pagerduty.default_account</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default PagerDuty account to use.
</p>
<p>If you configure multiple PagerDuty accounts, you must either configure this
setting or specify the PagerDuty account to use in the
<a class="xref" href="actions.html#actions-pagerduty" title="Watcher PagerDuty action"><code class="literal">pagerduty</code></a> action. See <a class="xref" href="actions.html#configuring-pagerduty" title="Configuring PagerDuty accounts">Configuring PagerDuty accounts</a>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="pagerduty-account-attributes"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.pagerduty.account</code>
</span>
</dt>
<dd>
<p>
Specifies account information for sending notifications via PagerDuty. You can
specify the following PagerDuty account attributes:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A name for the PagerDuty account associated with the API key you
are using to access PagerDuty. Required.
</dd>
<dt>
<span class="term">
<code class="literal">secure_service_api_key</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The <a href="https://developer.pagerduty.com/documentation/rest/authentication" class="ulink" target="_top">
PagerDuty API key</a> to use to access PagerDuty. Required.
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">event_defaults</code>
</span>
</dt>
<dd>
<p>
Default values for
<a class="xref" href="actions.html#pagerduty-event-trigger-incident-attributes" title="Pagerduty event trigger incident attributes">PagerDuty event attributes</a>.
Optional.
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">description</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A string that contains the default description for PagerDuty events.
If no default is configured, each PagerDuty action must specify a
<code class="literal">description</code>.
</dd>
<dt>
<span class="term">
<code class="literal">incident_key</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A string that contains the default incident key to use when sending
PagerDuty events.
</dd>
<dt>
<span class="term">
<code class="literal">client</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A string that specifies the default monitoring client.
</dd>
<dt>
<span class="term">
<code class="literal">client_url</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The URL of the default monitoring client.
</dd>
<dt>
<span class="term">
<code class="literal">event_type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The default event type. Valid values: <code class="literal">trigger</code>,<code class="literal">resolve</code>, <code class="literal">acknowledge</code>.
</dd>
<dt>
<span class="term">
<code class="literal">attach_payload</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Whether or not to provide the watch payload as context for
the event by default. Valid values: <code class="literal">true</code>, <code class="literal">false</code>.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="advanced-configuration"></a>Advanced configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/advanced-configuration.asciidoc">edit</a></h2>
</div></div></div>
<p>Modifying advanced settings is generally not recommended and could negatively
impact performance and stability. Using the Elasticsearch-provided defaults
is recommended in most circumstances.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="set-jvm-options"></a>Set JVM options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/advanced-configuration.asciidoc">edit</a></h3>
</div></div></div>
<p>If needed, you can override the default JVM options by adding custom options
files (preferred) or setting the <code class="literal">ES_JAVA_OPTS</code> environment variable.</p>
<p>JVM options files must have the suffix <em>.options</em> and contain a line-delimited
list of JVM arguments. JVM processes options files in lexicographic order.</p>
<p>Where you put the JVM options files depends on the type of installation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
tar.gz or .zip: Add custom JVM options files to <code class="literal">config/jvm.options.d/</code>.
</li>
<li class="listitem">
Debian or RPM: Add custom JVM options files to <code class="literal">/etc/elasticsearch/jvm.options.d/</code>.
</li>
<li class="listitem">
Docker: Bind mount custom JVM options files into
<code class="literal">/usr/share/elasticsearch/config/jvm.options.d/</code>.
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Do not modify the root <code class="literal">jvm.options</code> file. Use files in <code class="literal">jvm.options.d/</code> instead.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="jvm-options-syntax"></a>JVM options syntax<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/advanced-configuration.asciidoc">edit</a></h4>
</div></div></div>
<p>A JVM options file contains a line-delimited list of JVM arguments.
Arguments are preceded by a dash (<code class="literal">-</code>).
To apply the setting to specific versions, prepend the version
or a range of versions followed by a colon.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Apply a setting to all versions:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">-Xmx2g</pre>
</div>
</li>
<li class="listitem">
<p>Apply a setting to a specific version:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">17:-Xmx2g</pre>
</div>
</li>
<li class="listitem">
<p>Apply a setting to a range of versions:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">17-18:-Xmx2g</pre>
</div>
<p>To apply a setting to a specific version and any later versions,
omit the upper bound of the range.
For example, this setting applies to Java 8 and later:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">17-:-Xmx2g</pre>
</div>
</li>
</ul>
</div>
<p>Blank lines are ignored. Lines beginning with <code class="literal">#</code> are treated as comments
and ignored. Lines that aren&#8217;t commented out and aren&#8217;t recognized
as valid JVM arguments are rejected and Elasticsearch will fail to start.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="jvm-options-env"></a>Use environment variables to set JVM options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/advanced-configuration.asciidoc">edit</a></h4>
</div></div></div>
<p>In production, use JVM options files to override the
default settings. In testing and development environments,
you can also set JVM options through the <code class="literal">ES_JAVA_OPTS</code> environment variable.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">export ES_JAVA_OPTS="$ES_JAVA_OPTS -Djava.io.tmpdir=/path/to/temp/dir"
./bin/elasticsearch</pre>
</div>
<p>If you&#8217;re using the RPM or Debian packages, you can specify
<code class="literal">ES_JAVA_OPTS</code> in the <a class="xref" href="system-config.html#sysconfig" title="Sysconfig file">system configuration file</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch ignores the <code class="literal">JAVA_TOOL_OPTIONS</code> and <code class="literal">JAVA_OPTS</code> environment variables.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="set-jvm-heap-size"></a>Set the JVM heap size<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/advanced-configuration.asciidoc">edit</a></h3>
</div></div></div>
<p>By default, Elasticsearch automatically sets the JVM heap size based on a node&#8217;s
<a class="xref" href="settings.html#node-roles" title="Node roles">roles</a> and total memory.
Using the default sizing is recommended for most production environments.</p>
<p>To override the default heap size, set the minimum and maximum heap size
settings, <code class="literal">Xms</code> and <code class="literal">Xmx</code>. The minimum and maximum values must be the same.</p>
<p>The heap size should be based on the available RAM:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Set <code class="literal">Xms</code> and <code class="literal">Xmx</code> to no more than 50% of your total memory. Elasticsearch requires
memory for purposes other than the JVM heap. For example, Elasticsearch uses
off-heap buffers for efficient network communication and relies
on the operating system&#8217;s filesystem cache for
efficient access to files. The JVM itself also requires some memory. It&#8217;s
normal for Elasticsearch to use more memory than the limit
configured with the <code class="literal">Xmx</code> setting.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When running in a container, such as <a class="xref" href="install-elasticsearch.html#docker" title="Install Elasticsearch with Docker">Docker</a>, total memory is
defined as the amount of memory visible to the container, not the total system
memory on the host.</p>
</div>
</div>
</li>
<li class="listitem">
<p>Set <code class="literal">Xms</code> and <code class="literal">Xmx</code> to no more than the threshold for compressed ordinary
object pointers (oops). The exact threshold varies but 26GB is safe on most
systems and can be as large as 30GB on some systems. To verify you are under the
threshold, check the Elasticsearch log for an entry like this:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">heap size [1.9gb], compressed ordinary object pointers [true]</pre>
</div>
<p>Or check the <code class="literal">jvm.using_compressed_ordinary_object_pointers</code> value for the nodes using the <a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">nodes info API</a>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET _nodes/_all/jvm</pre>
</div>
<div class="console_widget" data-snippet="snippets/28.console"></div>
</li>
</ul>
</div>
<p>The more heap available to Elasticsearch, the more memory it can use for its internal
caches. This leaves less memory for the operating system to use
for the filesystem cache. Larger heaps can also cause longer garbage
collection pauses.</p>
<p>To configure the heap size, add the <code class="literal">Xms</code> and <code class="literal">Xmx</code> JVM arguments to a
custom JVM options file with the extension <code class="literal">.options</code> and
store it in the <code class="literal">jvm.options.d/</code> directory.
For example, to set the maximum heap size to 2GB, set both <code class="literal">Xms</code> and <code class="literal">Xmx</code> to <code class="literal">2g</code>:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">-Xms2g
-Xmx2g</pre>
</div>
<p>For testing, you can also set the heap sizes using the <code class="literal">ES_JAVA_OPTS</code>
environment variable:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">ES_JAVA_OPTS="-Xms2g -Xmx2g" ./bin/elasticsearch</pre>
</div>
<p>The <code class="literal">ES_JAVA_OPTS</code> variable overrides all other JVM
options. We do not recommend using <code class="literal">ES_JAVA_OPTS</code> in production.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are running Elasticsearch as a Windows service, you can change the heap size
using the service manager. See <a class="xref" href="install-elasticsearch.html#windows-service" title="Install and run Elasticsearch as a service on Windows">Install and run Elasticsearch as a service on Windows</a>.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="readiness-tcp-port"></a>Enable the Elasticsearch TCP readiness port<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/advanced-configuration.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>If configured, a node can open a TCP port when the node is in a ready state. A node is deemed
ready when it has successfully joined a cluster. In a single node configuration, the node is
said to be ready, when it&#8217;s able to accept requests.</p>
<p>To enable the readiness TCP port, use the <code class="literal">readiness.port</code> setting. The readiness service will bind to
all host addresses.</p>
<p>If the node leaves the cluster, or the <a class="xref" href="node-lifecycle-api.html#put-shutdown" title="Put shutdown API">Shutdown API</a> is used to mark the node
for shutdown, the readiness port is immediately closed.</p>
<p>A successful connection to the readiness TCP port signals that the Elasticsearch node is ready. When a client
connects to the readiness port, the server simply terminates the socket connection. No data is sent back
to the client. If a client cannot connect to the readiness port, the node is not ready.</p>
</div>

</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="run-elasticsearch-locally.html">« Run Elasticsearch locally</a>
</span>
<span class="next">
<a href="system-config.html">Important system configuration »</a>
</span>
</div>
</div>
</body>
</html>
