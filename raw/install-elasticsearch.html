<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Installing Elasticsearch | Elasticsearch Guide | Elastic</title>
<meta class="elastic" name="content" content="Installing Elasticsearch | Elasticsearch Guide">

<link rel="home" href="index.html" title="Elasticsearch Guide"/>
<link rel="up" href="setup.html" title="Set up Elasticsearch"/>
<link rel="prev" href="setup.html" title="Set up Elasticsearch"/>
<link rel="next" href="run-elasticsearch-locally.html" title="Run Elasticsearch locally"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="setup.html">« Set up Elasticsearch</a>
</span>
<span class="next">
<a href="run-elasticsearch-locally.html">Run Elasticsearch locally »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="install-elasticsearch"></a>Installing Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install.asciidoc">edit</a></h2>
</div></div></div>
<h3><a id="hosted-elasticsearch-service"></a>Hosted Elasticsearch Service<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install.asciidoc">edit</a></h3>
<p>Elastic Cloud offers all of the features of Elasticsearch, Kibana, and  Elastic’s Observability, Enterprise Search, and Elastic Security solutions as a hosted service
available on AWS, GCP, and Azure.</p>
<p>To set up Elasticsearch in Elastic Cloud, sign up for a <a href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body" class="ulink" target="_top">free Elastic Cloud trial</a>.</p>
<h3><a id="elasticsearch-deployment-options"></a>Self-managed Elasticsearch options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install.asciidoc">edit</a></h3>
<p>If you want to install and manage Elasticsearch yourself, you can:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Run Elasticsearch on any Linux, MacOS, or Windows machine.
</li>
<li class="listitem">
Run Elasticsearch in a <a class="xref" href="install-elasticsearch.html#docker" title="Install Elasticsearch with Docker">Docker container</a>.
</li>
<li class="listitem">
Set up and manage Elasticsearch, Kibana, Elastic Agent, and the rest of the Elastic Stack on Kubernetes with <a href="https://www.elastic.co/guide/en/cloud-on-k8s/current" class="ulink" target="_top">Elastic Cloud on Kubernetes</a>.
</li>
</ul>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To try out Elasticsearch on your own machine, we recommend using Docker and running both Elasticsearch and Kibana. For more information, see <a class="xref" href="run-elasticsearch-locally.html" title="Run Elasticsearch locally">Run Elasticsearch locally</a>.</p>
</div>
</div>
<h3><a id="elasticsearch-install-packages"></a>Elasticsearch install packages<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install.asciidoc">edit</a></h3>
<p>Elasticsearch is provided in the following package formats:</p>
<div class="informaltable">
<table border="0" cellpadding="4px">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody valign="top">
<tr>
<td valign="top">
<p>
Linux and MacOS <code class="literal">tar.gz</code> archives
</p>
</td>
<td valign="top">
<p>
<p>
The <code class="literal">tar.gz</code> archives are available for installation on any Linux distribution and MacOS.
</p>
<p><a class="xref" href="install-elasticsearch.html#targz" title="Install Elasticsearch from archive on Linux or MacOS">Install Elasticsearch from archive on Linux or MacOS</a></p>
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
Windows <code class="literal">.zip</code> archive
</p>
</td>
<td valign="top">
<p>
<p>
The <code class="literal">zip</code> archive is suitable for installation on Windows.
</p>
<p><a class="xref" href="install-elasticsearch.html#zip-windows" title="Install Elasticsearch with .zip on Windows">Install Elasticsearch with <code class="literal">.zip</code> on Windows</a></p>
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">deb</code>
</p>
</td>
<td valign="top">
<p>
<p>
The <code class="literal">deb</code> package is suitable for Debian, Ubuntu, and other Debian-based
systems. Debian packages may be downloaded from the Elasticsearch website or
from our Debian repository.
</p>
<p><a class="xref" href="install-elasticsearch.html#deb" title="Install Elasticsearch with Debian Package">Install Elasticsearch with Debian Package</a></p>
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">rpm</code>
</p>
</td>
<td valign="top">
<p>
<p>
The <code class="literal">rpm</code> package is suitable for installation on Red Hat, Centos, SLES,
OpenSuSE and other RPM-based systems. RPMs may be downloaded from the
Elasticsearch website or from our RPM repository.
</p>
<p><a class="xref" href="install-elasticsearch.html#rpm" title="Install Elasticsearch with RPM">Install Elasticsearch with RPM</a></p>
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">docker</code>
</p>
</td>
<td valign="top">
<p>
<p>
Images are available for running Elasticsearch as Docker containers. They may be
downloaded from the Elastic Docker Registry.
</p>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/docker.html" class="ulink" target="_top">Install Elasticsearch with Docker</a></p>
</p>
</td>
</tr>
</tbody>
</table>
</div>
<h3><a id="jvm-version"></a>Java (JVM) Version<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install.asciidoc">edit</a></h3>
<p>Elasticsearch is built using Java, and includes a bundled version of
<a href="https://openjdk.java.net" class="ulink" target="_top">OpenJDK</a> from the JDK maintainers (GPLv2+CE) within
each distribution. The bundled JVM is the recommended JVM.</p>
<p>To use your own version of Java, set the <code class="literal">ES_JAVA_HOME</code> environment variable.
If you must use a version of Java that is different from the bundled JVM, it is
best to use the latest release of a <a href="/support/matrix" class="ulink" target="_top">supported</a>
<a href="https://www.oracle.com/technetwork/java/eol-135779.html" class="ulink" target="_top">LTS version of Java</a>.
Elasticsearch is closely coupled to certain OpenJDK-specific features, so it may not
work correctly with other JVMs. Elasticsearch will refuse to start if a known-bad
version of Java is used.</p>
<p>If you use a JVM other than the bundled one, you are responsible for reacting
to announcements related to its security issues and bug fixes, and must
yourself determine whether each update is necessary or not. In contrast, the
bundled JVM is treated as an integral part of Elasticsearch, which means that Elastic
takes responsibility for keeping it up to date. Security issues and bugs within
the bundled JVM are treated as if they were within Elasticsearch itself.</p>
<p>The bundled JVM is located within the <code class="literal">jdk</code> subdirectory of the Elasticsearch home
directory. You may remove this directory if using your own JVM.</p>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="targz"></a>Install Elasticsearch from archive on Linux or MacOS<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/targz.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch is available as a <code class="literal">.tar.gz</code> archive for Linux and MacOS.</p>
<p>This package contains both free and subscription features.
<a class="xref" href="settings.html#license-settings" title="License settings">Start a 30-day trial</a> to try out all of the features.</p>
<p>The latest stable version of Elasticsearch can be found on the
<a href="/downloads/elasticsearch" class="ulink" target="_top">Download Elasticsearch</a> page.
Other versions can be found on the
<a href="/downloads/past-releases" class="ulink" target="_top">Past Releases page</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch includes a bundled version of <a href="https://openjdk.java.net" class="ulink" target="_top">OpenJDK</a>
from the JDK maintainers (GPLv2+CE). To use your own version of Java,
see the <a class="xref" href="install-elasticsearch.html#jvm-version" title="Java (JVM) Version">JVM version requirements</a></p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="install-linux"></a>Download and install archive for Linux<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/targz.asciidoc">edit</a></h3>
</div></div></div>
<p>The Linux archive for Elasticsearch v8.9.2 can be downloaded and installed as follows:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.9.2-linux-x86_64.tar.gz
wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.9.2-linux-x86_64.tar.gz.sha512
shasum -a 512 -c elasticsearch-8.9.2-linux-x86_64.tar.gz.sha512 <a id="CO1-1"></a><i class="conum" data-value="1"></i>
tar -xzf elasticsearch-8.9.2-linux-x86_64.tar.gz
cd elasticsearch-8.9.2/ <a id="CO1-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Compares the SHA of the downloaded <code class="literal">.tar.gz</code> archive and the published checksum, which should output
<code class="literal">elasticsearch-{version}-linux-x86_64.tar.gz: OK</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>This directory is known as <code class="literal">$ES_HOME</code>.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="install-macos"></a>Download and install archive for MacOS<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/targz.asciidoc">edit</a></h3>
</div></div></div>
<p>The MacOS archive for Elasticsearch v8.9.2 can be downloaded and installed as follows:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl -O https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.9.2-darwin-x86_64.tar.gz
curl https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.9.2-darwin-x86_64.tar.gz.sha512 | shasum -a 512 -c - <a id="CO2-1"></a><i class="conum" data-value="1"></i>
tar -xzf elasticsearch-8.9.2-darwin-x86_64.tar.gz
cd elasticsearch-8.9.2/ <a id="CO2-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Compares the SHA of the downloaded <code class="literal">.tar.gz</code> archive and the published checksum, which should output
<code class="literal">elasticsearch-{version}-darwin-x86_64.tar.gz: OK</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>This directory is known as <code class="literal">$ES_HOME</code>.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h3 class="title"><a id="targz-enable-indices"></a>Enable automatic creation of system indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/targz.asciidoc">edit</a></h3>
</div></div></div>
<p>Some commercial features automatically create indices within Elasticsearch.
By default, Elasticsearch is configured to allow automatic index creation, and no
additional steps are required. However, if you have disabled automatic index
creation in Elasticsearch, you must configure
<a class="xref" href="docs.html#index-creation" title="Automatically create data streams and indices"><code class="literal">action.auto_create_index</code></a> in <code class="literal">elasticsearch.yml</code> to allow
the commercial features to create the following indices:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">action.auto_create_index: .monitoring*,.watches,.triggered_watches,.watcher-history*,.ml*</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are using <a href="https://www.elastic.co/products/logstash" class="ulink" target="_top">Logstash</a>
or <a href="https://www.elastic.co/products/beats" class="ulink" target="_top">Beats</a> then you will most likely
require additional index names in your <code class="literal">action.auto_create_index</code> setting, and
the exact value will depend on your local configuration. If you are unsure of
the correct value for your environment, you may consider setting the value to
 <code class="literal">*</code> which will allow automatic creation of all indices.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="targz-running"></a>Run Elasticsearch from the command line<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/targz-start.asciidoc">edit</a></h3>
</div></div></div>
<p>Run the following command to start Elasticsearch from the command line:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/elasticsearch</pre>
</div>
<p>When starting Elasticsearch for the first time, security features are enabled and
configured by default. The following security configuration occurs
automatically:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Authentication and authorization are enabled, and a password is generated for
the <code class="literal">elastic</code> built-in superuser.
</li>
<li class="listitem">
Certificates and keys for TLS are generated for the transport and HTTP layer,
and TLS is enabled and configured with these keys and certificates.
</li>
<li class="listitem">
An enrollment token is generated for Kibana, which is valid for 30 minutes.
</li>
</ul>
</div>
<p>The password for the <code class="literal">elastic</code> user and the enrollment token for Kibana are
output to your terminal.</p>
<p>We recommend storing the <code class="literal">elastic</code> password as an environment variable in your shell. Example:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">export ELASTIC_PASSWORD="your_password"</pre>
</div>
<p>If you have password-protected the Elasticsearch keystore, you will be prompted
to enter the keystore&#8217;s password. See <a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure settings</a> for more
details.</p>
<p>By default Elasticsearch prints its logs to the console (<code class="literal">stdout</code>) and to the <code class="literal">&lt;cluster
name&gt;.log</code> file within the <a class="xref" href="settings.html#path-settings" title="Path settings">logs directory</a>. Elasticsearch logs some
information while it is starting, but after it has finished initializing it
will continue to run in the foreground and won&#8217;t log anything further until
something happens that is worth recording. While Elasticsearch is running you can
interact with it through its HTTP interface which is on port <code class="literal">9200</code> by default.</p>
<p>To stop Elasticsearch, press <code class="literal">Ctrl-C</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>All scripts packaged with Elasticsearch require a version of Bash
that supports arrays and assume that Bash is available at <code class="literal">/bin/bash</code>.
As such, Bash should be available at this path either directly or via a
symbolic link.</p>
</div>
</div>
<h4><a id="_enroll_nodes_in_an_existing_cluster"></a>Enroll nodes in an existing cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/targz-start.asciidoc">edit</a></h4>
<p class="exclude">When Elasticsearch starts for the first time, the security auto-configuration process
binds the HTTP layer to <code class="literal">0.0.0.0</code>, but only binds the transport layer to
localhost. This intended behavior ensures that you can start
a single-node cluster with security enabled by default without any additional
configuration.</p>
<p>Before enrolling a new node, additional actions such as binding to an address
other than <code class="literal">localhost</code> or satisfying bootstrap checks are typically necessary
in production clusters. During that time, an auto-generated enrollment token
could expire, which is why enrollment tokens aren&#8217;t generated automatically.</p>
<p>Additionally, only nodes on the same host can join the cluster without
additional configuration. If you want nodes from another host to join your
cluster, you need to set <code class="literal">transport.host</code> to a
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/modules-network.html#network-interface-values" class="ulink" target="_top">supported value</a>
(such as uncommenting the suggested value of <code class="literal">0.0.0.0</code>), or an IP address
that&#8217;s bound to an interface where other hosts can reach it. Refer to
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/modules-network.html#transport-settings" class="ulink" target="_top">transport settings</a> for more
information.</p>
<p>To enroll new nodes in your cluster, create an enrollment token with the
<code class="literal">elasticsearch-create-enrollment-token</code> tool on any existing node in your
cluster. You can then start a new node with the <code class="literal">--enrollment-token</code> parameter
so that it joins an existing cluster.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>In a separate terminal from where Elasticsearch is running, navigate to the directory
where you installed Elasticsearch and run the
<a class="xref" href="create-enrollment-token.html" title="elasticsearch-create-enrollment-token"><code class="literal">elasticsearch-create-enrollment-token</code></a> tool
to generate an enrollment token for your new nodes.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-create-enrollment-token -s node</pre>
</div>
<p>Copy the enrollment token, which you&#8217;ll use to enroll new nodes with
your Elasticsearch cluster.</p>
</li>
<li class="listitem">
<p>From the installation directory of your new node, start Elasticsearch and pass the
enrollment token with the <code class="literal">--enrollment-token</code> parameter.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch --enrollment-token &lt;enrollment-token&gt;</pre>
</div>
<p>Elasticsearch automatically generates certificates and keys in the following directory:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">config/certs</pre>
</div>
</li>
<li class="listitem">
Repeat the previous step for any new nodes that you want to enroll.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_check_that_elasticsearch_is_running"></a>Check that Elasticsearch is running<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/check-running.asciidoc">edit</a></h3>
</div></div></div>
<p>You can test that your Elasticsearch node is running by sending an HTTPS request to port
<code class="literal">9200</code> on <code class="literal">localhost</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl --cacert $ES_HOME/config/certs/http_ca.crt -u elastic:$ELASTIC_PASSWORD https://localhost:9200 <a id="CO3-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Ensure that you use <code class="literal">https</code> in your call, or the request will fail.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--cacert</code>
</span>
</dt>
<dd>
Path to the generated <code class="literal">http_ca.crt</code> certificate for the HTTP layer.
</dd>
</dl>
</div>
</td>
</tr>
</table>
</div>
<p>The call returns a response like this:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "name" : "Cp8oag6",
  "cluster_name" : "elasticsearch",
  "cluster_uuid" : "AT69_T_DTp-1qgIJlatQqA",
  "version" : {
    "number" : "8.9.2",
    "build_type" : "tar",
    "build_hash" : "f27399d",
    "build_flavor" : "default",
    "build_date" : "2016-03-30T09:51:41.449Z",
    "build_snapshot" : false,
    "lucene_version" : "9.7.0",
    "minimum_wire_compatibility_version" : "1.2.3",
    "minimum_index_compatibility_version" : "1.2.3"
  },
  "tagline" : "You Know, for Search"
}</pre>
</div>
<p>Log printing to <code class="literal">stdout</code> can be disabled using the <code class="literal">-q</code> or <code class="literal">--quiet</code>
option on the command line.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="setup-installation-daemon"></a>Run as a daemon<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/targz-daemon.asciidoc">edit</a></h3>
</div></div></div>
<p>To run Elasticsearch as a daemon, specify <code class="literal">-d</code> on the command line, and record
the process ID in a file using the <code class="literal">-p</code> option:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/elasticsearch -d -p pid</pre>
</div>
<p>If you have password-protected the Elasticsearch keystore, you will be prompted
to enter the keystore&#8217;s password. See <a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure settings</a> for more
details.</p>
<p>Log messages can be found in the <code class="literal">$ES_HOME/logs/</code> directory.</p>
<p>To shut down Elasticsearch, kill the process ID recorded in the <code class="literal">pid</code> file:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">pkill -F pid</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The Elasticsearch <code class="literal">.tar.gz</code> package does not include the <code class="literal">systemd</code> module. To
manage Elasticsearch as a service, use the <a class="xref" href="starting-elasticsearch.html#start-deb" title="Debian packages">Debian</a> or <a class="xref" href="starting-elasticsearch.html#start-rpm" title="RPM packages">RPM</a>
package instead.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="targz-configuring"></a>Configure Elasticsearch on the command line<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/targz.asciidoc">edit</a></h3>
</div></div></div>
<p>Elasticsearch loads its configuration from the <code class="literal">$ES_HOME/config/elasticsearch.yml</code>
file by default. The format of this config file is explained in
<a class="xref" href="settings.html" title="Configuring Elasticsearch"><em>Configuring Elasticsearch</em></a>.</p>
<p>Any settings that can be specified in the config file can also be specified on
the command line, using the <code class="literal">-E</code> syntax as follows:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/elasticsearch -d -Ecluster.name=my_cluster -Enode.name=node_1</pre>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Typically, any cluster-wide settings (like <code class="literal">cluster.name</code>) should be
added to the <code class="literal">elasticsearch.yml</code> config file, while any node-specific settings
such as <code class="literal">node.name</code> could be specified on the command line.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_connect_clients_to_elasticsearch"></a>Connect clients to Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h3>
</div></div></div>
<p>When you start Elasticsearch for the first time, TLS is configured automatically for the
HTTP layer. A CA certificate is generated and stored on disk at:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">$ES_HOME/config/certs/http_ca.crt</pre>
</div>
<p>The hex-encoded SHA-256 fingerprint of this
certificate is also output to the terminal. Any clients that connect to Elasticsearch,
such as the
<a href="https://www.elastic.co/guide/en/elasticsearch/client/index.html" class="ulink" target="_top">Elasticsearch Clients</a>,
Beats, standalone Elastic Agents, and Logstash must validate that they trust the
certificate that Elasticsearch uses for HTTPS. Fleet Server and Fleet-managed
Elastic Agents are automatically configured to trust the CA certificate.
Other clients can establish trust by using either the fingerprint of the CA
certificate or the CA certificate itself.</p>
<p>If the auto-configuration process already completed, you can still obtain the
fingerprint of the security certificate. You can also copy the CA certificate
to your machine and configure your client to use it.</p>
<h5><a id="_use_the_ca_fingerprint"></a>Use the CA fingerprint<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h5>
<p>Copy the fingerprint value that&#8217;s output to your terminal when Elasticsearch starts, and
configure your client to use this fingerprint to establish trust when it
connects to Elasticsearch.</p>
<p>If the auto-configuration process already completed, you can still obtain the
fingerprint of the security certificate by running the following command. The
path is to the auto-generated CA certificate for the HTTP layer.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">openssl x509 -fingerprint -sha256 -in config/certs/http_ca.crt</pre>
</div>
<p>The command returns the security certificate, including the fingerprint.
The <code class="literal">issuer</code> should be <code class="literal">Elasticsearch security auto-configuration HTTP CA</code>.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">issuer= /CN=Elasticsearch security auto-configuration HTTP CA
SHA256 Fingerprint=&lt;fingerprint&gt;</pre>
</div>
<h5><a id="_use_the_ca_certificate"></a>Use the CA certificate<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h5>
<p>If your library doesn&#8217;t support a method of validating the fingerprint, the
auto-generated CA certificate is created in the following directory on each Elasticsearch
node:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">$ES_HOME/config/certs/http_ca.crt</pre>
</div>
<p>Copy the <code class="literal">http_ca.crt</code> file to your machine and configure your client to use this
certificate to establish trust when it connects to Elasticsearch.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="targz-layout"></a>Directory layout of archives<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/targz.asciidoc">edit</a></h3>
</div></div></div>
<p>The archive distributions are entirely self-contained. All files and
directories are, by default, contained within <code class="literal">$ES_HOME</code>&#8201;&#8212;&#8201;the directory
created when unpacking the archive.</p>
<p>This is very convenient because you don&#8217;t have to create any directories to
start using Elasticsearch, and uninstalling Elasticsearch is as easy as
removing the <code class="literal">$ES_HOME</code> directory. However, it is advisable to change the
default locations of the config directory, the data directory, and the logs
directory so that you do not delete important data later on.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Default Location</th>
<th align="left" valign="top">Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>home</strong></span></p></td>
<td align="left" valign="top"><p>Elasticsearch home directory or <code class="literal">$ES_HOME</code></p></td>
<td align="left" valign="top"><p>Directory created by unpacking the archive</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>bin</strong></span></p></td>
<td align="left" valign="top"><p>Binary scripts including <code class="literal">elasticsearch</code> to start a node
    and <code class="literal">elasticsearch-plugin</code> to install plugins</p></td>
<td align="left" valign="top"><p><code class="literal">$ES_HOME/bin</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>conf</strong></span></p></td>
<td align="left" valign="top"><p>Configuration files including <code class="literal">elasticsearch.yml</code></p></td>
<td align="left" valign="top"><p><code class="literal">$ES_HOME/config</code></p></td>
<td align="left" valign="top"><p><code class="literal"><a class="xref" href="settings.html#config-files-location" title="Config files location">ES_PATH_CONF</a></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>conf</strong></span></p></td>
<td align="left" valign="top"><p>Generated TLS keys and certificates for the transport and HTTP layer.</p></td>
<td align="left" valign="top"><p><code class="literal">$ES_HOME/config/certs</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>data</strong></span></p></td>
<td align="left" valign="top"><p>The location of the data files of each index / shard allocated
    on the node.</p></td>
<td align="left" valign="top"><p><code class="literal">$ES_HOME/data</code></p></td>
<td align="left" valign="top"><p><code class="literal">path.data</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>logs</strong></span></p></td>
<td align="left" valign="top"><p>Log files location.</p></td>
<td align="left" valign="top"><p><code class="literal">$ES_HOME/logs</code></p></td>
<td align="left" valign="top"><p><code class="literal">path.logs</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>plugins</strong></span></p></td>
<td align="left" valign="top"><p>Plugin files location. Each plugin will be contained in a subdirectory.</p></td>
<td align="left" valign="top"><p><code class="literal">$ES_HOME/plugins</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>repo</strong></span></p></td>
<td align="left" valign="top"><p>Shared file system repository locations. Can hold multiple locations. A file system repository can be placed in to any subdirectory of any directory specified here.</p></td>
<td align="left" valign="top"><p>Not configured</p></td>
<td align="left" valign="top"><p><code class="literal">path.repo</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section exclude">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_security_certificates_and_keys"></a>Security certificates and keys<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/security-files-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>When you install Elasticsearch, the following certificates and keys are
generated in the Elasticsearch configuration directory, which are used to connect a Kibana
instance to your secured Elasticsearch cluster and to encrypt internode communication.
The files are listed here for reference.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http_ca.crt</code>
</span>
</dt>
<dd>
The CA certificate that is used to sign the certificates for the HTTP layer of
this Elasticsearch cluster.
</dd>
<dt>
<span class="term">
<code class="literal">http.p12</code>
</span>
</dt>
<dd>
Keystore that contains the key and certificate for the HTTP layer for this node.
</dd>
<dt>
<span class="term">
<code class="literal">transport.p12</code>
</span>
</dt>
<dd>
Keystore that contains the key and certificate for the transport layer for all
the nodes in your cluster.
</dd>
</dl>
</div>
<p><code class="literal">http.p12</code> and <code class="literal">transport.p12</code> are password-protected PKCS#12 keystores. Elasticsearch
stores the passwords for these keystores as <a class="xref" href="settings.html#secure-settings" title="Secure settings">secure
settings</a>. To retrieve the passwords so that you can inspect or change the
keystore contents, use the
<a class="xref" href="elasticsearch-keystore.html" title="elasticsearch-keystore"><code class="literal">bin/elasticsearch-keystore</code></a> tool.</p>
<p>Use the following command to retrieve the password for <code class="literal">http.p12</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore show xpack.security.http.ssl.keystore.secure_password</pre>
</div>
<p>Use the following command to retrieve the password for <code class="literal">transport.p12</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore show xpack.security.transport.ssl.keystore.secure_password</pre>
</div>
</div>

</div>

<div class="section exclude">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_next_steps"></a>Next steps<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/next-steps.asciidoc">edit</a></h3>
</div></div></div>
<p>You now have a test Elasticsearch environment set up. Before you start
serious development or go into production with Elasticsearch, you must do some additional
setup:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Learn how to <a class="xref" href="settings.html" title="Configuring Elasticsearch">configure Elasticsearch</a>.
</li>
<li class="listitem">
Configure <a class="xref" href="settings.html#important-settings" title="Important Elasticsearch configuration">important Elasticsearch settings</a>.
</li>
<li class="listitem">
Configure <a class="xref" href="system-config.html" title="Important system configuration">important system settings</a>.
</li>
</ul>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="zip-windows"></a>Install Elasticsearch with <code class="literal">.zip</code> on Windows<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/zip-windows.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch can be installed on Windows using the Windows <code class="literal">.zip</code> archive. This
comes with a <code class="literal">elasticsearch-service.bat</code> command which will setup Elasticsearch to run as a
service.</p>
<p>This package contains both free and subscription features.
<a class="xref" href="settings.html#license-settings" title="License settings">Start a 30-day trial</a> to try out all of the features.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>On Windows the Elasticsearch machine learning feature requires the Microsoft Universal
C Runtime library. This is built into Windows 10, Windows Server 2016 and more
recent versions of Windows. For older versions of Windows it can be installed
via Windows Update, or from a
<a href="https://support.microsoft.com/en-us/help/2999226/update-for-universal-c-runtime-in-windows" class="ulink" target="_top">separate download</a>.
If you cannot install the Microsoft Universal C Runtime library you can still
use the rest of Elasticsearch if you disable the machine learning feature.</p>
</div>
</div>
<p>The latest stable version of Elasticsearch can be found on the
<a href="/downloads/elasticsearch" class="ulink" target="_top">Download Elasticsearch</a> page.
Other versions can be found on the
<a href="/downloads/past-releases" class="ulink" target="_top">Past Releases page</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch includes a bundled version of <a href="https://openjdk.java.net" class="ulink" target="_top">OpenJDK</a>
from the JDK maintainers (GPLv2+CE). To use your own version of Java,
see the <a class="xref" href="install-elasticsearch.html#jvm-version" title="Java (JVM) Version">JVM version requirements</a></p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="install-windows"></a>Download and install the <code class="literal">.zip</code> package<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/zip-windows.asciidoc">edit</a></h3>
</div></div></div>
<p>Download the <code class="literal">.zip</code> archive for Elasticsearch 8.9.2 from: <a href="https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.9.2-windows-x86_64.zip" class="ulink" target="_top">https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.9.2-windows-x86_64.zip</a></p>
<p>Unzip it with your favorite unzip tool. This will create a folder called
<code class="literal">elasticsearch-8.9.2</code>, which we will refer to as <code class="literal">%ES_HOME%</code>. In a terminal
window, <code class="literal">cd</code> to the <code class="literal">%ES_HOME%</code> directory, for instance:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">cd C:\elasticsearch-8.9.2</pre>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h3 class="title"><a id="windows-enable-indices"></a>Enable automatic creation of system indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/zip-windows.asciidoc">edit</a></h3>
</div></div></div>
<p>Some commercial features automatically create indices within Elasticsearch.
By default, Elasticsearch is configured to allow automatic index creation, and no
additional steps are required. However, if you have disabled automatic index
creation in Elasticsearch, you must configure
<a class="xref" href="docs.html#index-creation" title="Automatically create data streams and indices"><code class="literal">action.auto_create_index</code></a> in <code class="literal">elasticsearch.yml</code> to allow
the commercial features to create the following indices:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">action.auto_create_index: .monitoring*,.watches,.triggered_watches,.watcher-history*,.ml*</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are using <a href="https://www.elastic.co/products/logstash" class="ulink" target="_top">Logstash</a>
or <a href="https://www.elastic.co/products/beats" class="ulink" target="_top">Beats</a> then you will most likely
require additional index names in your <code class="literal">action.auto_create_index</code> setting, and
the exact value will depend on your local configuration. If you are unsure of
the correct value for your environment, you may consider setting the value to
 <code class="literal">*</code> which will allow automatic creation of all indices.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="windows-running"></a>Run Elasticsearch from the command line<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/zip-windows-start.asciidoc">edit</a></h3>
</div></div></div>
<p>Run the following command to start Elasticsearch from the command line:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">.\bin\elasticsearch.bat</pre>
</div>
<p>When starting Elasticsearch for the first time, security features are enabled and
configured by default. The following security configuration occurs
automatically:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Authentication and authorization are enabled, and a password is generated for
the <code class="literal">elastic</code> built-in superuser.
</li>
<li class="listitem">
Certificates and keys for TLS are generated for the transport and HTTP layer,
and TLS is enabled and configured with these keys and certificates.
</li>
<li class="listitem">
An enrollment token is generated for Kibana, which is valid for 30 minutes.
</li>
</ul>
</div>
<p>The password for the <code class="literal">elastic</code> user and the enrollment token for Kibana are
output to your terminal.</p>
<p>We recommend storing the <code class="literal">elastic</code> password as an environment variable in your shell. Example:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">$ELASTIC_PASSWORD = "your_password"</pre>
</div>
<p>If you have password-protected the Elasticsearch keystore, you will be prompted to
enter the keystore&#8217;s password. See <a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure settings</a> for more details.</p>
<p>By default Elasticsearch prints its logs to the console (<code class="literal">STDOUT</code>) and to the <code class="literal">&lt;cluster
name&gt;.log</code> file within the <a class="xref" href="settings.html#path-settings" title="Path settings">logs directory</a>. Elasticsearch logs some
information while it is starting, but after it has finished initializing it
will continue to run in the foreground and won&#8217;t log anything further until
something happens that is worth recording. While Elasticsearch is running you can
interact with it through its HTTP interface which is on port <code class="literal">9200</code> by default.</p>
<p>To stop Elasticsearch, press <code class="literal">Ctrl-C</code>.</p>
<h4><a id="_enroll_nodes_in_an_existing_cluster_2"></a>Enroll nodes in an existing cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/zip-windows-start.asciidoc">edit</a></h4>
<p class="exclude">When Elasticsearch starts for the first time, the security auto-configuration process
binds the HTTP layer to <code class="literal">0.0.0.0</code>, but only binds the transport layer to
localhost. This intended behavior ensures that you can start
a single-node cluster with security enabled by default without any additional
configuration.</p>
<p>Before enrolling a new node, additional actions such as binding to an address
other than <code class="literal">localhost</code> or satisfying bootstrap checks are typically necessary
in production clusters. During that time, an auto-generated enrollment token
could expire, which is why enrollment tokens aren&#8217;t generated automatically.</p>
<p>Additionally, only nodes on the same host can join the cluster without
additional configuration. If you want nodes from another host to join your
cluster, you need to set <code class="literal">transport.host</code> to a
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/modules-network.html#network-interface-values" class="ulink" target="_top">supported value</a>
(such as uncommenting the suggested value of <code class="literal">0.0.0.0</code>), or an IP address
that&#8217;s bound to an interface where other hosts can reach it. Refer to
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.9/modules-network.html#transport-settings" class="ulink" target="_top">transport settings</a> for more
information.</p>
<p>To enroll new nodes in your cluster, create an enrollment token with the
<code class="literal">elasticsearch-create-enrollment-token</code> tool on any existing node in your
cluster. You can then start a new node with the <code class="literal">--enrollment-token</code> parameter
so that it joins an existing cluster.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>In a separate terminal from where Elasticsearch is running, navigate to the directory
where you installed Elasticsearch and run the
<a class="xref" href="create-enrollment-token.html" title="elasticsearch-create-enrollment-token"><code class="literal">elasticsearch-create-enrollment-token</code></a> tool
to generate an enrollment token for your new nodes.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin\elasticsearch-create-enrollment-token -s node</pre>
</div>
<p>Copy the enrollment token, which you&#8217;ll use to enroll new nodes with
your Elasticsearch cluster.</p>
</li>
<li class="listitem">
<p>From the installation directory of your new node, start Elasticsearch and pass the
enrollment token with the <code class="literal">--enrollment-token</code> parameter.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin\elasticsearch --enrollment-token &lt;enrollment-token&gt;</pre>
</div>
<p>Elasticsearch automatically generates certificates and keys in the following directory:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">config\certs</pre>
</div>
</li>
<li class="listitem">
Repeat the previous step for any new nodes that you want to enroll.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="windows-configuring"></a>Configure Elasticsearch on the command line<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/zip-windows.asciidoc">edit</a></h3>
</div></div></div>
<p>Elasticsearch loads its configuration from the <code class="literal">%ES_HOME%\config\elasticsearch.yml</code>
file by default. The format of this config file is explained in
<a class="xref" href="settings.html" title="Configuring Elasticsearch"><em>Configuring Elasticsearch</em></a>.</p>
<p>Any settings that can be specified in the config file can also be specified on
the command line, using the <code class="literal">-E</code> syntax as follows:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">.\bin\elasticsearch.bat -Ecluster.name=my_cluster -Enode.name=node_1</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Values that contain spaces must be surrounded with quotes. For instance <code class="literal">-Epath.logs="C:\My Logs\logs"</code>.</p>
</div>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Typically, any cluster-wide settings (like <code class="literal">cluster.name</code>) should be
added to the <code class="literal">elasticsearch.yml</code> config file, while any node-specific settings
such as <code class="literal">node.name</code> could be specified on the command line.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_check_that_elasticsearch_is_running_2"></a>Check that Elasticsearch is running<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/check-running.asciidoc">edit</a></h3>
</div></div></div>
<p>You can test that your Elasticsearch node is running by sending an HTTPS request to port
<code class="literal">9200</code> on <code class="literal">localhost</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl --cacert %ES_HOME%\config\certs\http_ca.crt -u elastic:$ELASTIC_PASSWORD https://localhost:9200 <a id="CO4-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO4-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Ensure that you use <code class="literal">https</code> in your call, or the request will fail.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--cacert</code>
</span>
</dt>
<dd>
Path to the generated <code class="literal">http_ca.crt</code> certificate for the HTTP layer.
</dd>
</dl>
</div>
</td>
</tr>
</table>
</div>
<p>The call returns a response like this:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "name" : "Cp8oag6",
  "cluster_name" : "elasticsearch",
  "cluster_uuid" : "AT69_T_DTp-1qgIJlatQqA",
  "version" : {
    "number" : "8.9.2",
    "build_type" : "tar",
    "build_hash" : "f27399d",
    "build_flavor" : "default",
    "build_date" : "2016-03-30T09:51:41.449Z",
    "build_snapshot" : false,
    "lucene_version" : "9.7.0",
    "minimum_wire_compatibility_version" : "1.2.3",
    "minimum_index_compatibility_version" : "1.2.3"
  },
  "tagline" : "You Know, for Search"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="windows-service"></a>Install and run Elasticsearch as a service on Windows<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/zip-windows.asciidoc">edit</a></h3>
</div></div></div>
<p>You can install Elasticsearch as a service that runs in the background or starts
automatically at boot time without user interaction.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Install Elasticsearch as a service. The name of the service and the value of
<code class="literal">ES_JAVA_HOME</code> will be made available during install:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">C:\elasticsearch-8.9.2\bin&gt;elasticsearch-service.bat install
Installing service      :  "elasticsearch-service-x64"
Using ES_JAVA_HOME (64-bit):  "C:\jvm\jdk1.8"
The service 'elasticsearch-service-x64' has been installed.</pre>
</div>
</li>
<li class="listitem">
<p>Start Elasticsearch as a service. When Elasticsearch starts, authentication is enabled by
default:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">C:\elasticsearch-8.9.2\bin&gt;bin\elasticsearch-service.bat start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>TLS is not enabled or configured when you start Elasticsearch as a service.</p>
</div>
</div>
</li>
<li class="listitem">
<p>Generate a password for the <code class="literal">elastic</code> user with the
<a class="xref" href="reset-password.html" title="elasticsearch-reset-password"><code class="literal">elasticsearch-reset-password</code></a> tool. The password is output
to the command line.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">C:\elasticsearch-8.9.2\bin&gt;\bin\elasticsearch-reset-password -u elastic</pre>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>While a JRE can be used for the Elasticsearch service, due to its use of a client
VM (as opposed to a server JVM which offers better performance for long-running
applications) its usage is discouraged and a warning will be issued.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The system environment variable <code class="literal">ES_JAVA_HOME</code> should be set to the path
of the JDK installation that you want the service to use. If you upgrade the
JDK, you are not required to the reinstall the service but you must set the
value of the system environment variable <code class="literal">ES_JAVA_HOME</code> to the path to the new
JDK installation. However, upgrading across JVM types (e.g. JRE versus SE) is
not supported, and does require the service to be reinstalled.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="windows-service-manage"></a>Manage Elasticsearch as a service on Windows<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/zip-windows.asciidoc">edit</a></h4>
</div></div></div>
<p>Run the <code class="literal">elasticsearch-service.bat</code> script in the <code class="literal">bin\</code> folder to install,
remove, manage, or configure the service and potentially start and stop the
service from the command line.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">C:\elasticsearch-8.9.2\bin&gt;elasticsearch-service.bat

Usage: elasticsearch-service.bat install|remove|start|stop|manager [SERVICE_ID]</pre>
</div>
<p>The script requires one parameter (the command to execute), followed by an
optional one indicating the service id (useful when installing multiple
Elasticsearch services).</p>
<p>The commands available are:</p>
<div class="informaltable">
<table border="0" cellpadding="4px">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody valign="top">
<tr>
<td valign="top">
<p>
<code class="literal">install</code>
</p>
</td>
<td valign="top">
<p>
Install Elasticsearch as a service
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">remove</code>
</p>
</td>
<td valign="top">
<p>
Remove the installed Elasticsearch service (and stop the service if started)
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">start</code>
</p>
</td>
<td valign="top">
<p>
Start the Elasticsearch service (if installed)
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">stop</code>
</p>
</td>
<td valign="top">
<p>
Stop the Elasticsearch service (if started)
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">manager</code>
</p>
</td>
<td valign="top">
<p>
Start a GUI for managing the installed service
</p>
</td>
</tr>
</tbody>
</table>
</div>
<h3><a id="windows-service-settings"></a>Customize service settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/zip-windows.asciidoc">edit</a></h3>
<p>The Elasticsearch service can be configured prior to installation by setting the following environment variables (either using the <a href="https://technet.microsoft.com/en-us/library/cc754250(v=ws.10).aspx" class="ulink" target="_top">set command</a> from the command line, or through the <span class="strong strong"><strong>System Properties&#8594;Environment Variables</strong></span> GUI).</p>
<div class="informaltable">
<table border="0" cellpadding="4px">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody valign="top">
<tr>
<td valign="top">
<p>
<code class="literal">SERVICE_ID</code>
</p>
</td>
<td valign="top">
<p>
A unique identifier for the service. Useful if installing multiple instances
on the same machine. Defaults to <code class="literal">elasticsearch-service-x64</code>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">SERVICE_USERNAME</code>
</p>
</td>
<td valign="top">
<p>
The user to run as, defaults to the local system account.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">SERVICE_PASSWORD</code>
</p>
</td>
<td valign="top">
<p>
The password for the user specified in <code class="literal">%SERVICE_USERNAME%</code>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">SERVICE_DISPLAY_NAME</code>
</p>
</td>
<td valign="top">
<p>
The name of the service. Defaults to <code class="literal">{es} &lt;version&gt; %SERVICE_ID%</code>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">SERVICE_DESCRIPTION</code>
</p>
</td>
<td valign="top">
<p>
The description of the service. Defaults to <code class="literal">{es} &lt;version&gt; Windows Service - https://elastic.co</code>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">ES_JAVA_HOME</code>
</p>
</td>
<td valign="top">
<p>
The installation directory of the desired JVM to run the service under.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">SERVICE_LOG_DIR</code>
</p>
</td>
<td valign="top">
<p>
Service log directory, defaults to <code class="literal">%ES_HOME%\logs</code>. Note that this does
not control the path for the Elasticsearch logs; the path for these is set
via the setting <code class="literal">path.logs</code> in the <code class="literal">elasticsearch.yml</code> configuration file,
or on the command line.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">ES_PATH_CONF</code>
</p>
</td>
<td valign="top">
<p>
Configuration file directory (which needs to include <code class="literal">elasticsearch.yml</code>,
<code class="literal">jvm.options</code>, and <code class="literal">log4j2.properties</code> files), defaults to
<code class="literal">%ES_HOME%\config</code>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">ES_JAVA_OPTS</code>
</p>
</td>
<td valign="top">
<p>
Any additional JVM system properties you may want to apply.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">ES_START_TYPE</code>
</p>
</td>
<td valign="top">
<p>
Startup mode for the service. Can be either <code class="literal">auto</code> or <code class="literal">manual</code> (default).
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">ES_STOP_TIMEOUT</code>
</p>
</td>
<td valign="top">
<p>
The timeout in seconds that procrun waits for service to exit gracefully. Defaults to <code class="literal">0</code>.
</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>At its core, <code class="literal">elasticsearch-service.bat</code> relies on <a href="https://commons.apache.org/proper/commons-daemon/" class="ulink" target="_top">Apache Commons Daemon</a> project
to install the service. Environment variables set prior to the service installation are copied and will be used during the service lifecycle. This means any changes made to them after the installation will not be picked up unless the service is reinstalled.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>By default, Elasticsearch automatically sizes JVM heap based on a node&#8217;s
<a class="xref" href="settings.html#node-roles" title="Node roles">roles</a> and total memory. We recommend this default sizing for most
production environments. If needed, you can override default sizing by manually
setting the heap size.</p>
<p>When installing Elasticsearch on Windows as a service for the first time or running Elasticsearch
from the command line, you can manually <a class="xref" href="settings.html#set-jvm-heap-size" title="Set the JVM heap size">Set the JVM heap size</a>.
To resize the heap for an already installed service,
use the service manager: <code class="literal">bin\elasticsearch-service.bat manager</code>.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The service automatically configures a private temporary directory for use
by Elasticsearch when it is running. This private temporary directory is
configured as a sub-directory of the private temporary directory for the user
running the installation. If the service will run under a different user, you
can configure the location of the temporary directory that the service should
use by setting the environment variable <code class="literal">ES_TMPDIR</code> to the preferred location
before you execute the service installation.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Using the Manager GUI
</span>
</dt>
<dd>
It is also possible to configure the service after it&#8217;s been installed using the manager GUI (<code class="literal">elasticsearch-service-mgr.exe</code>), which offers insight into the installed service, including its status, startup type, JVM, start and stop settings amongst other things. Invoke <code class="literal">elasticsearch-service.bat manager</code> from the command-line to open the manager window.
</dd>
</dl>
</div>
<p>Most changes (like JVM settings) made through the manager GUI will require a restart of the service to take affect.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_connect_clients_to_elasticsearch_2"></a>Connect clients to Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h3>
</div></div></div>
<p>When you start Elasticsearch for the first time, TLS is configured automatically for the
HTTP layer. A CA certificate is generated and stored on disk at:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">%ES_HOME%\config\certs\http_ca.crt</pre>
</div>
<p>The hex-encoded SHA-256 fingerprint of this
certificate is also output to the terminal. Any clients that connect to Elasticsearch,
such as the
<a href="https://www.elastic.co/guide/en/elasticsearch/client/index.html" class="ulink" target="_top">Elasticsearch Clients</a>,
Beats, standalone Elastic Agents, and Logstash must validate that they trust the
certificate that Elasticsearch uses for HTTPS. Fleet Server and Fleet-managed
Elastic Agents are automatically configured to trust the CA certificate.
Other clients can establish trust by using either the fingerprint of the CA
certificate or the CA certificate itself.</p>
<p>If the auto-configuration process already completed, you can still obtain the
fingerprint of the security certificate. You can also copy the CA certificate
to your machine and configure your client to use it.</p>
<h5><a id="_use_the_ca_fingerprint_2"></a>Use the CA fingerprint<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h5>
<p>Copy the fingerprint value that&#8217;s output to your terminal when Elasticsearch starts, and
configure your client to use this fingerprint to establish trust when it
connects to Elasticsearch.</p>
<p>If the auto-configuration process already completed, you can still obtain the
fingerprint of the security certificate by running the following command. The
path is to the auto-generated CA certificate for the HTTP layer.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">openssl x509 -fingerprint -sha256 -in config/certs/http_ca.crt</pre>
</div>
<p>The command returns the security certificate, including the fingerprint.
The <code class="literal">issuer</code> should be <code class="literal">Elasticsearch security auto-configuration HTTP CA</code>.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">issuer= /CN=Elasticsearch security auto-configuration HTTP CA
SHA256 Fingerprint=&lt;fingerprint&gt;</pre>
</div>
<h5><a id="_use_the_ca_certificate_2"></a>Use the CA certificate<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h5>
<p>If your library doesn&#8217;t support a method of validating the fingerprint, the
auto-generated CA certificate is created in the following directory on each Elasticsearch
node:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">%ES_HOME%\config\certs\http_ca.crt</pre>
</div>
<p>Copy the <code class="literal">http_ca.crt</code> file to your machine and configure your client to use this
certificate to establish trust when it connects to Elasticsearch.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="windows-layout"></a>Directory layout of <code class="literal">.zip</code> archive<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/zip-windows.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">.zip</code> package is entirely self-contained. All files and directories are,
by default, contained within <code class="literal">%ES_HOME%</code>&#8201;&#8212;&#8201;the directory created when
unpacking the archive.</p>
<p>This is very convenient because you don&#8217;t have to create any directories to
start using Elasticsearch, and uninstalling Elasticsearch is as easy as
removing the <code class="literal">%ES_HOME%</code> directory. However, it is advisable to change the
default locations of the config directory, the data directory, and the logs
directory so that you do not delete important data later on.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Default Location</th>
<th align="left" valign="top">Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>home</strong></span></p></td>
<td align="left" valign="top"><p>Elasticsearch home directory or <code class="literal">%ES_HOME%</code></p></td>
<td align="left" valign="top"><p>Directory created by unpacking the archive</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>bin</strong></span></p></td>
<td align="left" valign="top"><p>Binary scripts including <code class="literal">elasticsearch</code> to start a node
    and <code class="literal">elasticsearch-plugin</code> to install plugins</p></td>
<td align="left" valign="top"><p><code class="literal">%ES_HOME%\bin</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>conf</strong></span></p></td>
<td align="left" valign="top"><p>Configuration files including <code class="literal">elasticsearch.yml</code></p></td>
<td align="left" valign="top"><p><code class="literal">%ES_HOME%\config</code></p></td>
<td align="left" valign="top"><p><code class="literal"><a class="xref" href="settings.html#config-files-location" title="Config files location">ES_PATH_CONF</a></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>conf</strong></span></p></td>
<td align="left" valign="top"><p>Generated TLS keys and certificates for the transport and HTTP layer.</p></td>
<td align="left" valign="top"><p><code class="literal">%ES_HOME%\config\certs</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>data</strong></span></p></td>
<td align="left" valign="top"><p>The location of the data files of each index / shard allocated
    on the node.</p></td>
<td align="left" valign="top"><p><code class="literal">%ES_HOME%\data</code></p></td>
<td align="left" valign="top"><p><code class="literal">path.data</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>logs</strong></span></p></td>
<td align="left" valign="top"><p>Log files location.</p></td>
<td align="left" valign="top"><p><code class="literal">%ES_HOME%\logs</code></p></td>
<td align="left" valign="top"><p><code class="literal">path.logs</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>plugins</strong></span></p></td>
<td align="left" valign="top"><p>Plugin files location. Each plugin will be contained in a subdirectory.</p></td>
<td align="left" valign="top"><p><code class="literal">%ES_HOME%\plugins</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>repo</strong></span></p></td>
<td align="left" valign="top"><p>Shared file system repository locations. Can hold multiple locations. A file system repository can be placed in to any subdirectory of any directory specified here.</p></td>
<td align="left" valign="top"><p>Not configured</p></td>
<td align="left" valign="top"><p><code class="literal">path.repo</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section exclude">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_next_steps_2"></a>Next steps<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/next-steps.asciidoc">edit</a></h3>
</div></div></div>
<p>You now have a test Elasticsearch environment set up. Before you start
serious development or go into production with Elasticsearch, you must do some additional
setup:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Learn how to <a class="xref" href="settings.html" title="Configuring Elasticsearch">configure Elasticsearch</a>.
</li>
<li class="listitem">
Configure <a class="xref" href="settings.html#important-settings" title="Important Elasticsearch configuration">important Elasticsearch settings</a>.
</li>
<li class="listitem">
Configure <a class="xref" href="system-config.html" title="Important system configuration">important system settings</a>.
</li>
</ul>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="deb"></a>Install Elasticsearch with Debian Package<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/deb.asciidoc">edit</a></h2>
</div></div></div>
<p>The Debian package for Elasticsearch can be <a class="xref" href="install-elasticsearch.html#install-deb" title="Download and install the Debian package manually">downloaded from our website</a>
or from our <a class="xref" href="install-elasticsearch.html#deb-repo" title="Installing from the APT repository">APT repository</a>. It can be used to install
Elasticsearch on any Debian-based system such as Debian and Ubuntu.</p>
<p>This package contains both free and subscription features.
<a class="xref" href="settings.html#license-settings" title="License settings">Start a 30-day trial</a> to try out all of the features.</p>
<p>The latest stable version of Elasticsearch can be found on the
<a href="/downloads/elasticsearch" class="ulink" target="_top">Download Elasticsearch</a> page. Other versions can
be found on the <a href="/downloads/past-releases" class="ulink" target="_top">Past Releases page</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch includes a bundled version of <a href="https://openjdk.java.net" class="ulink" target="_top">OpenJDK</a>
from the JDK maintainers (GPLv2+CE). To use your own version of Java,
see the <a class="xref" href="install-elasticsearch.html#jvm-version" title="Java (JVM) Version">JVM version requirements</a></p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="deb-key"></a>Import the Elasticsearch PGP Key<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/deb.asciidoc">edit</a></h3>
</div></div></div>
<p>We sign all of our packages with the Elasticsearch Signing Key (PGP key
<a href="https://pgp.mit.edu/pks/lookup?op=vindex&amp;search=0xD27D666CD88E42B4" class="ulink" target="_top">D88E42B4</a>,
available from <a href="https://pgp.mit.edu" class="ulink" target="_top">https://pgp.mit.edu</a>) with fingerprint:</p>
<pre class="literallayout">4609 5ACC 8548 582C 1A26 99A9 D27D 666C D88E 42B4</pre>

<p>Download and install the public signing key:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo gpg --dearmor -o /usr/share/keyrings/elasticsearch-keyring.gpg</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="deb-repo"></a>Installing from the APT repository<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/deb.asciidoc">edit</a></h3>
</div></div></div>
<p>You may need to install the <code class="literal">apt-transport-https</code> package on Debian before proceeding:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo apt-get install apt-transport-https</pre>
</div>
<p>Save the repository definition to  <code class="literal">/etc/apt/sources.list.d/elastic-8.x.list</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">echo "deb [signed-by=/usr/share/keyrings/elasticsearch-keyring.gpg] https://artifacts.elastic.co/packages/8.x/apt stable main" | sudo tee /etc/apt/sources.list.d/elastic-8.x.list</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These instructions do not use <code class="literal">add-apt-repository</code> for several reasons:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<code class="literal">add-apt-repository</code> adds entries to the system <code class="literal">/etc/apt/sources.list</code> file
rather than a clean per-repository file in <code class="literal">/etc/apt/sources.list.d</code>
</li>
<li class="listitem">
<code class="literal">add-apt-repository</code> is not part of the default install on many distributions
and requires a number of non-default dependencies.
</li>
<li class="listitem">
<p>Older versions of <code class="literal">add-apt-repository</code> always add a <code class="literal">deb-src</code> entry which
will cause errors because we do not provide a source package. If you have added
the <code class="literal">deb-src</code> entry, you will see an error like the following until you delete
the <code class="literal">deb-src</code> line:</p>
<pre class="literallayout">Unable to find expected entry 'main/source/Sources' in Release file
(Wrong sources.list entry or malformed file)</pre>

</li>
</ol>
</div>
</div>
</div>
<p>You can install the Elasticsearch Debian package with:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo apt-get update &amp;&amp; sudo apt-get install elasticsearch</pre>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>If two entries exist for the same Elasticsearch repository, you will see an error like this during <code class="literal">apt-get update</code>:</p>
<pre class="literallayout">Duplicate sources.list entry https://artifacts.elastic.co/packages/8.x/apt/ ...`</pre>

<p>Examine <code class="literal">/etc/apt/sources.list.d/elasticsearch-8.x.list</code> for the duplicate entry or locate the duplicate entry amongst the files in <code class="literal">/etc/apt/sources.list.d/</code> and the <code class="literal">/etc/apt/sources.list</code> file.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>On systemd-based distributions, the installation scripts will attempt to set kernel parameters (e.g.,
<code class="literal">vm.max_map_count</code>); you can skip this by masking the systemd-sysctl.service unit.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="install-deb"></a>Download and install the Debian package manually<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/deb.asciidoc">edit</a></h3>
</div></div></div>
<p>The Debian package for Elasticsearch v8.9.2 can be downloaded from the website and installed as follows:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.9.2-amd64.deb
wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.9.2-amd64.deb.sha512
shasum -a 512 -c elasticsearch-8.9.2-amd64.deb.sha512 <a id="CO5-1"></a><i class="conum" data-value="1"></i>
sudo dpkg -i elasticsearch-8.9.2-amd64.deb</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO5-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Compares the SHA of the downloaded Debian package and the published checksum, which should output
<code class="literal">elasticsearch-{version}-amd64.deb: OK</code>.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section exclude">
<div class="titlepage"><div><div>
<h3 class="title"><a id="deb-security-configuration"></a>Start Elasticsearch with security enabled<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/package-security.asciidoc">edit</a></h3>
</div></div></div>
<p>When installing Elasticsearch, security features are enabled and configured by default.
When you install Elasticsearch, the following security configuration
occurs automatically:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Authentication and authorization are enabled, and a password is generated for
the <code class="literal">elastic</code> built-in superuser.
</li>
<li class="listitem">
Certificates and keys for TLS are generated for the transport and HTTP layer,
and TLS is enabled and configured with these keys and certificates.
</li>
</ul>
</div>
<p>The password and certificate and keys are output to your terminal.</p>
<p>We recommend storing the <code class="literal">elastic</code> password as an environment variable in your shell. Example:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">export ELASTIC_PASSWORD="your_password"</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_reconfigure_a_node_to_join_an_existing_cluster"></a>Reconfigure a node to join an existing cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/package-security.asciidoc">edit</a></h4>
</div></div></div>
<p>When you install Elasticsearch, the installation process configures a
single-node cluster by default. If you want a node to join an existing cluster
instead, generate an enrollment token on an existing node <em>before</em> you start
the new node for the first time.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>On any node in your existing cluster, generate a node enrollment token:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">/usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s node</pre>
</div>
</li>
<li class="listitem">
Copy the enrollment token, which is output to your terminal.
</li>
<li class="listitem">
<p>On your new Elasticsearch node, pass the enrollment token as a parameter to the
<code class="literal">elasticsearch-reconfigure-node</code> tool:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">/usr/share/elasticsearch/bin/elasticsearch-reconfigure-node --enrollment-token &lt;enrollment-token&gt;</pre>
</div>
<p>Elasticsearch is now configured to join the existing cluster.</p>
</li>
<li class="listitem">
<a class="xref" href="install-elasticsearch.html#deb-running-systemd" title="Running Elasticsearch with systemd">Start your new node using <code class="literal">systemd</code></a>.
</li>
</ol>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h3 class="title"><a id="deb-enable-indices"></a>Enable automatic creation of system indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/deb.asciidoc">edit</a></h3>
</div></div></div>
<p>Some commercial features automatically create indices within Elasticsearch.
By default, Elasticsearch is configured to allow automatic index creation, and no
additional steps are required. However, if you have disabled automatic index
creation in Elasticsearch, you must configure
<a class="xref" href="docs.html#index-creation" title="Automatically create data streams and indices"><code class="literal">action.auto_create_index</code></a> in <code class="literal">elasticsearch.yml</code> to allow
the commercial features to create the following indices:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">action.auto_create_index: .monitoring*,.watches,.triggered_watches,.watcher-history*,.ml*</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are using <a href="https://www.elastic.co/products/logstash" class="ulink" target="_top">Logstash</a>
or <a href="https://www.elastic.co/products/beats" class="ulink" target="_top">Beats</a> then you will most likely
require additional index names in your <code class="literal">action.auto_create_index</code> setting, and
the exact value will depend on your local configuration. If you are unsure of
the correct value for your environment, you may consider setting the value to
 <code class="literal">*</code> which will allow automatic creation of all indices.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="deb-running-systemd"></a>Running Elasticsearch with <code class="literal">systemd</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/systemd.asciidoc">edit</a></h3>
</div></div></div>
<p>To configure Elasticsearch to start automatically when the system boots up,
run the following commands:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable elasticsearch.service</pre>
</div>
<p>Elasticsearch can be started and stopped as follows:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo systemctl start elasticsearch.service
sudo systemctl stop elasticsearch.service</pre>
</div>
<p>These commands provide no feedback as to whether Elasticsearch was started
successfully or not. Instead, this information will be written in the log
files located in <code class="literal">/var/log/elasticsearch/</code>.</p>
<p>If you have password-protected your Elasticsearch keystore, you will need to provide
<code class="literal">systemd</code> with the keystore password using a local file and systemd environment
variables. This local file should be protected while it exists and may be
safely deleted once Elasticsearch is up and running.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">echo "keystore_password" &gt; /path/to/my_pwd_file.tmp
chmod 600 /path/to/my_pwd_file.tmp
sudo systemctl set-environment ES_KEYSTORE_PASSPHRASE_FILE=/path/to/my_pwd_file.tmp
sudo systemctl start elasticsearch.service</pre>
</div>
<p>By default the Elasticsearch service doesn&#8217;t log information in the <code class="literal">systemd</code>
journal. To enable <code class="literal">journalctl</code> logging, the <code class="literal">--quiet</code> option must be removed
 from the <code class="literal">ExecStart</code> command line in the <code class="literal">elasticsearch.service</code> file.</p>
<p>When <code class="literal">systemd</code> logging is enabled, the logging information are available using
the <code class="literal">journalctl</code> commands:</p>
<p>To tail the journal:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo journalctl -f</pre>
</div>
<p>To list journal entries for the elasticsearch service:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo journalctl --unit elasticsearch</pre>
</div>
<p>To list journal entries for the elasticsearch service starting from a given time:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo journalctl --unit elasticsearch --since  "2016-10-30 18:17:16"</pre>
</div>
<p>Check <code class="literal">man journalctl</code> or <a href="https://www.freedesktop.org/software/systemd/man/journalctl.html" class="ulink" target="_top">https://www.freedesktop.org/software/systemd/man/journalctl.html</a> for
more command line options.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Startup timeouts with older <code class="literal">systemd</code> versions</h3>
<p>By default Elasticsearch sets the <code class="literal">TimeoutStartSec</code> parameter to <code class="literal">systemd</code> to <code class="literal">900s</code>. If
you are running at least version 238 of <code class="literal">systemd</code> then Elasticsearch can automatically
extend the startup timeout, and will do so repeatedly until startup is complete
even if it takes longer than 900s.</p>
<p>Versions of <code class="literal">systemd</code> prior to 238 do not support the timeout extension
mechanism and will terminate the Elasticsearch process if it has not fully started up
within the configured timeout. If this happens, Elasticsearch will report in its logs
that it was shut down normally a short time after it started:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">[2022-01-31T01:22:31,077][INFO ][o.e.n.Node               ] [instance-0000000123] starting ...
...
[2022-01-31T01:37:15,077][INFO ][o.e.n.Node               ] [instance-0000000123] stopping ...</pre>
</div>
<p>However the <code class="literal">systemd</code> logs will report that the startup timed out:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">Jan 31 01:22:30 debian systemd[1]: Starting Elasticsearch...
Jan 31 01:37:15 debian systemd[1]: elasticsearch.service: Start operation timed out. Terminating.
Jan 31 01:37:15 debian systemd[1]: elasticsearch.service: Main process exited, code=killed, status=15/TERM
Jan 31 01:37:15 debian systemd[1]: elasticsearch.service: Failed with result 'timeout'.
Jan 31 01:37:15 debian systemd[1]: Failed to start Elasticsearch.</pre>
</div>
<p>To avoid this, upgrade your <code class="literal">systemd</code> to at least version 238. You can also
temporarily work around the problem by extending the <code class="literal">TimeoutStartSec</code>
parameter.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="deb-check-running"></a>Check that Elasticsearch is running<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/check-running.asciidoc">edit</a></h3>
</div></div></div>
<p>You can test that your Elasticsearch node is running by sending an HTTPS request to port
<code class="literal">9200</code> on <code class="literal">localhost</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl --cacert /etc/elasticsearch/certs/http_ca.crt -u elastic:$ELASTIC_PASSWORD https://localhost:9200 <a id="CO6-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO6-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Ensure that you use <code class="literal">https</code> in your call, or the request will fail.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--cacert</code>
</span>
</dt>
<dd>
Path to the generated <code class="literal">http_ca.crt</code> certificate for the HTTP layer.
</dd>
</dl>
</div>
</td>
</tr>
</table>
</div>
<p>The call returns a response like this:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "name" : "Cp8oag6",
  "cluster_name" : "elasticsearch",
  "cluster_uuid" : "AT69_T_DTp-1qgIJlatQqA",
  "version" : {
    "number" : "8.9.2",
    "build_type" : "tar",
    "build_hash" : "f27399d",
    "build_flavor" : "default",
    "build_date" : "2016-03-30T09:51:41.449Z",
    "build_snapshot" : false,
    "lucene_version" : "9.7.0",
    "minimum_wire_compatibility_version" : "1.2.3",
    "minimum_index_compatibility_version" : "1.2.3"
  },
  "tagline" : "You Know, for Search"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="deb-configuring"></a>Configuring Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/deb.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">/etc/elasticsearch</code> directory contains the default runtime configuration
for Elasticsearch. The ownership of this directory and all contained files are set to
<code class="literal">root:elasticsearch</code> on package installations.</p>
<p>The <code class="literal">setgid</code> flag applies group permissions on the <code class="literal">/etc/elasticsearch</code>
directory to ensure that Elasticsearch can read any contained files and subdirectories.
All files and subdirectories inherit the <code class="literal">root:elasticsearch</code> ownership.
Running commands from this directory or any subdirectories, such as the
<a class="xref" href="settings.html#secure-settings" title="Secure settings">elasticsearch-keystore tool</a>, requires <code class="literal">root:elasticsearch</code>
permissions.</p>
<p>Elasticsearch loads its configuration from the
<code class="literal">/etc/elasticsearch/elasticsearch.yml</code> file by default. The format of this
config file is explained in <a class="xref" href="settings.html" title="Configuring Elasticsearch"><em>Configuring Elasticsearch</em></a>.</p>
<p>The Debian package also has a system configuration file (<code class="literal">/etc/default/elasticsearch</code>),
which allows you to set the following parameters:</p>
<div class="informaltable">
<table border="0" cellpadding="4px">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody valign="top">
<tr>
<td valign="top">
<p>
<code class="literal">ES_JAVA_HOME</code>
</p>
</td>
<td valign="top">
<p>
Set a custom Java path to be used.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">ES_PATH_CONF</code>
</p>
</td>
<td valign="top">
<p>
Configuration file directory (which needs to include <code class="literal">elasticsearch.yml</code>,
<code class="literal">jvm.options</code>, and <code class="literal">log4j2.properties</code> files); defaults to
<code class="literal">/etc/elasticsearch</code>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">ES_JAVA_OPTS</code>
</p>
</td>
<td valign="top">
<p>
Any additional JVM system properties you may want to apply.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">RESTART_ON_UPGRADE</code>
</p>
</td>
<td valign="top">
<p>
Configure restart on package upgrade, defaults to <code class="literal">false</code>. This means you
will have to restart your Elasticsearch instance after installing a
package manually. The reason for this is to ensure, that upgrades in a
cluster do not result in a continuous shard reallocation resulting in high
network traffic and reducing the response times of your cluster.
</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Distributions that use <code class="literal">systemd</code> require that system resource limits be
configured via <code class="literal">systemd</code> rather than via the <code class="literal">/etc/sysconfig/elasticsearch</code>
file. See <a class="xref" href="system-config.html#systemd" title="Systemd configuration">Systemd configuration</a> for more information.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_connect_clients_to_elasticsearch_3"></a>Connect clients to Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h3>
</div></div></div>
<p>When you start Elasticsearch for the first time, TLS is configured automatically for the
HTTP layer. A CA certificate is generated and stored on disk at:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">/etc/elasticsearch/certs/http_ca.crt</pre>
</div>
<p>The hex-encoded SHA-256 fingerprint of this
certificate is also output to the terminal. Any clients that connect to Elasticsearch,
such as the
<a href="https://www.elastic.co/guide/en/elasticsearch/client/index.html" class="ulink" target="_top">Elasticsearch Clients</a>,
Beats, standalone Elastic Agents, and Logstash must validate that they trust the
certificate that Elasticsearch uses for HTTPS. Fleet Server and Fleet-managed
Elastic Agents are automatically configured to trust the CA certificate.
Other clients can establish trust by using either the fingerprint of the CA
certificate or the CA certificate itself.</p>
<p>If the auto-configuration process already completed, you can still obtain the
fingerprint of the security certificate. You can also copy the CA certificate
to your machine and configure your client to use it.</p>
<h5><a id="_use_the_ca_fingerprint_3"></a>Use the CA fingerprint<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h5>
<p>Copy the fingerprint value that&#8217;s output to your terminal when Elasticsearch starts, and
configure your client to use this fingerprint to establish trust when it
connects to Elasticsearch.</p>
<p>If the auto-configuration process already completed, you can still obtain the
fingerprint of the security certificate by running the following command. The
path is to the auto-generated CA certificate for the HTTP layer.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">openssl x509 -fingerprint -sha256 -in config/certs/http_ca.crt</pre>
</div>
<p>The command returns the security certificate, including the fingerprint.
The <code class="literal">issuer</code> should be <code class="literal">Elasticsearch security auto-configuration HTTP CA</code>.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">issuer= /CN=Elasticsearch security auto-configuration HTTP CA
SHA256 Fingerprint=&lt;fingerprint&gt;</pre>
</div>
<h5><a id="_use_the_ca_certificate_3"></a>Use the CA certificate<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h5>
<p>If your library doesn&#8217;t support a method of validating the fingerprint, the
auto-generated CA certificate is created in the following directory on each Elasticsearch
node:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">/etc/elasticsearch/certs/http_ca.crt</pre>
</div>
<p>Copy the <code class="literal">http_ca.crt</code> file to your machine and configure your client to use this
certificate to establish trust when it connects to Elasticsearch.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="deb-layout"></a>Directory layout of Debian package<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/deb.asciidoc">edit</a></h3>
</div></div></div>
<p>The Debian package places config files, logs, and the data directory in the appropriate
locations for a Debian-based system:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Default Location</th>
<th align="left" valign="top">Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>home</strong></span></p></td>
<td align="left" valign="top"><p>Elasticsearch home directory or <code class="literal">$ES_HOME</code></p></td>
<td align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>bin</strong></span></p></td>
<td align="left" valign="top"><p>Binary scripts including <code class="literal">elasticsearch</code> to start a node
    and <code class="literal">elasticsearch-plugin</code> to install plugins</p></td>
<td align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch/bin</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>conf</strong></span></p></td>
<td align="left" valign="top"><p>Configuration files including <code class="literal">elasticsearch.yml</code></p></td>
<td align="left" valign="top"><p><code class="literal">/etc/elasticsearch</code></p></td>
<td align="left" valign="top"><p><code class="literal"><a class="xref" href="settings.html#config-files-location" title="Config files location">ES_PATH_CONF</a></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>conf</strong></span></p></td>
<td align="left" valign="top"><p>Environment variables including heap size, file descriptors.</p></td>
<td align="left" valign="top"><p><code class="literal">/etc/default/elasticsearch</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>conf</strong></span></p></td>
<td align="left" valign="top"><p>Generated TLS keys and certificates for the transport and http layer.</p></td>
<td align="left" valign="top"><p><code class="literal">/etc/elasticsearch/certs</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>data</strong></span></p></td>
<td align="left" valign="top"><p>The location of the data files of each index / shard allocated
    on the node.</p></td>
<td align="left" valign="top"><p><code class="literal">/var/lib/elasticsearch</code></p></td>
<td align="left" valign="top"><p><code class="literal">path.data</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>jdk</strong></span></p></td>
<td align="left" valign="top"><p>The bundled Java Development Kit used to run Elasticsearch. Can
    be overridden by setting the <code class="literal">ES_JAVA_HOME</code> environment variable
    in <code class="literal">/etc/default/elasticsearch</code>.</p></td>
<td align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch/jdk</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>logs</strong></span></p></td>
<td align="left" valign="top"><p>Log files location.</p></td>
<td align="left" valign="top"><p><code class="literal">/var/log/elasticsearch</code></p></td>
<td align="left" valign="top"><p><code class="literal">path.logs</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>plugins</strong></span></p></td>
<td align="left" valign="top"><p>Plugin files location. Each plugin will be contained in a subdirectory.</p></td>
<td align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch/plugins</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>repo</strong></span></p></td>
<td align="left" valign="top"><p>Shared file system repository locations. Can hold multiple locations. A file system repository can be placed in to any subdirectory of any directory specified here.</p></td>
<td align="left" valign="top"><p>Not configured</p></td>
<td align="left" valign="top"><p><code class="literal">path.repo</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section exclude">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_security_certificates_and_keys_2"></a>Security certificates and keys<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/security-files-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>When you install Elasticsearch, the following certificates and keys are
generated in the Elasticsearch configuration directory, which are used to connect a Kibana
instance to your secured Elasticsearch cluster and to encrypt internode communication.
The files are listed here for reference.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http_ca.crt</code>
</span>
</dt>
<dd>
The CA certificate that is used to sign the certificates for the HTTP layer of
this Elasticsearch cluster.
</dd>
<dt>
<span class="term">
<code class="literal">http.p12</code>
</span>
</dt>
<dd>
Keystore that contains the key and certificate for the HTTP layer for this node.
</dd>
<dt>
<span class="term">
<code class="literal">transport.p12</code>
</span>
</dt>
<dd>
Keystore that contains the key and certificate for the transport layer for all
the nodes in your cluster.
</dd>
</dl>
</div>
<p><code class="literal">http.p12</code> and <code class="literal">transport.p12</code> are password-protected PKCS#12 keystores. Elasticsearch
stores the passwords for these keystores as <a class="xref" href="settings.html#secure-settings" title="Secure settings">secure
settings</a>. To retrieve the passwords so that you can inspect or change the
keystore contents, use the
<a class="xref" href="elasticsearch-keystore.html" title="elasticsearch-keystore"><code class="literal">bin/elasticsearch-keystore</code></a> tool.</p>
<p>Use the following command to retrieve the password for <code class="literal">http.p12</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore show xpack.security.http.ssl.keystore.secure_password</pre>
</div>
<p>Use the following command to retrieve the password for <code class="literal">transport.p12</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore show xpack.security.transport.ssl.keystore.secure_password</pre>
</div>
</div>

</div>

<div class="section exclude">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_next_steps_3"></a>Next steps<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/next-steps.asciidoc">edit</a></h3>
</div></div></div>
<p>You now have a test Elasticsearch environment set up. Before you start
serious development or go into production with Elasticsearch, you must do some additional
setup:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Learn how to <a class="xref" href="settings.html" title="Configuring Elasticsearch">configure Elasticsearch</a>.
</li>
<li class="listitem">
Configure <a class="xref" href="settings.html#important-settings" title="Important Elasticsearch configuration">important Elasticsearch settings</a>.
</li>
<li class="listitem">
Configure <a class="xref" href="system-config.html" title="Important system configuration">important system settings</a>.
</li>
</ul>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="rpm"></a>Install Elasticsearch with RPM<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/rpm.asciidoc">edit</a></h2>
</div></div></div>
<p>The RPM for Elasticsearch can be <a class="xref" href="install-elasticsearch.html#install-rpm" title="Download and install the RPM manually">downloaded from our website</a>
or from our  <a class="xref" href="install-elasticsearch.html#rpm-repo" title="Installing from the RPM repository">RPM repository</a>. It can be used to install
Elasticsearch on any RPM-based system such as OpenSuSE, SLES, Centos, Red Hat,
and Oracle Enterprise.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>RPM install is not supported on distributions with old versions of RPM,
such as SLES 11 and CentOS 5. Please see <a class="xref" href="install-elasticsearch.html#targz" title="Install Elasticsearch from archive on Linux or MacOS">Install Elasticsearch from archive on Linux or MacOS</a> instead.</p>
</div>
</div>
<p>This package contains both free and subscription features.
<a class="xref" href="settings.html#license-settings" title="License settings">Start a 30-day trial</a> to try out all of the features.</p>
<p>The latest stable version of Elasticsearch can be found on the
<a href="/downloads/elasticsearch" class="ulink" target="_top">Download Elasticsearch</a> page. Other versions can
be found on the <a href="/downloads/past-releases" class="ulink" target="_top">Past Releases page</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch includes a bundled version of <a href="https://openjdk.java.net" class="ulink" target="_top">OpenJDK</a>
from the JDK maintainers (GPLv2+CE). To use your own version of Java,
see the <a class="xref" href="install-elasticsearch.html#jvm-version" title="Java (JVM) Version">JVM version requirements</a></p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rpm-key"></a>Import the Elasticsearch GPG Key<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/rpm.asciidoc">edit</a></h3>
</div></div></div>
<p>We sign all of our packages with the Elasticsearch Signing Key (PGP key
<a href="https://pgp.mit.edu/pks/lookup?op=vindex&amp;search=0xD27D666CD88E42B4" class="ulink" target="_top">D88E42B4</a>,
available from <a href="https://pgp.mit.edu" class="ulink" target="_top">https://pgp.mit.edu</a>) with fingerprint:</p>
<pre class="literallayout">4609 5ACC 8548 582C 1A26 99A9 D27D 666C D88E 42B4</pre>

<p>Download and install the public signing key:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rpm-repo"></a>Installing from the RPM repository<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/rpm.asciidoc">edit</a></h3>
</div></div></div>
<p>Create a file called <code class="literal">elasticsearch.repo</code> in the <code class="literal">/etc/yum.repos.d/</code> directory
for RedHat based distributions, or in the <code class="literal">/etc/zypp/repos.d/</code> directory for
OpenSuSE based distributions, containing:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">[elasticsearch]
name=Elasticsearch repository for 8.x packages
baseurl=https://artifacts.elastic.co/packages/8.x/yum
gpgcheck=1
gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch
enabled=0
autorefresh=1
type=rpm-md</pre>
</div>
<p>And your repository is ready for use. You can now install Elasticsearch with one of the following commands:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo yum install --enablerepo=elasticsearch elasticsearch <a id="CO7-1"></a><i class="conum" data-value="1"></i>
sudo dnf install --enablerepo=elasticsearch elasticsearch <a id="CO7-2"></a><i class="conum" data-value="2"></i>
sudo zypper modifyrepo --enable elasticsearch &amp;&amp; \
  sudo zypper install elasticsearch; \
  sudo zypper modifyrepo --disable elasticsearch <a id="CO7-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO7-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use <code class="literal">yum</code> on CentOS and older Red Hat based distributions.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO7-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use <code class="literal">dnf</code> on Fedora and other newer Red Hat distributions.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO7-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use <code class="literal">zypper</code> on OpenSUSE based distributions</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The configured repository is disabled by default. This eliminates the possibility of accidentally
upgrading <code class="literal">elasticsearch</code> when upgrading the rest of the system. Each install or upgrade command
must explicitly enable the repository as indicated in the sample commands above.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="install-rpm"></a>Download and install the RPM manually<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/rpm.asciidoc">edit</a></h3>
</div></div></div>
<p>The RPM for Elasticsearch v8.9.2 can be downloaded from the website and installed as follows:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.9.2-x86_64.rpm
wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.9.2-x86_64.rpm.sha512
shasum -a 512 -c elasticsearch-8.9.2-x86_64.rpm.sha512 <a id="CO8-1"></a><i class="conum" data-value="1"></i>
sudo rpm --install elasticsearch-8.9.2-x86_64.rpm</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO8-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Compares the SHA of the downloaded RPM and the published checksum, which should output
<code class="literal">elasticsearch-{version}-x86_64.rpm: OK</code>.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>On systemd-based distributions, the installation scripts will attempt to set kernel parameters (e.g.,
<code class="literal">vm.max_map_count</code>); you can skip this by masking the systemd-sysctl.service unit.</p>
</div>
</div>
</div>

<div class="section exclude">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rpm-security-configuration"></a>Start Elasticsearch with security enabled<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/package-security.asciidoc">edit</a></h3>
</div></div></div>
<p>When installing Elasticsearch, security features are enabled and configured by default.
When you install Elasticsearch, the following security configuration
occurs automatically:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Authentication and authorization are enabled, and a password is generated for
the <code class="literal">elastic</code> built-in superuser.
</li>
<li class="listitem">
Certificates and keys for TLS are generated for the transport and HTTP layer,
and TLS is enabled and configured with these keys and certificates.
</li>
</ul>
</div>
<p>The password and certificate and keys are output to your terminal.</p>
<p>We recommend storing the <code class="literal">elastic</code> password as an environment variable in your shell. Example:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">export ELASTIC_PASSWORD="your_password"</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_reconfigure_a_node_to_join_an_existing_cluster_2"></a>Reconfigure a node to join an existing cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/package-security.asciidoc">edit</a></h4>
</div></div></div>
<p>When you install Elasticsearch, the installation process configures a
single-node cluster by default. If you want a node to join an existing cluster
instead, generate an enrollment token on an existing node <em>before</em> you start
the new node for the first time.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>On any node in your existing cluster, generate a node enrollment token:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">/usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s node</pre>
</div>
</li>
<li class="listitem">
Copy the enrollment token, which is output to your terminal.
</li>
<li class="listitem">
<p>On your new Elasticsearch node, pass the enrollment token as a parameter to the
<code class="literal">elasticsearch-reconfigure-node</code> tool:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">/usr/share/elasticsearch/bin/elasticsearch-reconfigure-node --enrollment-token &lt;enrollment-token&gt;</pre>
</div>
<p>Elasticsearch is now configured to join the existing cluster.</p>
</li>
<li class="listitem">
<a class="xref" href="install-elasticsearch.html#rpm-running-systemd" title="Running Elasticsearch with systemd">Start your new node using <code class="literal">systemd</code></a>.
</li>
</ol>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rpm-enable-indices"></a>Enable automatic creation of system indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/rpm.asciidoc">edit</a></h3>
</div></div></div>
<p>Some commercial features automatically create indices within Elasticsearch.
By default, Elasticsearch is configured to allow automatic index creation, and no
additional steps are required. However, if you have disabled automatic index
creation in Elasticsearch, you must configure
<a class="xref" href="docs.html#index-creation" title="Automatically create data streams and indices"><code class="literal">action.auto_create_index</code></a> in <code class="literal">elasticsearch.yml</code> to allow
the commercial features to create the following indices:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">action.auto_create_index: .monitoring*,.watches,.triggered_watches,.watcher-history*,.ml*</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are using <a href="https://www.elastic.co/products/logstash" class="ulink" target="_top">Logstash</a>
or <a href="https://www.elastic.co/products/beats" class="ulink" target="_top">Beats</a> then you will most likely
require additional index names in your <code class="literal">action.auto_create_index</code> setting, and
the exact value will depend on your local configuration. If you are unsure of
the correct value for your environment, you may consider setting the value to
 <code class="literal">*</code> which will allow automatic creation of all indices.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rpm-running-systemd"></a>Running Elasticsearch with <code class="literal">systemd</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/systemd.asciidoc">edit</a></h3>
</div></div></div>
<p>To configure Elasticsearch to start automatically when the system boots up,
run the following commands:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable elasticsearch.service</pre>
</div>
<p>Elasticsearch can be started and stopped as follows:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo systemctl start elasticsearch.service
sudo systemctl stop elasticsearch.service</pre>
</div>
<p>These commands provide no feedback as to whether Elasticsearch was started
successfully or not. Instead, this information will be written in the log
files located in <code class="literal">/var/log/elasticsearch/</code>.</p>
<p>If you have password-protected your Elasticsearch keystore, you will need to provide
<code class="literal">systemd</code> with the keystore password using a local file and systemd environment
variables. This local file should be protected while it exists and may be
safely deleted once Elasticsearch is up and running.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">echo "keystore_password" &gt; /path/to/my_pwd_file.tmp
chmod 600 /path/to/my_pwd_file.tmp
sudo systemctl set-environment ES_KEYSTORE_PASSPHRASE_FILE=/path/to/my_pwd_file.tmp
sudo systemctl start elasticsearch.service</pre>
</div>
<p>By default the Elasticsearch service doesn&#8217;t log information in the <code class="literal">systemd</code>
journal. To enable <code class="literal">journalctl</code> logging, the <code class="literal">--quiet</code> option must be removed
 from the <code class="literal">ExecStart</code> command line in the <code class="literal">elasticsearch.service</code> file.</p>
<p>When <code class="literal">systemd</code> logging is enabled, the logging information are available using
the <code class="literal">journalctl</code> commands:</p>
<p>To tail the journal:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo journalctl -f</pre>
</div>
<p>To list journal entries for the elasticsearch service:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo journalctl --unit elasticsearch</pre>
</div>
<p>To list journal entries for the elasticsearch service starting from a given time:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo journalctl --unit elasticsearch --since  "2016-10-30 18:17:16"</pre>
</div>
<p>Check <code class="literal">man journalctl</code> or <a href="https://www.freedesktop.org/software/systemd/man/journalctl.html" class="ulink" target="_top">https://www.freedesktop.org/software/systemd/man/journalctl.html</a> for
more command line options.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Startup timeouts with older <code class="literal">systemd</code> versions</h3>
<p>By default Elasticsearch sets the <code class="literal">TimeoutStartSec</code> parameter to <code class="literal">systemd</code> to <code class="literal">900s</code>. If
you are running at least version 238 of <code class="literal">systemd</code> then Elasticsearch can automatically
extend the startup timeout, and will do so repeatedly until startup is complete
even if it takes longer than 900s.</p>
<p>Versions of <code class="literal">systemd</code> prior to 238 do not support the timeout extension
mechanism and will terminate the Elasticsearch process if it has not fully started up
within the configured timeout. If this happens, Elasticsearch will report in its logs
that it was shut down normally a short time after it started:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">[2022-01-31T01:22:31,077][INFO ][o.e.n.Node               ] [instance-0000000123] starting ...
...
[2022-01-31T01:37:15,077][INFO ][o.e.n.Node               ] [instance-0000000123] stopping ...</pre>
</div>
<p>However the <code class="literal">systemd</code> logs will report that the startup timed out:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">Jan 31 01:22:30 debian systemd[1]: Starting Elasticsearch...
Jan 31 01:37:15 debian systemd[1]: elasticsearch.service: Start operation timed out. Terminating.
Jan 31 01:37:15 debian systemd[1]: elasticsearch.service: Main process exited, code=killed, status=15/TERM
Jan 31 01:37:15 debian systemd[1]: elasticsearch.service: Failed with result 'timeout'.
Jan 31 01:37:15 debian systemd[1]: Failed to start Elasticsearch.</pre>
</div>
<p>To avoid this, upgrade your <code class="literal">systemd</code> to at least version 238. You can also
temporarily work around the problem by extending the <code class="literal">TimeoutStartSec</code>
parameter.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rpm-check-running"></a>Check that Elasticsearch is running<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/check-running.asciidoc">edit</a></h3>
</div></div></div>
<p>You can test that your Elasticsearch node is running by sending an HTTPS request to port
<code class="literal">9200</code> on <code class="literal">localhost</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl --cacert /etc/elasticsearch/certs/http_ca.crt -u elastic:$ELASTIC_PASSWORD https://localhost:9200 <a id="CO9-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Ensure that you use <code class="literal">https</code> in your call, or the request will fail.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--cacert</code>
</span>
</dt>
<dd>
Path to the generated <code class="literal">http_ca.crt</code> certificate for the HTTP layer.
</dd>
</dl>
</div>
</td>
</tr>
</table>
</div>
<p>The call returns a response like this:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "name" : "Cp8oag6",
  "cluster_name" : "elasticsearch",
  "cluster_uuid" : "AT69_T_DTp-1qgIJlatQqA",
  "version" : {
    "number" : "8.9.2",
    "build_type" : "tar",
    "build_hash" : "f27399d",
    "build_flavor" : "default",
    "build_date" : "2016-03-30T09:51:41.449Z",
    "build_snapshot" : false,
    "lucene_version" : "9.7.0",
    "minimum_wire_compatibility_version" : "1.2.3",
    "minimum_index_compatibility_version" : "1.2.3"
  },
  "tagline" : "You Know, for Search"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rpm-configuring"></a>Configuring Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/rpm.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">/etc/elasticsearch</code> directory contains the default runtime configuration
for Elasticsearch. The ownership of this directory and all contained files are set to
<code class="literal">root:elasticsearch</code> on package installations.</p>
<p>The <code class="literal">setgid</code> flag applies group permissions on the <code class="literal">/etc/elasticsearch</code>
directory to ensure that Elasticsearch can read any contained files and subdirectories.
All files and subdirectories inherit the <code class="literal">root:elasticsearch</code> ownership.
Running commands from this directory or any subdirectories, such as the
<a class="xref" href="settings.html#secure-settings" title="Secure settings">elasticsearch-keystore tool</a>, requires <code class="literal">root:elasticsearch</code>
permissions.</p>
<p>Elasticsearch loads its configuration from the
<code class="literal">/etc/elasticsearch/elasticsearch.yml</code> file by default. The format of this
config file is explained in <a class="xref" href="settings.html" title="Configuring Elasticsearch"><em>Configuring Elasticsearch</em></a>.</p>
<p>The RPM also has a system configuration file (<code class="literal">/etc/sysconfig/elasticsearch</code>),
which allows you to set the following parameters:</p>
<div class="informaltable">
<table border="0" cellpadding="4px">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody valign="top">
<tr>
<td valign="top">
<p>
<code class="literal">ES_JAVA_HOME</code>
</p>
</td>
<td valign="top">
<p>
Set a custom Java path to be used.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">ES_PATH_CONF</code>
</p>
</td>
<td valign="top">
<p>
Configuration file directory (which needs to include <code class="literal">elasticsearch.yml</code>,
<code class="literal">jvm.options</code>, and <code class="literal">log4j2.properties</code> files); defaults to
<code class="literal">/etc/elasticsearch</code>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">ES_JAVA_OPTS</code>
</p>
</td>
<td valign="top">
<p>
Any additional JVM system properties you may want to apply.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">RESTART_ON_UPGRADE</code>
</p>
</td>
<td valign="top">
<p>
Configure restart on package upgrade, defaults to <code class="literal">false</code>. This means you
will have to restart your Elasticsearch instance after installing a
package manually. The reason for this is to ensure, that upgrades in a
cluster do not result in a continuous shard reallocation resulting in high
network traffic and reducing the response times of your cluster.
</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Distributions that use <code class="literal">systemd</code> require that system resource limits be
configured via <code class="literal">systemd</code> rather than via the <code class="literal">/etc/sysconfig/elasticsearch</code>
file. See <a class="xref" href="system-config.html#systemd" title="Systemd configuration">Systemd configuration</a> for more information.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_connect_clients_to_elasticsearch_4"></a>Connect clients to Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h3>
</div></div></div>
<p>When you start Elasticsearch for the first time, TLS is configured automatically for the
HTTP layer. A CA certificate is generated and stored on disk at:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">/etc/elasticsearch/certs/http_ca.crt</pre>
</div>
<p>The hex-encoded SHA-256 fingerprint of this
certificate is also output to the terminal. Any clients that connect to Elasticsearch,
such as the
<a href="https://www.elastic.co/guide/en/elasticsearch/client/index.html" class="ulink" target="_top">Elasticsearch Clients</a>,
Beats, standalone Elastic Agents, and Logstash must validate that they trust the
certificate that Elasticsearch uses for HTTPS. Fleet Server and Fleet-managed
Elastic Agents are automatically configured to trust the CA certificate.
Other clients can establish trust by using either the fingerprint of the CA
certificate or the CA certificate itself.</p>
<p>If the auto-configuration process already completed, you can still obtain the
fingerprint of the security certificate. You can also copy the CA certificate
to your machine and configure your client to use it.</p>
<h5><a id="_use_the_ca_fingerprint_4"></a>Use the CA fingerprint<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h5>
<p>Copy the fingerprint value that&#8217;s output to your terminal when Elasticsearch starts, and
configure your client to use this fingerprint to establish trust when it
connects to Elasticsearch.</p>
<p>If the auto-configuration process already completed, you can still obtain the
fingerprint of the security certificate by running the following command. The
path is to the auto-generated CA certificate for the HTTP layer.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">openssl x509 -fingerprint -sha256 -in config/certs/http_ca.crt</pre>
</div>
<p>The command returns the security certificate, including the fingerprint.
The <code class="literal">issuer</code> should be <code class="literal">Elasticsearch security auto-configuration HTTP CA</code>.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">issuer= /CN=Elasticsearch security auto-configuration HTTP CA
SHA256 Fingerprint=&lt;fingerprint&gt;</pre>
</div>
<h5><a id="_use_the_ca_certificate_4"></a>Use the CA certificate<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/connect-clients.asciidoc">edit</a></h5>
<p>If your library doesn&#8217;t support a method of validating the fingerprint, the
auto-generated CA certificate is created in the following directory on each Elasticsearch
node:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">/etc/elasticsearch/certs/http_ca.crt</pre>
</div>
<p>Copy the <code class="literal">http_ca.crt</code> file to your machine and configure your client to use this
certificate to establish trust when it connects to Elasticsearch.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rpm-layout"></a>Directory layout of RPM<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/rpm.asciidoc">edit</a></h3>
</div></div></div>
<p>The RPM places config files, logs, and the data directory in the appropriate
locations for an RPM-based system:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Default Location</th>
<th align="left" valign="top">Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>home</strong></span></p></td>
<td align="left" valign="top"><p>Elasticsearch home directory or <code class="literal">$ES_HOME</code></p></td>
<td align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>bin</strong></span></p></td>
<td align="left" valign="top"><p>Binary scripts including <code class="literal">elasticsearch</code> to start a node
    and <code class="literal">elasticsearch-plugin</code> to install plugins</p></td>
<td align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch/bin</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>conf</strong></span></p></td>
<td align="left" valign="top"><p>Configuration files including <code class="literal">elasticsearch.yml</code></p></td>
<td align="left" valign="top"><p><code class="literal">/etc/elasticsearch</code></p></td>
<td align="left" valign="top"><p><code class="literal"><a class="xref" href="settings.html#config-files-location" title="Config files location">ES_PATH_CONF</a></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>conf</strong></span></p></td>
<td align="left" valign="top"><p>Environment variables including heap size, file descriptors.</p></td>
<td align="left" valign="top"><p><code class="literal">/etc/sysconfig/elasticsearch</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>conf</strong></span></p></td>
<td align="left" valign="top"><p>Generated TLS keys and certificates for the transport and http layer.</p></td>
<td align="left" valign="top"><p><code class="literal">/etc/elasticsearch/certs</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>data</strong></span></p></td>
<td align="left" valign="top"><p>The location of the data files of each index / shard allocated
    on the node.</p></td>
<td align="left" valign="top"><p><code class="literal">/var/lib/elasticsearch</code></p></td>
<td align="left" valign="top"><p><code class="literal">path.data</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>jdk</strong></span></p></td>
<td align="left" valign="top"><p>The bundled Java Development Kit used to run Elasticsearch. Can
    be overridden by setting the <code class="literal">ES_JAVA_HOME</code> environment variable
    in <code class="literal">/etc/sysconfig/elasticsearch</code>.</p></td>
<td align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch/jdk</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>logs</strong></span></p></td>
<td align="left" valign="top"><p>Log files location.</p></td>
<td align="left" valign="top"><p><code class="literal">/var/log/elasticsearch</code></p></td>
<td align="left" valign="top"><p><code class="literal">path.logs</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>plugins</strong></span></p></td>
<td align="left" valign="top"><p>Plugin files location. Each plugin will be contained in a subdirectory.</p></td>
<td align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch/plugins</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>repo</strong></span></p></td>
<td align="left" valign="top"><p>Shared file system repository locations. Can hold multiple locations. A file system repository can be placed in to any subdirectory of any directory specified here.</p></td>
<td align="left" valign="top"><p>Not configured</p></td>
<td align="left" valign="top"><p><code class="literal">path.repo</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section exclude">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_security_certificates_and_keys_3"></a>Security certificates and keys<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/security-files-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>When you install Elasticsearch, the following certificates and keys are
generated in the Elasticsearch configuration directory, which are used to connect a Kibana
instance to your secured Elasticsearch cluster and to encrypt internode communication.
The files are listed here for reference.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http_ca.crt</code>
</span>
</dt>
<dd>
The CA certificate that is used to sign the certificates for the HTTP layer of
this Elasticsearch cluster.
</dd>
<dt>
<span class="term">
<code class="literal">http.p12</code>
</span>
</dt>
<dd>
Keystore that contains the key and certificate for the HTTP layer for this node.
</dd>
<dt>
<span class="term">
<code class="literal">transport.p12</code>
</span>
</dt>
<dd>
Keystore that contains the key and certificate for the transport layer for all
the nodes in your cluster.
</dd>
</dl>
</div>
<p><code class="literal">http.p12</code> and <code class="literal">transport.p12</code> are password-protected PKCS#12 keystores. Elasticsearch
stores the passwords for these keystores as <a class="xref" href="settings.html#secure-settings" title="Secure settings">secure
settings</a>. To retrieve the passwords so that you can inspect or change the
keystore contents, use the
<a class="xref" href="elasticsearch-keystore.html" title="elasticsearch-keystore"><code class="literal">bin/elasticsearch-keystore</code></a> tool.</p>
<p>Use the following command to retrieve the password for <code class="literal">http.p12</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore show xpack.security.http.ssl.keystore.secure_password</pre>
</div>
<p>Use the following command to retrieve the password for <code class="literal">transport.p12</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore show xpack.security.transport.ssl.keystore.secure_password</pre>
</div>
</div>

</div>

<div class="section exclude">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_next_steps_4"></a>Next steps<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/next-steps.asciidoc">edit</a></h3>
</div></div></div>
<p>You now have a test Elasticsearch environment set up. Before you start
serious development or go into production with Elasticsearch, you must do some additional
setup:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Learn how to <a class="xref" href="settings.html" title="Configuring Elasticsearch">configure Elasticsearch</a>.
</li>
<li class="listitem">
Configure <a class="xref" href="settings.html#important-settings" title="Important Elasticsearch configuration">important Elasticsearch settings</a>.
</li>
<li class="listitem">
Configure <a class="xref" href="system-config.html" title="Important system configuration">important system settings</a>.
</li>
</ul>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="docker"></a>Install Elasticsearch with Docker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h2>
</div></div></div>
<p>Docker images for Elasticsearch are available from the Elastic Docker registry. A list of
all published Docker images and tags is available at
<a href="https://www.docker.elastic.co" class="ulink" target="_top">www.docker.elastic.co</a>. The source code is in
<a href="https://github.com/elastic/elasticsearch/blob/8.9/distribution/docker" class="ulink" target="_top">GitHub</a>.</p>
<p>This package contains both free and subscription features.
<a class="xref" href="settings.html#license-settings" title="License settings">Start a 30-day trial</a> to try out all of the features.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="docker-cli-run-dev-mode"></a>Run Elasticsearch in Docker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h3>
</div></div></div>
<p>Use Docker commands to start a single-node Elasticsearch cluster for development or
testing. You can then run additional Docker commands to add nodes to the test
cluster or run Kibana.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>This setup doesn&#8217;t run multiple Elasticsearch nodes or Kibana by default. To create a
multi-node cluster with Kibana, use Docker Compose instead. See
<a class="xref" href="install-elasticsearch.html#docker-compose-file" title="Start a multi-node cluster with Docker Compose">Start a multi-node cluster with Docker Compose</a>.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_start_a_single_node_cluster"></a>Start a single-node cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Install Docker. Visit <a href="https://docs.docker.com/get-docker/" class="ulink" target="_top">Get Docker</a> to
install Docker for your environment.</p>
<p>If using Docker Desktop, make sure to allocate at least 4GB of memory. You can
adjust memory usage in Docker Desktop by going to <span class="strong strong"><strong>Settings &gt; Resources</strong></span>.</p>
</li>
<li class="listitem">
<p>Create a new docker network.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker network create elastic</pre>
</div>
</li>
<li class="listitem">
<p>Pull the Elasticsearch Docker image.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker pull docker.elastic.co/elasticsearch/elasticsearch:8.9.2</pre>
</div>
</li>
<li class="listitem">
<p>Optional: Install
<a href="https://docs.sigstore.dev/system_config/installation/" class="ulink" target="_top">Cosign</a> for your
environment. Then use Cosign to verify the Elasticsearch image&#8217;s signature.</p>
<a id="docker-verify-signature"></a><div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">wget https://artifacts.elastic.co/cosign.pub
cosign verify --key cosign.pub docker.elastic.co/elasticsearch/elasticsearch:8.9.2</pre>
</div>
<p>The <code class="literal">cosign</code> command prints the check results and the signature payload in JSON format:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">Verification for docker.elastic.co/elasticsearch/elasticsearch:8.9.2 --
The following checks were performed on each of these signatures:
  - The cosign claims were validated
  - Existence of the claims in the transparency log was verified offline
  - The signatures were verified against the specified public key</pre>
</div>
</li>
<li class="listitem">
<p>Start an Elasticsearch container.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker run --name es01 --net elastic -p 9200:9200 -it -m 1GB docker.elastic.co/elasticsearch/elasticsearch:8.9.2</pre>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Use the <code class="literal">-m</code> flag to set a memory limit for the container. This removes the
need to <a class="xref" href="install-elasticsearch.html#docker-set-heap-size" title="Manually set the heap size">manually set the JVM size</a>.</p>
</div>
</div>
<p>The command prints the <code class="literal">elastic</code> user password and an enrollment token for Kibana.</p>
</li>
<li class="listitem">
<p>Copy the generated <code class="literal">elastic</code> password and enrollment token. These credentials
are only shown when you start Elasticsearch for the first time. You can regenerate the
credentials using the following commands.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic
docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana</pre>
</div>
<p>We recommend storing the <code class="literal">elastic</code> password as an environment variable in your shell. Example:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">export ELASTIC_PASSWORD="your_password"</pre>
</div>
</li>
<li class="listitem">
<p>Copy the <code class="literal">http_ca.crt</code> SSL certificate from the container to your local machine.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker cp es01:/usr/share/elasticsearch/config/certs/http_ca.crt .</pre>
</div>
</li>
<li class="listitem">
<p>Make a REST API call to Elasticsearch to ensure the Elasticsearch container is running.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl --cacert http_ca.crt -u elastic:$ELASTIC_PASSWORD https://localhost:9200</pre>
</div>
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_add_more_nodes"></a>Add more nodes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Use an existing node to generate a enrollment token for the new node.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s node</pre>
</div>
<p>The enrollment token is valid for 30 minutes.</p>
</li>
<li class="listitem">
<p>Start a new Elasticsearch container. Include the enrollment token as an environment variable.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker run -e ENROLLMENT_TOKEN="&lt;token&gt;" --name es02 --net elastic -it -m 1GB docker.elastic.co/elasticsearch/elasticsearch:8.9.2</pre>
</div>
</li>
<li class="listitem">
<p>Call the <a class="xref" href="cat.html#cat-nodes" title="cat nodes API">cat nodes API</a> to verify the node was added to the cluster.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl --cacert http_ca.crt -u elastic:$ELASTIC_PASSWORD https://localhost:9200/_cat/nodes</pre>
</div>
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="run-kibana-docker"></a>Run Kibana<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Pull the Kibana Docker image.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker pull docker.elastic.co/kibana/kibana:8.9.2</pre>
</div>
</li>
<li class="listitem">
<p>Optional: Verify the Kibana image&#8217;s signature.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">wget https://artifacts.elastic.co/cosign.pub
cosign verify --key cosign.pub docker.elastic.co/kibana/kibana:8.9.2</pre>
</div>
</li>
<li class="listitem">
<p>Start a Kibana container.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker run --name kib01 --net elastic -p 5601:5601 docker.elastic.co/kibana/kibana:8.9.2</pre>
</div>
</li>
<li class="listitem">
When Kibana starts, it outputs a unique generated link to the terminal. To
access Kibana, open this link in a web browser.
</li>
<li class="listitem">
<p>In your browser, enter the enrollment token that was generated when you started Elasticsearch.</p>
<p>To regenerate the token, run:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana</pre>
</div>
</li>
<li class="listitem">
<p>Log in to Kibana as the <code class="literal">elastic</code> user with the password that was generated
when you started Elasticsearch.</p>
<p>To regenerate the password, run:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic</pre>
</div>
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="remove-containers-docker"></a>Remove containers<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>To remove the containers and their network, run:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh"># Remove the Elastic network
docker network rm elastic

# Remove Elasticsearch containers
docker rm es01
docker rm es02

# Remove the Kibana container
docker rm kib01</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_next_steps_5"></a>Next steps<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>You now have a test Elasticsearch environment set up. Before you start
serious development or go into production with Elasticsearch, review the
<a class="xref" href="install-elasticsearch.html#docker-prod-prerequisites" title="Using the Docker images in production">requirements and recommendations</a> to apply when running Elasticsearch in Docker in production.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="docker-compose-file"></a>Start a multi-node cluster with Docker Compose<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h3>
</div></div></div>
<p>Use Docker Compose to start a three-node Elasticsearch cluster with Kibana. Docker Compose
lets you start multiple containers with a single command.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_configure_and_start_the_cluster"></a>Configure and start the cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Install Docker Compose. Visit the
<a href="https://docs.docker.com/compose/install/" class="ulink" target="_top">Docker Compose docs</a> to install Docker
Compose for your environment.</p>
<p>If you&#8217;re using Docker Desktop, Docker Compose is installed automatically. Make
sure to allocate at least 4GB of memory to Docker Desktop. You can adjust memory
usage in Docker Desktop by going to <span class="strong strong"><strong>Settings &gt; Resources</strong></span>.</p>
</li>
<li class="listitem">
Create or navigate to an empty directory for the project.
</li>
<li class="listitem">
<p>Download and save the following files in the project directory:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://github.com/elastic/elasticsearch/blob/8.9/docs/reference/setup/install/docker/.env" class="ulink" target="_top"><code class="literal">.env</code></a>
</li>
<li class="listitem">
<a href="https://github.com/elastic/elasticsearch/blob/8.9/docs/reference/setup/install/docker/docker-compose.yml" class="ulink" target="_top"><code class="literal">docker-compose.yml</code></a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>In the <code class="literal">.env</code> file, specify a password for the <code class="literal">ELASTIC_PASSWORD</code> and
<code class="literal">KIBANA_PASSWORD</code> variables.</p>
<p>The passwords must be alphanumeric and can&#8217;t contain special characters, such as
<code class="literal">!</code> or <code class="literal">@</code>. The bash script included in the <code class="literal">docker-compose.yml</code> file only
works with alphanumeric characters. Example:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt"># Password for the 'elastic' user (at least 6 characters)
ELASTIC_PASSWORD=changeme

# Password for the 'kibana_system' user (at least 6 characters)
KIBANA_PASSWORD=changeme
...</pre>
</div>
</li>
<li class="listitem">
<p>In the <code class="literal">.env</code> file, set <code class="literal">STACK_VERSION</code> to the current Elastic Stack version.</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">...
# Version of Elastic products
STACK_VERSION=8.9.2
...</pre>
</div>
</li>
<li class="listitem">
<p>By default, the Docker Compose configuration exposes port <code class="literal">9200</code> on all network interfaces.</p>
<p>To avoid exposing port <code class="literal">9200</code> to external hosts, set <code class="literal">ES_PORT</code> to <code class="literal">127.0.0.1:9200</code>
in the <code class="literal">.env</code> file. This ensures Elasticsearch is only accessible from the host
machine.</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">...
# Port to expose Elasticsearch HTTP API to the host
#ES_PORT=9200
ES_PORT=127.0.0.1:9200
...</pre>
</div>
</li>
<li class="listitem">
<p>To start the cluster, run the following command from the project directory.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker-compose up -d</pre>
</div>
</li>
<li class="listitem">
After the cluster has started, open <a href="http://localhost:5601" class="ulink" target="_top">http://localhost:5601</a> in a web browser to
access Kibana.
</li>
<li class="listitem">
Log in to Kibana as the <code class="literal">elastic</code> user using the <code class="literal">ELASTIC_PASSWORD</code> you set
earlier.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_stop_and_remove_the_cluster"></a>Stop and remove the cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>To stop the cluster, run <code class="literal">docker-compose down</code>. The data in the Docker volumes
is preserved and loaded when you restart the cluster with <code class="literal">docker-compose up</code>.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker-compose down</pre>
</div>
<p>To delete the network, containers, and volumes when you stop the cluster,
specify the <code class="literal">-v</code> option:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker-compose down -v</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_next_steps_6"></a>Next steps<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>You now have a test Elasticsearch environment set up. Before you start
serious development or go into production with Elasticsearch, review the
<a class="xref" href="install-elasticsearch.html#docker-prod-prerequisites" title="Using the Docker images in production">requirements and recommendations</a> to apply when running Elasticsearch in Docker in production.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="docker-prod-prerequisites"></a>Using the Docker images in production<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h3>
</div></div></div>
<p>The following requirements and recommendations apply when running Elasticsearch in Docker in production.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_set_vm_max_map_count_to_at_least_262144"></a>Set <code class="literal">vm.max_map_count</code> to at least <code class="literal">262144</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>The <code class="literal">vm.max_map_count</code> kernel setting must be set to at least <code class="literal">262144</code> for production use.</p>
<p>How you set <code class="literal">vm.max_map_count</code> depends on your platform.</p>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_linux"></a>Linux<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h5>
</div></div></div>
<p>To view the current value for the <code class="literal">vm.max_map_count</code> setting, run:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">grep vm.max_map_count /etc/sysctl.conf
vm.max_map_count=262144</pre>
</div>
<p>To apply the setting on a live system, run:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sysctl -w vm.max_map_count=262144</pre>
</div>
<p>To permanently change the value for the <code class="literal">vm.max_map_count</code> setting, update the
value in <code class="literal">/etc/sysctl.conf</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_macos_with_docker_for_mac"></a>macOS with <a href="https://docs.docker.com/docker-for-mac" class="ulink" target="_top">Docker for Mac</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h5>
</div></div></div>
<p>The <code class="literal">vm.max_map_count</code> setting must be set within the xhyve virtual machine:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>From the command line, run:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">screen ~/Library/Containers/com.docker.docker/Data/vms/0/tty</pre>
</div>
</li>
<li class="listitem">
<p>Press enter and use <code class="literal">sysctl</code> to configure <code class="literal">vm.max_map_count</code>:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sysctl -w vm.max_map_count=262144</pre>
</div>
</li>
<li class="listitem">
To exit the <code class="literal">screen</code> session, type <code class="literal">Ctrl a d</code>.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_windows_and_macos_with_docker_desktop"></a>Windows and macOS with <a href="https://www.docker.com/products/docker-desktop" class="ulink" target="_top">Docker Desktop</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h5>
</div></div></div>
<p>The <code class="literal">vm.max_map_count</code> setting must be set via docker-machine:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker-machine ssh
sudo sysctl -w vm.max_map_count=262144</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_windows_with_docker_desktop_wsl_2_backend"></a>Windows with <a href="https://docs.docker.com/docker-for-windows/wsl" class="ulink" target="_top">Docker Desktop WSL 2 backend</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h5>
</div></div></div>
<p>The <code class="literal">vm.max_map_count</code> setting must be set in the "docker-desktop" WSL instance before the
Elasticsearch container will properly start. There are several ways to do this, depending
on your version of Windows and your version of WSL.</p>
<p>If you are on Windows 10 before version 22H2, or if you are on Windows 10 version 22H2 using the
built-in version of WSL, you must either manually set it every time you restart Docker before starting
your Elasticsearch container, or (if you do not wish to do so on every restart) you must globally set
every WSL2 instance to have the <code class="literal">vm.max_map_count</code> changed. This is because these versions of WSL
do not properly process the /etc/sysctl.conf file.</p>
<p>To manually set it every time you reboot, you must run the following commands in a command prompt
or PowerShell window every time you restart Docker:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">wsl -d docker-desktop -u root
sysctl -w vm.max_map_count=262144</pre>
</div>
<p>If you are on these versions of WSL and you do not want to have to run those commands every
time you restart Docker, you can globally change every WSL distribution with this setting
by modifying your %USERPROFILE%\.wslconfig as follows:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">[wsl2]
kernelCommandLine = "sysctl.vm.max_map_count=262144"</pre>
</div>
<p>This will cause all WSL2 VMs to have that setting assigned when they start.</p>
<p>If you are on Windows 11, or Windows 10 version 22H2 and have installed the Microsoft Store
version of WSL, you can modify the /etc/sysctl.conf within the "docker-desktop" WSL
distribution, perhaps with commands like this:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">wsl -d docker-desktop -u root
vi /etc/sysctl.conf</pre>
</div>
<p>and appending a line which reads:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">vm.max_map_count = 262144</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_configuration_files_must_be_readable_by_the_elasticsearch_user"></a>Configuration files must be readable by the <code class="literal">elasticsearch</code> user<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>By default, Elasticsearch runs inside the container as user <code class="literal">elasticsearch</code> using
uid:gid <code class="literal">1000:0</code>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>One exception is <a href="https://docs.openshift.com/container-platform/3.6/creating_images/guidelines.html#openshift-specific-guidelines" class="ulink" target="_top">Openshift</a>,
which runs containers using an arbitrarily assigned user ID.
Openshift presents persistent volumes with the gid set to <code class="literal">0</code>, which works without any adjustments.</p>
</div>
</div>
<p>If you are bind-mounting a local directory or file, it must be readable by the <code class="literal">elasticsearch</code> user.
In addition, this user must have write access to the <a class="xref" href="settings.html#path-settings" title="Path settings">config, data and log dirs</a>
(Elasticsearch needs write access to the <code class="literal">config</code> directory so that it can generate a keystore).
A good strategy is to grant group access to gid <code class="literal">0</code> for the local directory.</p>
<p>For example, to prepare a local directory for storing data through a bind-mount:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">mkdir esdatadir
chmod g+rwx esdatadir
chgrp 0 esdatadir</pre>
</div>
<p>You can also run an Elasticsearch container using both a custom UID and GID. You
must ensure that file permissions will not prevent Elasticsearch from executing. You
can use one of two options:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Bind-mount the <code class="literal">config</code>, <code class="literal">data</code> and <code class="literal">logs</code>
directories. If you intend to install plugins and prefer not to
<a class="xref" href="install-elasticsearch.html#_c_customized_image" title="Using custom Docker images">create a custom Docker image</a>, you must also
bind-mount the <code class="literal">plugins</code> directory.
</li>
<li class="listitem">
Pass the <code class="literal">--group-add 0</code> command line option to <code class="literal">docker run</code>. This
ensures that the user under which Elasticsearch is running is also a member of the
<code class="literal">root</code> (GID 0) group inside the container.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_increase_ulimits_for_nofile_and_nproc"></a>Increase ulimits for nofile and nproc<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>Increased ulimits for <a class="xref" href="system-config.html#setting-system-settings" title="Configuring system settings">nofile</a> and <a class="xref" href="bootstrap-checks.html#max-number-threads-check" title="Maximum number of threads check">nproc</a>
must be available for the Elasticsearch containers.
Verify the <a href="https://github.com/moby/moby/tree/ea4d1243953e6b652082305a9c3cda8656edab26/contrib/init" class="ulink" target="_top">init system</a>
for the Docker daemon sets them to acceptable values.</p>
<p>To check the Docker daemon defaults for ulimits, run:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker run --rm docker.elastic.co/elasticsearch/elasticsearch:8.9.2 /bin/bash -c 'ulimit -Hn &amp;&amp; ulimit -Sn &amp;&amp; ulimit -Hu &amp;&amp; ulimit -Su'</pre>
</div>
<p>If needed, adjust them in the Daemon or override them per container.
For example, when using <code class="literal">docker run</code>, set:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">--ulimit nofile=65535:65535</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_disable_swapping"></a>Disable swapping<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>Swapping needs to be disabled for performance and node stability.
For information about ways to do this, see <a class="xref" href="system-config.html#setup-configuration-memory" title="Disable swapping">Disable swapping</a>.</p>
<p>If you opt for the <code class="literal">bootstrap.memory_lock: true</code> approach,
you also need to define the <code class="literal">memlock: true</code> ulimit in the
<a href="https://docs.docker.com/engine/reference/commandline/dockerd/#default-ulimits" class="ulink" target="_top">Docker Daemon</a>,
or explicitly set for the container as shown in the  <a class="xref" href="install-elasticsearch.html#docker-compose-file" title="Start a multi-node cluster with Docker Compose">sample compose file</a>.
When using <code class="literal">docker run</code>, you can specify:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">-e "bootstrap.memory_lock=true" --ulimit memlock=-1:-1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_randomize_published_ports"></a>Randomize published ports<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>The image <a href="https://docs.docker.com/engine/reference/builder/#/expose" class="ulink" target="_top">exposes</a>
TCP ports 9200 and 9300. For production clusters, randomizing the
published ports with <code class="literal">--publish-all</code> is recommended,
unless you are pinning one container per host.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="docker-set-heap-size"></a>Manually set the heap size<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>By default, Elasticsearch automatically sizes JVM heap based on a nodes&#8217;s
<a class="xref" href="settings.html#node-roles" title="Node roles">roles</a> and the total memory available to the node&#8217;s container. We
recommend this default sizing for most production environments. If needed, you
can override default sizing by manually setting JVM heap size.</p>
<p>To manually set the heap size in production, bind mount a <a class="xref" href="settings.html#set-jvm-options" title="Set JVM options">JVM
options</a> file under <code class="literal">/usr/share/elasticsearch/config/jvm.options.d</code> that
includes your desired <a class="xref" href="settings.html#set-jvm-heap-size" title="Set the JVM heap size">heap size</a> settings.</p>
<p>For testing, you can also manually set the heap size using the <code class="literal">ES_JAVA_OPTS</code>
environment variable. For example, to use 1GB, use the following command.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker run -e ES_JAVA_OPTS="-Xms1g -Xmx1g" -e ENROLLMENT_TOKEN="&lt;token&gt;" --name es01 -p 9200:9200 --net elastic -it docker.elastic.co/elasticsearch/elasticsearch:8.9.2</pre>
</div>
<p>The <code class="literal">ES_JAVA_OPTS</code> variable overrides all other JVM options.
We do not recommend using <code class="literal">ES_JAVA_OPTS</code> in production.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pin_deployments_to_a_specific_image_version"></a>Pin deployments to a specific image version<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>Pin your deployments to a specific version of the Elasticsearch Docker image. For
example <code class="literal">docker.elastic.co/elasticsearch/elasticsearch:8.9.2</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_always_bind_data_volumes"></a>Always bind data volumes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>You should use a volume bound on <code class="literal">/usr/share/elasticsearch/data</code> for the following reasons:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
The data of your Elasticsearch node won&#8217;t be lost if the container is killed
</li>
<li class="listitem">
Elasticsearch is I/O sensitive and the Docker storage driver is not ideal for fast I/O
</li>
<li class="listitem">
It allows the use of advanced
<a href="https://docs.docker.com/engine/extend/plugins/#volume-plugins" class="ulink" target="_top">Docker volume plugins</a>
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_avoid_using_loop_lvm_mode"></a>Avoid using <code class="literal">loop-lvm</code> mode<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>If you are using the devicemapper storage driver, do not use the default <code class="literal">loop-lvm</code> mode.
Configure docker-engine to use
<a href="https://docs.docker.com/engine/userguide/storagedriver/device-mapper-driver/#configure-docker-with-devicemapper" class="ulink" target="_top">direct-lvm</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_centralize_your_logs"></a>Centralize your logs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>Consider centralizing your logs by using a different
<a href="https://docs.docker.com/engine/admin/logging/overview/" class="ulink" target="_top">logging driver</a>. Also
note that the default json-file logging driver is not ideally suited for
production use.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="docker-configuration-methods"></a>Configuring Elasticsearch with Docker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h3>
</div></div></div>
<p>When you run in Docker, the <a class="xref" href="settings.html#config-files-location" title="Config files location">Elasticsearch configuration files</a> are loaded from
<code class="literal">/usr/share/elasticsearch/config/</code>.</p>
<p>To use custom configuration files, you <a class="xref" href="install-elasticsearch.html#docker-config-bind-mount" title="Mounting Elasticsearch configuration files">bind-mount the files</a>
over the configuration files in the image.</p>
<p>You can set individual Elasticsearch configuration parameters using Docker environment variables.
The <a class="xref" href="install-elasticsearch.html#docker-compose-file" title="Start a multi-node cluster with Docker Compose">sample compose file</a> and the
<a class="xref" href="install-elasticsearch.html#docker-cli-run-dev-mode" title="Run Elasticsearch in Docker">single-node example</a> use this method. You can
use the setting name directly as the environment variable name. If
you cannot do this, for example because your orchestration platform forbids
periods in environment variable names, then you can use an alternative
style by converting the setting name as follows.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Change the setting name to uppercase
</li>
<li class="listitem">
Prefix it with <code class="literal">ES_SETTING_</code>
</li>
<li class="listitem">
Escape any underscores (<code class="literal">_</code>) by duplicating them
</li>
<li class="listitem">
Convert all periods (<code class="literal">.</code>) to underscores (<code class="literal">_</code>)
</li>
</ol>
</div>
<p>For example, <code class="literal">-e bootstrap.memory_lock=true</code> becomes
<code class="literal">-e ES_SETTING_BOOTSTRAP_MEMORY__LOCK=true</code>.</p>
<p>You can use the contents of a file to set the value of the
<code class="literal">ELASTIC_PASSWORD</code> or <code class="literal">KEYSTORE_PASSWORD</code> environment variables, by
suffixing the environment variable name with <code class="literal">_FILE</code>. This is useful for
passing secrets such as passwords to Elasticsearch without specifying them directly.</p>
<p>For example, to set the Elasticsearch bootstrap password from a file, you can bind mount the
file and set the <code class="literal">ELASTIC_PASSWORD_FILE</code> environment variable to the mount location.
If you mount the password file to <code class="literal">/run/secrets/bootstrapPassword.txt</code>, specify:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">-e ELASTIC_PASSWORD_FILE=/run/secrets/bootstrapPassword.txt</pre>
</div>
<p>You can override the default command for the image to pass Elasticsearch configuration
parameters as command line options. For example:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker run &lt;various parameters&gt; bin/elasticsearch -Ecluster.name=mynewclustername</pre>
</div>
<p>While bind-mounting your configuration files is usually the preferred method in production,
you can also <a class="xref" href="install-elasticsearch.html#_c_customized_image" title="Using custom Docker images">create a custom Docker image</a>
that contains your configuration.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="docker-config-bind-mount"></a>Mounting Elasticsearch configuration files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>Create custom config files and bind-mount them over the corresponding files in the Docker image.
For example, to bind-mount <code class="literal">custom_elasticsearch.yml</code> with <code class="literal">docker run</code>, specify:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">-v full_path_to/custom_elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml</pre>
</div>
<p>If you bind-mount a custom <code class="literal">elasticsearch.yml</code> file, ensure it includes the
<code class="literal">network.host: 0.0.0.0</code> setting. This setting ensures the node is reachable for
HTTP and transport traffic, provided its ports are exposed. The Docker image&#8217;s
built-in <code class="literal">elasticsearch.yml</code> file includes this setting by default.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The container <span class="strong strong"><strong>runs Elasticsearch as user <code class="literal">elasticsearch</code> using
uid:gid <code class="literal">1000:0</code></strong></span>. Bind mounted host directories and files must be accessible by this user,
and the data and log directories must be writable by this user.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="docker-keystore-bind-mount"></a>Create an encrypted Elasticsearch keystore<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>By default, Elasticsearch will auto-generate a keystore file for <a class="xref" href="settings.html#secure-settings" title="Secure settings">secure
settings</a>. This file is obfuscated but not encrypted.</p>
<p>To encrypt your secure settings with a password and have them persist outside
the container, use a <code class="literal">docker run</code> command to manually create the keystore
instead. The command must:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Bind-mount the <code class="literal">config</code> directory. The command will create an
<code class="literal">elasticsearch.keystore</code> file in this directory. To avoid errors, do
not directly bind-mount the <code class="literal">elasticsearch.keystore</code> file.
</li>
<li class="listitem">
Use the <code class="literal">elasticsearch-keystore</code> tool with the <code class="literal">create -p</code> option. You&#8217;ll be
prompted to enter a password for the keystore.
</li>
</ul>
</div>
<p>For example:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker run -it --rm \
-v full_path_to/config:/usr/share/elasticsearch/config \
docker.elastic.co/elasticsearch/elasticsearch:8.9.2 \
bin/elasticsearch-keystore create -p</pre>
</div>
<p>You can also use a <code class="literal">docker run</code> command to add or update secure settings in the
keystore. You&#8217;ll be prompted to enter the setting values. If the keystore is
encrypted, you&#8217;ll also be prompted to enter the keystore password.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker run -it --rm \
-v full_path_to/config:/usr/share/elasticsearch/config \
docker.elastic.co/elasticsearch/elasticsearch:8.9.2 \
bin/elasticsearch-keystore \
add my.secure.setting \
my.other.secure.setting</pre>
</div>
<p>If you&#8217;ve already created the keystore and don&#8217;t need to update it, you can
bind-mount the <code class="literal">elasticsearch.keystore</code> file directly. You can use the
<code class="literal">KEYSTORE_PASSWORD</code> environment variable to provide the keystore password to the
container at startup. For example, a <code class="literal">docker run</code> command might have the
following options:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">-v full_path_to/config/elasticsearch.keystore:/usr/share/elasticsearch/config/elasticsearch.keystore
-e KEYSTORE_PASSWORD=mypassword</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_c_customized_image"></a>Using custom Docker images<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<p>In some environments, it might make more sense to prepare a custom image that contains
your configuration. A <code class="literal">Dockerfile</code> to achieve this might be as simple as:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">FROM docker.elastic.co/elasticsearch/elasticsearch:8.9.2
COPY --chown=elasticsearch:elasticsearch elasticsearch.yml /usr/share/elasticsearch/config/</pre>
</div>
<p>You could then build and run the image with:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker build --tag=elasticsearch-custom .
docker run -ti -v /usr/share/elasticsearch/data elasticsearch-custom</pre>
</div>
<p>Some plugins require additional security permissions.
You must explicitly accept them either by:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Attaching a <code class="literal">tty</code> when you run the Docker image and allowing the permissions when prompted.
</li>
<li class="listitem">
Inspecting the security permissions and accepting them (if appropriate) by adding the <code class="literal">--batch</code> flag to the plugin install command.
</li>
</ul>
</div>
<p>See <a href="https://www.elastic.co/guide/en/elasticsearch/plugins/8.9/_other_command_line_parameters.html" class="ulink" target="_top">Plugin management</a>
for more information.</p>
<h4><a id="troubleshoot-docker-errors"></a>Troubleshoot Docker errors for Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
<p>Here’s how to resolve common errors when running Elasticsearch with Docker.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_elasticsearch_keystore_is_a_directory"></a>elasticsearch.keystore is a directory<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">Exception in thread "main" org.elasticsearch.bootstrap.BootstrapException: java.io.IOException: Is a directory: SimpleFSIndexInput(path="/usr/share/elasticsearch/config/elasticsearch.keystore") Likely root cause: java.io.IOException: Is a directory</pre>
</div>
<p>A <a class="xref" href="install-elasticsearch.html#docker-keystore-bind-mount" title="Create an encrypted Elasticsearch keystore">keystore-related</a> <code class="literal">docker run</code> command attempted
to directly bind-mount an <code class="literal">elasticsearch.keystore</code> file that doesn&#8217;t exist. If
you use the <code class="literal">-v</code> or <code class="literal">--volume</code> flag to mount a file that doesn&#8217;t exist, Docker
instead creates a directory with the same name.</p>
<p>To resolve this error:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Delete the <code class="literal">elasticsearch.keystore</code> directory in the <code class="literal">config</code> directory.
</li>
<li class="listitem">
Update the <code class="literal">-v</code> or <code class="literal">--volume</code> flag to point to the <code class="literal">config</code> directory path
rather than the keystore file&#8217;s path. For an example, see
<a class="xref" href="install-elasticsearch.html#docker-keystore-bind-mount" title="Create an encrypted Elasticsearch keystore">Create an encrypted Elasticsearch keystore</a>.
</li>
<li class="listitem">
Retry the command.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_elasticsearch_keystore_device_or_resource_busy"></a>elasticsearch.keystore: Device or resource busy<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.9/docs/reference/setup/install/docker.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">Exception in thread "main" java.nio.file.FileSystemException: /usr/share/elasticsearch/config/elasticsearch.keystore.tmp -&gt; /usr/share/elasticsearch/config/elasticsearch.keystore: Device or resource busy</pre>
</div>
<p>A <code class="literal">docker run</code> command attempted to <a class="xref" href="install-elasticsearch.html#docker-keystore-bind-mount" title="Create an encrypted Elasticsearch keystore">update the
keystore</a> while directly bind-mounting the <code class="literal">elasticsearch.keystore</code> file. To
update the keystore, the container requires access to other files in the
<code class="literal">config</code> directory, such as <code class="literal">keystore.tmp</code>.</p>
<p>To resolve this error:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Update the <code class="literal">-v</code> or <code class="literal">--volume</code> flag to point to the <code class="literal">config</code> directory
path rather than the keystore file&#8217;s path. For an example, see
<a class="xref" href="install-elasticsearch.html#docker-keystore-bind-mount" title="Create an encrypted Elasticsearch keystore">Create an encrypted Elasticsearch keystore</a>.
</li>
<li class="listitem">
Retry the command.
</li>
</ol>
</div>
</div>

</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="setup.html">« Set up Elasticsearch</a>
</span>
<span class="next">
<a href="run-elasticsearch-locally.html">Run Elasticsearch locally »</a>
</span>
</div>
</div>
</body>
</html>
