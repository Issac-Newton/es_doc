<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Configuring Elasticsearch | Elasticsearch Guide | Elastic</title>
<meta class="elastic" name="content" content="Configuring Elasticsearch | Elasticsearch Guide">

<link rel="home" href="index.html" title="Elasticsearch Guide"/>
<link rel="up" href="setup.html" title="Set up Elasticsearch"/>
<link rel="prev" href="install-elasticsearch.html" title="Installing Elasticsearch"/>
<link rel="next" href="important-settings.html" title="Important Elasticsearch configuration"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="install-elasticsearch.html">« Installing Elasticsearch</a>
</span>
<span class="next">
<a href="important-settings.html">Important Elasticsearch configuration »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="settings"></a>Configuring Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/configuration.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch ships with good defaults and requires very little configuration.
Most settings can be changed on a running cluster using the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Cluster update settings</a> API.</p>
<p>The configuration files should contain settings which are node-specific (such
as <code class="literal">node.name</code> and paths), or settings which a node requires in order to be
able to join a cluster, such as <code class="literal">cluster.name</code> and <code class="literal">network.host</code>.</p>
<h3><a id="config-files-location"></a>Config files location<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/configuration.asciidoc">edit</a></h3>
<p>Elasticsearch has three configuration files:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">elasticsearch.yml</code> for configuring Elasticsearch
</li>
<li class="listitem">
<code class="literal">jvm.options</code> for configuring Elasticsearch JVM settings
</li>
<li class="listitem">
<code class="literal">log4j2.properties</code> for configuring Elasticsearch logging
</li>
</ul>
</div>
<p>These files are located in the config directory, whose default location depends
on whether or not the installation is from an archive distribution (<code class="literal">tar.gz</code> or
<code class="literal">zip</code>) or a package distribution (Debian or RPM packages).</p>
<p>For the archive distributions, the config directory location defaults to
<code class="literal">$ES_HOME/config</code>. The location of the config directory can be changed via the
<code class="literal">ES_PATH_CONF</code> environment variable as follows:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">ES_PATH_CONF=/path/to/my/config ./bin/elasticsearch</pre>
</div>
<p>Alternatively, you can <code class="literal">export</code> the <code class="literal">ES_PATH_CONF</code> environment variable via the
command line or via your shell profile.</p>
<p>For the package distributions, the config directory location defaults to
<code class="literal">/etc/elasticsearch</code>. The location of the config directory can also be changed
via the <code class="literal">ES_PATH_CONF</code> environment variable, but note that setting this in your
shell is not sufficient. Instead, this variable is sourced from
<code class="literal">/etc/default/elasticsearch</code> (for the Debian package) and
<code class="literal">/etc/sysconfig/elasticsearch</code> (for the RPM package). You will need to edit the
<code class="literal">ES_PATH_CONF=/etc/elasticsearch</code> entry in one of these files accordingly to
change the config directory location.</p>
<h3><a id="_config_file_format"></a>Config file format<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/configuration.asciidoc">edit</a></h3>
<p>The configuration format is <a href="https://yaml.org/" class="ulink" target="_top">YAML</a>. Here is an
example of changing the path of the data and logs directories:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path:
    data: /var/lib/elasticsearch
    logs: /var/log/elasticsearch</pre>
</div>
<p>Settings can also be flattened as follows:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path.data: /var/lib/elasticsearch
path.logs: /var/log/elasticsearch</pre>
</div>
<p>In YAML, you can format non-scalar values as sequences:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">discovery.seed_hosts:
   - 192.168.1.10:9300
   - 192.168.1.11
   - seeds.mydomain.com</pre>
</div>
<p>Though less common, you can also format non-scalar values as arrays:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">discovery.seed_hosts: ["192.168.1.10:9300", "192.168.1.11", "seeds.mydomain.com"]</pre>
</div>
<h3><a id="_environment_variable_substitution"></a>Environment variable substitution<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/configuration.asciidoc">edit</a></h3>
<p>Environment variables referenced with the <code class="literal">${...}</code> notation within the
configuration file will be replaced with the value of the environment
variable. For example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.name:    ${HOSTNAME}
network.host: ${ES_NETWORK_HOST}</pre>
</div>
<p>Values for environment variables must be simple strings. Use a comma-separated string to provide values that Elasticsearch will parse as a list. For example, Elasticsearch will split the following string into a list of values for the <code class="literal">${HOSTNAME}</code> environment variable:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">export HOSTNAME=“host1,host2"</pre>
</div>
<h3><a id="cluster-setting-types"></a>Cluster and node setting types<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/configuration.asciidoc">edit</a></h3>
<p>Cluster and node settings can be categorized based on how they are configured:</p>
<div class="variablelist">
<a id="dynamic-cluster-setting"></a>
<dl class="variablelist">
<dt>
<span class="term">
Dynamic
</span>
</dt>
<dd>
<p>You can configure and update dynamic settings on a running cluster using the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a>. You can also configure
dynamic settings locally on an unstarted or shut down node using
<code class="literal">elasticsearch.yml</code>.</p>
<p>Updates made using the cluster update settings API can be <em>persistent</em>, which
apply across cluster restarts, or <em>transient</em>, which reset after a cluster
restart. You can also reset transient or persistent settings by assigning them
a <code class="literal">null</code> value using the API.</p>
<p>If you configure the same setting using multiple methods, Elasticsearch applies the
settings in following order of precedence:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Transient setting
</li>
<li class="listitem">
Persistent setting
</li>
<li class="listitem">
<code class="literal">elasticsearch.yml</code> setting
</li>
<li class="listitem">
Default setting value
</li>
</ol>
</div>
<p>For example, you can apply a transient setting to override a persistent setting
or <code class="literal">elasticsearch.yml</code> setting. However, a change to an <code class="literal">elasticsearch.yml</code>
setting will not override a defined transient or persistent setting.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>It’s best to set dynamic, cluster-wide settings with the cluster update
settings API and use <code class="literal">elasticsearch.yml</code> only for local configurations. Using
the cluster update settings API ensures the setting is the same on all nodes. If
you accidentally configure different settings in <code class="literal">elasticsearch.yml</code> on
different nodes, it can be difficult to notice discrepancies.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="static-cluster-setting"></a>
<dl class="variablelist">
<dt>
<span class="term">
Static
</span>
</dt>
<dd>
<p>
Static settings can only be configured on an unstarted or shut down node using
<code class="literal">elasticsearch.yml</code>.
</p>
<p>Static settings must be set on every relevant node in the cluster.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="jvm-options"></a>Setting JVM options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/jvm-options.asciidoc">edit</a></h2>
</div></div></div>
<p>You should rarely need to change Java Virtual Machine (JVM) options. If you do,
the most likely change is setting the <a class="xref" href="redirects.html#heap-size" title="Heap size settings">heap size</a>. The remainder of
this document explains in detail how to set JVM options. You can set options
either with <code class="literal">jvm.options</code> files or with the <code class="literal">ES_JAVA_OPTS</code> environment variable.</p>
<p>The preferred method of setting or overriding JVM options is via JVM options
files. When installing from the tar or zip distributions, the root <code class="literal">jvm.options</code>
configuration file is <code class="literal">config/jvm.options</code> and custom JVM options files can be
added to <code class="literal">config/jvm.options.d/</code>. When installing from the Debian or RPM
packages, the root <code class="literal">jvm.options</code> configuration file is
<code class="literal">/etc/elasticsearch/jvm.options</code> and custom JVM options files can be added to
<code class="literal">/etc/elasticsearch/jvm.options.d/</code>. When using the <a class="xref" href="install-elasticsearch.html#docker" title="Install Elasticsearch with Docker">Docker
distribution of Elasticsearch</a> you can bind mount custom JVM options files into
<code class="literal">/usr/share/elasticsearch/config/jvm.options.d/</code>. You should never need to
modify the root <code class="literal">jvm.options</code> file instead preferring to use custom JVM options
files. The processing ordering of custom JVM options is lexicographic.</p>
<p>JVM options files must have the suffix <em>.options</em> and contain a line-delimited
list of JVM arguments following a special syntax:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
lines consisting of whitespace only are ignored
</li>
<li class="listitem">
<p>lines beginning with <code class="literal">#</code> are treated as comments and are ignored</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text"># this is a comment</pre>
</div>
</li>
<li class="listitem">
<p>lines beginning with a <code class="literal">-</code> are treated as a JVM option that applies
independent of the version of the JVM</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">-Xmx2g</pre>
</div>
</li>
<li class="listitem">
<p>lines beginning with a number followed by a <code class="literal">:</code> followed by a <code class="literal">-</code> are treated
as a JVM option that applies only if the version of the JVM matches the number</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">8:-Xmx2g</pre>
</div>
</li>
<li class="listitem">
<p>lines beginning with a number followed by a <code class="literal">-</code> followed by a <code class="literal">:</code> are treated
as a JVM option that applies only if the version of the JVM is greater than or
equal to the number</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">8-:-Xmx2g</pre>
</div>
</li>
<li class="listitem">
<p>lines beginning with a number followed by a <code class="literal">-</code> followed by a number followed
by a <code class="literal">:</code> are treated as a JVM option that applies only if the version of the
JVM falls in the range of the two numbers</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">8-9:-Xmx2g</pre>
</div>
</li>
<li class="listitem">
all other lines are rejected
</li>
</ul>
</div>
<p>An alternative mechanism for setting Java Virtual Machine options is via the
<code class="literal">ES_JAVA_OPTS</code> environment variable. For instance:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">export ES_JAVA_OPTS="$ES_JAVA_OPTS -Djava.io.tmpdir=/path/to/temp/dir"
./bin/elasticsearch</pre>
</div>
<p>When using the RPM or Debian packages, <code class="literal">ES_JAVA_OPTS</code> can be specified in the
<a class="xref" href="system-config.html#sysconfig" title="Sysconfig file">system configuration file</a>.</p>
<p>The JVM has a built-in mechanism for observing the <code class="literal">JAVA_TOOL_OPTIONS</code>
environment variable. We intentionally ignore this environment variable in our
packaging scripts. The primary reason for this is that on some OS (e.g., Ubuntu)
there are agents installed by default via this environment variable that we do
not want interfering with Elasticsearch.</p>
<p>Additionally, some other Java programs support the <code class="literal">JAVA_OPTS</code> environment
variable. This is <span class="strong strong"><strong>not</strong></span> a mechanism built into the JVM but instead a convention
in the ecosystem. However, we do not support this environment variable, instead
supporting setting JVM options via the <code class="literal">jvm.options</code> file or the environment
variable <code class="literal">ES_JAVA_OPTS</code> as above.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="secure-settings"></a>Secure settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/secure-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>Some settings are sensitive, and relying on filesystem permissions to protect
their values is not sufficient. For this use case, Elasticsearch provides a
keystore and the <a class="xref" href="elasticsearch-keystore.html" title="elasticsearch-keystore"><code class="literal">elasticsearch-keystore</code> tool</a> to
manage the settings in the keystore.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Only some settings are designed to be read from the keystore. However,
the keystore has no validation to block unsupported settings. Adding unsupported
settings to the keystore causes Elasticsearch to fail to start. To see whether a setting
is supported in the keystore, look for a "Secure" qualifier the setting
reference.</p>
</div>
</div>
<p>All the modifications to the keystore take effect only after restarting Elasticsearch.</p>
<p>These settings, just like the regular ones in the <code class="literal">elasticsearch.yml</code> config file,
need to be specified on each node in the cluster. Currently, all secure settings
are node-specific settings that must have the same value on every node.</p>
<h3><a id="reloadable-secure-settings"></a>Reloadable secure settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/secure-settings.asciidoc">edit</a></h3>
<p>Just like the settings values in <code class="literal">elasticsearch.yml</code>, changes to the keystore
contents are not automatically applied to the running Elasticsearch node. Re-reading
settings requires a node restart. However, certain secure settings are marked as
<span class="strong strong"><strong>reloadable</strong></span>. Such settings can be <a class="xref" href="cluster.html#cluster-nodes-reload-secure-settings" title="Nodes reload secure settings API">re-read and applied on a running node</a>.</p>
<p>The values of all secure settings, <span class="strong strong"><strong>reloadable</strong></span> or not, must be identical
across all cluster nodes. After making the desired secure settings changes,
using the <code class="literal">bin/elasticsearch-keystore add</code> command, call:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST _nodes/reload_secure_settings
{
  "secure_settings_password": "s3cr3t" <a id="CO6-1"></a><i class="conum" data-value="1"></i>
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/22.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO6-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The password that the Elasticsearch keystore is encrypted with.</p>
</td>
</tr>
</table>
</div>
<p>This API decrypts and re-reads the entire keystore, on every cluster node,
but only the <span class="strong strong"><strong>reloadable</strong></span> secure settings are applied. Changes to other
settings do not go into effect until the next restart. Once the call returns,
the reload has been completed, meaning that all internal data structures
dependent on these settings have been changed. Everything should look as if the
settings had the new value from the start.</p>
<p>When changing multiple <span class="strong strong"><strong>reloadable</strong></span> secure settings, modify all of them on each
cluster node, then issue a <a class="xref" href="cluster.html#cluster-nodes-reload-secure-settings" title="Nodes reload secure settings API"><code class="literal">reload_secure_settings</code></a>
call instead of reloading after each modification.</p>
<p>There are reloadable secure settings for:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/7.10/repository-azure-client-settings.html" class="ulink" target="_top">The Azure repository plugin</a>
</li>
<li class="listitem">
<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/7.10/discovery-ec2-usage.html#_configuring_ec2_discovery" class="ulink" target="_top">The EC2 discovery plugin</a>
</li>
<li class="listitem">
<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/7.10/repository-gcs-client.html" class="ulink" target="_top">The GCS repository plugin</a>
</li>
<li class="listitem">
<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/7.10/repository-s3-client.html" class="ulink" target="_top">The S3 repository plugin</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#monitoring-settings" title="Monitoring settings in Elasticsearch">Monitoring settings</a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#notification-settings" title="Watcher settings in Elasticsearch">Watcher settings</a>
</li>
</ul>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="auditing-settings"></a>Auditing security settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/audit-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p><a id="auditing-settings-description"></a>You can use <a class="xref" href="enable-audit-logging.html" title="Enabling audit logging">audit logging</a> to record security-related
events, such as authentication failures, refused connections, and data-access
events.</p>
<p>If configured, auditing settings must be set on every node in the cluster.
Static settings, such as <code class="literal">xpack.security.audit.enabled</code>, must be configured in
<code class="literal">elasticsearch.yml</code> on each node. For dynamic auditing settings, use the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a> to ensure the setting is
the same on all nodes.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="general-audit-settings"></a>General Auditing Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/audit-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<a id="xpack-security-audit-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">true</code> to enable auditing on the node. The default value is <code class="literal">false</code>. This
puts the auditing events in a dedicated file named <code class="literal">&lt;clustername&gt;_audit.json</code> on
each node.
</p>
<p>If enabled, this setting must be configured in <code class="literal">elasticsearch.yml</code> on all nodes
in the cluster.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="event-audit-settings"></a>Audited Event Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/audit-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>The events and some other information about what gets logged can be controlled
by using the following settings:</p>
<div class="variablelist">
<a id="xpack-sa-lf-events-include"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.include</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies which events to include in the auditing output. The default value is:
<code class="literal">access_denied, access_granted, anonymous_access_denied, authentication_failed,
connection_denied, tampered_request, run_as_denied, run_as_granted</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-exclude"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.exclude</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Excludes the specified events from the output. By default, no events are
excluded.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-emit-request"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.emit_request_body</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies whether to include the request body from REST requests on certain
event types such as <code class="literal">authentication_failed</code>. The default value is <code class="literal">false</code>.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>No filtering is performed when auditing, so sensitive data may be
audited in plain text when including the request body in audit events.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="node-audit-settings"></a>Local Node Info Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/audit-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<a id="xpack-sa-lf-emit-node-name"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.emit_node_name</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies whether to include the <a class="xref" href="important-settings.html#node-name" title="Node name setting">node name</a> as a field in
each audit event. The default value is <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-emit-node-host-address"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.emit_node_host_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies whether to include the node&#8217;s IP address as a field in each audit event.
The default value is <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-emit-node-host-name"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.emit_node_host_name</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies whether to include the node&#8217;s host name as a field in each audit event.
The default value is <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-emit-node-id"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.emit_node_id</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies whether to include the node id as a field in each audit event.
This is available for the new format only. That is to say, this information
does not exist in the <code class="literal">&lt;clustername&gt;_access.log</code> file.
Unlike <a class="xref" href="important-settings.html#node-name" title="Node name setting">node name</a>, whose value might change if the administrator
changes the setting in the config file, the node id will persist across cluster
restarts and the administrator cannot change it.
The default value is <code class="literal">true</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="audit-event-ignore-policies"></a>Audit Logfile Event Ignore Policies<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/audit-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>These settings affect the <a class="xref" href="enable-audit-logging.html#audit-log-ignore-policy" title="Logfile audit events ignore policies">ignore policies</a>
that enable fine-grained control over which audit events are printed to the log file.
All of the settings with the same policy name combine to form a single policy.
If an event matches all of the conditions for a specific policy, it is ignored
and not printed.</p>
<div class="variablelist">
<a id="xpack-sa-lf-events-ignore-users"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.ignore_filters.&lt;policy_name&gt;.users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of user names or wildcards. The specified policy will
not print audit events for users matching these values.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-ignore-realms"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.ignore_filters.&lt;policy_name&gt;.realms</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of authentication realm names or wildcards. The specified policy will
not print audit events for users in these realms.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-ignore-roles"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.ignore_filters.&lt;policy_name&gt;.roles</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of role names or wildcards. The specified policy will
not print audit events for users that have these roles. If the user has several
roles, some of which are <span class="strong strong"><strong>not</strong></span> covered by the policy, the policy will
<span class="strong strong"><strong>not</strong></span> cover this event.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-sa-lf-events-ignore-indices"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.audit.logfile.events.ignore_filters.&lt;policy_name&gt;.indices</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of index names or wildcards. The specified policy will
not print audit events when all the indices in the event match
these values. If the event concerns several indices, some of which are
<span class="strong strong"><strong>not</strong></span> covered by the policy, the policy will <span class="strong strong"><strong>not</strong></span> cover this event.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="circuit-breaker"></a>Circuit breaker settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h2>
</div></div></div>
<p><a id="circuit-breaker-description"></a>Elasticsearch contains multiple circuit breakers used to prevent operations from causing an OutOfMemoryError. Each breaker specifies a limit for how much memory it can use. Additionally, there is a parent-level breaker that specifies the total amount of memory that can be used across all breakers.</p>
<p>Except where noted otherwise, these settings can be dynamically updated on a
live cluster with the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster-update-settings</a> API.</p>
<h4><a id="parent-circuit-breaker"></a>Parent circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>The parent-level breaker can be configured with the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.total.use_real_memory</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Determines whether the parent breaker should take real
memory usage into account (<code class="literal">true</code>) or only consider the amount that is
reserved by child circuit breakers (<code class="literal">false</code>). Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="indices-breaker-total-limit"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.total.limit</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Starting limit for overall parent breaker. Defaults to 70% of JVM heap if
<code class="literal">indices.breaker.total.use_real_memory</code> is <code class="literal">false</code>. If <code class="literal">indices.breaker.total.use_real_memory</code>
is <code class="literal">true</code>, defaults to 95% of the JVM heap.
</dd>
</dl>
</div>
<h4><a id="fielddata-circuit-breaker"></a>Field data circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>The field data circuit breaker estimates the heap memory required to load a
field into the <a class="xref" href="settings.html#modules-fielddata" title="Field data cache settings">field data cache</a>. If loading the field would
cause the cache to exceed a predefined memory limit, the circuit breaker stops the
operation and returns an error.</p>
<div class="variablelist">
<a id="fielddata-circuit-breaker-limit"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.fielddata.limit</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limit for fielddata breaker. Defaults to 40% of JVM heap.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="fielddata-circuit-breaker-overhead"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.fielddata.overhead</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A constant that all field data estimations are multiplied with to determine a
final estimation. Defaults to <code class="literal">1.03</code>.
</dd>
</dl>
</div>
<h4><a id="request-circuit-breaker"></a>Request circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>The request circuit breaker allows Elasticsearch to prevent per-request data
structures (for example, memory used for calculating aggregations during a
request) from exceeding a certain amount of memory.</p>
<div class="variablelist">
<a id="request-breaker-limit"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.request.limit</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limit for request breaker, defaults to 60% of JVM heap.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="request-breaker-overhead"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.request.overhead</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A constant that all request estimations are multiplied with to determine a
final estimation. Defaults to <code class="literal">1</code>.
</dd>
</dl>
</div>
<h4><a id="in-flight-circuit-breaker"></a>In flight requests circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>The in flight requests circuit breaker allows Elasticsearch to limit the memory usage of all
currently active incoming requests on transport or HTTP level from exceeding a certain amount of
memory on a node. The memory usage is based on the content length of the request itself. This
circuit breaker also considers that memory is not only needed for representing the raw request but
also as a structured object which is reflected by default overhead.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">network.breaker.inflight_requests.limit</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limit for in flight requests breaker, defaults to 100% of JVM heap. This means that it is bound
by the limit configured for the parent circuit breaker.
</dd>
<dt>
<span class="term">
<code class="literal">network.breaker.inflight_requests.overhead</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A constant that all in flight requests estimations are multiplied with to determine a
final estimation. Defaults to 2.
</dd>
</dl>
</div>
<h4><a id="accounting-circuit-breaker"></a>Accounting requests circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>The accounting circuit breaker allows Elasticsearch to limit the memory
usage of things held in memory that are not released when a request is
completed. This includes things like the Lucene segment memory.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.breaker.accounting.limit</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limit for accounting breaker, defaults to 100% of JVM heap. This means that it is bound
by the limit configured for the parent circuit breaker.
</dd>
<dt>
<span class="term">
<code class="literal">indices.breaker.accounting.overhead</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A constant that all accounting estimations are multiplied with to determine a
final estimation. Defaults to 1
</dd>
</dl>
</div>
<h4><a id="script-compilation-circuit-breaker"></a>Script compilation circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>Slightly different than the previous memory-based circuit breaker, the script
compilation circuit breaker limits the number of inline script compilations
within a period of time.</p>
<p>See the "prefer-parameters" section of the <a class="xref" href="modules-scripting-using.html" title="How to use scripts">scripting</a>
documentation for more information.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">script.context.$CONTEXT.max_compilations_rate</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limit for the number of unique dynamic scripts within a certain interval
that are allowed to be compiled for a given context. Defaults to <code class="literal">75/5m</code>,
meaning 75 every 5 minutes.
</dd>
</dl>
</div>
<h4><a id="regex-circuit-breaker"></a>Regex circuit breaker<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/circuit_breaker.asciidoc">edit</a></h4>
<p>Poorly written regular expressions can degrade cluster stability and
performance. The regex circuit breaker limits the use and complexity of
<a href="https://www.elastic.co/guide/en/elasticsearch/painless/7.10/painless-regexes.html" class="ulink" target="_top">regex in Painless scripts</a>.</p>
<div class="variablelist">
<a id="script-painless-regex-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">script.painless.regex.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Enables regex in Painless scripts. Accepts:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">limited</code> (Default)
</span>
</dt>
<dd>
Enables regex but limits complexity using the
<a class="xref" href="settings.html#script-painless-regex-limit-factor"><code class="literal">script.painless.regex.limit-factor</code></a>
cluster setting.
</dd>
<dt>
<span class="term">
<code class="literal">true</code>
</span>
</dt>
<dd>
Enables regex with no complexity limits. Disables the regex circuit breaker.
</dd>
<dt>
<span class="term">
<code class="literal">false</code>
</span>
</dt>
<dd>
Disables regex. Any Painless script containing a regular expression returns an
error.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="script-painless-regex-limit-factor"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">script.painless.regex.limit-factor</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Limits the number of characters a regular
expression in a Painless script can consider. Elasticsearch calculates this limit by
multiplying the setting value by the script input&#8217;s character length.
</p>
<p>For example, the input <code class="literal">foobarbaz</code> has a character length of <code class="literal">9</code>. If
<code class="literal">script.painless.regex.limit-factor</code> is <code class="literal">6</code>, a regular expression on <code class="literal">foobarbaz</code>
can consider up to 54 (9 * 6) characters. If the expression exceeds this limit,
it triggers the regex circuit breaker and returns an error.</p>
<p>Elasticsearch only applies this limit if
<a class="xref" href="settings.html#script-painless-regex-enabled"><code class="literal">script.painless.regex.enabled</code></a> is <code class="literal">limited</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-cluster"></a>Cluster-level shard allocation and routing settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster.asciidoc">edit</a></h2>
</div></div></div>
<p><em>Shard allocation</em> is the process of allocating shards to nodes. This can
happen during initial recovery, replica allocation, rebalancing, or
when nodes are added or removed.</p>
<p>One of the main roles of the master is to decide which shards to allocate to
which nodes, and when to move shards between nodes in order to rebalance the
cluster.</p>
<p>There are a number of settings available to control the shard allocation process:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="settings.html#cluster-shard-allocation-settings" title="Cluster-level shard allocation settings">Cluster-level shard allocation settings</a> control allocation and
rebalancing operations.
</li>
<li class="listitem">
<a class="xref" href="settings.html#disk-based-shard-allocation" title="Disk-based shard allocation settings">Disk-based shard allocation settings</a> explains how Elasticsearch takes available
disk space into account, and the related settings.
</li>
<li class="listitem">
<a class="xref" href="settings.html#shard-allocation-awareness" title="Shard allocation awareness">Shard allocation awareness</a> and <a class="xref" href="settings.html#forced-awareness" title="Forced awareness">Forced awareness</a> control how shards
can be distributed across different racks or availability zones.
</li>
<li class="listitem">
<a class="xref" href="settings.html#cluster-shard-allocation-filtering" title="Cluster-level shard allocation filtering">Cluster-level shard allocation filtering</a> allows certain nodes or groups of
nodes excluded from allocation so that they can be decommissioned.
</li>
</ul>
</div>
<p>Besides these, there are a few other <a class="xref" href="settings.html#misc-cluster-settings" title="Miscellaneous cluster settings">miscellaneous cluster-level settings</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="cluster-shard-allocation-settings"></a>Cluster-level shard allocation settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/shards_allocation.asciidoc">edit</a></h3>
</div></div></div>
<p>You can use the following settings to control shard allocation and recovery:</p>
<div class="variablelist">
<a id="cluster-routing-allocation-enable"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.enable</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Enable or disable allocation for specific kinds of shards:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">all</code> -             (default) Allows shard allocation for all kinds of shards.
</li>
<li class="listitem">
<code class="literal">primaries</code> -       Allows shard allocation only for primary shards.
</li>
<li class="listitem">
<code class="literal">new_primaries</code> -   Allows shard allocation only for primary shards for new indices.
</li>
<li class="listitem">
<code class="literal">none</code> -            No shard allocations of any kind are allowed for any indices.
</li>
</ul>
</div>
<p>This setting does not affect the recovery of local primary shards when
restarting a node.  A restarted node that has a copy of an unassigned primary
shard will recover that primary immediately, assuming that its allocation id matches
one of the active allocation ids in the cluster state.</p>
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.node_concurrent_incoming_recoveries</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
How many concurrent incoming shard recoveries are allowed to happen on a node. Incoming recoveries are the recoveries
where the target shard (most likely the replica unless a shard is relocating) is allocated on the node. Defaults to <code class="literal">2</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.node_concurrent_outgoing_recoveries</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
How many concurrent outgoing shard recoveries are allowed to happen on a node. Outgoing recoveries are the recoveries
where the source shard (most likely the primary unless a shard is relocating) is allocated on the node. Defaults to <code class="literal">2</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.node_concurrent_recoveries</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A shortcut to set both <code class="literal">cluster.routing.allocation.node_concurrent_incoming_recoveries</code> and
<code class="literal">cluster.routing.allocation.node_concurrent_outgoing_recoveries</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.node_initial_primaries_recoveries</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
While the recovery of replicas happens over the network, the recovery of
an unassigned primary after node restart uses data from the local disk.
These should be fast so more initial primary recoveries can happen in
parallel on the same node.  Defaults to <code class="literal">4</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.same_shard.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Allows to perform a check to prevent allocation of multiple instances of
the same shard on a single host, based on host name and host address.
Defaults to <code class="literal">false</code>, meaning that no check is performed by default. This
setting only applies if multiple nodes are started on the same machine.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shards-rebalancing-settings"></a>Shard rebalancing settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/shards_allocation.asciidoc">edit</a></h3>
</div></div></div>
<p>A cluster is <em>balanced</em> when it has an equal number of shards on each node
without having a concentration of shards from any index on any node. Elasticsearch runs
an automatic process called <em>rebalancing</em> which moves shards between the nodes
in your cluster to improve its balance. Rebalancing obeys all other shard
allocation rules such as <a class="xref" href="settings.html#cluster-shard-allocation-filtering" title="Cluster-level shard allocation filtering">allocation
filtering</a> and <a class="xref" href="settings.html#forced-awareness" title="Forced awareness">forced awareness</a> which may prevent it from
completely balancing the cluster. In that case, rebalancing strives to acheve
the most balanced cluster possible within the rules you have configured. If you
are using <a class="xref" href="data-tiers.html" title="Data tiers">data tiers</a> then Elasticsearch automatically applies allocation
filtering rules to place each shard within the appropriate tier. These rules
mean that the balancer works independently within each tier.</p>
<p>You can use the following settings to control the rebalancing of shards across
the cluster:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.rebalance.enable</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Enable or disable rebalancing for specific kinds of shards:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">all</code> -         (default) Allows shard balancing for all kinds of shards.
</li>
<li class="listitem">
<code class="literal">primaries</code> -   Allows shard balancing only for primary shards.
</li>
<li class="listitem">
<code class="literal">replicas</code> -    Allows shard balancing only for replica shards.
</li>
<li class="listitem">
<code class="literal">none</code> -        No shard balancing of any kind are allowed for any indices.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.allow_rebalance</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specify when shard rebalancing is allowed:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">always</code> -                    Always allow rebalancing.
</li>
<li class="listitem">
<code class="literal">indices_primaries_active</code> -  Only when all primaries in the cluster are allocated.
</li>
<li class="listitem">
<code class="literal">indices_all_active</code> -        (default) Only when all shards (primaries and replicas) in the cluster are allocated.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.cluster_concurrent_rebalance</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Allow to control how many concurrent shard rebalances are
allowed cluster wide. Defaults to <code class="literal">2</code>. Note that this setting
only controls the number of concurrent shard relocations due
to imbalances in the cluster. This setting does not limit shard
relocations due to <a class="xref" href="settings.html#cluster-shard-allocation-filtering" title="Cluster-level shard allocation filtering">allocation
filtering</a> or <a class="xref" href="settings.html#forced-awareness" title="Forced awareness">forced awareness</a>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shards-rebalancing-heuristics"></a>Shard balancing heuristics settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/shards_allocation.asciidoc">edit</a></h3>
</div></div></div>
<p>Rebalancing works by computing a <em>weight</em> for each node based on its allocation
of shards, and then moving shards between nodes to reduce the weight of the
heavier nodes and increase the weight of the lighter ones. The cluster is
balanced when there is no possible shard movement that can bring the weight of
any node closer to the weight of any other node by more than a configurable
threshold. The following settings allow you to control the details of these
calculations.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.balance.shard</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Defines the weight factor for the total number of shards allocated on a node
(float). Defaults to <code class="literal">0.45f</code>.  Raising this raises the tendency to
equalize the number of shards across all nodes in the cluster.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.balance.index</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Defines the weight factor for the number of shards per index allocated
 on a specific node (float). Defaults to <code class="literal">0.55f</code>.  Raising this raises the
 tendency to equalize the number of shards per index across all nodes in
 the cluster.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.balance.threshold</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Minimal optimization value of operations that should be performed (non
 negative float). Defaults to <code class="literal">1.0f</code>.  Raising this will cause the cluster
 to be less aggressive about optimizing the shard balance.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Regardless of the result of the balancing algorithm, rebalancing might
not be allowed due to forced awareness or allocation filtering.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="disk-based-shard-allocation"></a>Disk-based shard allocation settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/disk_allocator.asciidoc">edit</a></h3>
</div></div></div>
<p><a id="disk-based-shard-allocation-description"></a>The disk-based shard allocator ensures that all nodes have enough disk space
without performing more shard movements than necessary. It allocates shards
based on a pair of thresholds known as the <em>low watermark</em> and the <em>high
watermark</em>. Its primary goal is to ensure that no node exceeds the high
watermark, or at least that any such overage is only temporary. If a node
exceeds the high watermark then Elasticsearch will solve this by moving some of its
shards onto other nodes in the cluster.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>It is normal for nodes to temporarily exceed the high watermark from time
to time.</p>
</div>
</div>
<p>The allocator also tries to keep nodes clear of the high watermark by
forbidding the allocation of more shards to a node that exceeds the low
watermark. Importantly, if all of your nodes have exceeded the low watermark
then no new shards can be allocated and Elasticsearch will not be able to move any
shards between nodes in order to keep the disk usage below the high watermark.
You must ensure that your cluster has enough disk space in total and that there
are always some nodes below the low watermark.</p>
<p>Shard movements triggered by the disk-based shard allocator must also satisfy
all other shard allocation rules such as
<a class="xref" href="settings.html#cluster-shard-allocation-filtering" title="Cluster-level shard allocation filtering">allocation filtering</a> and
<a class="xref" href="settings.html#forced-awareness" title="Forced awareness">forced awareness</a>. If these rules are too strict then they
can also prevent the shard movements needed to keep the nodes' disk usage under
control. If you are using <a class="xref" href="data-tiers.html" title="Data tiers">data tiers</a> then Elasticsearch automatically
configures allocation filtering rules to place shards within the appropriate
tier, which means that the disk-based shard allocator works independently
within each tier.</p>
<p>If a node is filling up its disk faster than Elasticsearch can move shards elsewhere
then there is a risk that the disk will completely fill up. To prevent this, as
a last resort, once the disk usage reaches the <em>flood-stage</em> watermark Elasticsearch
will block writes to indices with a shard on the affected node. It will also
continue to move shards onto the other nodes in the cluster.  When disk usage
on the affected node drops below the high watermark, Elasticsearch automatically removes
the write block.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<a id="disk-based-shard-allocation-does-not-balance"></a>
<p>It is normal for the nodes in your cluster to be using very different amounts
of disk space. The <a class="xref" href="settings.html#shards-rebalancing-settings" title="Shard rebalancing settings">balance</a> of the cluster
depends only on the number of shards on each node and the indices to which
those shards belong. It considers neither the sizes of these shards nor the
available disk space on each node, for the following reasons:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Disk usage changes over time. Balancing the disk usage of individual nodes
would require a lot more shard movements, perhaps even wastefully undoing
earlier movements. Moving a shard consumes resources such as I/O and network
bandwidth and may evict data from the filesystem cache. These resources are
better spent handling your searches and indexing where possible.
</li>
<li class="listitem">
A cluster with equal disk usage on every node typically performs no better
than one that has unequal disk usage, as long as no disk is too full.
</li>
</ul>
</div>
</div>
</div>
<p>You can use the following settings to control disk-based allocation:</p>
<div class="variablelist">
<a id="cluster-routing-disk-threshold"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.threshold_enabled</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Defaults to <code class="literal">true</code>.  Set to <code class="literal">false</code> to disable the disk allocation decider.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-routing-watermark-low"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.low</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Controls the low watermark for disk usage. It defaults to <code class="literal">85%</code>, meaning that Elasticsearch will not allocate shards to nodes that have more than 85% disk used. It can also be set to an absolute byte value (like <code class="literal">500mb</code>) to prevent Elasticsearch from allocating shards if less than the specified amount of space is available. This setting has no effect on the primary shards of newly-created indices but will prevent their replicas from being allocated.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-routing-watermark-high"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.high</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Controls the high watermark. It defaults to <code class="literal">90%</code>, meaning that Elasticsearch will attempt to relocate shards away from a node whose disk usage is above 90%. It can also be set to an absolute byte value (similarly to the low watermark) to relocate shards away from a node if it has less than the specified amount of free space. This setting affects the allocation of all shards, whether previously allocated or not.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.enable_for_single_data_node</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
For a single data node, the default is to disregard disk watermarks when
making an allocation decision. This is deprecated behavior and will be
changed in 8.0. This setting can be set to <code class="literal">true</code> to enable the
disk watermarks for a single data node cluster (will become default in 8.0).
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-routing-flood-stage"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.watermark.flood_stage</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Controls the flood stage watermark, which defaults to 95%. Elasticsearch enforces a read-only index block (<code class="literal">index.blocks.read_only_allow_delete</code>) on every index that has one or more shards allocated on the node, and that has at least one disk exceeding the flood stage. This setting is a last resort to prevent nodes from running out of disk space. The index block is automatically released when the disk utilization falls below the high watermark.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot mix the usage of percentage values and byte values within
these settings. Either all values are set to percentage values, or all are set to byte values. This enforcement is so that Elasticsearch can validate that the settings are internally consistent, ensuring that the low disk threshold is less than the high disk threshold, and the high disk threshold is less than the flood stage threshold.</p>
</div>
</div>
<p>An example of resetting the read-only index block on the <code class="literal">my-index-000001</code> index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_settings
{
  "index.blocks.read_only_allow_delete": null
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/23.console"></div>
</dd>
<dt>
<span class="term">
<code class="literal">cluster.info.update.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
How often Elasticsearch should check on disk usage for each node in the
cluster. Defaults to <code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.disk.include_relocations</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.5.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.5.0. Future versions will always account for relocations.
</span>
</span>
Defaults to <code class="literal">true</code>, which means that Elasticsearch will take into account
shards that are currently being relocated to the target node when computing
a node&#8217;s disk usage. Taking relocating shards' sizes into account may,
however, mean that the disk usage for a node is incorrectly estimated on
the high side, since the relocation could be 90% complete and a recently
retrieved disk usage would include the total size of the relocating shard
as well as the space already used by the running relocation.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Percentage values refer to used disk space, while byte values refer to
free disk space. This can be confusing, since it flips the meaning of high and
low. For example, it makes sense to set the low watermark to 10gb and the high
watermark to 5gb, but not the other way around.</p>
</div>
</div>
<p>An example of updating the low watermark to at least 100 gigabytes free, a high
watermark of at least 50 gigabytes free, and a flood stage watermark of 10
gigabytes free, and updating the information about the cluster every minute:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "transient": {
    "cluster.routing.allocation.disk.watermark.low": "100gb",
    "cluster.routing.allocation.disk.watermark.high": "50gb",
    "cluster.routing.allocation.disk.watermark.flood_stage": "10gb",
    "cluster.info.update.interval": "1m"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/24.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shard-allocation-awareness"></a>Shard allocation awareness<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/allocation_awareness.asciidoc">edit</a></h3>
</div></div></div>
<p>You can use custom node attributes as <em>awareness attributes</em> to enable Elasticsearch
to take your physical hardware configuration into account when allocating shards.
If Elasticsearch knows which nodes are on the same physical server, in the same rack, or
in the same zone, it can distribute the primary shard and its replica shards to
minimise the risk of losing all shard copies in the event of a failure.</p>
<p>When shard allocation awareness is enabled with the
<a class="xref" href="settings.html#dynamic-cluster-setting">dynamic</a>
<code class="literal">cluster.routing.allocation.awareness.attributes</code> setting, shards are only
allocated to nodes that have values set for the specified awareness attributes.
If you use multiple awareness attributes, Elasticsearch considers each attribute
separately when allocating shards.</p>
<p>By default Elasticsearch uses <a class="xref" href="search-shard-routing.html#search-adaptive-replica" title="Adaptive replica selection">adaptive replica selection</a>
to route search or GET requests. However, with the presence of allocation awareness
attributes Elasticsearch will prefer using shards in the same location (with the same
awareness attribute values) to process these requests. This behavior can be
disabled by specifying <code class="literal">export ES_JAVA_OPTS="$ES_JAVA_OPTS -Des.search.ignore_awareness_attributes=true"</code>
system property on every node that is part of the cluster.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The number of attribute values determines how many shard copies are
allocated in each location. If the number of nodes in each location is
unbalanced and there are a lot of replicas, replica shards might be left
unassigned.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="enabling-awareness"></a>Enabling shard allocation awareness<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/allocation_awareness.asciidoc">edit</a></h4>
</div></div></div>
<p>To enable shard allocation awareness:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Specify the location of each node with a custom node attribute. For example,
if you want Elasticsearch to distribute shards across different racks, you might
set an awareness attribute called <code class="literal">rack_id</code> in each node&#8217;s <code class="literal">elasticsearch.yml</code>
config file.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.attr.rack_id: rack_one</pre>
</div>
<p>You can also set custom attributes when you start a node:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">`./bin/elasticsearch -Enode.attr.rack_id=rack_one`</pre>
</div>
</li>
<li class="listitem">
<p>Tell Elasticsearch to take one or more awareness attributes into account when
allocating shards by setting
<code class="literal">cluster.routing.allocation.awareness.attributes</code> in <span class="strong strong"><strong>every</strong></span> master-eligible
node&#8217;s <code class="literal">elasticsearch.yml</code> config file.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cluster.routing.allocation.awareness.attributes: rack_id <a id="CO7-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO7-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify multiple attributes as a comma-separated list.</p>
</td>
</tr>
</table>
</div>
<p>You can also use the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster-update-settings</a> API to set or update
a cluster&#8217;s awareness attributes.</p>
</li>
</ol>
</div>
<p>With this example configuration, if you start two nodes with
<code class="literal">node.attr.rack_id</code> set to <code class="literal">rack_one</code> and create an index with 5 primary
shards and 1 replica of each primary, all primaries and replicas are
allocated across the two nodes.</p>
<p>If you add two nodes with <code class="literal">node.attr.rack_id</code> set to <code class="literal">rack_two</code>,
Elasticsearch moves shards to the new nodes, ensuring (if possible)
that no two copies of the same shard are in the same rack.</p>
<p>If <code class="literal">rack_two</code> fails and takes down both its nodes, by default Elasticsearch
allocates the lost shard copies to nodes in <code class="literal">rack_one</code>. To prevent multiple
copies of a particular shard from being allocated in the same location, you can
enable forced awareness.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="forced-awareness"></a>Forced awareness<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/allocation_awareness.asciidoc">edit</a></h4>
</div></div></div>
<p>By default, if one location fails, Elasticsearch assigns all of the missing
replica shards to the remaining locations. While you might have sufficient
resources across all locations to host your primary and replica shards, a single
location might be unable to host <span class="strong strong"><strong>ALL</strong></span> of the shards.</p>
<p>To prevent a single location from being overloaded in the event of a failure,
you can set <code class="literal">cluster.routing.allocation.awareness.force</code> so no replicas are
allocated until nodes are available in another location.</p>
<p>For example, if you have an awareness attribute called <code class="literal">zone</code> and configure nodes
in <code class="literal">zone1</code> and <code class="literal">zone2</code>, you can use forced awareness to prevent Elasticsearch
from allocating replicas if only one zone is available:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cluster.routing.allocation.awareness.attributes: zone
cluster.routing.allocation.awareness.force.zone.values: zone1,zone2 <a id="CO8-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO8-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify all possible values for the awareness attribute.</p>
</td>
</tr>
</table>
</div>
<p>With this example configuration, if you start two nodes with <code class="literal">node.attr.zone</code> set
to <code class="literal">zone1</code> and create an index with 5 shards and 1 replica, Elasticsearch creates
the index and allocates the 5 primary shards but no replicas. Replicas are
only allocated once nodes with <code class="literal">node.attr.zone</code> set to <code class="literal">zone2</code> are available.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="cluster-shard-allocation-filtering"></a>Cluster-level shard allocation filtering<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/allocation_filtering.asciidoc">edit</a></h3>
</div></div></div>
<p>You can use cluster-level shard allocation filters to control where Elasticsearch
allocates shards from any index. These cluster wide filters are applied in
conjunction with <a class="xref" href="index-modules-allocation.html#shard-allocation-filtering" title="Index-level shard allocation filtering">per-index allocation filtering</a>
and <a class="xref" href="settings.html#shard-allocation-awareness" title="Shard allocation awareness">allocation awareness</a>.</p>
<p>Shard allocation filters can be based on custom node attributes or the built-in
<code class="literal">_name</code>, <code class="literal">_host_ip</code>, <code class="literal">_publish_ip</code>, <code class="literal">_ip</code>, <code class="literal">_host</code>, <code class="literal">_id</code> and <code class="literal">_tier</code> attributes.</p>
<p>The <code class="literal">cluster.routing.allocation</code> settings are <a class="xref" href="settings.html#dynamic-cluster-setting">dynamic</a>, enabling live indices to
be moved from one set of nodes to another. Shards are only relocated if it is
possible to do so without breaking another routing constraint, such as never
allocating a primary and replica shard on the same node.</p>
<p>The most common use case for cluster-level shard allocation filtering is when
you want to decommission a node. To move shards off of a node prior to shutting
it down, you could create a filter that excludes the node by its IP address:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "transient" : {
    "cluster.routing.allocation.exclude._ip" : "10.0.0.1"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/25.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="cluster-routing-settings"></a>Cluster routing settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/allocation_filtering.asciidoc">edit</a></h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.include.{attribute}</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Allocate shards to a node whose <code class="literal">{attribute}</code> has at least one of the
comma-separated values.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.require.{attribute}</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Only allocate shards to a node whose <code class="literal">{attribute}</code> has <em>all</em> of the
comma-separated values.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.exclude.{attribute}</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Do not allocate shards to a node whose <code class="literal">{attribute}</code> has <em>any</em> of the
comma-separated values.
</dd>
</dl>
</div>
<p>The cluster allocation settings support the following built-in attributes:</p>
<div class="informaltable">
<table border="0" cellpadding="4px">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody valign="top">
<tr>
<td valign="top">
<p>
<code class="literal">_name</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by node name
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_host_ip</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by host IP address (IP associated with hostname)
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_publish_ip</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by publish IP address
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_ip</code>
</p>
</td>
<td valign="top">
<p>
Match either <code class="literal">_host_ip</code> or <code class="literal">_publish_ip</code>
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_host</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by hostname
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_id</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by node id
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">_tier</code>
</p>
</td>
<td valign="top">
<p>
Match nodes by the node&#8217;s <a class="xref" href="data-tiers.html" title="Data tiers">data tier</a> role
</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">_tier</code> filtering is based on <a class="xref" href="settings.html#modules-node" title="Node">node</a> roles. Only
a subset of roles are <a class="xref" href="data-tiers.html" title="Data tiers">data tier</a> roles, and the generic
<a class="xref" href="settings.html#data-node" title="Data node">data role</a> will match any tier filtering.
a subset of roles that are <a class="xref" href="data-tiers.html" title="Data tiers">data tier</a> roles, but the generic
<a class="xref" href="settings.html#data-node" title="Data node">data role</a> will match any tier filtering.</p>
</div>
</div>
<p>You can use wildcards when specifying attribute values, for example:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "transient": {
    "cluster.routing.allocation.exclude._ip": "192.168.2.*"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/26.console"></div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="misc-cluster-settings"></a>Miscellaneous cluster settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/misc.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="cluster-read-only"></a>Metadata<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
</div></div></div>
<p>An entire cluster may be set to read-only with the following setting:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.blocks.read_only</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Make the whole cluster read only (indices do not accept write
operations), metadata is not allowed to be modified (create or delete
indices).
</dd>
<dt>
<span class="term">
<code class="literal">cluster.blocks.read_only_allow_delete</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Identical to <code class="literal">cluster.blocks.read_only</code> but allows to delete indices
to free up resources.
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Don&#8217;t rely on this setting to prevent changes to your cluster. Any
user with access to the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster-update-settings</a>
API can make the cluster read-write again.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="cluster-shard-limit"></a>Cluster shard limit<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
</div></div></div>
<p>There is a soft limit on the number of shards in a cluster, based on the number
of nodes in the cluster. This is intended to prevent operations which may
unintentionally destabilize the cluster.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This limit is intended as a safety net, not a sizing recommendation. The
exact number of shards your cluster can safely support depends on your hardware
configuration and workload, but should remain well below this limit in almost
all cases, as the default limit is set quite high.</p>
</div>
</div>
<p>If an operation, such as creating a new index, restoring a snapshot of an index,
or opening a closed index would lead to the number of shards in the cluster
going over this limit, the operation will fail with an error indicating the
shard limit.</p>
<p>If the cluster is already over the limit, due to changes in node membership or
setting changes, all operations that create or open indices will fail until
either the limit is increased as described below, or some indices are
<a class="xref" href="indices.html#indices-open-close" title="Open index API">closed</a> or <a class="xref" href="indices.html#indices-delete-index" title="Delete index API">deleted</a> to bring the
number of shards below the limit.</p>
<p>The cluster shard limit defaults to 1,000 shards per data node.
Both primary and replica shards of all open indices count toward the limit,
including unassigned shards.
For example, an open index with 5 primary shards and 2 replicas counts as 15 shards.
Closed indices do not contribute to the shard count.</p>
<p>You can dynamically adjust the cluster shard limit with the following setting:</p>
<div class="variablelist">
<a id="cluster-max-shards-per-node"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.max_shards_per_node</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Limits the total number of primary and replica shards for the cluster. Elasticsearch
calculates the limit as follows:</p>
<p><code class="literal">cluster.max_shards_per_node * number of data nodes</code></p>
<p>Shards for closed indices do not count toward this limit. Defaults to <code class="literal">1000</code>.
A cluster with no data nodes is unlimited.</p>
<p>Elasticsearch rejects any request that creates more shards than this limit allows. For
example, a cluster with a <code class="literal">cluster.max_shards_per_node</code> setting of <code class="literal">100</code> and
three data nodes has a shard limit of 300. If the cluster already contains 296
shards, Elasticsearch rejects any request that adds five or more shards to the cluster.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This setting does not limit shards for individual nodes. To limit the
number of shards for each node, use the
<a class="xref" href="index-modules-allocation.html#cluster-total-shards-per-node"><code class="literal">cluster.routing.allocation.total_shards_per_node</code></a>
setting.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="user-defined-data"></a>User-defined cluster metadata<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
</div></div></div>
<p>User-defined metadata can be stored and retrieved using the Cluster Settings API.
This can be used to store arbitrary, infrequently-changing data about the cluster
without the need to create an index to store it. This data may be stored using
any key prefixed with <code class="literal">cluster.metadata.</code>.  For example, to store the email
address of the administrator of a cluster under the key <code class="literal">cluster.metadata.administrator</code>,
issue this request:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
  "persistent": {
    "cluster.metadata.administrator": "sysadmin@example.com"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/27.console"></div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>User-defined cluster metadata is not intended to store sensitive or
confidential information. Any information stored in user-defined cluster
metadata will be viewable by anyone with access to the
<a class="xref" href="cluster.html#cluster-get-settings" title="Cluster get settings API">Cluster Get Settings</a> API, and is recorded in the
Elasticsearch logs.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="cluster-max-tombstones"></a>Index tombstones<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
</div></div></div>
<p>The cluster state maintains index tombstones to explicitly denote indices that
have been deleted.  The number of tombstones maintained in the cluster state is
controlled by the following setting:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.indices.tombstones.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Index tombstones prevent nodes that are not part of the cluster when a delete
occurs from joining the cluster and reimporting the index as though the delete
was never issued. To keep the cluster state from growing huge we only keep the
last <code class="literal">cluster.indices.tombstones.size</code> deletes, which defaults to 500. You can
increase it if you expect nodes to be absent from the cluster and miss more
than 500 deletes. We think that is rare, thus the default. Tombstones don&#8217;t take
up much space, but we also think that a number like 50,000 is probably too big.
</dd>
</dl>
</div>
<p>If Elasticsearch encounters index data that is absent from the current cluster
state, those indices are considered to be dangling. For example,
this can happen if you delete more than
<code class="literal">cluster.indices.tombstones.size</code> indices while an Elasticsearch node is offline.</p>
<p>You can use the <a class="xref" href="indices.html#dangling-indices-api" title="Dangling indices:">Dangling indices API</a> to manage
this situation.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="cluster-logger"></a>Logger<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
</div></div></div>
<p>The settings which control logging can be updated <a class="xref" href="settings.html#dynamic-cluster-setting">dynamically</a> with the
<code class="literal">logger.</code> prefix.  For instance, to increase the logging level of the
<code class="literal">indices.recovery</code> module to <code class="literal">DEBUG</code>, issue this request:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
  "transient": {
    "logger.org.elasticsearch.indices.recovery": "DEBUG"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/28.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="persistent-tasks-allocation"></a>Persistent tasks allocation<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/cluster/misc.asciidoc">edit</a></h4>
</div></div></div>
<p>Plugins can create a kind of tasks called persistent tasks. Those tasks are
usually long-lived tasks and are stored in the cluster state, allowing the
tasks to be revived after a full cluster restart.</p>
<p>Every time a persistent task is created, the master node takes care of
assigning the task to a node of the cluster, and the assigned node will then
pick up the task and execute it locally. The process of assigning persistent
tasks to nodes is controlled by the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.persistent_tasks.allocation.enable</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Enable or disable allocation for persistent tasks:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">all</code> -             (default) Allows persistent tasks to be assigned to nodes
</li>
<li class="listitem">
<code class="literal">none</code> -            No allocations are allowed for any type of persistent task
</li>
</ul>
</div>
<p>This setting does not affect the persistent tasks that are already being executed.
Only newly created persistent tasks, or tasks that must be reassigned (after a node
left the cluster, for example), are impacted by this setting.</p>
</dd>
<dt>
<span class="term">
<code class="literal">cluster.persistent_tasks.allocation.recheck_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The master node will automatically check whether persistent tasks need to
be assigned when the cluster state changes significantly. However, there
may be other factors, such as memory usage, that affect whether persistent
tasks can be assigned to nodes but do not cause the cluster state to change.
This setting controls how often assignment checks are performed to react to
these factors. The default is 30 seconds. The minimum permitted value is 10
seconds.
</dd>
</dl>
</div>
</div>

</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ccr-settings"></a>Cross-cluster replication settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ccr-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>These cross-cluster replication settings can be dynamically updated on a live cluster with the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a>.</p>
<h4><a id="ccr-recovery-settings"></a>Remote recovery settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ccr-settings.asciidoc">edit</a></h4>
<p>The following setting can be used to rate-limit the data transmitted during
<a class="xref" href="xpack-ccr.html#ccr-remote-recovery" title="Initializing followers using remote recovery">remote recoveries</a>:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ccr.indices.recovery.max_bytes_per_sec</code> (<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
</span>
</dt>
<dd>
Limits the total inbound and outbound remote recovery traffic on each node.
Since this limit applies on each node, but there may be many nodes performing
remote recoveries concurrently, the total amount of remote recovery bytes may be
much higher than this limit. If you set this limit too high then there is a risk
that ongoing remote recoveries will consume an excess of bandwidth (or other
resources) which could destabilize the cluster. This setting is used by both the
leader and follower clusters. For example if it is set to <code class="literal">20mb</code> on a leader,
the leader will only send <code class="literal">20mb/s</code> to the follower even if the follower is
requesting and can accept <code class="literal">60mb/s</code>. Defaults to <code class="literal">40mb</code>.
</dd>
</dl>
</div>
<h4><a id="ccr-advanced-recovery-settings"></a>Advanced remote recovery settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ccr-settings.asciidoc">edit</a></h4>
<p>The following <em>expert</em> settings can be set to manage the resources consumed by
remote recoveries:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ccr.indices.recovery.max_concurrent_file_chunks</code> (<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
</span>
</dt>
<dd>
Controls the number of file chunk requests that can be sent in parallel per
recovery. As multiple remote recoveries might already running in parallel,
increasing this expert-level setting might only help in situations where remote
recovery of a single shard is not reaching the total inbound and outbound remote recovery traffic as configured by <code class="literal">ccr.indices.recovery.max_bytes_per_sec</code>.
Defaults to <code class="literal">5</code>. The maximum allowed value is <code class="literal">10</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ccr.indices.recovery.chunk_size</code>(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
</span>
</dt>
<dd>
Controls the chunk size requested by the follower during file transfer. Defaults to
<code class="literal">1mb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ccr.indices.recovery.recovery_activity_timeout</code>(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
</span>
</dt>
<dd>
Controls the timeout for recovery activity. This timeout primarily applies on
the leader cluster. The leader cluster must open resources in-memory to supply
data to the follower during the recovery process. If the leader does not receive recovery requests from the follower for this period of time, it will close the resources. Defaults to 60 seconds.
</dd>
<dt>
<span class="term">
<code class="literal">ccr.indices.recovery.internal_action_timeout</code> (<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>)
</span>
</dt>
<dd>
Controls the timeout for individual network requests during the remote recovery
process. An individual action timing out can fail the recovery. Defaults to
60 seconds.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-discovery-settings"></a>Discovery and cluster formation settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/discovery/discovery-settings.asciidoc">edit</a></h2>
</div></div></div>
<p><a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">Discovery and cluster formation</a> are affected by the
following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">discovery.seed_hosts</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Provides a list of the addresses of the master-eligible nodes in the cluster.
May also be a single string containing the addresses separated by commas. Each
address has the format <code class="literal">host:port</code> or <code class="literal">host</code>. The <code class="literal">host</code> is either a host name
to be resolved by DNS, an IPv4 address, or an IPv6 address. IPv6 addresses
must be enclosed in square brackets. If a host name resolves via DNS to multiple
addresses, Elasticsearch uses all of them. DNS lookups are subject to
<a class="xref" href="system-config.html#networkaddress-cache-ttl" title="DNS cache settings">JVM DNS caching</a>. If the <code class="literal">port</code> is not given then it
is determined by checking the following settings in order:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<code class="literal">transport.profiles.default.port</code>
</li>
<li class="listitem">
<code class="literal">transport.port</code>
</li>
</ol>
</div>
<p>If neither of these is set then the default port is <code class="literal">9300</code>. The default value
for <code class="literal">discovery.seed_hosts</code> is <code class="literal">["127.0.0.1", "[::1]"]</code>. See <a class="xref" href="important-settings.html#unicast.hosts" title="discovery.seed_hosts"><code class="literal">discovery.seed_hosts</code></a>.</p>
<p>This setting was previously known as <code class="literal">discovery.zen.ping.unicast.hosts</code>. Its
old name is deprecated but continues to work in order to preserve backwards
compatibility. Support for the old name will be removed in a future version.</p>
</dd>
<dt>
<span class="term">
<code class="literal">discovery.seed_providers</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies which types of <a class="xref" href="modules-discovery.html#built-in-hosts-providers" title="Seed hosts providers">seed hosts provider</a> to
use to obtain the addresses of the seed nodes used to start the discovery
process. By default, it is the
<a class="xref" href="modules-discovery.html#settings-based-hosts-provider" title="Settings-based seed hosts provider">settings-based seed hosts provider</a> which
obtains the seed node addresses from the <code class="literal">discovery.seed_hosts</code> setting.
This setting was previously known as <code class="literal">discovery.zen.hosts_provider</code>. Its old
name is deprecated but continues to work in order to preserve backwards
compatibility. Support for the old name will be removed in a future version.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether Elasticsearch should form a multiple-node cluster. By default, Elasticsearch
discovers other nodes when forming a cluster and allows other nodes to join
the cluster later. If <code class="literal">discovery.type</code> is set to <code class="literal">single-node</code>, Elasticsearch forms a
single-node cluster and suppresses the timeout set by
<code class="literal">cluster.publish.timeout</code>. For more information about when you might use
this setting, see <a class="xref" href="bootstrap-checks.html#single-node-discovery" title="Single-node discovery">Single-node discovery</a>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.initial_master_nodes</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets the initial set of master-eligible nodes in a brand-new cluster. By default
this list is empty, meaning that this node expects to join a cluster that has
already been bootstrapped. See <a class="xref" href="important-settings.html#initial_master_nodes" title="cluster.initial_master_nodes"><code class="literal">cluster.initial_master_nodes</code></a>.
</dd>
</dl>
</div>
<h4><a id="_expert_settings"></a>Expert settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/discovery/discovery-settings.asciidoc">edit</a></h4>
<p>Discovery and cluster formation are also affected by the following
<em>expert-level</em> settings, although it is not recommended to change any of these
from their default values.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you adjust these settings then your cluster may not form correctly
or may become unstable or intolerant of certain failures.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">discovery.cluster_formation_warning_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long a node will try to form a cluster before logging a warning that
the cluster did not form. Defaults to <code class="literal">10s</code>. If a cluster has not formed after
<code class="literal">discovery.cluster_formation_warning_timeout</code> has elapsed then the node will log
a warning message that starts with the phrase <code class="literal">master not discovered</code> which
describes the current state of the discovery process.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.find_peers_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long a node will wait before attempting another discovery round.
Defaults to <code class="literal">1s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.probe.connect_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long to wait when attempting to connect to each address. Defaults to
<code class="literal">3s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.probe.handshake_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long to wait when attempting to identify the remote node via a
handshake. Defaults to <code class="literal">1s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.request_peers_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long a node will wait after asking its peers again before considering
the request to have failed. Defaults to <code class="literal">3s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.seed_resolver.max_concurrent_resolvers</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies how many concurrent DNS lookups to perform when resolving the
addresses of seed nodes. Defaults to <code class="literal">10</code>. This setting was previously
known as <code class="literal">discovery.zen.ping.unicast.concurrent_connects</code>. Its old name is
deprecated but continues to work in order to preserve backwards
compatibility. Support for the old name will be removed in a future
version.
</dd>
<dt>
<span class="term">
<code class="literal">discovery.seed_resolver.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies how long to wait for each DNS lookup performed when resolving the
addresses of seed nodes. Defaults to <code class="literal">5s</code>. This setting was previously
known as <code class="literal">discovery.zen.ping.unicast.hosts.resolve_timeout</code>. Its old name
is deprecated but continues to work in order to preserve backwards
compatibility. Support for the old name will be removed in a future
version.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.auto_shrink_voting_configuration</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Controls whether the <a class="xref" href="modules-discovery.html#modules-discovery-voting" title="Voting configurations">voting configuration</a> sheds
departed nodes automatically, as long as it still contains at least 3 nodes. The
default value is <code class="literal">true</code>. If set to <code class="literal">false</code>, the voting configuration never
shrinks automatically and you must remove departed nodes manually with the
<a class="xref" href="cluster.html#voting-config-exclusions" title="Voting configuration exclusions API">voting configuration exclusions API</a>.
</dd>
<dt>
<span class="term">
<a id="master-election-settings"></a><code class="literal">cluster.election.back_off_time</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets the amount to increase the upper bound on the wait before an election on
each election failure. Note that this is <em>linear</em> backoff. This defaults to
<code class="literal">100ms</code>. Changing this setting from the default may cause your cluster to fail
to elect a master node.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.election.duration</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long each election is allowed to take before a node considers it to
have failed and schedules a retry. This defaults to <code class="literal">500ms</code>.  Changing this
setting from the default may cause your cluster to fail to elect a master node.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.election.initial_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets the upper bound on how long a node will wait initially, or after the
elected master fails, before attempting its first election. This defaults to
<code class="literal">100ms</code>. Changing this setting from the default may cause your cluster to fail
to elect a master node.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.election.max_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets the maximum upper bound on how long a node will wait before attempting an
first election, so that an network partition that lasts for a long time does not
result in excessively sparse elections. This defaults to <code class="literal">10s</code>. Changing this
setting from the default may cause your cluster to fail to elect a master node.
</dd>
<dt>
<span class="term">
<a id="fault-detection-settings"></a><code class="literal">cluster.fault_detection.follower_check.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long the elected master waits between follower checks to each other
node in the cluster. Defaults to <code class="literal">1s</code>. Changing this setting from the default
may cause your cluster to become unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.fault_detection.follower_check.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long the elected master waits for a response to a follower check before
considering it to have failed. Defaults to <code class="literal">10s</code>. Changing this setting from the
default may cause your cluster to become unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.fault_detection.follower_check.retry_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how many consecutive follower check failures must occur to each node before
the elected master considers that node to be faulty and removes it from the
cluster. Defaults to <code class="literal">3</code>. Changing this setting from the default may cause your
cluster to become unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.fault_detection.leader_check.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long each node waits between checks of the elected master. Defaults to
<code class="literal">1s</code>. Changing this setting from the default may cause your cluster to become
unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.fault_detection.leader_check.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long each node waits for a response to a leader check from the elected
master before considering it to have failed. Defaults to <code class="literal">10s</code>. Changing this
setting from the default may cause your cluster to become unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.fault_detection.leader_check.retry_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how many consecutive leader check failures must occur before a node
considers the elected master to be faulty and attempts to find or elect a new
master. Defaults to <code class="literal">3</code>. Changing this setting from the default may cause your
cluster to become unstable.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.follower_lag.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long the master node waits to receive acknowledgements for cluster
state updates from lagging nodes. The default value is <code class="literal">90s</code>. If a node does not
successfully apply the cluster state update within this period of time, it is
considered to have failed and is removed from the cluster. See
<a class="xref" href="modules-discovery.html#cluster-state-publishing" title="Publishing the cluster state">Publishing the cluster state</a>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.join.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.10</span>]
<span class="Admonishment-detail">
Deprecated in 7.10. Has no effect in 7.x clusters
</span>
</span> Sets how long a node will
wait after sending a request to join a version 6.8 master before it
considers the request to have failed and retries. Defaults to <code class="literal">60s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.max_voting_config_exclusions</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Sets a limit on the number of voting configuration exclusions at any one time.
The default value is <code class="literal">10</code>. See <a class="xref" href="getting-started-modify-data.html#modules-discovery-adding-removing-nodes" title="Adding and removing nodes">Adding and removing nodes</a>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.publish.info_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long the master node waits for each cluster state update to be
completely published to all nodes before logging a message indicating that some
nodes are responding slowly. The default value is <code class="literal">10s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.publish.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Sets how long the master node waits for each cluster state update to be
completely published to all nodes, unless <code class="literal">discovery.type</code> is set to
<code class="literal">single-node</code>. The default value is <code class="literal">30s</code>. See <a class="xref" href="modules-discovery.html#cluster-state-publishing" title="Publishing the cluster state">Publishing the cluster state</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="no-master-block"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.no_master_block</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Specifies which operations are rejected when there is no active master in a
cluster. This setting has three valid values:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
All operations on the node (both read and write operations) are rejected.
This also applies for API cluster state read or write operations, like the get
index settings, put mapping and cluster state API.
</dd>
<dt>
<span class="term">
<code class="literal">write</code>
</span>
</dt>
<dd>
(default) Write operations are rejected. Read operations succeed,
based on the last known cluster configuration. This situation may result in
partial reads of stale data as this node may be isolated from the rest of the
cluster.
</dd>
<dt>
<span class="term">
<code class="literal">metadata_write</code>
</span>
</dt>
<dd>
Only metadata write operations (e.g. mapping updates,
routing table changes) are rejected but regular indexing operations continue
to work. Read and write operations succeed, based on the last known cluster
configuration. This situation may result in partial reads of stale data as
this node may be isolated from the rest of the cluster.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">cluster.no_master_block</code> setting doesn&#8217;t apply to nodes-based APIs
(for example, cluster stats, node info, and node stats APIs). Requests to these
APIs are not be blocked and can run on any available node.
</li>
<li class="listitem">
For the cluster to be fully operational, it must have an active master.
</li>
</ul>
</div>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This setting replaces the <code class="literal">discovery.zen.no_master_block</code> setting in
earlier versions. The <code class="literal">discovery.zen.no_master_block</code> setting is ignored.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">monitor.fs.health.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If <code class="literal">true</code>, the node runs periodic
<a class="xref" href="modules-discovery.html#cluster-fault-detection-filesystem-health">filesystem health checks</a>. Defaults
to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">monitor.fs.health.refresh_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Interval between successive
<a class="xref" href="modules-discovery.html#cluster-fault-detection-filesystem-health">filesystem health checks</a>. Defaults
to <code class="literal">2m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">monitor.fs.health.slow_path_logging_threshold</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If a <a class="xref" href="modules-discovery.html#cluster-fault-detection-filesystem-health">filesystem health checks</a>
takes longer than this threshold then Elasticsearch logs a warning. Defaults to <code class="literal">5s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-fielddata"></a>Field data cache settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/fielddata.asciidoc">edit</a></h2>
</div></div></div>
<p>The field data cache contains <a class="xref" href="mapping-types.html#fielddata-mapping-param" title="fielddata mapping parameter">field data</a> and <a class="xref" href="mapping-params.html#eager-global-ordinals" title="eager_global_ordinals">global ordinals</a>,
which are both used to support aggregations on certain field types.
Since these are on-heap data structures, it is important to monitor the cache&#8217;s use.</p>
<h4><a id="fielddata-sizing"></a>Cache size<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/fielddata.asciidoc">edit</a></h4>
<p>The entries in the cache are expensive to build, so the default behavior is
to keep the cache loaded in memory. The default cache size is unlimited,
causing the cache to grow until it reaches the limit set by the <a class="xref" href="settings.html#fielddata-circuit-breaker" title="Field data circuit breaker">field data circuit breaker</a>. This behavior can be configured.</p>
<p>If the cache size limit is set, the cache will begin clearing the least-recently-updated
entries in the cache. This setting can automatically avoid the circuit breaker limit,
at the cost of rebuilding the cache as needed.</p>
<p>If the circuit breaker limit is reached, further requests that increase the cache
size will be prevented. In this case you should manually <a class="xref" href="indices.html#indices-clearcache" title="Clear cache API">clear the cache</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.fielddata.cache.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The max size of the field data cache, eg <code class="literal">38%</code> of node heap space, or an
absolute value, eg <code class="literal">12GB</code>. Defaults to unbounded. If you choose to set it,
it should be smaller than <a class="xref" href="settings.html#fielddata-circuit-breaker" title="Field data circuit breaker">Field data circuit breaker</a> limit.
</dd>
</dl>
</div>
<h4><a id="fielddata-monitoring"></a>Monitoring field data<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/fielddata.asciidoc">edit</a></h4>
<p>You can monitor memory usage for field data as well as the field data circuit
breaker using
the <a class="xref" href="cluster.html#cluster-nodes-stats" title="Nodes stats API">nodes stats API</a> or the <a class="xref" href="cat.html#cat-fielddata" title="cat fielddata API">cat fielddata API</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-http"></a>HTTP<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/http.asciidoc">edit</a></h2>
</div></div></div>
<p><a id="modules-http-description"></a>The HTTP layer exposes Elasticsearch&#8217;s REST APIs over HTTP. Clients send HTTP requests
to a node in the cluster which either handles it locally or else passes it on
to other nodes for further processing using the <a class="xref" href="settings.html#modules-transport" title="Transport">Transport
layer</a>.</p>
<p>When possible, consider using <a href="https://en.wikipedia.org/wiki/Keepalive#HTTP_Keepalive" class="ulink" target="_top">HTTP keep
alive</a> when connecting for better performance and try to get your favorite
client not to do <a href="https://en.wikipedia.org/wiki/Chunked_transfer_encoding" class="ulink" target="_top">HTTP chunking</a>.</p>
<div class="http-settings">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_http_settings"></a>HTTP settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/http.asciidoc">edit</a></h3>
</div></div></div>
<p>The following settings can be configured for HTTP. These settings also use the common <a class="xref" href="settings.html#modules-network" title="Network settings">network settings</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A bind port range. Defaults to <code class="literal">9200-9300</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.publish_port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The port that HTTP clients should use when
communicating with this node. Useful when a cluster node is behind a
proxy or firewall and the <code class="literal">http.port</code> is not directly addressable
from the outside. Defaults to the actual port assigned via <code class="literal">http.port</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.bind_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The host address to bind the HTTP service to. Defaults to <code class="literal">http.host</code> (if set) or <code class="literal">network.bind_host</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.publish_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The host address to publish for HTTP clients to connect to. Defaults to <code class="literal">http.host</code> (if set) or <code class="literal">network.publish_host</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Used to set the <code class="literal">http.bind_host</code> and the <code class="literal">http.publish_host</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_content_length</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Maximum size of an HTTP request body. Defaults to <code class="literal">100mb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_initial_line_length</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Maximum size of an HTTP URL. Defaults to <code class="literal">4kb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_header_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Maximum size of allowed headers. Defaults to <code class="literal">8kb</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-compression"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.compression</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Support for compression when possible (with Accept-Encoding). If HTTPS is enabled, defaults to <code class="literal">false</code>. Otherwise, defaults to <code class="literal">true</code>.
</p>
<p>Disabling compression for HTTPS mitigates potential security risks, such as a
<a href="https://en.wikipedia.org/wiki/BREACH" class="ulink" target="_top">BREACH attack</a>. To compress HTTPS traffic,
you must explicitly set <code class="literal">http.compression</code> to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">http.compression_level</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Defines the compression level to use for HTTP responses. Valid values are in the range of 1 (minimum compression) and 9 (maximum compression). Defaults to <code class="literal">3</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.enabled</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enable or disable cross-origin resource sharing, which determines whether a browser on another origin can execute requests against Elasticsearch. Set to <code class="literal">true</code> to enable Elasticsearch to process pre-flight
<a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing" class="ulink" target="_top">CORS</a> requests.
Elasticsearch will respond to those requests with the <code class="literal">Access-Control-Allow-Origin</code> header if the <code class="literal">Origin</code> sent in the request is permitted by the <code class="literal">http.cors.allow-origin</code> list. Set to <code class="literal">false</code> (the default) to make Elasticsearch ignore the <code class="literal">Origin</code> request header, effectively disabling CORS requests because Elasticsearch will never respond with the <code class="literal">Access-Control-Allow-Origin</code> response header.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the client does not send a pre-flight request with an <code class="literal">Origin</code> header or it does not check the response headers from the server to validate the
<code class="literal">Access-Control-Allow-Origin</code> response header, then cross-origin security is
compromised. If CORS is not enabled on Elasticsearch, the only way for the client to know is to send a pre-flight request and realize the required response headers are missing.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-origin"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-origin</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Which origins to allow. If you prepend and append a forward slash (<code class="literal">/</code>) to the value, this will be treated as a regular expression, allowing you to support HTTP and HTTPs. For example, using <code class="literal">/https?:\/\/localhost(:[0-9]+)?/</code> would return the request header appropriately in both cases. Defaults to no origins allowed.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>A wildcard (<code class="literal">*</code>) is a valid value but is considered a security risk, as your Elasticsearch instance is open to cross origin requests from <span class="strong strong"><strong>anywhere</strong></span>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-max-age"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.max-age</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Browsers send a "preflight" OPTIONS-request to determine CORS settings. <code class="literal">max-age</code> defines how long the result should be cached for. Defaults to <code class="literal">1728000</code> (20 days).
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-methods"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-methods</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Which methods to allow. Defaults to <code class="literal">OPTIONS, HEAD, GET, POST, PUT, DELETE</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-headers"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-headers</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Which headers to allow. Defaults to <code class="literal">X-Requested-With, Content-Type, Content-Length</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-credentials"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-credentials</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Whether the <code class="literal">Access-Control-Allow-Credentials</code> header should be returned. Defaults to <code class="literal">false</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This header is only returned when the setting is set to <code class="literal">true</code>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.detailed_errors.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If <code class="literal">true</code>, enables the output of detailed error messages and stack traces in the response output. Defaults to <code class="literal">true</code>.
</p>
<p>If <code class="literal">false</code>, use the <code class="literal">error_trace</code> parameter to <a class="xref" href="api-conventions.html#common-options-error-options" title="Enabling stack traces">enable stack traces</a> and return detailed error messages. Otherwise, only a simple message will be returned.</p>
</dd>
<dt>
<span class="term">
<code class="literal">http.pipelining.max_events</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of events to be queued up in memory before an HTTP connection is closed, defaults to <code class="literal">10000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_warning_header_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of warning headers in client HTTP responses. Defaults to <code class="literal">unbounded</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_warning_header_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum total size of warning headers in client HTTP responses. Defaults to <code class="literal">unbounded</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.no_delay</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enable or disable the <a href="https://en.wikipedia.org/wiki/Nagle%27s_algorithm" class="ulink" target="_top">TCP no delay</a>
setting. Defaults to <code class="literal">network.tcp.no_delay</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_alive</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Configures the <code class="literal">SO_KEEPALIVE</code> option for this socket, which
determines whether it sends TCP keepalive probes.
Defaults to <code class="literal">network.tcp.keep_alive</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_idle</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Configures the <code class="literal">TCP_KEEPIDLE</code> option for this socket, which
determines the time in seconds that a connection must be idle before
starting to send TCP keepalive probes. Defaults to <code class="literal">network.tcp.keep_idle</code>, which
uses the system default. This value cannot exceed <code class="literal">300</code> seconds. Only applicable on
Linux and macOS, and requires Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Configures the <code class="literal">TCP_KEEPINTVL</code> option for this socket,
which determines the time in seconds between sending TCP keepalive probes.
Defaults to <code class="literal">network.tcp.keep_interval</code>, which uses the system default.
This value cannot exceed <code class="literal">300</code> seconds. Only applicable on Linux and macOS, and requires
Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Configures the <code class="literal">TCP_KEEPCNT</code> option for this socket, which
determines the number of unacknowledged TCP keepalive probes that may be
sent on a connection before it is dropped. Defaults to <code class="literal">network.tcp.keep_count</code>,
which uses the system default. Only applicable on Linux and macOS, and
requires Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.reuse_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Should an address be reused or not. Defaults to <code class="literal">network.tcp.reuse_address</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.send_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The size of the TCP send buffer (specified with <a class="xref" href="api-conventions.html#size-units" title="Unit-less quantities">size units</a>).
Defaults to <code class="literal">network.tcp.send_buffer_size</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.receive_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The size of the TCP receive buffer (specified with <a class="xref" href="api-conventions.html#size-units" title="Unit-less quantities">size units</a>).
Defaults to <code class="literal">network.tcp.receive_buffer_size</code>.
</dd>
</dl>
</div>
</div>

<div class="http-rest-request-tracer">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_rest_request_tracer"></a>REST request tracer<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/http.asciidoc">edit</a></h3>
</div></div></div>
<p>The HTTP layer has a dedicated tracer logger which, when activated, logs incoming requests. The log can be dynamically activated
by setting the level of the <code class="literal">org.elasticsearch.http.HttpTracer</code> logger to <code class="literal">TRACE</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "transient" : {
      "logger.org.elasticsearch.http.HttpTracer" : "TRACE"
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/29.console"></div>
<p>You can also control which uris will be traced, using a set of include and exclude wildcard patterns. By default every request will be
traced.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "transient" : {
      "http.tracer.include" : "*",
      "http.tracer.exclude" : ""
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/30.console"></div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-settings"></a>Index lifecycle management settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ilm-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p>These are the settings available for configuring <a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">index lifecycle management</a> (ILM).</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_cluster_level_settings"></a>Cluster level settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ilm-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.ilm.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Boolean)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.8.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.8.0. Basic License features are always enabled
</span>
</span><br>
This deprecated setting has no effect and will be removed in Elasticsearch 8.0.
</dd>
<dt>
<span class="term">
<code class="literal">indices.lifecycle.history_index_enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Boolean)
Whether ILM&#8217;s history index is enabled. If enabled, ILM will record the
history of actions taken as part of ILM policies to the <code class="literal">ilm-history-*</code>
indices. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">indices.lifecycle.poll_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, <a class="xref" href="api-conventions.html#time-units" title="Time units">time unit value</a>)
How often index lifecycle management checks for indices that meet policy criteria. Defaults to <code class="literal">10m</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_index_level_settings"></a>Index level settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ilm-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>These index-level ILM settings are typically configured through index
templates. For more information, see <a class="xref" href="getting-started-index-lifecycle-management.html#ilm-gs-create-policy" title="Create a lifecycle policy">Create a lifecycle policy</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.indexing_complete</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, Boolean)
Indicates whether or not the index has been rolled over.
Automatically set to <code class="literal">true</code> when ILM completes the rollover action.
You can explicitly set it to <a class="xref" href="skipping-rollover.html" title="Skip rollover">skip rollover</a>.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">index.lifecycle.name</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, string)
The name of the policy to use to manage the index.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="index-lifecycle-origination-date"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.origination_date</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, long)
If specified, this is the timestamp used to calculate the index age for its phase transitions.
Use this setting if you create a new index that contains old data and
want to use the original creation date to calculate the index age.
Specified as a Unix epoch value.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="index-lifecycle-parse-origination-date"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.parse_origination_date</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, Boolean)
Set to <code class="literal">true</code> to parse the origination date from the index name.
This origination date is used to calculate the index age for its phase transitions.
The index name must match the pattern <code class="literal">^.*-{date_format}-\\d+</code>,
where the <code class="literal">date_format</code> is <code class="literal">yyyy.MM.dd</code> and the trailing digits are optional.
An index that was rolled over would normally match the full format,
for example <code class="literal">logs-2016.10.31-000002</code>).
If the index name doesn&#8217;t match the pattern, index creation fails.
</dd>
<dt>
<span class="term">
<code class="literal">index.lifecycle.rollover_alias</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Dynamic</a>, string)
The index alias to update when the index rolls over. Specify when using a
policy that contains a rollover action. When the index rolls over, the alias is
updated to reflect that the index is no longer the write index. For more
information about rolling indices, see <a class="xref" href="ilm-concepts.html#index-rollover" title="Rollover">Rollover</a>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="index-management-settings"></a>Index management settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/index_management.asciidoc">edit</a></h2>
</div></div></div>
<p>You can use the following cluster settings to enable or disable index management
features.</p>
<div class="variablelist">
<a id="auto-create-index"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">action.auto_create_index</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
<a class="xref" href="docs.html#index-creation" title="Automatically create data streams and indices">Automatically create an index</a> if it doesn&#8217;t already exist and apply any configured index templates. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="action-destructive-requires-name"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">action.destructive_requires_name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
When set to <code class="literal">true</code>, you must specify the index name to <a class="xref" href="indices.html#indices-delete-index" title="Delete index API">delete an index</a>. It is not possible to delete all indices with <code class="literal">_all</code> or use wildcards.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-indices-close-enable"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.indices.close.enable</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Enables <a class="xref" href="indices.html#indices-close" title="Close index API">closing of open indices</a> in Elasticsearch. If <code class="literal">false</code>, you
cannot close open indices. Defaults to <code class="literal">true</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Closed indices still consume a significant amount of disk space.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="reindex-remote-whitelist"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">reindex.remote.whitelist</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the hosts that can be <a class="xref" href="docs.html#reindex-from-remote" title="Reindex from remote">reindexed from remotely</a>. Expects a YAML array of <code class="literal">host:port</code> strings. Consists of a comma-delimited list of <code class="literal">host:port</code> entries. Defaults to <code class="literal">["\*.io:*", "\*.com:*"]</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="stack-templates-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">stack.templates.enabled</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If <code class="literal">true</code>, enables built-in index and component templates.
<a href="https://www.elastic.co/guide/en/fleet/7.10/fleet-overview.html" class="ulink" target="_top">Elastic Agent</a> uses these templates to create data
streams. If <code class="literal">false</code>, Elasticsearch disables these index and component templates. Defaults
to <code class="literal">true</code>.</p>
<p>This setting affects the following built-in index templates:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">logs-*-*</code>
</li>
<li class="listitem">
<code class="literal">metrics-*-*</code>
</li>
<li class="listitem">
<code class="literal">synthetics-*-*</code>
</li>
</ul>
</div>
<p>This setting also affects the following built-in component templates:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">logs-mappings</code>
</li>
<li class="listitem">
<code class="literal">logs-settings</code>
</li>
<li class="listitem">
<code class="literal">metrics-mappings</code>
</li>
<li class="listitem">
<code class="literal">metrics-settings</code>
</li>
<li class="listitem">
<code class="literal">synthetics-mapping</code>
</li>
<li class="listitem">
<code class="literal">synthetics-settings</code>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="recovery"></a>Index recovery settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/recovery.asciidoc">edit</a></h2>
</div></div></div>
<p>Peer recovery syncs data from a primary shard to a new or existing shard copy.</p>
<p>Peer recovery automatically occurs when Elasticsearch:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Recreates a shard lost during node failure
</li>
<li class="listitem">
Relocates a shard to another node due to a cluster rebalance or changes to the
<a class="xref" href="settings.html#modules-cluster" title="Cluster-level shard allocation and routing settings">shard allocation settings</a>
</li>
</ul>
</div>
<p>You can view a list of in-progress and completed recoveries using the
<a class="xref" href="cat.html#cat-recovery" title="cat recovery API">cat recovery API</a>.</p>
<h4><a id="_recovery_settings"></a>Recovery settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/recovery.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.recovery.max_bytes_per_sec</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Limits total inbound and outbound
recovery traffic for each node. Applies to both peer recoveries as well
as snapshot recoveries (i.e., restores from a snapshot). Defaults to <code class="literal">40mb</code>.
</p>
<p>This limit applies to each node separately. If multiple nodes in a cluster
perform recoveries at the same time, the cluster&#8217;s total recovery traffic may
exceed this limit.</p>
<p>If this limit is too high, ongoing recoveries may consume an excess of bandwidth
and other resources, which can destabilize the cluster.</p>
<p>This is a dynamic setting, which means you can set it in each node&#8217;s
<code class="literal">elasticsearch.yml</code> config file and you can update it dynamically using the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a>. If you set it
dynamically then the same limit applies on every node in the cluster. If you do
not set it dynamically then you can set a different limit on each node, which is
useful if some of your nodes have better bandwidth than others. For example, if
you are using <a class="xref" href="overview-index-lifecycle-management.html" title="ILM overview">Index Lifecycle Management</a>
then you may be able to give your hot nodes a higher recovery bandwidth limit
than your warm nodes.</p>
</dd>
</dl>
</div>
<h4><a id="_expert_peer_recovery_settings"></a>Expert peer recovery settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/recovery.asciidoc">edit</a></h4>
<p>You can use the following <em>expert</em> setting to manage resources for peer
recoveries.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.recovery.max_concurrent_file_chunks</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>, Expert) Number of file chunk requests
sent in parallel for each recovery. Defaults to <code class="literal">2</code>.
</p>
<p>You can increase the value of this setting when the recovery of a single shard
is not reaching the traffic limit set by <code class="literal">indices.recovery.max_bytes_per_sec</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">indices.recovery.max_concurrent_operations</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>, Expert) Number of operations sent
in parallel for each recovery. Defaults to <code class="literal">1</code>.
</p>
<p>Concurrently replaying operations during recovery can be very resource-intensive
and may interfere with indexing, search, and other activities in your cluster.
Do not increase this setting without carefully verifying that your cluster has
the resources available to handle the extra load that will result.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indexing-buffer"></a>Indexing buffer settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/indexing_buffer.asciidoc">edit</a></h2>
</div></div></div>
<p>The indexing buffer is used to store newly indexed documents.  When it fills
up, the documents in the buffer are written to a segment on disk. It is divided
between all shards on the node.</p>
<p>The following settings are <em>static</em> and must be configured on every data node
in the cluster:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.memory.index_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Accepts either a percentage or a byte size value. It defaults to <code class="literal">10%</code>,
meaning that <code class="literal">10%</code> of the total heap allocated to a node will be used as the
indexing buffer size shared across all shards.
</dd>
<dt>
<span class="term">
<code class="literal">indices.memory.min_index_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If the <code class="literal">index_buffer_size</code> is specified as a percentage, then this
setting can be used to specify an absolute minimum.  Defaults to <code class="literal">48mb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">indices.memory.max_index_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If the <code class="literal">index_buffer_size</code> is specified as a percentage, then this
setting can be used to specify an absolute maximum.  Defaults to unbounded.
</dd>
</dl>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="license-settings"></a>License settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/license-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>You can configure this licensing setting in the <code class="literal">elasticsearch.yml</code> file.
For more information, see
<a href="https://www.elastic.co/guide/en/kibana/7.10/managing-licenses.html" class="ulink" target="_top">License management</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.license.self_generated.type</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">basic</code> (default) to enable basic X-Pack features.<br>
</p>
<p>If set to <code class="literal">trial</code>, the self-generated license gives access only to all the features
of a x-pack for 30 days. You can later downgrade the cluster to a basic license if
needed.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-gateway"></a>Local gateway settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/gateway.asciidoc">edit</a></h2>
</div></div></div>
<p>The local gateway stores the cluster state and shard data across full
cluster restarts.</p>
<p>The following <em>static</em> settings, which must be set on every master node,
control how long a freshly elected master should wait before it tries to
recover the cluster state and the cluster&#8217;s data.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings only take effect on a full cluster restart.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">gateway.expected_nodes</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.0. This setting will be removed in 8.0. Use <code class="literal">gateway.expected_data_nodes</code> instead.
</span>
</span>
Number of data or master nodes expected in the cluster.
Recovery of local shards begins when the expected number of
nodes join the cluster. Defaults to <code class="literal">0</code>.
</dd>
<dt>
<span class="term">
<code class="literal">gateway.expected_master_nodes</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.0. This setting will be removed in 8.0. Use <code class="literal">gateway.expected_data_nodes</code> instead.
</span>
</span>
Number of master nodes expected in the cluster.
Recovery of local shards begins when the expected number of
master nodes join the cluster. Defaults to <code class="literal">0</code>.
</dd>
<dt>
<span class="term">
<code class="literal">gateway.expected_data_nodes</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Number of data nodes expected in the cluster.
Recovery of local shards begins when the expected number of
data nodes join the cluster. Defaults to <code class="literal">0</code>.
</dd>
<dt>
<span class="term">
<code class="literal">gateway.recover_after_time</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If the expected number of nodes is not achieved, the recovery process waits
for the configured amount of time before trying to recover.
Defaults to <code class="literal">5m</code> if one of the <code class="literal">expected_nodes</code> settings is configured.
</p>
<p>Once the <code class="literal">recover_after_time</code> duration has timed out, recovery will start
as long as the following conditions are met:</p>
</dd>
<dt>
<span class="term">
<code class="literal">gateway.recover_after_nodes</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.0. This setting will be removed in 8.0. Use <code class="literal">gateway.recover_after_data_nodes</code> instead.
</span>
</span>
Recover as long as this many data or master nodes have joined the cluster.
</dd>
<dt>
<span class="term">
<code class="literal">gateway.recover_after_master_nodes</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.0. This setting will be removed in 8.0. Use <code class="literal">gateway.recover_after_data_nodes</code> instead.
</span>
</span>
Recover as long as this many master nodes have joined the cluster.
</dd>
<dt>
<span class="term">
<code class="literal">gateway.recover_after_data_nodes</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Recover as long as this many data nodes have joined the cluster.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-indices"></a>Dangling indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/gateway.asciidoc">edit</a></h3>
</div></div></div>
<p>When a node joins the cluster, if it finds any shards stored in its local data
directory that do not already exist in the cluster, it will consider those
shards to be "dangling". Importing dangling indices
into the cluster using <code class="literal">gateway.auto_import_dangling_indices</code> is not safe.
Instead, use the <a class="xref" href="indices.html#dangling-indices-api" title="Dangling indices:">Dangling indices API</a>. Neither
mechanism provides any guarantees as to whether the imported data truly
represents the latest state of the data when the index was still part of
the cluster.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">gateway.auto_import_dangling_indices</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.9.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.9.0. This setting will be removed in 8.0. You should use the dedicated dangling indices API instead.
</span>
</span>
Whether to automatically import dangling indices into the cluster
state, provided no indices already exist with the same name. Defaults
to <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>The auto-import functionality was intended as a best effort to help users
who lose all master nodes. For example, if a new master node were to be
started which was unaware of the other indices in the cluster, adding the
old nodes would cause the old indices to be imported, instead of being
deleted. However there are several issues with automatic importing, and
its use is strongly discouraged in favour of the
&lt;&lt;dangling-indices-api,dedicated API&gt;.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Losing all master nodes is a situation that should be avoided at
all costs, as it puts your cluster&#8217;s metadata and data at risk.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="logging"></a>Logging<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/logging-config.asciidoc">edit</a></h2>
</div></div></div>
<style>
.tabs {
  width: 100%;
}
[role="tablist"] {
  margin: 0 0 -0.1em;
  overflow: visible;
}
[role="tab"] {
  position: relative;
  padding: 0.3em 0.5em 0.4em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0.2em 0.2em 0 0;
  overflow: visible;
  font-family: inherit;
  font-size: inherit;
  background: hsl(220, 20%, 94%);
}
[role="tab"]:hover::before,
[role="tab"]:focus::before,
[role="tab"][aria-selected="true"]::before {
  position: absolute;
  bottom: 100%;
  right: -1px;
  left: -1px;
  border-radius: 0.2em 0.2em 0 0;
  border-top: 3px solid hsl(219, 1%, 72%);
  content: '';
}
[role="tab"][aria-selected="true"] {
  border-radius: 0;
  background: hsl(220, 43%, 99%);
  outline: 0;
}
[role="tab"][aria-selected="true"]:not(:focus):not(:hover)::before {
  border-top: 5px solid hsl(218, 96%, 48%);
}
[role="tab"][aria-selected="true"]::after {
  position: absolute;
  z-index: 3;
  bottom: -1px;
  right: 0;
  left: 0;
  height: 0.3em;
  background: hsl(220, 43%, 99%);
  box-shadow: none;
  content: '';
}
[role="tab"]:hover,
[role="tab"]:focus,
[role="tab"]:active {
  outline: 0;
  border-radius: 0;
  color: inherit;
}
[role="tab"]:hover::before,
[role="tab"]:focus::before {
  border-color: hsl(218, 96%, 48%);
}
[role="tabpanel"] {
  position: relative;
  z-index: 2;
  padding: 1em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0 0.2em 0.2em 0.2em;
  box-shadow: 0 0 0.2em hsl(219, 1%, 72%);
  background: hsl(220, 43%, 99%);
  margin-bottom: 1em;
}
[role="tabpanel"] p {
  margin: 0;
}
[role="tabpanel"] * + p {
  margin-top: 1em;
}
</style>
<script>
window.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll('[role="tab"]');
  const tabList = document.querySelector('[role="tablist"]');
  // Add a click event handler to each tab
  tabs.forEach(tab => {
    tab.addEventListener("click", changeTabs);
  });
  // Enable arrow navigation between tabs in the tab list
  let tabFocus = 0;
  tabList.addEventListener("keydown", e => {
    // Move right
    if (e.keyCode === 39 || e.keyCode === 37) {
      tabs[tabFocus].setAttribute("tabindex", -1);
      if (e.keyCode === 39) {
        tabFocus++;
        // If we're at the end, go to the start
        if (tabFocus >= tabs.length) {
          tabFocus = 0;
        }
        // Move left
      } else if (e.keyCode === 37) {
        tabFocus--;
        // If we're at the start, move to the end
        if (tabFocus < 0) {
          tabFocus = tabs.length - 1;
        }
      }
      tabs[tabFocus].setAttribute("tabindex", 0);
      tabs[tabFocus].focus();
    }
  });
});
function setActiveTab(target) {
  const parent = target.parentNode;
  const grandparent = parent.parentNode;
  // console.log(grandparent);
  // Remove all current selected tabs
  parent
    .querySelectorAll('[aria-selected="true"]')
    .forEach(t => t.setAttribute("aria-selected", false));
  // Set this tab as selected
  target.setAttribute("aria-selected", true);
  // Hide all tab panels
  grandparent
    .querySelectorAll('[role="tabpanel"]')
    .forEach(p => p.setAttribute("hidden", true));
  // Show the selected panel
  grandparent.parentNode
    .querySelector(`#${target.getAttribute("aria-controls")}`)
    .removeAttribute("hidden");
}
function changeTabs(e) {
  // get the containing list of the tab that was just clicked
  const tabList = e.target.parentNode;

  // get all of the sibling tabs
  const buttons = Array.apply(null, tabList.querySelectorAll('button'));

  // loop over the siblings to discover which index thje clicked one was
  const { index } = buttons.reduce(({ found, index }, button) => {
    if (!found && buttons[index] === e.target) {
      return { found: true, index };
    } else if (!found) {
      return { found, index: index + 1 };
    } else {
      return { found, index };
    }
  }, { found: false, index: 0 });

  // get the tab container
  const container = tabList.parentNode;
  // read the data-tab-group value from the container, e.g. "os"
  const { tabGroup } = container.dataset;
  // get a list of all the tab groups that match this value on the page
  const groups = document.querySelectorAll('[data-tab-group=' + tabGroup + ']');

  // for each of the found tab groups, find the tab button at the previously discovered index and select it for each group
  groups.forEach((group) => {
    const target = group.querySelectorAll('button')[index];
    setActiveTab(target);
  });
}
</script>
<p>You can use Elasticsearch&#8217;s application logs to monitor your cluster and diagnose issues.
If you run Elasticsearch as a service, the default location of the logs varies based on
your platform and installation method:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="logs">
    <button role="tab"
            aria-selected="true"
            aria-controls="docker-tab-logs"
            id="docker-logs">
      Docker
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="deb-tab-logs"
            id="deb-logs">
      Debian (APT)
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-logs"
            id="rpm-logs"
            tabindex="-1">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-logs"
            id="mac-logs"
            tabindex="-1">
      macOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="brew-tab-logs"
            id="brew-logs"
            tabindex="-1">
      Brew
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-logs"
            id="linux-logs"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-zip-tab-logs"
            id="win-zip-logs"
            tabindex="-1">
      Windows .zip
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-msi-tab-logs"
            id="win--msilogs"
            tabindex="-1">
      Windows .msi
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="docker-tab-logs"
       aria-labelledby="docker-logs">
<p>On <a class="xref" href="install-elasticsearch.html#docker" title="Install Elasticsearch with Docker">Docker</a>, log messages go to the console and are handled by the
configured Docker logging driver. To access logs, run <code class="literal">docker logs</code>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-logs"
       aria-labelledby="deb-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#deb" title="Install Elasticsearch with Debian Package">Debian installations</a>, Elasticsearch writes logs to <code class="literal">/var/log/elasticsearch</code>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-logs"
       aria-labelledby="rpm-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#rpm" title="Install Elasticsearch with RPM">RPM installations</a>, Elasticsearch writes logs to <code class="literal">/var/log/elasticsearch</code>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-logs"
       aria-labelledby="mac-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#targz" title="Install Elasticsearch from archive on Linux or MacOS">macOS <code class="literal">.tar.gz</code></a> installations, Elasticsearch writes logs to
<code class="literal">$ES_HOME/logs</code>.</p>
<p>Files in <code class="literal">$ES_HOME</code> risk deletion during an upgrade. In production, we strongly
recommend you set <code class="literal">path.logs</code> to a location outside of <code class="literal">$ES_HOME</code>.
See <a class="xref" href="important-settings.html#path-settings" title="Path settings">Path settings</a>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="brew-tab-logs"
       aria-labelledby="brew-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#brew" title="Install Elasticsearch on macOS with Homebrew">macOS Homebrew</a> installations, Elasticsearch writes logs to
<code class="literal">/usr/local/var/log/elasticsearch</code>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-logs"
       aria-labelledby="linux-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#targz" title="Install Elasticsearch from archive on Linux or MacOS">Linux <code class="literal">.tar.gz</code></a> installations, Elasticsearch writes logs to
<code class="literal">$ES_HOME/logs</code>.</p>
<p>Files in <code class="literal">$ES_HOME</code> risk deletion during an upgrade. In production, we strongly
recommend you set <code class="literal">path.logs</code> to a location outside of <code class="literal">$ES_HOME</code>.
See <a class="xref" href="important-settings.html#path-settings" title="Path settings">Path settings</a>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-zip-tab-logs"
       aria-labelledby="win-zip-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#zip-windows" title="Install Elasticsearch with .zip on Windows">Windows <code class="literal">.zip</code></a> installations, Elasticsearch writes logs to
<code class="literal">%ES_HOME%\logs</code>.</p>
<p>Files in <code class="literal">%ES_HOME%</code> risk deletion during an upgrade. In production, we strongly
recommend you set <code class="literal">path.logs</code> to a location outside of <code class="literal">%ES_HOME%`</code>.
See <a class="xref" href="important-settings.html#path-settings" title="Path settings">Path settings</a>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-msi-tab-logs"
       aria-labelledby="win-msi-logs"
       hidden="">
<p>For <a class="xref" href="install-elasticsearch.html#windows" title="Install Elasticsearch with Windows MSI Installer">Windows <code class="literal">.msi</code></a> installations, Elasticsearch writes logs to
<code class="literal">%ALLUSERSPROFILE%\Elastic\Elasticsearch\logs</code>.</p>
  </div>
</div>
<p>If you run Elasticsearch from the command line, Elasticsearch prints logs to the standard output
(<code class="literal">stdout</code>).</p>
<h3><a id="loggin-configuration"></a>Logging configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/logging-config.asciidoc">edit</a></h3>
<p>Elasticsearch uses <a href="https://logging.apache.org/log4j/2.x/" class="ulink" target="_top">Log4j 2</a> for
logging. Log4j 2 can be configured using the log4j2.properties
file. Elasticsearch exposes three properties, <code class="literal">${sys:es.logs.base_path}</code>,
<code class="literal">${sys:es.logs.cluster_name}</code>, and <code class="literal">${sys:es.logs.node_name}</code> that can be
referenced in the configuration file to determine the location of the log
files. The property <code class="literal">${sys:es.logs.base_path}</code> will resolve to the log directory,
<code class="literal">${sys:es.logs.cluster_name}</code> will resolve to the cluster name (used as the
prefix of log filenames in the default configuration), and
<code class="literal">${sys:es.logs.node_name}</code> will resolve to the node name (if the node name is
explicitly set).</p>
<p>For example, if your log directory (<code class="literal">path.logs</code>) is <code class="literal">/var/log/elasticsearch</code> and
your cluster is named <code class="literal">production</code> then <code class="literal">${sys:es.logs.base_path}</code> will resolve
to <code class="literal">/var/log/elasticsearch</code> and
<code class="literal">${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}.log</code>
will resolve to <code class="literal">/var/log/elasticsearch/production.log</code>.</p>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">######## Server JSON ############################
appender.rolling.type = RollingFile <a id="CO9-1"></a><i class="conum" data-value="1"></i>
appender.rolling.name = rolling
appender.rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_server.json <a id="CO9-2"></a><i class="conum" data-value="2"></i>
appender.rolling.layout.type = ESJsonLayout <a id="CO9-3"></a><i class="conum" data-value="3"></i>
appender.rolling.layout.type_name = server <a id="CO9-4"></a><i class="conum" data-value="4"></i>
appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.json.gz <a id="CO9-5"></a><i class="conum" data-value="5"></i>
appender.rolling.policies.type = Policies
appender.rolling.policies.time.type = TimeBasedTriggeringPolicy <a id="CO9-6"></a><i class="conum" data-value="6"></i>
appender.rolling.policies.time.interval = 1 <a id="CO9-7"></a><i class="conum" data-value="7"></i>
appender.rolling.policies.time.modulate = true <a id="CO9-8"></a><i class="conum" data-value="8"></i>
appender.rolling.policies.size.type = SizeBasedTriggeringPolicy <a id="CO9-9"></a><i class="conum" data-value="9"></i>
appender.rolling.policies.size.size = 256MB <a id="CO9-10"></a><i class="conum" data-value="10"></i>
appender.rolling.strategy.type = DefaultRolloverStrategy
appender.rolling.strategy.fileIndex = nomax
appender.rolling.strategy.action.type = Delete <a id="CO9-11"></a><i class="conum" data-value="11"></i>
appender.rolling.strategy.action.basepath = ${sys:es.logs.base_path}
appender.rolling.strategy.action.condition.type = IfFileName <a id="CO9-12"></a><i class="conum" data-value="12"></i>
appender.rolling.strategy.action.condition.glob = ${sys:es.logs.cluster_name}-* <a id="CO9-13"></a><i class="conum" data-value="13"></i>
appender.rolling.strategy.action.condition.nested_condition.type = IfAccumulatedFileSize <a id="CO9-14"></a><i class="conum" data-value="14"></i>
appender.rolling.strategy.action.condition.nested_condition.exceeds = 2GB <a id="CO9-15"></a><i class="conum" data-value="15"></i>
################################################</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configure the <code class="literal">RollingFile</code> appender</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Log to <code class="literal">/var/log/elasticsearch/production_server.json</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use JSON layout.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">type_name</code> is a flag populating the <code class="literal">type</code> field in a <code class="literal">ESJsonLayout</code>.
It can be used to distinguish different types of logs more easily when parsing them.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>Roll logs to <code class="literal">/var/log/elasticsearch/production-yyyy-MM-dd-i.json</code>; logs
will be compressed on each roll and <code class="literal">i</code> will be incremented</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use a time-based roll policy</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-7"><i class="conum" data-value="7"></i></a></p>
</td>
<td align="left" valign="top">
<p>Roll logs on a daily basis</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-8"><i class="conum" data-value="8"></i></a></p>
</td>
<td align="left" valign="top">
<p>Align rolls on the day boundary (as opposed to rolling every twenty-four
hours)</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-9"><i class="conum" data-value="9"></i></a></p>
</td>
<td align="left" valign="top">
<p>Using a size-based roll policy</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-10"><i class="conum" data-value="10"></i></a></p>
</td>
<td align="left" valign="top">
<p>Roll logs after 256 MB</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-11"><i class="conum" data-value="11"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use a delete action when rolling logs</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-12"><i class="conum" data-value="12"></i></a></p>
</td>
<td align="left" valign="top">
<p>Only delete logs matching a file pattern</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-13"><i class="conum" data-value="13"></i></a></p>
</td>
<td align="left" valign="top">
<p>The pattern is to only delete the main logs</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-14"><i class="conum" data-value="14"></i></a></p>
</td>
<td align="left" valign="top">
<p>Only delete if we have accumulated too many compressed logs</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-15"><i class="conum" data-value="15"></i></a></p>
</td>
<td align="left" valign="top">
<p>The size condition on the compressed logs is 2 GB</p>
</td>
</tr>
</table>
</div>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">######## Server -  old style pattern ###########
appender.rolling_old.type = RollingFile
appender.rolling_old.name = rolling_old
appender.rolling_old.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_server.log <a id="CO10-1"></a><i class="conum" data-value="1"></i>
appender.rolling_old.layout.type = PatternLayout
appender.rolling_old.layout.pattern = [%d{ISO8601}][%-5p][%-25c{1.}] [%node_name]%marker %m%n
appender.rolling_old.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.old_log.gz</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO10-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The configuration for <code class="literal">old style</code> pattern appenders. These logs will be saved in <code class="literal">*.log</code> files and if archived will be in <code class="literal">*
.log.gz</code> files. Note that these should be considered deprecated and will be removed in the future.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Log4j&#8217;s configuration parsing gets confused by any extraneous whitespace;
if you copy and paste any Log4j settings on this page, or enter any Log4j
configuration in general, be sure to trim any leading and trailing whitespace.</p>
</div>
</div>
<p>Note than you can replace <code class="literal">.gz</code> by <code class="literal">.zip</code> in <code class="literal">appender.rolling.filePattern</code> to
compress the rolled logs using the zip format. If you remove the <code class="literal">.gz</code>
extension then logs will not be compressed as they are rolled.</p>
<p>If you want to retain log files for a specified period of time, you can use a
rollover strategy with a delete action.</p>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">appender.rolling.strategy.type = DefaultRolloverStrategy <a id="CO11-1"></a><i class="conum" data-value="1"></i>
appender.rolling.strategy.action.type = Delete <a id="CO11-2"></a><i class="conum" data-value="2"></i>
appender.rolling.strategy.action.basepath = ${sys:es.logs.base_path} <a id="CO11-3"></a><i class="conum" data-value="3"></i>
appender.rolling.strategy.action.condition.type = IfFileName <a id="CO11-4"></a><i class="conum" data-value="4"></i>
appender.rolling.strategy.action.condition.glob = ${sys:es.logs.cluster_name}-* <a id="CO11-5"></a><i class="conum" data-value="5"></i>
appender.rolling.strategy.action.condition.nested_condition.type = IfLastModified <a id="CO11-6"></a><i class="conum" data-value="6"></i>
appender.rolling.strategy.action.condition.nested_condition.age = 7D <a id="CO11-7"></a><i class="conum" data-value="7"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO11-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configure the <code class="literal">DefaultRolloverStrategy</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO11-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configure the <code class="literal">Delete</code> action for handling rollovers</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO11-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The base path to the Elasticsearch logs</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO11-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The condition to apply when handling rollovers</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO11-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>Delete files from the base path matching the glob
<code class="literal">${sys:es.logs.cluster_name}-*</code>; this is the glob that log files are rolled
to; this is needed to only delete the rolled Elasticsearch logs but not also
delete the deprecation and slow logs</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO11-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>A nested condition to apply to files matching the glob</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO11-7"><i class="conum" data-value="7"></i></a></p>
</td>
<td align="left" valign="top">
<p>Retain logs for seven days</p>
</td>
</tr>
</table>
</div>
<p>Multiple configuration files can be loaded (in which case they will get merged)
as long as they are named <code class="literal">log4j2.properties</code> and have the Elasticsearch config
directory as an ancestor; this is useful for plugins that expose additional
loggers. The logger section contains the java packages and their corresponding
log level. The appender section contains the destinations for the logs.
Extensive information on how to customize logging and all the supported
appenders can be found on the
<a href="https://logging.apache.org/log4j/2.x/manual/configuration.html" class="ulink" target="_top">Log4j
documentation</a>.</p>
<h3><a id="configuring-logging-levels"></a>Configuring logging levels<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/logging-config.asciidoc">edit</a></h3>
<p>Each Java package in the <a href="https://github.com/elastic/elasticsearch/" class="ulink" target="_top">Elasticsearch source code</a> has a related logger. For
example, the <code class="literal">org.elasticsearch.discovery</code> package has
<code class="literal">logger.org.elasticsearch.discovery</code> for logs related to the
<a class="xref" href="modules-discovery.html#modules-discovery-hosts-providers" title="Discovery">discovery</a> process.</p>
<p>To get more or less verbose logs, use the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster
update settings API</a> to change the related logger&#8217;s log level. Each logger
accepts Log4j 2&#8217;s built-in log levels, from least to most verbose: <code class="literal">OFF</code>,
<code class="literal">FATAL</code>, <code class="literal">ERROR</code>, <code class="literal">WARN</code>, <code class="literal">INFO</code>, <code class="literal">DEBUG</code>, and <code class="literal">TRACE</code>. The default log level is
<code class="literal">INFO</code>. Messages logged at higher verbosity levels (<code class="literal">DEBUG</code> and <code class="literal">TRACE</code>) are
only intended for expert use.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
  "transient": {
    "logger.org.elasticsearch.discovery": "DEBUG"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/31.console"></div>
<p>Other ways to change log levels include:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p><code class="literal">elasticsearch.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">logger.org.elasticsearch.discovery: DEBUG</pre>
</div>
<p>This is most appropriate when debugging a problem on a single node.</p>
</li>
<li class="listitem">
<p><code class="literal">log4j2.properties</code>:</p>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">logger.discovery.name = org.elasticsearch.discovery
logger.discovery.level = debug</pre>
</div>
<p>This is most appropriate when you already need to change your Log4j 2
configuration for other reasons. For example, you may want to send logs for a
particular logger to another file. However, these use cases are rare.</p>
</li>
</ol>
</div>
<h3><a id="deprecation-logging"></a>Deprecation logging<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/logging-config.asciidoc">edit</a></h3>
<p>Elasticsearch also writes deprecation logs to the log directory. These logs record a
message when you use deprecated Elasticsearch functionality. You can use the deprecation
logs to update your application before upgrading Elasticsearch to a new major version.</p>
<p>By default, Elasticsearch rolls and compresses deprecation logs at 1GB. The default
configuration preserves a maximum of five log files: four rolled logs and an
active log.</p>
<p>Elasticsearch emits deprecation log messages at the <code class="literal">DEPRECATION</code> level. To stop writing
deprecation log messages, set <code class="literal">logger.deprecation.level</code> to <code class="literal">error</code>:</p>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">logger.deprecation.level = error</pre>
</div>
<p>You can identify what is triggering deprecated functionality if <code class="literal">X-Opaque-Id</code> was used as an HTTP header.
The user ID is included in the <code class="literal">X-Opaque-ID</code> field in deprecation JSON logs.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "type": "deprecation",
  "timestamp": "2019-08-30T12:07:07,126+02:00",
  "level": "WARN",
  "component": "o.e.d.r.a.a.i.RestCreateIndexAction",
  "cluster.name": "distribution_run",
  "node.name": "node-0",
  "message": "[types removal] Using include_type_name in create index requests is deprecated. The parameter will be removed in the next major version.",
  "x-opaque-id": "MY_USER_ID",
  "cluster.uuid": "Aq-c-PAeQiK3tfBYtig9Bw",
  "node.id": "D7fUYfnfTLa2D7y-xw6tZg"
}</pre>
</div>
<h3><a id="json-logging"></a>JSON log format<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/logging-config.asciidoc">edit</a></h3>
<p>To make parsing Elasticsearch logs easier, logs are now printed in a JSON format.
This is configured by a Log4J layout property <code class="literal">appender.rolling.layout.type = ESJsonLayout</code>.
This layout requires a <code class="literal">type_name</code> attribute to be set which is used to distinguish
logs streams when parsing.</p>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">appender.rolling.layout.type = ESJsonLayout
appender.rolling.layout.type_name = server</pre>
</div>
<p>Each line contains a single JSON document with the properties configured in <code class="literal">ESJsonLayout</code>.
See this class <a href="https://artifacts.elastic.co/javadoc/org/elasticsearch/elasticsearch/7.10.2/org/elasticsearch/common/logging/ESJsonLayout.html" class="ulink" target="_top">javadoc</a> for more details.
However if a JSON document contains an exception, it will be printed over multiple lines.
The first line will contain regular properties and subsequent lines will contain the
stacktrace formatted as a JSON array.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can still use your own custom layout. To do that replace the line
<code class="literal">appender.rolling.layout.type</code> with a different layout. See sample below:</p>
</div>
</div>
<div class="pre_wrapper lang-properties">
<pre class="programlisting prettyprint lang-properties">appender.rolling.type = RollingFile
appender.rolling.name = rolling
appender.rolling.fileName = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}_server.log
appender.rolling.layout.type = PatternLayout
appender.rolling.layout.pattern = [%d{ISO8601}][%-5p][%-25c{1.}] [%node_name]%marker %.-10000m%n
appender.rolling.filePattern = ${sys:es.logs.base_path}${sys:file.separator}${sys:es.logs.cluster_name}-%d{yyyy-MM-dd}-%i.log.gz</pre>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-settings"></a>Machine learning settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ml-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p><a id="ml-settings-description"></a>You do not need to configure any settings to use machine learning. It is enabled by default.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Machine learning uses SSE4.2 instructions, so it works only on machines whose
CPUs <a href="https://en.wikipedia.org/wiki/SSE4#Supporting_CPUs" class="ulink" target="_top">support</a> SSE4.2. If you run Elasticsearch on older
hardware, you must disable machine learning (by setting <code class="literal">xpack.ml.enabled</code> to <code class="literal">false</code>).</p>
</div>
</div>
<h4><a id="general-ml-settings"></a>General machine learning settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ml-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">node.roles: [ ml ]</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Set <code class="literal">node.roles</code> to contain <code class="literal">ml</code> to identify
the node as a <em>machine learning node</em> that is capable of running jobs. Every node is a machine learning
node by default.
</p>
<p>If you use the <code class="literal">node.roles</code> setting, then all required roles must be explicitly
set. Consult <a class="xref" href="settings.html#modules-node" title="Node">Node</a> to learn more.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>On dedicated coordinating nodes or dedicated master nodes, do not set
the <code class="literal">ml</code> role.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Set to <code class="literal">true</code> (default) to enable machine learning APIs
on the node.
</p>
<p>If set to <code class="literal">false</code>, the machine learning APIs are disabled on the node. Therefore the node
cannot open jobs, start datafeeds, or receive transport (internal) communication
requests related to machine learning APIs. If the node is a coordinating node, machine learning requests
from clients (including Kibana) also fail. For more information about disabling
machine learning in specific Kibana instances, see
<a href="https://www.elastic.co/guide/en/kibana/7.10/ml-settings-kb.html" class="ulink" target="_top">Kibana machine learning settings</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you want to use machine learning features in your cluster, it is recommended
that you set <code class="literal">xpack.ml.enabled</code> to <code class="literal">true</code> on all nodes. This is the default
behavior. At a minimum, it must be enabled on all master-eligible nodes. If you
want to use machine learning features in clients or Kibana, it must also be enabled on all
coordinating nodes.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.inference_model.cache_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The maximum inference cache size allowed.
The inference cache exists in the JVM heap on each ingest node. The cache
affords faster processing times for the <code class="literal">inference</code> processor. The value can be
a static byte sized value (i.e. "2gb") or a percentage of total allocated heap.
The default is "40%". See also <a class="xref" href="settings.html#model-inference-circuit-breaker" title="Machine learning circuit breaker settings">Machine learning circuit breaker settings</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-interference-model-ttl"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.ml.inference_model.time_to_live</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The time to live (TTL) for models in the
inference model cache. The TTL is calculated from last access. The <code class="literal">inference</code>
processor attempts to load the model from cache. If the <code class="literal">inference</code> processor
does not receive any documents for the duration of the TTL, the referenced model
is flagged for eviction from the cache. If a document is processed later, the
model is again loaded into the cache. Defaults to <code class="literal">5m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_inference_processors</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The total number of <code class="literal">inference</code> type
processors allowed across all ingest pipelines. Once the limit is reached,
adding an <code class="literal">inference</code> processor to a pipeline is disallowed. Defaults to <code class="literal">50</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_machine_memory_percent</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum percentage of the machine&#8217;s
memory that machine learning may use for running analytics processes. (These processes are
separate to the Elasticsearch JVM.) Defaults to <code class="literal">30</code> percent. The limit is based on the
total memory of the machine, not current free memory. Jobs are not allocated to
a node if doing so would cause the estimated memory use of machine learning jobs to exceed
the limit.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_model_memory_limit</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum <code class="literal">model_memory_limit</code> property
value that can be set for any job on this node. If you try to create a job with
a <code class="literal">model_memory_limit</code> property value that is greater than this setting value,
an error occurs. Existing jobs are not affected when you update this setting.
For more information about the <code class="literal">model_memory_limit</code> property, see
<a class="xref" href="ml-apis.html#put-analysislimits">`analysis_limits`</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack.ml.max_open_jobs"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.ml.max_open_jobs</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum number of jobs that can run
simultaneously on a node. Defaults to <code class="literal">20</code>. In this context, jobs include both
anomaly detection jobs and data frame analytics jobs. The maximum number of jobs is also
constrained by memory usage. Thus if the estimated memory usage of the jobs
would be higher than allowed, fewer jobs will run on a node. Prior to version
7.1, this setting was a per-node non-dynamic setting. It became a cluster-wide
dynamic setting in version 7.1. As a result, changes to its value after node
startup are used only after every node in the cluster is running version 7.1 or
higher. The maximum permitted value is <code class="literal">512</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.nightly_maintenance_requests_per_second</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The rate at which the nightly maintenance
task deletes expired model snapshots and results. The setting is a proxy to the
<a class="xref" href="docs.html#docs-delete-by-query-throttle" title="Throttling delete requests">requests_per_second</a> parameter used in the
delete by query requests and controls throttling. Valid values must be greater
than <code class="literal">0.0</code> or equal to <code class="literal">-1.0</code> where <code class="literal">-1.0</code> means a default value is used.
Defaults to <code class="literal">-1.0</code>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.node_concurrent_job_allocations</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum number of jobs that can
concurrently be in the <code class="literal">opening</code> state on each node. Typically, jobs spend a
small amount of time in this state before they move to <code class="literal">open</code> state. Jobs that
must restore large models when they are opening spend more time in the <code class="literal">opening</code>
state. Defaults to <code class="literal">2</code>.
</dd>
</dl>
</div>
<h4><a id="advanced-ml-settings"></a>Advanced machine learning settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ml-settings.asciidoc">edit</a></h4>
<p>These settings are for advanced use cases; the default values are generally
sufficient:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.ml.enable_config_migration</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Reserved.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_anomaly_records</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The maximum number of records that are
output per bucket. The default value is <code class="literal">500</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_lazy_ml_nodes</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The number of lazily spun up machine learning nodes.
Useful in situations where machine learning nodes are not desired until the first machine learning job
opens. It defaults to <code class="literal">0</code> and has a maximum acceptable value of <code class="literal">3</code>. If the
current number of machine learning nodes is greater than or equal to this setting, it is
assumed that there are no more lazy nodes available as the desired number
of nodes have already been provisioned. If a job is opened and this setting has
a value greater than zero and there are no nodes that can accept the job, the
job stays in the <code class="literal">OPENING</code> state until a new machine learning node is added to the cluster
and the job is assigned to run on that node.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This setting assumes some external process is capable of adding machine learning
nodes to the cluster. This setting is only useful when used in conjunction with
such an external process.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.process_connect_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The connection timeout for machine learning processes
that run separately from the Elasticsearch JVM. Defaults to <code class="literal">10s</code>. Some machine learning processing
is done by processes that run separately to the Elasticsearch JVM. When such processes
are started they must connect to the Elasticsearch JVM. If such a process does not
connect within the time period specified by this setting then the process is
assumed to have failed. Defaults to <code class="literal">10s</code>. The minimum value for this setting is
<code class="literal">5s</code>.
</dd>
</dl>
</div>
<h4><a id="model-inference-circuit-breaker"></a>Machine learning circuit breaker settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ml-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">breaker.model_inference.limit</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Limit for the model inference breaker,
which defaults to 50% of the JVM heap. If the parent circuit breaker is less
than 50% of the JVM heap, it is bound to that limit instead. See
<a class="xref" href="settings.html#circuit-breaker" title="Circuit breaker settings">Circuit breaker settings</a>.
</dd>
<dt>
<span class="term">
<code class="literal">breaker.model_inference.overhead</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) A constant that all accounting estimations
are multiplied by to determine a final estimation. Defaults to 1. See
<a class="xref" href="settings.html#circuit-breaker" title="Circuit breaker settings">Circuit breaker settings</a>.
</dd>
<dt>
<span class="term">
<code class="literal">breaker.model_inference.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) The underlying type of the circuit breaker.
There are two valid options: <code class="literal">noop</code> and <code class="literal">memory</code>. <code class="literal">noop</code> means the circuit
breaker does nothing to prevent too much memory usage. <code class="literal">memory</code> means the
circuit breaker tracks the memory used by inference models and can potentially
break and prevent <code class="literal">OutOfMemory</code> errors. The default is <code class="literal">memory</code>.
</dd>
</dl>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="monitoring-settings"></a>Monitoring settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/monitoring-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p>By default, Elasticsearch monitoring features are enabled but data collection is disabled.
To enable data collection, use the <code class="literal">xpack.monitoring.collection.enabled</code> setting.</p>
<p>Except where noted otherwise, these settings can be dynamically updated on a
live cluster with the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster-update-settings</a> API.</p>
<p>To adjust how monitoring data is displayed in the monitoring UI, configure
<a href="https://www.elastic.co/guide/en/kibana/7.10/monitoring-settings-kb.html" class="ulink" target="_top"><code class="literal">xpack.monitoring</code> settings</a> in
<code class="literal">kibana.yml</code>. To control how monitoring data is collected from Logstash,
configure monitoring settings in <code class="literal">logstash.yml</code>.</p>
<p>For more information, see <a class="xref" href="monitor-elasticsearch-cluster.html" title="Monitor a cluster">Monitor a cluster</a>.</p>
<h4><a id="general-monitoring-settings"></a>General monitoring settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.enabled</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.8.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.8.0. Basic License features should always be enabled
</span>
</span>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) This deprecated setting has no effect.
</dd>
</dl>
</div>
<h4><a id="monitoring-collection-settings"></a>Monitoring collection settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
<p><a id="monitoring-settings-description"></a>The <code class="literal">xpack.monitoring.collection</code> settings control how data is collected from
your Elasticsearch nodes.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Set to <code class="literal">true</code> to enable the collection of
monitoring data. When this setting is <code class="literal">false</code> (default), Elasticsearch monitoring data is
not collected and all monitoring data from other sources such as Kibana, Beats,
and Logstash is ignored.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-monitoring-collection-interval"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.interval</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">6.3.0</span>]
<span class="Admonishment-detail">
Deprecated in 6.3.0. Use <code class="literal">xpack.monitoring.collection.enabled</code> set to <code class="literal">false</code> instead.
</span>
</span>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Setting to <code class="literal">-1</code> to disable data collection
is no longer supported beginning with 7.0.0.
</p>
<p>Controls how often data samples are collected. Defaults to <code class="literal">10s</code>. If you
modify the collection interval, set the <code class="literal">xpack.monitoring.min_interval_seconds</code>
option in <code class="literal">kibana.yml</code> to the same value.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.collection.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Controls whether statistics about your
Elasticsearch cluster should be collected. Defaults to <code class="literal">true</code>. This is different from
<code class="literal">xpack.monitoring.collection.enabled</code>, which allows you to enable or disable all
monitoring collection. However, this setting simply disables the collection of
Elasticsearch data while still allowing other data (e.g., Kibana, Logstash, Beats, or APM
Server monitoring data) to pass through this cluster.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.cluster.stats.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Timeout for collecting the cluster
statistics, in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">10s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.node.stats.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Timeout for collecting the node statistics,
in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">10s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.indices</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Controls which indices the
monitoring features collect data from. Defaults to all indices. Specify the index
names as a comma-separated list, for example <code class="literal">test1,test2,test3</code>. Names can
include wildcards, for example <code class="literal">test*</code>. You can explicitly exclude indices by
prepending <code class="literal">-</code>. For example <code class="literal">test*,-test3</code> will monitor all indexes that start
with <code class="literal">test</code> except for <code class="literal">test3</code>. System indices like .security* or .kibana*
always start with a <code class="literal">.</code> and generally should be monitored. Consider adding <code class="literal">.*</code>
to the list of indices ensure monitoring of system indices. For example:
<code class="literal">.*,test*,-test3</code>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.index.stats.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Timeout for collecting index statistics,
in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">10s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.index.recovery.active_only</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Controls whether or not all recoveries are
collected. Set to <code class="literal">true</code> to collect only active recoveries. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.index.recovery.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Timeout for collecting the recovery
information, in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">10s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-monitoring-history-duration"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.history.duration</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) Retention duration beyond which the
indices created by a monitoring exporter are automatically deleted, in
<a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">7d</code> (7 days).
</p>
<p>This setting has a minimum value of <code class="literal">1d</code> (1 day) to ensure that something is
being monitored and it cannot be disabled.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This setting currently impacts only <code class="literal">local</code>-type exporters. Indices
created using the <code class="literal">http</code> exporter are not deleted automatically.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Configures where the agent stores monitoring
data. By default, the agent uses a local exporter that indexes monitoring data
on the cluster where it is installed. Use an HTTP exporter to send data to a
separate monitoring cluster. For more information, see
<a class="xref" href="settings.html#local-exporter-settings" title="Local exporter settings">Local exporter settings</a>,
<a class="xref" href="settings.html#http-exporter-settings" title="HTTP exporter settings">HTTP exporter settings</a>, and <a class="xref" href="how-monitoring-works.html" title="How monitoring works"><em>How it works</em></a>.
</dd>
</dl>
</div>
<h4><a id="local-exporter-settings"></a>Local exporter settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
<p>The <code class="literal">local</code> exporter is the default exporter used by monitoring features. As the
name is meant to imply, it exports data to the <em>local</em> cluster, which means that
there is not much needed to be configured.</p>
<p>If you do not supply <em>any</em> exporters, then the monitoring features automatically
create one for you. If any exporter is provided, then no default is added.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.exporters.my_local:
  type: local</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">type</code>
</span>
</dt>
<dd>
The value for a Local exporter must always be <code class="literal">local</code> and it is required.
</dd>
<dt>
<span class="term">
<code class="literal">use_ingest</code>
</span>
</dt>
<dd>
Whether to supply a placeholder pipeline to the cluster and a pipeline processor
with every bulk request. The default value is <code class="literal">true</code>. If disabled, then it means
that it will not use pipelines, which means that a future release cannot
automatically upgrade bulk requests to future-proof them.
</dd>
<dt>
<span class="term">
<code class="literal">cluster_alerts.management.enabled</code>
</span>
</dt>
<dd>
Whether to create cluster alerts for this cluster. The default value is <code class="literal">true</code>.
To use this feature, Watcher must be enabled.  If you have a basic license,
cluster alerts are not displayed.
</dd>
<dt>
<span class="term">
<code class="literal">wait_master.timeout</code>
</span>
</dt>
<dd>
Time to wait for the master node to setup <code class="literal">local</code> exporter for monitoring, in
<a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. After that wait period, the non-master nodes warn the
user for possible missing configuration. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
<h4><a id="http-exporter-settings"></a>HTTP exporter settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/monitoring-settings.asciidoc">edit</a></h4>
<p>The following lists settings that can be supplied with the <code class="literal">http</code> exporter.
All settings are shown as what follows the name you select for your exporter:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.exporters.my_remote:
  type: http
  host: ["host:port", ...]</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">type</code>
</span>
</dt>
<dd>
The value for an HTTP exporter must always be <code class="literal">http</code> and it is required.
</dd>
<dt>
<span class="term">
<code class="literal">host</code>
</span>
</dt>
<dd>
<p>
Host supports multiple formats, both as an array or as a single value. Supported
formats include <code class="literal">hostname</code>, <code class="literal">hostname:port</code>,
<code class="literal">http://hostname</code> <code class="literal">http://hostname:port</code>, <code class="literal">https://hostname</code>, and
<code class="literal">https://hostname:port</code>. Hosts cannot be assumed. The default scheme is always
<code class="literal">http</code> and the default port is always <code class="literal">9200</code> if not supplied as part of the
<code class="literal">host</code> string.
</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.exporters:
  example1:
    type: http
    host: "10.1.2.3"
  example2:
    type: http
    host: ["http://10.1.2.4"]
  example3:
    type: http
    host: ["10.1.2.5", "10.1.2.6"]
  example4:
    type: http
    host: ["https://10.1.2.3:9200"]</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">auth.username</code>
</span>
</dt>
<dd>
The username is required if <code class="literal">auth.secure_password</code> or <code class="literal">auth.password</code> is
supplied.
</dd>
<dt>
<span class="term">
<code class="literal">auth.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>) The
password for the <code class="literal">auth.username</code>. Takes precedence over <code class="literal">auth.password</code> if it is
also specified.
</dd>
<dt>
<span class="term">
<code class="literal">auth.password</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.0. Use <code class="literal">auth.secure_password</code> instead.
</span>
</span> The password for the
<code class="literal">auth.username</code>. If <code class="literal">auth.secure_password</code> is also specified, this setting is
ignored.
</dd>
<dt>
<span class="term">
<code class="literal">connection.timeout</code>
</span>
</dt>
<dd>
Amount of time that the HTTP connection is supposed to wait for a socket to open
for the request, in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. The default value is <code class="literal">6s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">connection.read_timeout</code>
</span>
</dt>
<dd>
Amount of time that the HTTP connection is supposed to wait for a socket to
send back a response, in <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. The default value is
<code class="literal">10 * connection.timeout</code> (<code class="literal">60s</code> if neither are set).
</dd>
<dt>
<span class="term">
<code class="literal">ssl</code>
</span>
</dt>
<dd>
Each HTTP exporter can define its own TLS / SSL settings or inherit them. See
<a class="xref" href="settings.html#ssl-monitoring-settings" title="X-Pack monitoring TLS/SSL settings">X-Pack monitoring TLS/SSL settings</a>.
</dd>
<dt>
<span class="term">
<code class="literal">proxy.base_path</code>
</span>
</dt>
<dd>
The base path to prefix any outgoing request, such as <code class="literal">/base/path</code> (e.g., bulk
requests would then be sent as <code class="literal">/base/path/_bulk</code>). There is no default value.
</dd>
<dt>
<span class="term">
<code class="literal">headers</code>
</span>
</dt>
<dd>
<p>
Optional headers that are added to every request, which can assist with routing
requests through proxies.
</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.exporters.my_remote:
  headers:
    X-My-Array: [abc, def, xyz]
    X-My-Header: abc123</pre>
</div>
<p>Array-based headers are sent <code class="literal">n</code> times where <code class="literal">n</code> is the size of the array.
<code class="literal">Content-Type</code> and <code class="literal">Content-Length</code> cannot be set. Any headers created by the
monitoring agent will override anything defined here.</p>
</dd>
<dt>
<span class="term">
<code class="literal">index.name.time_format</code>
</span>
</dt>
<dd>
A mechanism for changing the default date suffix for the, by default, daily
monitoring indices. The default value is <code class="literal">yyyy.MM.dd</code>, which is why the indices
are created daily.
</dd>
<dt>
<span class="term">
<code class="literal">use_ingest</code>
</span>
</dt>
<dd>
Whether to supply a placeholder pipeline to the monitoring cluster and a
pipeline processor with every bulk request. The default value is <code class="literal">true</code>. If
disabled, then it means that it will not use pipelines, which means that a
future release cannot automatically upgrade bulk requests to future-proof them.
</dd>
<dt>
<span class="term">
<code class="literal">cluster_alerts.management.enabled</code>
</span>
</dt>
<dd>
Whether to create cluster alerts for this cluster. The default value is <code class="literal">true</code>.
To use this feature, Watcher must be enabled. If you have a basic license,
cluster alerts are not displayed.
</dd>
<dt>
<span class="term">
<code class="literal">cluster_alerts.management.blacklist</code>
</span>
</dt>
<dd>
<p>
Prevents the creation of specific cluster alerts. It also removes any applicable
watches that already exist in the current cluster.
</p>
<p>You can add any of the following watch identifiers to the list of blocked alerts:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">elasticsearch_cluster_status</code>
</li>
<li class="listitem">
<code class="literal">elasticsearch_version_mismatch</code>
</li>
<li class="listitem">
<code class="literal">elasticsearch_nodes</code>
</li>
<li class="listitem">
<code class="literal">kibana_version_mismatch</code>
</li>
<li class="listitem">
<code class="literal">logstash_version_mismatch</code>
</li>
<li class="listitem">
<code class="literal">xpack_license_expiration</code>
</li>
</ul>
</div>
<p>For example: <code class="literal">["elasticsearch_version_mismatch","xpack_license_expiration"]</code>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ssl-monitoring-settings"></a>X-Pack monitoring TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="configuring-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the verification of certificates.
Controls the verification of certificates.
</p>
<p>Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server&#8217;s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitoring-tls-ssl-key-trusted-certificate-settings"></a>X-Pack monitoring TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate are optional and would be used if the server requires client authentication for PKI
authentication.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pem_encoded_files"></a>PEM encoded files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_java_keystore_files"></a>Java keystore files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitoring-pkcs12-files"></a>PKCS#12 files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitoring-pkcs11-tokens"></a>PKCS#11 tokens<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use a PKCS#11 token that contains the private key,
certificate and certificates that should be trusted.</p>
<p>PKCS#11 token require additional configuration on the JVM level and can be enabled
via the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS11</code> to indicate that the PKCS#11 token should be used as a keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.exporters.$NAME.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When configuring the PKCS#11 token that your JVM is configured to use as
a keystore or a truststore for Elasticsearch, the PIN for the token can be
configured by setting the appropriate value to <code class="literal">ssl.truststore.password</code>
or <code class="literal">ssl.truststore.secure_password</code> in the context that you are configuring.
Since there can only be one PKCS#11 token configured, only one keystore and
truststore will be usable for configuration in Elasticsearch. This in turn means
that only one certificate can be used for TLS both in the transport and the
http layer.</p>
</div>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-node"></a>Node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h2>
</div></div></div>
<p>Any time that you start an instance of Elasticsearch, you are starting a <em>node</em>. A
collection of connected nodes is called a <a class="xref" href="settings.html#modules-cluster" title="Cluster-level shard allocation and routing settings">cluster</a>. If you
are running a single node of Elasticsearch, then you have a cluster of one node.</p>
<p>Every node in the cluster can handle <a class="xref" href="settings.html#modules-http" title="HTTP">HTTP</a> and
<a class="xref" href="settings.html#modules-transport" title="Transport">Transport</a> traffic by default. The transport layer is used
exclusively for communication between nodes; the HTTP layer is used by REST
clients.</p>
<p><a id="modules-node-description"></a>All nodes know about all the other nodes in the cluster and can forward client
requests to the appropriate node.</p>
<p>By default, a node is all of the following types: master-eligible, data, ingest,
and (if available) machine learning. All data nodes are also transform nodes.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>As the cluster grows and in particular if you have large machine learning jobs or
continuous transforms, consider separating dedicated master-eligible nodes from
dedicated data nodes, machine learning nodes, and transform nodes.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="node-roles"></a>Node roles<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>You can define the roles of a node by setting <code class="literal">node.roles</code>. If you don&#8217;t
configure this setting, then the node has the following roles by default:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">master</code>
</li>
<li class="listitem">
<code class="literal">data</code>
</li>
<li class="listitem">
<code class="literal">data_content</code>
</li>
<li class="listitem">
<code class="literal">data_hot</code>
</li>
<li class="listitem">
<code class="literal">data_warm</code>
</li>
<li class="listitem">
<code class="literal">data_cold</code>
</li>
<li class="listitem">
<code class="literal">ingest</code>
</li>
<li class="listitem">
<code class="literal">ml</code>
</li>
<li class="listitem">
<code class="literal">remote_cluster_client</code>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you set <code class="literal">node.roles</code>, the node is assigned only the roles you specify.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a class="xref" href="settings.html#master-node" title="Master-eligible node">Master-eligible node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">master</code> role (default), which makes it eligible to be
<a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">elected as the <em>master</em> node</a>, which controls the cluster.
</dd>
<dt>
<span class="term">
<a class="xref" href="settings.html#data-node" title="Data node">Data node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">data</code> role (default). Data nodes hold data and perform data
related operations such as CRUD, search, and aggregations. A node with the <code class="literal">data</code> role can fill any of the specialised data node roles.
</dd>
<dt>
<span class="term">
<a class="xref" href="settings.html#node-ingest-node" title="Ingest node">Ingest node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">ingest</code> role (default). Ingest nodes are able to apply an
<a class="xref" href="pipeline.html" title="Pipeline Definition">ingest pipeline</a> to a document in order to transform and enrich the
document before indexing. With a heavy ingest load, it makes sense to use
dedicated ingest nodes and to not include the <code class="literal">ingest</code> role from nodes that have
the <code class="literal">master</code> or <code class="literal">data</code> roles.
</dd>
<dt>
<span class="term">
<a class="xref" href="settings.html#remote-node" title="Remote-eligible node">Remote-eligible node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">remote_cluster_client</code> role (default), which makes it
eligible to act as a remote client. By default, any node in the cluster can act
as a cross-cluster client and connect to remote clusters.
</dd>
<dt>
<span class="term">
<a class="xref" href="settings.html#ml-node" title="Machine learning node">Machine learning node</a>
</span>
</dt>
<dd>
<p>
A node that has <code class="literal">xpack.ml.enabled</code> and the <code class="literal">ml</code> role, which is the default
behavior in the Elasticsearch default distribution. If you want to use machine learning features, there
must be at least one machine learning node in your cluster. For more information about
machine learning features, see <a href="https://www.elastic.co/guide/en/machine-learning/7.10/index.html" class="ulink" target="_top">Machine learning in the Elastic Stack</a>.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use the OSS-only distribution, do not add the <code class="literal">ml</code> role. Otherwise, the
node fails to start.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<a class="xref" href="settings.html#transform-node" title="Transform node">Transform node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">transform</code> role. If you want to use transforms, there
must be at least one transform node in your cluster. For more information, see
<a class="xref" href="settings.html#transform-settings" title="Transforms settings in Elasticsearch">Transforms settings</a> and <a class="xref" href="transforms.html" title="Transforming data"><em>Transforming data</em></a>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Coordinating node<a id="coordinating-node"></a></h3>
<p>Requests like search requests or bulk-indexing requests may involve data held
on different data nodes. A search request, for example, is executed in two
phases which are coordinated by the node which receives the client request&#8201;&#8212;&#8201;the <em>coordinating node</em>.</p>
<p>In the <em>scatter</em> phase, the coordinating node forwards the request to the data
nodes which hold the data.  Each data node executes the request locally and
returns its results to the coordinating node. In the <em>gather</em>  phase, the
coordinating node reduces each data node&#8217;s results into a single global
result set.</p>
<p>Every node is implicitly a coordinating node. This means that a node that has
an explicit empty list of roles via <code class="literal">node.roles</code> will only act as a coordinating
node, which cannot be disabled. As a result, such a node needs to have enough
memory and CPU in order to deal with the gather phase.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="master-node"></a>Master-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>The master node is responsible for lightweight cluster-wide actions such as
creating or deleting an index, tracking which nodes are part of the cluster,
and deciding which shards to allocate to which nodes. It is important for
cluster health to have a stable master node.</p>
<p>Any master-eligible node that is not a <a class="xref" href="settings.html#voting-only-node" title="Voting-only master-eligible node">voting-only node</a> may
be elected to become the master node by the <a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">master election
process</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Master nodes must have access to the <code class="literal">data/</code> directory (just like
<code class="literal">data</code> nodes) as this is where the cluster state is persisted between node
restarts.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="dedicated-master-node"></a>Dedicated master-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h4>
</div></div></div>
<p>It is important for the health of the cluster that the elected master node has
the resources it needs to fulfill its responsibilities. If the elected master
node is overloaded with other tasks then the cluster may not operate well. In
particular, indexing and searching your data can be very resource-intensive, so
in large or high-throughput clusters it is a good idea to avoid using the
master-eligible nodes for tasks such as indexing and searching. You can do this
by configuring three of your nodes to be dedicated master-eligible nodes.
Dedicated master-eligible nodes only have the <code class="literal">master</code> role, allowing them to
focus on managing the cluster. While master nodes can also behave as
<a class="xref" href="settings.html#coordinating-node" title="Coordinating node">coordinating nodes</a> and route search and indexing requests
from clients to data nodes, it is better <em>not</em> to use dedicated master nodes for
this purpose.</p>
<p>To create a dedicated master-eligible node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ master ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="voting-only-node"></a>Voting-only master-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h4>
</div></div></div>
<p>A voting-only master-eligible node is a node that participates in
<a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">master elections</a> but which will not act as the cluster&#8217;s
elected master node. In particular, a voting-only node can serve as a tiebreaker
in elections.</p>
<p>It may seem confusing to use the term "master-eligible" to describe a
voting-only node since such a node is not actually eligible to become the master
at all. This terminology is an unfortunate consequence of history:
master-eligible nodes are those nodes that participate in elections and perform
certain tasks during cluster state publications, and voting-only nodes have the
same responsibilities even if they can never become the elected master.</p>
<p>To configure a master-eligible node as a voting-only node, include <code class="literal">master</code> and
<code class="literal">voting_only</code> in the list of roles. For example to create a voting-only data
node:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data, master, voting_only ]</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">voting_only</code> role requires the default distribution of Elasticsearch and is not
supported in the OSS-only distribution. If you use the OSS-only distribution and add the <code class="literal">voting_only</code>
role then the node will fail to start.  Also note that only nodes with the
<code class="literal">master</code> role can be marked as having the <code class="literal">voting_only</code> role.</p>
</div>
</div>
<p>High availability (HA) clusters require at least three master-eligible nodes, at
least two of which are not voting-only nodes. Such a cluster will be able to
elect a master node even if one of the nodes fails.</p>
<p>Since voting-only nodes never act as the cluster&#8217;s elected master, they may
require less heap and a less powerful CPU than the true master nodes.
However all master-eligible nodes, including voting-only nodes, require
reasonably fast persistent storage and a reliable and low-latency network
connection to the rest of the cluster, since they are on the critical path for
<a class="xref" href="modules-discovery.html#cluster-state-publishing" title="Publishing the cluster state">publishing cluster state updates</a>.</p>
<p>Voting-only master-eligible nodes may also fill other roles in your cluster.
For instance, a node may be both a data node and a voting-only master-eligible
node. A <em>dedicated</em> voting-only master-eligible nodes is a voting-only
master-eligible node that fills no other roles in the cluster. To create a
dedicated voting-only master-eligible node in the default distribution, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ master, voting_only ]</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-node"></a>Data node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Data nodes hold the shards that contain the documents you have indexed. Data
nodes handle data related operations like CRUD, search, and aggregations.
These operations are I/O-, memory-, and CPU-intensive. It is important to
monitor these resources and to add more data nodes if they are overloaded.</p>
<p>The main benefit of having dedicated data nodes is the separation of the master
and data roles.</p>
<p>To create a dedicated data node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data ]</pre>
</div>
<p>In a multi-tier deployment architecture, you use specialised data roles to assign data nodes to specific tiers: <code class="literal">data_content</code>,<code class="literal">data_hot</code>,
<code class="literal">data_warm</code>, or <code class="literal">data_cold</code>. A node can belong to multiple tiers, but a node that has one of the specialised data roles cannot have the
generic <code class="literal">data</code> role.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-content-node"></a><span class="x-pack">Content data node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Content data nodes accommodate user-created content. They enable operations like CRUD,
search and aggregations.</p>
<p>To create a dedicated content node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_content ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-hot-node"></a><span class="x-pack">Hot data node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Hot data nodes store time series data as it enters Elasticsearch. The hot tier must be fast for
both reads and writes, and requires more hardware resources (such as SSD drives).</p>
<p>To create a dedicated hot node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_hot ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-warm-node"></a><span class="x-pack">Warm data node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Warm data nodes store indices that are no longer being regularly updated, but are still being
queried. Query volume is usually at a lower frequency than it was while the index was in the hot tier.
Less performant hardware can usually be used for nodes in this tier.</p>
<p>To create a dedicated warm node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_warm ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-cold-node"></a><span class="x-pack">Cold data node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Cold data nodes store read-only indices that are accessed less frequently. This tier uses less performant hardware and may leverage searchable snapshot indices to minimize the resources required.</p>
<p>To create a dedicated cold node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_cold ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="node-ingest-node"></a>Ingest node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Ingest nodes can execute pre-processing pipelines, composed of one or more
ingest processors. Depending on the type of operations performed by the ingest
processors and the required resources, it may make sense to have dedicated
ingest nodes, that will only perform this specific task.</p>
<p>To create a dedicated ingest node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ ingest ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="coordinating-only-node"></a>Coordinating only node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>If you take away the ability to be able to handle master duties, to hold data,
and pre-process documents, then you are left with a <em>coordinating</em> node that
can only route requests, handle the search reduce phase, and distribute bulk
indexing. Essentially, coordinating only nodes behave as smart load balancers.</p>
<p>Coordinating only nodes can benefit large clusters by offloading the
coordinating node role from data and master-eligible nodes.  They join the
cluster and receive the full <a class="xref" href="cluster.html#cluster-state" title="Cluster state API">cluster state</a>, like every other
node, and they use the cluster state to route requests directly to the
appropriate place(s).</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Adding too many coordinating only nodes to a cluster can increase the
burden on the entire cluster because the elected master node must await
acknowledgement of cluster state updates from every node! The benefit of
coordinating only nodes should not be overstated&#8201;&#8212;&#8201;data nodes can happily
serve the same purpose.</p>
</div>
</div>
<p>To create a dedicated coordinating node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-node"></a>Remote-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>By default, any node in a cluster can act as a cross-cluster client and connect
to <a class="xref" href="modules-remote-clusters.html" title="Remote clusters">remote clusters</a>. Once connected, you can search
remote clusters using <a class="xref" href="modules-cross-cluster-search.html" title="Search across clusters">cross-cluster search</a>. You can also sync
data between clusters using <a class="xref" href="xpack-ccr.html" title="Cross-cluster replication">cross-cluster replication</a>.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ remote_cluster_client ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-node"></a><span class="xpack">Machine learning node</span><a class="xpack_tag" href="/subscriptions"></a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>The machine learning features provide machine learning nodes, which run jobs and handle machine learning API
requests. If <code class="literal">xpack.ml.enabled</code> is set to <code class="literal">true</code> and the node does not have the
<code class="literal">ml</code> role, the node can service API requests but it cannot run jobs.</p>
<p>If you want to use machine learning features in your cluster, you must enable machine learning
(set <code class="literal">xpack.ml.enabled</code> to <code class="literal">true</code>) on all master-eligible nodes. If you want to
use machine learning features in clients (including Kibana), it must also be enabled on all
coordinating nodes. If you have the OSS-only distribution, do not use these settings.</p>
<p>For more information about these settings, see <a class="xref" href="settings.html#ml-settings" title="Machine learning settings in Elasticsearch">Machine learning settings</a>.</p>
<p>To create a dedicated machine learning node in the default distribution, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ ml ]
xpack.ml.enabled: true <a id="CO12-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO12-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">xpack.ml.enabled</code> setting is enabled by default.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="transform-node"></a><span class="xpack">Transform node</span><a class="xpack_tag" href="/subscriptions"></a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Transform nodes run transforms and handle transform API requests. If
you have the OSS-only distribution, do not use these settings. For more information, see
<a class="xref" href="settings.html#transform-settings" title="Transforms settings in Elasticsearch">Transforms settings</a>.</p>
<p>To create a dedicated transform node in the default distribution, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ transform ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="change-node-role"></a>Changing the role of a node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Each data node maintains the following data on disk:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
the shard data for every shard allocated to that node,
</li>
<li class="listitem">
the index metadata corresponding with every shard allocated to that node, and
</li>
<li class="listitem">
the cluster-wide metadata, such as settings and index templates.
</li>
</ul>
</div>
<p>Similarly, each master-eligible node maintains the following data on disk:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
the index metadata for every index in the cluster, and
</li>
<li class="listitem">
the cluster-wide metadata, such as settings and index templates.
</li>
</ul>
</div>
<p>Each node checks the contents of its data path at startup. If it discovers
unexpected data then it will refuse to start. This is to avoid importing
unwanted <a class="xref" href="getting-started-modify-data.html#modules-gateway-dangling-indices" title="Dangling indices">dangling indices</a> which can lead
to a red cluster health. To be more precise, nodes without the <code class="literal">data</code> role will
refuse to start if they find any shard data on disk at startup, and nodes
without both the <code class="literal">master</code> and <code class="literal">data</code> roles will refuse to start if they have any
index metadata on disk at startup.</p>
<p>It is possible to change the roles of a node by adjusting its
<code class="literal">elasticsearch.yml</code> file and restarting it. This is known as <em>repurposing</em> a
node. In order to satisfy the checks for unexpected data described above, you
must perform some extra steps to prepare a node for repurposing when starting
the node without the <code class="literal">data</code> or <code class="literal">master</code> roles.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you want to repurpose a data node by removing the <code class="literal">data</code> role then you
should first use an <a class="xref" href="getting-started-modify-data.html#allocation-filtering" title="Cluster-level shard allocation filtering">allocation filter</a> to safely
migrate all the shard data onto other nodes in the cluster.
</li>
<li class="listitem">
If you want to repurpose a node to have neither the <code class="literal">data</code> nor <code class="literal">master</code> roles
then it is simplest to start a brand-new node with an empty data path and the
desired roles. You may find it safest to use an
<a class="xref" href="getting-started-modify-data.html#allocation-filtering" title="Cluster-level shard allocation filtering">allocation filter</a> to migrate the shard data elsewhere
in the cluster first.
</li>
</ul>
</div>
<p>If it is not possible to follow these extra steps then you may be able to use
the <a class="xref" href="node-tool.html#node-tool-repurpose" title="Changing the role of a node"><code class="literal">elasticsearch-node repurpose</code></a> tool to delete any
excess data that prevents a node from starting.</p>
<h3><a id="_node_data_path_settings"></a>Node data path settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-path"></a><code class="literal">path.data</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Every data and master-eligible node requires access to a data directory where
shards and index and cluster metadata will be stored. The <code class="literal">path.data</code> defaults
to <code class="literal">$ES_HOME/data</code> but can be configured in the <code class="literal">elasticsearch.yml</code> config
file an absolute path or a path relative to <code class="literal">$ES_HOME</code> as follows:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path.data:  /var/elasticsearch/data</pre>
</div>
<p>Like all node settings, it can also be specified on the command line as:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/elasticsearch -Epath.data=/var/elasticsearch/data</pre>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>When using the <code class="literal">.zip</code> or <code class="literal">.tar.gz</code> distributions, the <code class="literal">path.data</code> setting
should be configured to locate the data directory outside the Elasticsearch home
directory, so that the home directory can be deleted without deleting your data!
The RPM and Debian distributions do this for you already.</p>
</div>
</div>
<h3><a id="max-local-storage-nodes"></a><code class="literal">node.max_local_storage_nodes</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
<p>The <a class="xref" href="settings.html#data-path" title="path.data">data path</a> can be shared by multiple nodes, even by nodes from
different clusters. It is recommended however to only run one node of Elasticsearch using
the same data path. This setting is deprecated in 7.x and will be removed in
version 8.0.</p>
<p>By default, Elasticsearch is configured to prevent more than one node from sharing the
same data path. To allow for more than one node (e.g., on your development
machine), use the setting <code class="literal">node.max_local_storage_nodes</code> and set this to a
positive integer larger than one.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Never run different node types (i.e. master, data) from the same data
directory. This can lead to unexpected data loss.</p>
</div>
</div>
<h3><a id="other-node-settings"></a>Other node settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/node.asciidoc">edit</a></h3>
<p>More node settings can be found in <a class="xref" href="settings.html" title="Configuring Elasticsearch"><em>Configuring Elasticsearch</em></a> and <a class="xref" href="important-settings.html" title="Important Elasticsearch configuration"><em>Important Elasticsearch configuration</em></a>,
including:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="important-settings.html#cluster-name" title="Cluster name setting"><code class="literal">cluster.name</code></a>
</li>
<li class="listitem">
<a class="xref" href="important-settings.html#node-name" title="Node name setting"><code class="literal">node.name</code></a>
</li>
<li class="listitem">
<a class="xref" href="settings.html#modules-network" title="Network settings">network settings</a>
</li>
</ul>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-network"></a>Network settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/network.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch binds to localhost only by default.  This is sufficient for you
to run a local development server (or even a development cluster, if you start
multiple nodes on the same machine), but you will need to configure some
<a class="xref" href="settings.html#common-network-settings" title="Commonly used network settings">basic network settings</a> in order to run a real
production cluster across multiple servers.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Be careful with the network configuration!</h3>
<p>Never expose an unprotected node to the public internet.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="common-network-settings"></a>Commonly used network settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/network.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">network.host</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The node will bind to this hostname or IP address and <em>publish</em> (advertise)
this host to other nodes in the cluster. Accepts an IP address, hostname, a
<a class="xref" href="settings.html#network-interface-values" title="Special values for network.host">special value</a>, or an array of any combination of
these. Note that any values containing a <code class="literal">:</code> (e.g., an IPv6 address or
containing one of the <a class="xref" href="settings.html#network-interface-values" title="Special values for network.host">special values</a>) must be
quoted because <code class="literal">:</code> is a special character in YAML. <code class="literal">0.0.0.0</code> is an acceptable
IP address and will bind to all network interfaces. The value <code class="literal">0</code> has the
same effect as the value <code class="literal">0.0.0.0</code>.
</p>
<p>Defaults to <code class="literal">_local_</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">discovery.seed_hosts</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
In order to join a cluster, a node needs to know the hostname or IP address of
at least some of the other nodes in the cluster.  This setting provides the
initial list of addresses this node will try to contact. Accepts IP addresses
or hostnames. If a hostname lookup resolves to multiple IP addresses then each
IP address will be used for discovery.
<a href="https://en.wikipedia.org/wiki/Round-robin_DNS" class="ulink" target="_top">Round robin DNS</a>&#8201;&#8212;&#8201;returning a
different IP from a list on each lookup&#8201;&#8212;&#8201;can be used for discovery; non-
existent IP addresses will throw exceptions and cause another DNS lookup on the
next round of pinging (subject to <a class="xref" href="system-config.html#networkaddress-cache-ttl" title="DNS cache settings">JVM DNS
caching</a>).
</p>
<p>Defaults to <code class="literal">["127.0.0.1", "[::1]"]</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">http.port</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Port to bind to for incoming HTTP requests. Accepts a single value or a range.
If a range is specified, the node will bind to the first available port in the
range.
</p>
<p>Defaults to <code class="literal">9200-9300</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">transport.port</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Port to bind for communication between nodes. Accepts a single value or a
range. If a range is specified, the node will bind to the first available port
in the range.
</p>
<p>Defaults to <code class="literal">9300-9400</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="network-interface-values"></a>Special values for <code class="literal">network.host</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/network.asciidoc">edit</a></h3>
</div></div></div>
<p>The following special values may be passed to <code class="literal">network.host</code>:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">_local_</code>
</span>
</dt>
<dd>
Any loopback addresses on the system, for example <code class="literal">127.0.0.1</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_site_</code>
</span>
</dt>
<dd>
Any site-local addresses on the system, for example <code class="literal">192.168.0.1</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_global_</code>
</span>
</dt>
<dd>
Any globally-scoped addresses on the system, for example <code class="literal">8.8.8.8</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_[networkInterface]_</code>
</span>
</dt>
<dd>
Use the addresses of the network interface called <code class="literal">[networkInterface]</code>. For
example if you wish to use the addresses of an interface called <code class="literal">en0</code> then
set <code class="literal">network.host: _en0_</code>.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="network-interface-values-ipv4-vs-ipv6"></a>IPv4 vs IPv6<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/network.asciidoc">edit</a></h4>
</div></div></div>
<p>These special values will work over both IPv4 and IPv6 by default, but you can
also limit this with the use of <code class="literal">:ipv4</code> of <code class="literal">:ipv6</code> specifiers. For example,
<code class="literal">_en0:ipv4_</code> would only bind to the IPv4 addresses of interface <code class="literal">en0</code>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Discovery in the Cloud</h3>
<p>More special settings are available when running in the Cloud with either the
<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/7.10/discovery-ec2.html" class="ulink" target="_top">EC2 discovery plugin</a> or the
<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/7.10/discovery-gce-network-host.html#discovery-gce-network-host" class="ulink" target="_top">Google Compute Engine discovery plugin</a>
installed.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="advanced-network-settings"></a>Advanced network settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/network.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">network.host</code> setting explained in <a class="xref" href="settings.html#common-network-settings" title="Commonly used network settings">Commonly used network settings</a>
is a shortcut which sets the <em>bind host</em> and the <em>publish host</em> at the same
time. In advanced used cases, such as when running behind a proxy server, you
may need to set these settings to different values:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">network.bind_host</code>
</span>
</dt>
<dd>
This specifies which network interface(s) a node should bind to in order to
listen for incoming requests.  A node can bind to multiple interfaces, e.g.
two network cards, or a site-local address and a local address. Defaults to
<code class="literal">network.host</code>.
</dd>
<dt>
<span class="term">
<code class="literal">network.publish_host</code>
</span>
</dt>
<dd>
The publish host is the single interface that the node advertises to other nodes
in the cluster, so that those nodes can connect to it. Currently an
Elasticsearch node may be bound to multiple addresses, but only publishes one.
If not specified, this defaults to the &#8220;best&#8221; address from <code class="literal">network.host</code>,
sorted by IPv4/IPv6 stack preference, then by reachability. If you set a
<code class="literal">network.host</code> that results in multiple bind addresses yet rely on a specific
address for node-to-node communication, you should explicitly set
<code class="literal">network.publish_host</code>.
</dd>
</dl>
</div>
<p>Both of the above settings can be configured just like <code class="literal">network.host</code>&#8201;&#8212;&#8201;they
accept IP addresses, host names, and
<a class="xref" href="settings.html#network-interface-values" title="Special values for network.host">special values</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="tcp-settings"></a>Advanced TCP settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/network.asciidoc">edit</a></h4>
</div></div></div>
<p>Any component that uses TCP (like the <a class="xref" href="settings.html#modules-http" title="HTTP">HTTP</a> and
<a class="xref" href="settings.html#modules-transport" title="Transport">transport</a> layers) share the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">network.tcp.no_delay</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enable or disable the <a href="https://en.wikipedia.org/wiki/Nagle%27s_algorithm" class="ulink" target="_top">TCP no delay</a>
setting. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.keep_alive</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Configures the <code class="literal">SO_KEEPALIVE</code> option for this socket, which
determines whether it sends TCP keepalive probes.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.keep_idle</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Configures the <code class="literal">TCP_KEEPIDLE</code> option for this socket, which
determines the time in seconds that a connection must be idle before
starting to send TCP keepalive probes. Defaults to <code class="literal">-1</code>, which uses
the system default. This value cannot exceed <code class="literal">300</code> seconds. Only applicable on Linux and macOS,
and requires Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.keep_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Configures the <code class="literal">TCP_KEEPINTVL</code> option for this socket,
which determines the time in seconds between sending TCP keepalive probes.
Defaults to <code class="literal">-1</code>, which uses the system default. This value cannot exceed <code class="literal">300</code> seconds.
Only applicable on Linux and macOS, and requires Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.keep_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Configures the <code class="literal">TCP_KEEPCNT</code> option for this socket, which
determines the number of unacknowledged TCP keepalive probes that may be
sent on a connection before it is dropped. Defaults to <code class="literal">-1</code>,
which uses the system default. Only applicable on Linux and macOS, and requires
Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.reuse_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Should an address be reused or not. Defaults to <code class="literal">true</code> on non-windows
machines.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.send_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The size of the TCP send buffer (specified with <a class="xref" href="api-conventions.html#size-units" title="Unit-less quantities">size units</a>).
By default not explicitly set.
</dd>
<dt>
<span class="term">
<code class="literal">network.tcp.receive_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The size of the TCP receive buffer (specified with <a class="xref" href="api-conventions.html#size-units" title="Unit-less quantities">size units</a>).
By default not explicitly set.
</dd>
</dl>
</div>
<h3><a id="_http_and_transport_network_communication"></a>HTTP and transport network communication<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/network.asciidoc">edit</a></h3>
<p>Each Elasticsearch node uses the network for two different methods of communication:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
it exposes an <a class="xref" href="settings.html#modules-http" title="HTTP">HTTP interface</a> for use by clients.
</li>
<li class="listitem">
it exposes a <a class="xref" href="settings.html#modules-transport" title="Transport">transport interface</a> for communication
between nodes within a cluster, for communication with a
<a class="xref" href="modules-remote-clusters.html" title="Remote clusters">remote cluster</a>, and for the
<a href="https://www.elastic.co/guide/en/elasticsearch/client/java-api/7.10/transport-client.html" class="ulink" target="_top">Java Transport client</a> to communicate with a
cluster.
</li>
</ul>
</div>
<p>The network settings described above apply to both methods of communication,
and you can also configure each interface separately if needed. See the
<a class="xref" href="settings.html#modules-http" title="HTTP">HTTP</a> and <a class="xref" href="settings.html#modules-transport" title="Transport">transport</a> pages for more
details on their respective configurations.</p>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="query-cache"></a>Node query cache settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/query_cache.asciidoc">edit</a></h2>
</div></div></div>
<p>The results of queries used in the filter context are cached in the node query
cache for fast lookup. There is one queries cache per node that is shared by all
shards. The cache uses an LRU eviction policy: when the cache is full, the least
recently used query results are evicted to make way for new data. You cannot
inspect the contents of the query cache.</p>
<p>Term queries and queries used outside of a filter context are not eligible for
caching.</p>
<p>By default, the cache holds a maximum of 10000 queries in up to 10% of the total
heap space. To determine if a query is eligible for caching, Elasticsearch maintains a
query history to track occurrences.</p>
<p>Caching is done on a per segment basis if a segment contains at least 10000
documents and the segment has at least 3% of the total documents of a shard.
Because caching is per segment, merging segments can invalidate cached queries.</p>
<p>The following setting is <em>static</em> and must be configured on every data node in
the cluster:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.queries.cache.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the memory size for the filter cache. Accepts
either a percentage value, like <code class="literal">5%</code>, or an exact value, like <code class="literal">512mb</code>. Defaults to <code class="literal">10%</code>.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="query-cache-index-settings"></a>Query cache index settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/query_cache.asciidoc">edit</a></h3>
</div></div></div>
<p>The following setting is an <em>index</em> setting that can be configured on a
per-index basis. Can only be set at index creation time or on a
<a class="xref" href="indices.html#indices-open-close" title="Open index API">closed index</a>:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.queries.cache.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Static</a>)
Controls whether to enable query caching. Accepts <code class="literal">true</code> (default) or
<code class="literal">false</code>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="search-settings"></a>Search settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/search-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>The following expert settings can be set to manage global search and aggregation
limits.</p>
<div class="variablelist">
<a id="indices-query-bool-max-clause-count"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">indices.query.bool.max_clause_count</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, integer)
Maximum number of clauses a Lucene BooleanQuery can contain. Defaults to <code class="literal">1024</code>.
</p>
<p>This setting limits the number of clauses a Lucene BooleanQuery can have. The
default of 1024 is quite high and should normally be sufficient. This limit does
not only affect Elasticsearchs <code class="literal">bool</code> query, but many other queries are rewritten to Lucene&#8217;s
BooleanQuery internally. The limit is in place to prevent searches from becoming too large
and taking up too much CPU and memory. In case you&#8217;re considering increasing this setting,
make sure you&#8217;ve exhausted all other options to avoid having to do this. Higher values can lead
to performance degradations and memory issues, especially in clusters with a high load or
few resources.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="search-settings-max-buckets"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">search.max_buckets</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>, integer)
Maximum number of <a class="xref" href="search-aggregations-bucket.html" title="Bucket aggregations">aggregation buckets</a> allowed in
a single response. Defaults to 65,535.
</p>
<p>Requests that attempt to return more than this limit will return an error.</p>
</dd>
</dl>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="security-settings"></a>Security settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p>By default, the Elasticsearch security features are disabled when you have a basic or
trial license. To enable security features, use the <code class="literal">xpack.security.enabled</code>
setting.</p>
<p>You configure <code class="literal">xpack.security</code> settings to
<a class="xref" href="settings.html#anonymous-access-settings" title="Anonymous access settings">enable anonymous access</a> and perform message
authentication,
<a class="xref" href="settings.html#field-document-security-settings" title="Document and field level security settings">set up document and field level security</a>,
<a class="xref" href="settings.html#realm-settings" title="Realm settings">configure realms</a>,
<a class="xref" href="settings.html#ssl-tls-settings" title="General TLS settings">encrypt communications with SSL</a>,and
<a class="xref" href="settings.html#auditing-settings" title="Auditing security settings">audit security events</a>.</p>
<p>All of these settings can be added to the <code class="literal">elasticsearch.yml</code> configuration file,
with the exception of the secure settings, which you add to the Elasticsearch keystore.
For more information about creating and updating the Elasticsearch keystore, see
<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure settings</a>.</p>
<h4><a id="general-security-settings"></a>General security settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">true</code> to enable Elasticsearch security features on the node.<br>
</p>
<p>If set to <code class="literal">false</code>, which is the default value for basic and trial licenses,
security features are disabled. It also affects all Kibana instances that
connect to this Elasticsearch instance; you do not need to disable security features in
those <code class="literal">kibana.yml</code> files. For more information about disabling security features
in specific Kibana instances, see
<a href="https://www.elastic.co/guide/en/kibana/7.10/security-settings-kb.html" class="ulink" target="_top">Kibana security settings</a>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you have gold or higher licenses, the default value is <code class="literal">true</code>; we
recommend that you explicitly add this setting to avoid confusion.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.hide_settings</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A comma-separated list of settings that are omitted from the results of the
<a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">cluster nodes info API</a>. You can use wildcards to include
multiple settings in the list.  For example, the following value hides all the
settings for the ad1 active_directory realm:
<code class="literal">xpack.security.authc.realms.active_directory.ad1.*</code>.
The API already omits all <code class="literal">ssl</code> settings, <code class="literal">bind_dn</code>, and <code class="literal">bind_password</code> due to
the sensitive nature of the information.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.fips_mode.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enables fips mode of operation. Set this to <code class="literal">true</code> if you run this Elasticsearch instance in a FIPS 140-2 enabled JVM.  For more information, see <a class="xref" href="configuring-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>. Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
<h4><a id="password-hashing-settings"></a>Password hashing settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.password_hashing.algorithm</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the hashing algorithm that is used for secure user credential storage.
See <a class="xref" href="settings.html#password-hashing-algorithms" title="Password hashing algorithms">Table 2, &#8220;Password hashing algorithms&#8221;</a>. Defaults to <code class="literal">bcrypt</code>.
</dd>
</dl>
</div>
<h4><a id="anonymous-access-settings"></a>Anonymous access settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You can configure the following anonymous access settings in
<code class="literal">elasticsearch.yml</code>.  For more information, see <a class="xref" href="setting-up-authentication.html#anonymous-access" title="Enabling anonymous access">Enabling anonymous access</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.anonymous.username</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The username (principal) of the anonymous user. Defaults to <code class="literal">_es_anonymous_user</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.anonymous.roles</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The roles to associate with the anonymous user. Required.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.anonymous.authz_exception</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
When <code class="literal">true</code>, an HTTP 403 response is returned if the anonymous user
does not have the appropriate permissions for the requested action. The
user is not prompted to provide credentials to access the requested
resource. When set to <code class="literal">false</code>, an HTTP 401 response is returned and the user
can provide credentials with the appropriate permissions to gain
access. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h4><a id="security-automata-settings"></a>Automata Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>In places where the security features accept wildcard patterns (e.g. index
patterns in roles, group matches in the role mapping API), each pattern is
compiled into an Automaton. The follow settings are available to control this
behaviour.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.automata.max_determinized_states</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The upper limit on how many automaton states may be created by a single pattern.
This protects against too-difficult (e.g. exponentially hard) patterns.
Defaults to <code class="literal">100,000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.automata.cache.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Whether to cache the compiled automata. Compiling automata can be CPU intensive
and may slowdown some operations. The cache reduces the frequency with which
automata need to be compiled.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.automata.cache.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of items to retain in the automata cache.
Defaults to <code class="literal">10,000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.automata.cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The length of time to retain in an item in the automata cache (based on most
recent usage).
Defaults to <code class="literal">48h</code> (48 hours).
</dd>
</dl>
</div>
<h4><a id="field-document-security-settings"></a>Document and field level security settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You can set the following document and field level security
settings in <code class="literal">elasticsearch.yml</code>. For more information, see
<a class="xref" href="authorization.html#field-and-document-access-control" title="Setting up field and document level security">Setting up field and document level security</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.dls_fls.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">false</code> to prevent document and field level security
from being configured. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.dls.bitset.cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live for cached <code class="literal">BitSet</code> entries for document level security.
Document level security queries may depend on Lucene BitSet objects, and these are
automatically cached to improve performance. Defaults to expire entries that are
unused for <code class="literal">168h</code> (7 days).
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.dls.bitset.cache.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum memory usage of cached <code class="literal">BitSet</code> entries for document level security.
Document level security queries may depend on Lucene BitSet objects, and these are
automatically cached to improve performance. Defaults to <code class="literal">50mb</code>, after which
least-recently-used entries will be evicted.
</dd>
</dl>
</div>
<h4><a id="token-service-settings"></a>Token service settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You can set the following token service settings in
<code class="literal">elasticsearch.yml</code>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.token.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">false</code> to disable the built-in token service. Defaults to <code class="literal">true</code> unless
 <code class="literal">xpack.security.http.ssl.enabled</code> is <code class="literal">false</code>. This prevents sniffing the token
  from a connection over plain http.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.token.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The length of time that a token is valid for. By default this value is <code class="literal">20m</code> or
20 minutes. The maximum value is 1 hour.
</dd>
</dl>
</div>
<h4><a id="api-key-service-settings"></a>API key service settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You can set the following API key service settings in
<code class="literal">elasticsearch.yml</code>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">false</code> to disable the built-in API key service. Defaults to <code class="literal">true</code> unless
 <code class="literal">xpack.security.http.ssl.enabled</code> is <code class="literal">false</code>. This prevents sniffing the API key
  from a connection over plain http.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.hashing.algorithm</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the hashing algorithm that is used for securing API key credentials.
See <a class="xref" href="settings.html#password-hashing-algorithms" title="Password hashing algorithms">Table 2, &#8220;Password hashing algorithms&#8221;</a>. Defaults to <code class="literal">pbkdf2</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live for cached API key entries. A API key id and a hash of its
API key are cached for this period of time. Specify the time period using
the standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">1d</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.cache.max_keys</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of API key entries that can live in the
cache at any given time. Defaults to 10,000.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.cache.hash_algo</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Expert)
The hashing algorithm that is used for the
in-memory cached API key credentials. For possible values, see <a class="xref" href="settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, &#8220;Cache hash algorithms&#8221;</a>.
Defaults to <code class="literal">ssha256</code>.
</dd>
</dl>
</div>
<h4><a id="realm-settings"></a>Realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You configure realm settings in the <code class="literal">xpack.security.authc.realms</code>
namespace in <code class="literal">elasticsearch.yml</code>.</p>
<p>For example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.authc.realms:

    native.realm1: <a id="CO13-1"></a><i class="conum" data-value="1"></i>
        order: 0
        ...

    ldap.realm2:
        order: 1
        ...

    active_directory.realm3:
        order: 2
        ...
    ...</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO13-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specifies the type of realm (for example, <code class="literal">native</code>, <code class="literal">ldap</code>,
<code class="literal">active_directory</code>, <code class="literal">pki</code>, <code class="literal">file</code>, <code class="literal">kerberos</code>, <code class="literal">saml</code>) and the realm name. This
information is required.</p>
</td>
</tr>
</table>
</div>
<p>The valid settings vary depending on the realm type. For more
information, see <a class="xref" href="setting-up-authentication.html" title="User authentication"><em>User authentication</em></a>.</p>
<h5><a id="ref-realm-settings"></a>Settings valid for all realms<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">order</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The priority of the realm within the realm chain. Realms with a lower order are
consulted first. Although not required, use of this setting is strongly
recommended when you configure multiple realms. Defaults to <code class="literal">Integer.MAX_VALUE</code>.
</dd>
<dt>
<span class="term">
<code class="literal">enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Indicates whether a realm is enabled. You can use this setting to disable a
realm without removing its configuration information. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-native-settings"></a>Native realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>For a native realm, the <code class="literal">type</code> must be set to <code class="literal">native</code>. In addition to the
<a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you can specify
the following optional settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live for cached user entries. A user and a hash of its
credentials are cached for this period of time. Specify the time period using
the standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">20m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of user entries that can live in the
cache at any given time. Defaults to 100,000.
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Expert)
The hashing algorithm that is used for the
in-memory cached user credentials. For possible values, see <a class="xref" href="settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, &#8220;Cache hash algorithms&#8221;</a>.
Defaults to <code class="literal">ssha256</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">false</code>, disables authentication support in
this realm, so that it only supports user lookups.
(See the <a class="xref" href="authorization.html#run-as-privilege" title="Submitting requests on behalf of other users">run as</a> and
<a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">authorization realms</a> features).
Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-users-settings"></a>File realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The <code class="literal">type</code> setting must be set to <code class="literal">file</code>. In addition to the
<a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you can specify
the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live for cached user entries. A user and a hash of its credentials
are cached for this configured period of time. Defaults to <code class="literal">20m</code>. Specify values
using the standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>.
Defaults to <code class="literal">20m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of user entries that can live in the cache at a given time.
Defaults to 100,000.
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Expert)
The hashing algorithm that is used for the in-memory cached
user credentials. See <a class="xref" href="settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, &#8220;Cache hash algorithms&#8221;</a>. Defaults to <code class="literal">ssha256</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">false</code>, disables authentication support in
this realm, so that it only supports user lookups.
(See the <a class="xref" href="authorization.html#run-as-privilege" title="Submitting requests on behalf of other users">run as</a> and
<a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">authorization realms</a> features).
Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-ldap-settings"></a>LDAP realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The <code class="literal">type</code> setting must be set to <code class="literal">ldap</code>. In addition to the
<a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">Settings valid for all realms</a>, you can specify the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
One or more LDAP URLs in the <code class="literal">ldap[s]://&lt;server&gt;:&lt;port&gt;</code> format. Required.
</p>
<p>To provide multiple URLs, use a YAML array (<code class="literal">["ldap://server1:636", "ldap://server2:636"]</code>)
or comma-separated string (<code class="literal">"ldap://server1:636, ldap://server2:636"</code>).</p>
<p>While both are supported, you can&#8217;t mix the <code class="literal">ldap</code> and <code class="literal">ldaps</code> protocols.</p>
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The behavior to use when there are multiple LDAP URLs defined. For supported
values see <a class="xref" href="settings.html#load-balancing" title="Load balancing and failover">load balancing and failover types</a>.
Defaults to <code class="literal">failover</code>.
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.cache_ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
When using <code class="literal">dns_failover</code> or <code class="literal">dns_round_robin</code> as the load balancing type,
this setting controls the amount of time to cache DNS lookups. Defaults
to <code class="literal">1h</code>.
</dd>
<dt>
<span class="term">
<code class="literal">bind_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The DN of the user that is used to bind to the LDAP and perform searches.
Only applicable in user search mode.
If not specified, an anonymous bind is attempted.
Defaults to Empty. Due to its potential security impact, <code class="literal">bind_dn</code> is not
exposed via the <a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">nodes info API</a>.
</dd>
<dt>
<span class="term">
<code class="literal">bind_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">6.3</span>]
<span class="Admonishment-detail">
Deprecated in 6.3.
</span>
</span> Use <code class="literal">secure_bind_password</code> instead. The password for the user
that is used to bind to the LDAP directory.
Defaults to Empty. Due to its potential security impact, <code class="literal">bind_password</code> is not
exposed via the <a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">nodes info API</a>.
</dd>
<dt>
<span class="term">
<code class="literal">secure_bind_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the user that is used to bind to the LDAP directory.
Defaults to Empty.
</dd>
<dt>
<span class="term">
<code class="literal">user_dn_templates</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The DN template that replaces the user name with the string <code class="literal">{0}</code>.
This setting is multivalued; you can specify multiple user contexts.
Required to operate in user template mode. If <code class="literal">user_search.base_dn</code> is specified,
this setting is not valid. For more information on
the different modes, see <a class="xref" href="setting-up-authentication.html#ldap-realm" title="LDAP user authentication">LDAP user authentication</a>.
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the LDAP realm does not perform role mapping and
instead loads the user from the listed realms. The referenced realms are
consulted in the order that they are defined in this list.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If any settings starting with <code class="literal">user_search</code> are specified, the
<code class="literal">user_dn_templates</code> settings are ignored.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">user_group_attribute</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the attribute to examine on the user for group membership.
If any <code class="literal">group_search</code> settings are specified, this setting is ignored. Defaults
to <code class="literal">memberOf</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.base_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies a container DN to search for users. Required
to operated in user search mode. If <code class="literal">user_dn_templates</code> is specified, this
setting is not valid. For more information on
the different modes, see <a class="xref" href="setting-up-authentication.html#ldap-realm" title="LDAP user authentication">LDAP user authentication</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.scope</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The scope of the user search. Valid values are <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or
<code class="literal">base</code>. <code class="literal">one_level</code> only searches objects directly contained within the
<code class="literal">base_dn</code>. <code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>.
<code class="literal">base</code> specifies that the <code class="literal">base_dn</code> is the user object, and that it is
the only user considered. Defaults to <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.filter</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the filter used to search the directory in attempts to match
an entry with the username provided by the user. Defaults to <code class="literal">(uid={0})</code>.
<code class="literal">{0}</code> is substituted with the username provided when searching.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.attribute</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">5.6</span>]
<span class="Admonishment-detail">
Deprecated in 5.6.
</span>
</span> Use <code class="literal">user_search.filter</code> instead.
The attribute to match with the username sent with the request. Defaults to <code class="literal">uid</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enables or disables connection pooling for user search. If set to <code class="literal">false</code>, a new
connection is created for every search. The
default is <code class="literal">true</code> when <code class="literal">bind_dn</code> is set.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of connections to the LDAP server to allow in the
connection pool. Defaults to <code class="literal">20</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.initial_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The initial number of connections to create to the LDAP server on startup.
Defaults to <code class="literal">0</code>. If the LDAP server is down, values greater than <code class="literal">0</code> could cause
startup failures.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enables or disables a health check on LDAP connections in the connection
pool. Connections are checked in the background at the specified interval.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The distinguished name that is retrieved as part of the health check.
Defaults to the value of <code class="literal">bind_dn</code> if present; if
not, falls back to <code class="literal">user_search.base_dn</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The interval to perform background checks of connections in the pool.
Defaults to <code class="literal">60s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.base_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The container DN to search for groups in which the user has membership. When
this element is absent, Elasticsearch searches for the attribute specified by
<code class="literal">user_group_attribute</code> set on the user in order to determine group membership.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.scope</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether the group search should be <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or
<code class="literal">base</code>.  <code class="literal">one_level</code> only searches objects directly contained within the
<code class="literal">base_dn</code>. <code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>.
<code class="literal">base</code> specifies that the <code class="literal">base_dn</code> is a group object, and that it is the
only group considered. Defaults to  <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.filter</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies a filter to use to look up a group.
When not set, the realm searches for <code class="literal">group</code>, <code class="literal">groupOfNames</code>, <code class="literal">groupOfUniqueNames</code>,
or <code class="literal">posixGroup</code> with the attributes <code class="literal">member</code>, <code class="literal">memberOf</code>, or <code class="literal">memberUid</code>.  Any
instance of <code class="literal">{0}</code> in the filter is replaced by the user attribute defined in
<code class="literal">group_search.user_attribute</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.user_attribute</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the user attribute that is fetched and provided as a parameter to
the filter.  If not set, the user DN is passed into the filter. Defaults to Empty.
</dd>
<dt>
<span class="term">
<code class="literal">unmapped_groups_as_roles</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">true</code>, the names of any unmapped LDAP groups are used as role names
and assigned to the user. A group is considered to be <em>unmapped</em> if it is not
referenced in a <a class="xref" href="authorization.html#mapping-roles-file" title="Using role mapping files">role-mapping file</a>. API-based
role mappings are not considered. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">files.role_mapping</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The <a class="xref" href="configuring-security.html#security-files" title="Security files">location</a> for the
<a class="xref" href="authorization.html#mapping-roles" title="Mapping users and groups to roles">YAML role mapping configuration file</a>. Defaults to
<code class="literal">ES_PATH_CONF/role_mapping.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">follow_referrals</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether Elasticsearch should follow referrals returned
by the LDAP server. Referrals are URLs returned by the server that are to be
used to continue the LDAP operation (for example, search). Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">metadata</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A list of additional LDAP attributes that should be loaded from the
LDAP server and stored in the authenticated user&#8217;s metadata field.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_connect</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The TCP connect timeout period for establishing an LDAP connection.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_read</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.
</span>
</span> The TCP read timeout period after establishing an LDAP
connection. This is equivalent to and is deprecated in favor of
<code class="literal">timeout.response</code> and they cannot be used simultaneously. An <code class="literal">s</code> at the end
indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.response</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time interval to wait for the response from the LDAP server. An <code class="literal">s</code> at the
end indicates seconds, or <code class="literal">ms</code> indicates milliseconds. Defaults to the value of
<code class="literal">timeout.ldap_search</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.ldap_search</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The timeout period for an LDAP search. The value is specified in the request
and is enforced by the receiving LDAP Server.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
<p>If the LDAP server requires client authentication, it uses this file. You cannot
use this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
<p>This certificate is presented to clients when they connect.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Indicates the type of verification when using <code class="literal">ldaps</code> to protect against man
in the middle attacks and certificate forgery.
Controls the verification of certificates.
</p>
<p>Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server&#8217;s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="configuring-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the cipher suites that should be supported when
communicating with the LDAP server.
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the time-to-live for cached user entries. A user and a hash of its
credentials are cached for this period of time. Use the standard Elasticsearch
<a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to  <code class="literal">20m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum number of user entries that the cache can contain.
Defaults to <code class="literal">100000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Expert)
Specifies the hashing algorithm that is used for the
in-memory cached user credentials. See <a class="xref" href="settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, &#8220;Cache hash algorithms&#8221;</a>. Defaults to <code class="literal">ssha256</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">false</code>, disables authentication support in
this realm, so that it only supports user lookups.
(See the <a class="xref" href="authorization.html#run-as-privilege" title="Submitting requests on behalf of other users">run as</a> and
<a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">authorization realms</a> features).
Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-ad-settings"></a>Active Directory realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The <code class="literal">type</code> setting must be set to <code class="literal">active_directory</code>. In addition to the
<a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you can specify
the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
One or more LDAP URLs in the <code class="literal">ldap[s]://&lt;server&gt;:&lt;port&gt;</code> format. Defaults to
<code class="literal">ldap://&lt;domain_name&gt;:389</code>. This setting is required when connecting using
SSL/TLS or when using a custom port.
</p>
<p>To provide multiple URLs, use a YAML array (<code class="literal">["ldap://server1:636", "ldap://server2:636"]</code>)
or comma-separated string (<code class="literal">"ldap://server1:636, ldap://server2:636"</code>).</p>
<p>While both are supported, you can&#8217;t mix the <code class="literal">ldap</code> and <code class="literal">ldaps</code> protocols.</p>
<p>If no URL is provided, Elasticsearch uses a default of <code class="literal">ldap://&lt;domain_name&gt;:389</code>. This
default uses the <code class="literal">domain_name</code> setting value and assumes an unencrypted
connection to port 389.</p>
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The behavior to use when there are multiple LDAP URLs defined. For supported
values see <a class="xref" href="settings.html#load-balancing" title="Load balancing and failover">load balancing and failover types</a>.
Defaults to <code class="literal">failover</code>.
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.cache_ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
When using <code class="literal">dns_failover</code> or <code class="literal">dns_round_robin</code> as the load balancing type,
this setting controls the amount of time to cache DNS lookups. Defaults
to <code class="literal">1h</code>.
</dd>
<dt>
<span class="term">
<code class="literal">domain_name</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The domain name of Active Directory. If the <code class="literal">url</code> and the <code class="literal">user_search.base_dn</code>
settings are not specified, the cluster can derive those values from this
setting. Required.
</dd>
<dt>
<span class="term">
<code class="literal">bind_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The DN of the user that is used to bind to Active Directory and perform searches.
Defaults to Empty. Due to its potential security impact, <code class="literal">bind_dn</code> is not
exposed via the <a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">nodes info API</a>.
</dd>
<dt>
<span class="term">
<code class="literal">bind_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">6.3</span>]
<span class="Admonishment-detail">
Deprecated in 6.3.
</span>
</span> Use <code class="literal">secure_bind_password</code> instead. The password for the user
that is used to bind to Active Directory. Defaults to Empty. Due to its
potential security impact, <code class="literal">bind_password</code> is not exposed via the
<a class="xref" href="cluster.html#cluster-nodes-info" title="Nodes info API">nodes info API</a>.
</dd>
<dt>
<span class="term">
<code class="literal">secure_bind_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the user that is used to bind to Active Directory.
Defaults to Empty.
</dd>
<dt>
<span class="term">
<code class="literal">unmapped_groups_as_roles</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">true</code>, the names of any unmapped Active Directory groups are used as
role names and assigned to the user. A group is considered <em>unmapped</em> when it
is not referenced in any role-mapping files. API-based role mappings are not
considered. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">files.role_mapping</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The <a class="xref" href="configuring-security.html#security-files" title="Security files">location</a> for the YAML
role mapping configuration file. Defaults to <code class="literal">ES_PATH_CONF/role_mapping.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.base_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The context to search for a user. Defaults to the root
of the Active Directory domain.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.scope</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether the user search should be <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or <code class="literal">base</code>.
<code class="literal">one_level</code> only searches users directly contained within the <code class="literal">base_dn</code>.
<code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>. <code class="literal">base</code>
specifies that the <code class="literal">base_dn</code> is a user object, and that it is the
only user considered. Defaults to <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.filter</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies a filter to use to lookup a user given a username.  The default
filter looks up <code class="literal">user</code> objects with either <code class="literal">sAMAccountName</code> or
<code class="literal">userPrincipalName</code>. If specified, this must be a valid LDAP user search filter.
For example <code class="literal">(&amp;(objectClass=user)(sAMAccountName={0}))</code>. For more information,
see
<a href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx" class="ulink" target="_top">Search Filter Syntax</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.upn_filter</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies a filter to use to lookup a user given a user principal name.
The default filter looks up <code class="literal">user</code> objects with
a matching <code class="literal">userPrincipalName</code>. If specified, this
must be a valid LDAP user search filter. For example,
<code class="literal">(&amp;(objectClass=user)(userPrincipalName={1}))</code>. <code class="literal">{1}</code> is the full user principal name
provided by the user. For more information, see
<a href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx" class="ulink" target="_top">Search Filter Syntax</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.down_level_filter</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies a filter to use to lookup a user given a down level logon name
(DOMAIN\user). The default filter looks up <code class="literal">user</code> objects with a matching
<code class="literal">sAMAccountName</code> in the domain provided. If specified, this
must be a valid LDAP user search filter. For example,
<code class="literal">(&amp;(objectClass=user)(sAMAccountName={0}))</code>. For more information, see
<a href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx" class="ulink" target="_top">Search Filter Syntax</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enables or disables connection pooling for user search. When
disabled a new connection is created for every search. The
default is <code class="literal">true</code> when <code class="literal">bind_dn</code> is provided.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of connections to the Active Directory server to allow in the
connection pool. Defaults to <code class="literal">20</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.initial_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The initial number of connections to create to the Active Directory server on startup.
Defaults to <code class="literal">0</code>. If the LDAP server is down, values greater than 0
could cause startup failures.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enables or disables a health check on Active Directory connections in the connection
pool. Connections are checked in the background at the specified interval.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The distinguished name to be retrieved as part of the health check.
Defaults to the value of <code class="literal">bind_dn</code> if that setting is present. Otherwise, it
defaults to the value of the <code class="literal">user_search.base_dn</code> setting.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The interval to perform background checks of connections in the pool.
Defaults to <code class="literal">60s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.base_dn</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The context to search for groups in which the user has membership.  Defaults
to the root of the Active Directory domain.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.scope</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether the group search should be <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or
<code class="literal">base</code>.  <code class="literal">one_level</code> searches for groups directly contained within the
<code class="literal">base_dn</code>. <code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>.
<code class="literal">base</code> specifies that the <code class="literal">base_dn</code> is a group object, and that it is
the only group considered. Defaults to <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">metadata</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A list of additional LDAP attributes that should be loaded from the
LDAP server and stored in the authenticated user&#8217;s metadata field.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_connect</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The TCP connect timeout period for establishing an LDAP connection.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_read</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.
</span>
</span> The TCP read timeout period after establishing an LDAP
connection.  This is equivalent to and is deprecated in favor of
<code class="literal">timeout.response</code> and they cannot be used simultaneously. An <code class="literal">s</code> at the end
indicates seconds, or <code class="literal">ms</code> indicates milliseconds. Defaults to the value of
<code class="literal">timeout.ldap_search</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.response</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time interval to wait for the response from the AD server. An <code class="literal">s</code> at the
end indicates seconds, or <code class="literal">ms</code> indicates milliseconds. Defaults to the value of
<code class="literal">timeout.ldap_search</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.ldap_search</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The timeout period for an LDAP search. The value is specified in the request
and is enforced by the receiving LDAP Server.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
<p>This certificate is presented to clients when they connect.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
<p>If the Active Directory server requires client authentication, it uses this file.
You cannot use this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Indicates the type of verification when using <code class="literal">ldaps</code> to protect against man
in the middle attacks and certificate forgery.
Controls the verification of certificates.
</p>
<p>Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server&#8217;s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="configuring-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the cipher suites that should be supported when
communicating with the Active Directory server.
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the time-to-live for cached user entries. A user and a hash of its
credentials are cached for this configured period of time. Use the
standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>).
Defaults to <code class="literal">20m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum number of user entries that the cache can contain.
Defaults to <code class="literal">100000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Expert)
Specifies the hashing algorithm that is used for
the in-memory cached user credentials. See <a class="xref" href="settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, &#8220;Cache hash algorithms&#8221;</a>. Defaults to <code class="literal">ssha256</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">false</code>, disables authentication support in
this realm, so that it only supports user lookups.
(See the <a class="xref" href="authorization.html#run-as-privilege" title="Submitting requests on behalf of other users">run as</a> and
<a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">authorization realms</a> features).
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">follow_referrals</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If set to <code class="literal">true</code>, Elasticsearch follows referrals returned by the LDAP server.
Referrals are URLs returned by the server that are to be used to continue the
LDAP operation (such as <code class="literal">search</code>). Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="ref-pki-settings"></a>PKI realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The <code class="literal">type</code> setting must be set to <code class="literal">pki</code>. In addition to the
<a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you can specify
the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">username_pattern</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The regular expression pattern used to extract the username from the
certificate DN. The first match group is the used as the username.
Defaults to <code class="literal">CN=(.*?)(?:,\|$)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">certificate_authorities</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to the PEM certificate files that should be used to authenticate a
user&#8217;s certificate as trusted. Defaults to the trusted certificates configured
for SSL. This setting cannot be used with <code class="literal">truststore.path</code>.
</dd>
<dt>
<span class="term">
<code class="literal">truststore.algorithm</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Algorithm for the truststore. Defaults to <code class="literal">SunX509</code>.
</dd>
<dt>
<span class="term">
<code class="literal">truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
</dl>
</div>
<p>If <code class="literal">truststore.path</code> is set, this setting is required.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">truststore.path</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path of a truststore to use. Defaults to the trusted certificates configured
for SSL. This setting cannot be used with <code class="literal">certificate_authorities</code>.
</dd>
<dt>
<span class="term">
<code class="literal">files.role_mapping</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the <a class="xref" href="configuring-security.html#security-files" title="Security files">location</a> of the
<a class="xref" href="authorization.html#mapping-roles" title="Mapping users and groups to roles">YAML role  mapping configuration file</a>.
Defaults to <code class="literal">ES_PATH_CONF/role_mapping.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the PKI realm does not perform role mapping and
instead loads the user from the listed realms.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the time-to-live for cached user entries. A user and a hash of its
credentials are cached for this period of time. Use the
standard Elasticsearch <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>).
Defaults to <code class="literal">20m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum number of user entries that the cache can contain.
Defaults to <code class="literal">100000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">delegation.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Generally, in order for the clients to be authenticated by the PKI realm they
must connect directly to Elasticsearch. That is, they must not pass through proxies
which terminate the TLS connection. In order to allow for a <span class="strong strong"><strong>trusted</strong></span> and
<span class="strong strong"><strong>smart</strong></span> proxy, such as Kibana, to sit before Elasticsearch and terminate TLS
connections, but still allow clients to be authenticated on Elasticsearch by this realm,
you need to toggle this to <code class="literal">true</code>. Defaults to <code class="literal">false</code>. If delegation is
enabled, then either <code class="literal">truststore.path</code> or <code class="literal">certificate_authorities</code> setting
must be defined. For more details, see <a class="xref" href="setting-up-authentication.html#pki-realm-for-proxied-clients" title="PKI authentication for clients connecting to Kibana">Configuring authentication delegation for PKI realms</a>.
</dd>
</dl>
</div>
<h5><a id="ref-saml-settings"></a>SAML realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The <code class="literal">type</code> setting must be set to <code class="literal">saml</code>. In addition to the
<a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you can specify
the following settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.entity_id</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Entity ID of the SAML Identity Provider. An Entity ID is a URI with a
maximum length of 1024 characters. It can be a URL (<a href="https://idp.example.com/" class="ulink" target="_top">https://idp.example.com/</a>) or
a URN (<code class="literal">urn:example.com:idp</code>) and can be found in the configuration or the SAML
metadata of the Identity Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.metadata.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path <em>(recommended)</em> or URL to a SAML 2.0 metadata file describing the
capabilities and configuration of the Identity Provider.
If a path is provided, then it is resolved relative to the Elasticsearch config
directory.
If a URL is provided, then it must be either a <code class="literal">file</code> URL or a <code class="literal">https</code> URL.
Elasticsearch automatically polls this metadata resource and reloads
the IdP configuration when changes are detected.
File based resources are polled at a frequency determined by the global Elasticsearch
<code class="literal">resource.reload.interval.high</code> setting, which defaults to 5 seconds.
HTTPS resources are polled at a frequency determined by the realm&#8217;s
<code class="literal">idp.metadata.http.refresh</code> setting.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.metadata.http.refresh</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the frequency with which <code class="literal">https</code> metadata is checked for changes.
Defaults to <code class="literal">1h</code> (1 hour).
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.use_single_logout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Indicates whether to utilise the Identity Provider&#8217;s Single Logout service
(if one exists in the IdP metadata file).
Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">sp.entity_id</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Entity ID to use for this SAML Service Provider. This should be entered as a
URI. We recommend that you use the base URL of your Kibana instance. For example,
<code class="literal">https://kibana.example.com/</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">sp.acs</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL of the Assertion Consumer Service within Kibana. Typically this is the
"api/security/saml/callback" endpoint of your Kibana server. For example,
<code class="literal">https://kibana.example.com/api/security/saml/callback</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">sp.logout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL of the Single Logout service within Kibana. Typically this is the
"logout" endpoint of your Kibana server. For example,
<code class="literal">https://kibana.example.com/logout</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes.principal</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Name of the SAML attribute that contains the user&#8217;s principal (username).
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes.groups</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Name of the SAML attribute that contains the user&#8217;s groups.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes.name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Name of the SAML attribute that contains the user&#8217;s full name.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes.mail</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Name of the SAML attribute that contains the user&#8217;s email address.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes.dn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Name of the SAML attribute that contains the user&#8217;s X.50
<em>Distinguished Name</em>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attribute_patterns.principal</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A Java regular expression that is matched against the SAML attribute specified
by <code class="literal">attributes.pattern</code> before it is applied to the user&#8217;s <em>principal</em> property.
The attribute value must match the pattern and the value of the first
<em>capturing group</em> is used as the principal. For example, <code class="literal">^([^@]+)@example\\.com$</code>
matches email addresses from the "example.com" domain and uses the local-part as
the principal.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attribute_patterns.groups</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>group</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attribute_patterns.name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>name</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attribute_patterns.mail</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>mail</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attribute_patterns.dn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>dn</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">nameid_format</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The NameID format that should be requested when asking the IdP to authenticate
the current user. Defaults to requesting <em>transient</em> names
(<code class="literal">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</code>).
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">nameid.allow_create</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The value of the <code class="literal">AllowCreate</code> attribute of the
<code class="literal">NameIdPolicy</code> element in an authentication request. The default value is false.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">nameid.sp_qualifier</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The value of the <code class="literal">SPNameQualifier</code> attribute of the
<code class="literal">NameIdPolicy</code> element in an authentication request. The default is to not
include the <code class="literal">SPNameQualifier</code> attribute.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">force_authn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether to set the <code class="literal">ForceAuthn</code> attribute when requesting that the IdP
authenticate the current user. If set to <code class="literal">true</code>, the IdP is required to verify
the user’s identity, irrespective of any existing sessions they might have.
Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">populate_user_metadata</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether to populate the Elasticsearch user&#8217;s metadata with the values that are
provided by the SAML attributes. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the SAML realm does not perform role mapping and
instead loads the user from the listed realms.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allowed_clock_skew</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum amount of skew that can be tolerated between the IdP&#8217;s clock and the
Elasticsearch node&#8217;s clock.
Defaults to <code class="literal">3m</code> (3 minutes).
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">req_authn_context_class_ref</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A comma separated list of Authentication Context Class Reference values to be
included in the Requested Authentication Context when requesting the IdP to
authenticate the current user. The Authentication Context of the corresponding
authentication response should contain at least one of the requested values.
</p>
<p>For more information, see
<a class="xref" href="saml-guide.html#req-authn-context" title="Requesting specific authentication methods">Requesting specific authentication methods</a>.</p>
</dd>
</dl>
</div>
<h5><a id="ref-saml-signing-settings"></a>SAML realm signing settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>If a signing key is configured (that is, either <code class="literal">signing.key</code> or
<code class="literal">signing.keystore.path</code> is set), then Elasticsearch signs outgoing SAML messages.
Signing can be configured using the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.saml_messages</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A list of SAML message types that should be signed or <code class="literal">*</code> to sign all messages.
Each element in the list should be the local name of a SAML XML Element.
Supported element types are <code class="literal">AuthnRequest</code>, <code class="literal">LogoutRequest</code> and <code class="literal">LogoutResponse</code>.
Only valid if <code class="literal">signing.key</code> or <code class="literal">signing.keystore.path</code> is also specified.
Defaults to <code class="literal">*</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.key</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path to the PEM encoded private key to use for SAML message signing.
<code class="literal">signing.key</code> and <code class="literal">signing.keystore.path</code> cannot be used at the same time.
</dd>
<dt>
<span class="term">
<code class="literal">signing.secure_key_passphrase</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Specifies the passphrase to decrypt the PEM encoded private key (<code class="literal">signing.key</code>)
if it is encrypted.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.certificate</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path to the PEM encoded certificate (or certificate chain) that
corresponds to the <code class="literal">signing.key</code>. This certificate must also be included in the
Service Provider metadata or manually configured within the IdP to allow for
signature validation. This setting can only be used if <code class="literal">signing.key</code> is set.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.keystore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path to the keystore that contains a private key and certificate. It must be
either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and
<code class="literal">signing.key</code> at the same time.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.keystore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The type of the keystore in <code class="literal">signing.keystore.path</code>.
Must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the keystore path ends in ".p12", ".pfx",
or "pkcs12", this setting defaults to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.keystore.alias</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the alias of the key within the keystore that should be
used for SAML message signing. If the keystore contains more than one private
key, this setting must be specified.
</dd>
<dt>
<span class="term">
<code class="literal">signing.keystore.secure_password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password to the keystore in <code class="literal">signing.keystore.path</code>.
</dd>
<dt>
<span class="term">
<code class="literal">signing.keystore.secure_key_password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore (<code class="literal">signing.keystore.path</code>).
Defaults to the keystore password.
</dd>
</dl>
</div>
<h5><a id="ref-saml-encryption-settings"></a>SAML realm encryption settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>If an encryption key is configured (that is, either <code class="literal">encryption.key</code> or
<code class="literal">encryption.keystore.path</code> is set), then Elasticsearch publishes an encryption
certificate when generating metadata and attempts to decrypt incoming SAML
content. Encryption can be configured using the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.key</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path to the PEM encoded private key to use for SAML message
decryption.
<code class="literal">encryption.key</code> and <code class="literal">encryption.keystore.path</code> cannot be used at the same time.
</dd>
<dt>
<span class="term">
<code class="literal">encryption.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Specifies the passphrase to decrypt the PEM encoded private key
(<code class="literal">encryption.key</code>) if it is encrypted.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.certificate</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path to the PEM encoded certificate (or certificate chain) that is
associated with the <code class="literal">encryption.key</code>. This certificate must also be included in
the Service Provider metadata or manually configured within the IdP to enable
message encryption. This setting can be used only if <code class="literal">encryption.key</code> is set.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.keystore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path to the keystore that contains a private key and certificate. It must be
either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and
<code class="literal">encryption.key</code> at the same time.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.keystore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The type of the keystore (<code class="literal">encryption.keystore.path</code>).
Must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the keystore path ends in ".p12", ".pfx",
or "pkcs12", this setting defaults to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.keystore.alias</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the alias of the key within the keystore (<code class="literal">encryption.keystore.path</code>)
that should be used for SAML message decryption. If not specified, all compatible
key pairs from the keystore are considered as candidate keys for decryption.
</dd>
<dt>
<span class="term">
<code class="literal">encryption.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password to the keystore (<code class="literal">encryption.keystore.path</code>).
</dd>
<dt>
<span class="term">
<code class="literal">encryption.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore (<code class="literal">encryption.keystore.path</code>). Only a
single password is supported. If you are using multiple decryption keys,
they cannot have individual passwords.
</dd>
</dl>
</div>
<h5><a id="ref-saml-ssl-settings"></a>SAML realm SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>If you are loading the IdP metadata over SSL/TLS (that is, <code class="literal">idp.metadata.path</code>
is a URL using the <code class="literal">https</code> protocol), the following settings can be used to
configure SSL.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings are not used for any purpose other than loading metadata
over https.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.key_passphrase</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.certificate</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_key_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
</dl>
</div>
<p>You cannot use this setting and <code class="literal">ssl.keystore.key_password</code> at the same time.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
file name ends in ".p12", ".pfx" or "pkcs12", the default is <code class="literal">PKCS12</code>.
Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</p>
<p>This setting cannot be used with <code class="literal">ssl.truststore.password</code>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the verification of certificates.
</p>
<p>Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server&#8217;s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="configuring-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<h5><a id="ref-kerberos-settings"></a>Kerberos realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>For a Kerberos realm, the <code class="literal">type</code> must be set to <code class="literal">kerberos</code>. In addition to the
<a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you can specify
the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">keytab.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path to the Kerberos keytab file that contains the
service principal used by this Elasticsearch node. This must be a location within the
Elasticsearch configuration directory and the file must have read permissions. Required.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">remove_realm_name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">true</code> to remove the realm part of principal names.
Principal names in Kerberos have the form <code class="literal">user/instance@REALM</code>. If this option
is <code class="literal">true</code>, the realm part (<code class="literal">@REALM</code>) will not be included in the username.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">krb.debug</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">true</code> to enable debug logs for the Java login module that
provides support for Kerberos authentication. Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.ttl</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The time-to-live for cached user entries. A user is cached for
this period of time. Specify the time period using the standard Elasticsearch
<a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>. Defaults to <code class="literal">20m</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.max_users</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of user entries that can live in the
cache at any given time. Defaults to 100,000.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">authorization_realms</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the Kerberos realm does not perform role mapping and
instead loads the user from the listed realms.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</dd>
</dl>
</div>
<h5><a id="ref-oidc-settings"></a>OpenID Connect realm settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>In addition to the <a class="xref" href="settings.html#ref-realm-settings" title="Settings valid for all realms">settings that are valid for all realms</a>, you
can specify the following settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.issuer</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A verifiable Identifier for your OpenID Connect Provider. An Issuer
Identifier is usually a case sensitive URL using the https scheme that contains
scheme, host, and optionally, port number and path components and no query or
fragment components. The value for this setting should be provided by your OpenID
Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.authorization_endpoint</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL for the Authorization Endpoint at the
OpenID Connect Provider. The value for this setting should be provided by your OpenID
Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.token_endpoint</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL for the Token Endpoint at the OpenID Connect Provider.
The value for this setting should be provided by your OpenID Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.userinfo_endpoint</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL for the User Info Endpoint at the OpenID Connect Provider.
The value for this setting should be provided by your OpenID Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.endsession_endpoint</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The URL for the End Session Endpoint at the OpenID Connect
Provider. The value for this setting should be provided by your OpenID Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.jwkset_path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path or URL to a JSON Web Key Set with the key material that the OpenID Connect
Provider uses for signing tokens and claims responses.
If a path is provided, then it is resolved relative to the Elasticsearch config
directory.
If a URL is provided, then it must be either a <code class="literal">file</code> URL or a <code class="literal">https</code> URL.
Elasticsearch automatically caches the retrieved JWK set to avoid unnecessary HTTP
requests but will attempt to refresh the JWK upon signature verification
failure, as this might indicate that the OpenID Connect Provider has
rotated the signing keys.
</p>
<p>File-based resources are polled at a frequency determined by the global Elasticsearch
<code class="literal">resource.reload.interval.high</code> setting, which defaults to 5 seconds.</p>
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The names of the realms that should be consulted for delegated authorization.
If this setting is used, then the OpenID Connect realm does not perform role
mapping and instead loads the user from the listed realms.
See <a class="xref" href="setting-up-authentication.html#authorization_realms" title="Delegating authorization to another realm">Delegating authorization to another realm</a>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.client_id</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The OAuth 2.0 Client Identifier that was assigned to Elasticsearch during registration
at the OpenID Connect Provider.
</dd>
<dt>
<span class="term">
<code class="literal">rp.client_secret</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The OAuth 2.0 Client Secret that was assigned to Elasticsearch during registration
at the OpenID Connect Provider.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.client_auth_method</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The client authentication method used by Elasticsearch to authenticate
to the OpenID Connect Provider. Can be <code class="literal">client_secret_basic</code>, <code class="literal">client_secret_post</code>,
or <code class="literal">client_secret_jwt</code>. Defaults to <code class="literal">client_secret_basic</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.client_auth_signature_algorithm</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The signature algorithm that Elasticsearch uses to sign the JWT with which it authenticates
as a client to the OpenID Connect Provider when <code class="literal">client_secret_jwt</code> is selected for
<code class="literal">rp.client_auth_method</code>. Can be either <code class="literal">HS256</code>, <code class="literal">HS384</code>, or <code class="literal">HS512</code>. Defaults to
<code class="literal">HS384</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.redirect_uri</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Redirect URI within Kibana. If you want to use the authorization code flow, this is the
<code class="literal">api/security/oidc/callback</code> endpoint of your Kibana server. If you want to use the implicit flow,  it is the <code class="literal">api/security/oidc/implicit</code> endpoint.
For example, <code class="literal">https://kibana.example.com/api/security/oidc/callback</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.response_type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
OAuth 2.0 Response Type value that determines the authorization
processing flow to be used. Can be <code class="literal">code</code> for authorization code grant flow,
or one of <code class="literal">id_token</code>, <code class="literal">id_token token</code> for the implicit flow.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.signature_algorithm</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The signature algorithm that will be used by Elasticsearch in order to verify the
signature of the id tokens it will receive from the OpenID Connect Provider.
Defaults to <code class="literal">RSA256</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.requested_scopes</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The scope values that will be requested by the OpenID Connect Provider as
part of the Authentication Request. Optional, defaults to <code class="literal">openid</code>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.post_logout_redirect_uri</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The Redirect URI (usually within Kibana) that the OpenID Connect Provider
should redirect the browser to after a successful Single Logout.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.principal</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the OpenID Connect claim that contains the user&#8217;s principal (username).
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.groups</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the OpenID Connect claim that contains the user&#8217;s groups.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the OpenID Connect claim that contains the user&#8217;s full name.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.mail</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the OpenID Connect claim that contains the user&#8217;s email address.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claims.dn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The name of the OpenID Connect claim that contains the user&#8217;s X.509
<em>Distinguished Name</em>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.principal</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A Java regular expression that is matched against the OpenID Connect claim specified
by <code class="literal">claims.principal</code> before it is applied to the user&#8217;s <em>principal</em> property.
The attribute value must match the pattern and the value of the first
<em>capturing group</em> is used as the principal. For example, <code class="literal">^([^@]+)@example\\.com$</code>
matches email addresses from the "example.com" domain and uses the local-part as
the principal.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.groups</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">claim_patterns.principal</code>, but for the <em>group</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.name</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">claim_patterns.principal</code>, but for the <em>name</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.mail</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">claim_patterns.principal</code>, but for the <em>mail</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">claim_patterns.dn</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
As per <code class="literal">claim_patterns.principal</code>, but for the <em>dn</em> property.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allowed_clock_skew</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum allowed clock skew to be taken into consideration when validating
id tokens with regards to their creation and expiration times.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">populate_user_metadata</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies whether to populate the Elasticsearch user&#8217;s metadata with the values that are
provided by the OpenID Connect claims. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.proxy.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the address of the proxy server that will be used by the internal
http client for all back-channel communication to the OpenID Connect Provider
endpoints. This includes requests to the Token Endpoint, the Userinfo Endpoint
and requests to fetch the JSON Web Key Set from the OP if <code class="literal">op.jwkset_path</code> is
set as a URL.
</dd>
<dt>
<span class="term">
<code class="literal">http.proxy.scheme</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the protocol to use to connect to the proxy server that will be
used by the http client for all back-channel communication to the OpenID
Connect Provider endpoints. Defaults to <code class="literal">http</code>. Allowed values are
<code class="literal">http</code> or <code class="literal">https</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.proxy.port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the port of the proxy server that will be used by the http
client for all backchannel communication to the OpenID Connect Provider
endpoints. Defaults to <code class="literal">80</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.connect_timeout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the timeout until a connection
 is established. A value of zero means the timeout is not used. Defaults to <code class="literal">5s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.connection_read_timeout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the timeout used when
requesting a connection from the connection manager. Defaults to <code class="literal">5s</code>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.socket_timeout</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the socket timeout (SO_TIMEOUT)
in milliseconds, which is the timeout for waiting for data or, put differently,
a maximum period inactivity between two consecutive data packets). Defaults to
<code class="literal">5s</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.max_connections</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the maximum number of
connections allowed across all endpoints.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.max_endpoint_connections</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the maximum number of
connections allowed per endpoint.
</dd>
</dl>
</div>
<h5><a id="ref-oidc-ssl-settings"></a>OpenID Connect realm SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The following settings can be used to configure SSL for all outgoing http connections
to the OpenID Connect Provider endpoints.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings are <em>only</em> used for the back-channel communication between
Elasticsearch and the OpenID Connect Provider</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.key_passphrase</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.certificate</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_key_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.key_password</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
file name ends in ".p12", ".pfx" or "pkcs12", the default is <code class="literal">PKCS12</code>.
Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.password</code> at the same time.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the verification of certificates.
Controls the verification of certificates.
</p>
<p>Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server&#8217;s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="configuring-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<h5><a id="load-balancing"></a>Load balancing and failover<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The <a class="xref" href="settings.html#static-cluster-setting">static</a> <code class="literal">load_balance.type</code> setting can have the
following values:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">failover</code>: The URLs specified are used in the order that they are specified.
The first server that can be connected to will be used for all subsequent
connections. If a connection to that server fails then the next server that a
connection can be established to will be used for subsequent connections.
</li>
<li class="listitem">
<code class="literal">dns_failover</code>: In this mode of operation, only a single URL may be specified.
This URL must contain a DNS name. The system will be queried for all IP
addresses that correspond to this DNS name. Connections to the Active Directory
or LDAP server will always be tried in the order in which they were retrieved.
This differs from <code class="literal">failover</code> in that there is no reordering of the list and if a
server has failed at the beginning of the list, it will still be tried for each
subsequent connection.
</li>
<li class="listitem">
<code class="literal">round_robin</code>: Connections will continuously iterate through the list of
provided URLs. If a server is unavailable, iterating through the list of URLs
will continue until a successful connection is made.
</li>
<li class="listitem">
<code class="literal">dns_round_robin</code>: In this mode of operation, only a single URL may be
specified. This URL must contain a DNS name. The system will be queried for all
IP addresses that correspond to this DNS name. Connections will continuously
iterate through the list of addresses. If a server is unavailable, iterating
through the list of URLs will continue until a successful connection is made.
</li>
</ul>
</div>
<h4><a id="ssl-tls-settings"></a>General TLS settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.ssl.diagnose.trust</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls whether to output diagnostic messages for SSL/TLS trust failures.
If this is <code class="literal">true</code> (the default), a message will be printed to the Elasticsearch
log whenever an SSL connection (incoming or outgoing) is rejected due to a failure
to establish trust.
This diagnostic message contains information that can be used to determine the
cause of the failure and assist with resolving the problem.
Set to <code class="literal">false</code> to disable these messages.
NOTE: This defaults to <code class="literal">false</code> when <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5><a id="tls-ssl-key-settings"></a>TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS
connection. If no trusted certificates are configured, the default certificates
that are trusted by the JVM will be trusted along with the certificate(s)
associated with a key in the same context. The key and certificate must be in
place for connections that require client authentication or when acting as a
SSL enabled server.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<a id="pkcs12-truststore-note"></a>
<p>Storing trusted certificates in a PKCS#12 file, although supported, is
uncommon in practice. The <a class="xref" href="certutil.html" title="elasticsearch-certutil"><code class="literal">elasticsearch-certutil</code> tool</a>,
as well as Java&#8217;s <code class="literal">keytool</code>, are designed to generate PKCS#12 files that
can be used both as a keystore and as a truststore, but this may not be the
case for container files that are created using other tools. Usually,
PKCS#12 files only contain secret and private entries. To confirm that
a PKCS#12 container includes trusted certificate ("anchor") entries look for
<code class="literal">2.16.840.1.113894.746875.1.1: &lt;Unsupported tag 6&gt;</code> in the
<code class="literal">openssl pkcs12 -info</code> output, or <code class="literal">trustedCertEntry</code> in the
<code class="literal">keytool -list</code> output.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="http-tls-ssl-settings"></a>HTTP TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Used to enable or disable TLS/SSL. The default is <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="configuring-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.client_authentication</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the server&#8217;s behavior in regard to requesting a certificate
from client connections. Valid values are <code class="literal">required</code>, <code class="literal">optional</code>, and <code class="literal">none</code>.
<code class="literal">required</code> forces a client to present a certificate, while <code class="literal">optional</code>
requests a client certificate but the client is not required to present one.
Defaults to <code class="literal">none</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="security-http-tls-ssl-key-trusted-certificate-settings"></a>HTTP TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate must be configured.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pem_encoded_files_2"></a>PEM encoded files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_java_keystore_files_2"></a>Java keystore files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="security-http-pkcs12-files"></a>PKCS#12 files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="security-http-pkcs11-tokens"></a>PKCS#11 tokens<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use a PKCS#11 token that contains the private key,
certificate and certificates that should be trusted.</p>
<p>PKCS#11 token require additional configuration on the JVM level and can be enabled
via the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS11</code> to indicate that the PKCS#11 token should be used as a keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When configuring the PKCS#11 token that your JVM is configured to use as
a keystore or a truststore for Elasticsearch, the PIN for the token can be
configured by setting the appropriate value to <code class="literal">ssl.truststore.password</code>
or <code class="literal">ssl.truststore.secure_password</code> in the context that you are configuring.
Since there can only be one PKCS#11 token configured, only one keystore and
truststore will be usable for configuration in Elasticsearch. This in turn means
that only one certificate can be used for TLS both in the transport and the
http layer.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="transport-tls-ssl-settings"></a>Transport TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Used to enable or disable TLS/SSL. The default is <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="configuring-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.client_authentication</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the server&#8217;s behavior in regard to requesting a certificate
from client connections. Valid values are <code class="literal">required</code>, <code class="literal">optional</code>, and <code class="literal">none</code>.
<code class="literal">required</code> forces a client to present a certificate, while <code class="literal">optional</code>
requests a client certificate but the client is not required to present one.
Defaults to <code class="literal">none</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the verification of certificates.
Controls the verification of certificates.
</p>
<p>Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server&#8217;s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="security-transport-tls-ssl-key-trusted-certificate-settings"></a>Transport TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate must be configured.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pem_encoded_files_3"></a>PEM encoded files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_java_keystore_files_3"></a>Java keystore files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="security-transport-pkcs12-files"></a>PKCS#12 files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="security-transport-pkcs11-tokens"></a>PKCS#11 tokens<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use a PKCS#11 token that contains the private key,
certificate and certificates that should be trusted.</p>
<p>PKCS#11 token require additional configuration on the JVM level and can be enabled
via the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS11</code> to indicate that the PKCS#11 token should be used as a keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When configuring the PKCS#11 token that your JVM is configured to use as
a keystore or a truststore for Elasticsearch, the PIN for the token can be
configured by setting the appropriate value to <code class="literal">ssl.truststore.password</code>
or <code class="literal">ssl.truststore.secure_password</code> in the context that you are configuring.
Since there can only be one PKCS#11 token configured, only one keystore and
truststore will be usable for configuration in Elasticsearch. This in turn means
that only one certificate can be used for TLS both in the transport and the
http layer.</p>
</div>
</div>
<h5><a id="ssl-tls-profile-settings"></a>Transport profile TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h5>
<p>The same settings that are available for the <a class="xref" href="settings.html#transport-tls-ssl-settings" title="Transport TLS/SSL settings">default transport</a>
are also available for each transport profile. By default, the settings for a
transport profile will be the same as the default transport unless they
are specified.</p>
<p>As an example, lets look at the key setting. For the default transport
this is <code class="literal">xpack.security.transport.ssl.key</code>. In order to use this setting in a
transport profile, use the prefix <code class="literal">transport.profiles.$PROFILE.xpack.security.</code> and
append the portion of the setting after <code class="literal">xpack.security.transport.</code>. For the key
setting, this would be <code class="literal">transport.profiles.$PROFILE.xpack.security.ssl.key</code>.</p>
<h4><a id="ip-filtering-settings"></a>IP filtering settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-settings.asciidoc">edit</a></h4>
<p>You can configure the following settings for <a class="xref" href="ip-filtering.html" title="Restricting connections with IP filtering">IP filtering</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.filter.allow</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to allow.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.filter.deny</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to deny.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.filter.allow</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to allow just for HTTP.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.filter.deny</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to deny just for HTTP.
</dd>
<dt>
<span class="term">
<code class="literal">transport.profiles.$PROFILE.xpack.security.filter.allow</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to allow for this profile.
</dd>
<dt>
<span class="term">
<code class="literal">transport.profiles.$PROFILE.xpack.security.filter.deny</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
List of IP addresses to deny for this profile.
</dd>
</dl>
</div>
<h4><a id="hashing-settings"></a>User cache and password hash algorithms<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/security-hash-settings.asciidoc">edit</a></h4>
<p>Certain realms store user credentials in memory. To limit exposure
to credential theft and mitigate credential compromise, the cache only stores
a hashed version of the user credentials in memory. By default, the user cache
is hashed with a salted <code class="literal">sha-256</code> hash algorithm. You can use a different
hashing algorithm by setting the <a class="xref" href="settings.html#static-cluster-setting">static</a>
<code class="literal">cache.hash_algo</code> realm settings to any of the following values:</p>
<div class="table">
<a id="cache-hash-algo"></a>
<p class="title"><strong>Table 1. Cache hash algorithms</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Cache hash algorithms">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p>Algorithm</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Description</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">ssha256</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses a salted <code class="literal">sha-256</code> algorithm (default).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">md5</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">MD5</code> algorithm.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">sha1</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">SHA1</code> algorithm.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 1024 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt4</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 16 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt5</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 32 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt6</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 64 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt7</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 128 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt8</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 256 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt9</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 512 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_10000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_50000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 50000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_100000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 100000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_500000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                              pseudorandom function using 500000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">noop</code>,<code class="literal">clear_text</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Doesn&#8217;t hash the credentials and keeps it in clear text in
                            memory. CAUTION: keeping clear text is considered insecure
                            and can be compromised at the OS level (for example through
                            memory dumps and using <code class="literal">ptrace</code>).</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Likewise, realms that store passwords hash them using cryptographically strong
and password-specific salt values. You can configure the algorithm for password
hashing by setting the <a class="xref" href="settings.html#static-cluster-setting">static</a>
<code class="literal">xpack.security.authc.password_hashing.algorithm</code> setting to one of the
following:</p>
<div class="table">
<a id="password-hashing-algorithms"></a>
<p class="title"><strong>Table 2. Password hashing algorithms</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Password hashing algorithms">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Algorithm</th>
<th align="left" valign="top"></th>
<th align="left" valign="top"></th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 1024 rounds. (default)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt4</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 16 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt5</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 32 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt6</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 64 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt7</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 128 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt8</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 256 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt9</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 512 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt10</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 1024 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt11</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 2048 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt12</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 4096 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt13</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 8192 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt14</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 16384 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_10000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_50000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 50000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_100000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 100000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_500000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                              pseudorandom function using 500000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000000 iterations.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="shard-request-cache"></a>Shard request cache settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h2>
</div></div></div>
<p>When a search request is run against an index or against many indices, each
involved shard executes the search locally and returns its local results to
the <em>coordinating node</em>, which combines these shard-level results into a
&#8220;global&#8221; result set.</p>
<p>The shard-level request cache module caches the local results on each shard.
This allows frequently used (and potentially heavy) search requests to return
results almost instantly. The requests cache is a very good fit for the logging
use case, where only the most recent index is being actively updated&#8201;&#8212;&#8201;results from older indices will be served directly from the cache.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>By default, the requests cache will only cache the results of search requests
where <code class="literal">size=0</code>, so it will not cache <code class="literal">hits</code>,
but it will cache <code class="literal">hits.total</code>,  <a class="xref" href="search-aggregations.html" title="Aggregations">aggregations</a>, and
<a class="xref" href="search.html#search-suggesters" title="Suggesters">suggestions</a>.</p>
<p>Most queries that use <code class="literal">now</code> (see <a class="xref" href="api-conventions.html#date-math" title="Date Math">Date Math</a>) cannot be cached.</p>
<p>Scripted queries that use the API calls which are non-deterministic, such as
<code class="literal">Math.random()</code> or <code class="literal">new Date()</code> are not cached.</p>
</div>
</div>
<h4><a id="_cache_invalidation"></a>Cache invalidation<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The cache is smart&#8201;&#8212;&#8201;it keeps the same <em>near real-time</em> promise as uncached
search.</p>
<p>Cached results are invalidated automatically whenever the shard refreshes, but
only if the data in the shard has actually changed.  In other words, you will
always get the same results from the cache as you would for an uncached search
request.</p>
<p>The longer the refresh interval, the longer that cached entries will remain
valid. If the cache is full, the least recently used cache keys will be
evicted.</p>
<p>The cache can be expired manually with the <a class="xref" href="indices.html#indices-clearcache" title="Clear cache API"><code class="literal">clear-cache</code> API</a>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001,my-index-000002/_cache/clear?request=true</pre>
</div>
<div class="console_widget" data-snippet="snippets/32.console"></div>
<h4><a id="_enabling_and_disabling_caching"></a>Enabling and disabling caching<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The cache is enabled by default, but can be disabled when creating a new
index as follows:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "settings": {
    "index.requests.cache.enable": false
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/33.console"></div>
<p>It can also be enabled or disabled dynamically on an existing index with the
<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API"><code class="literal">update-settings</code></a> API:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_settings
{ "index.requests.cache.enable": true }</pre>
</div>
<div class="console_widget" data-snippet="snippets/34.console"></div>
<h4><a id="_enabling_and_disabling_caching_per_request"></a>Enabling and disabling caching per request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The <code class="literal">request_cache</code> query-string parameter can be used to enable or disable
caching on a <span class="strong strong"><strong>per-request</strong></span> basis.  If set, it overrides the index-level setting:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_search?request_cache=true
{
  "size": 0,
  "aggs": {
    "popular_colors": {
      "terms": {
        "field": "colors"
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/35.console"></div>
<p>Requests where <code class="literal">size</code> is greater than 0 will not be cached even if the request cache is
enabled in the index settings. To cache these requests you will need to use the
query-string parameter detailed here.</p>
<h4><a id="_cache_key"></a>Cache key<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The whole JSON body is used as the cache key.  This means that if the JSON
changes&#8201;&#8212;&#8201;for instance if keys are output in a different order&#8201;&#8212;&#8201;then the
cache key will not be recognised.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Most JSON libraries support a <em>canonical</em> mode which ensures that JSON
keys are always emitted in the same order. This canonical mode can be used in
the application to ensure that a request is always serialized in the same way.</p>
</div>
</div>
<h4><a id="_cache_settings"></a>Cache settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The cache is managed at the node level, and has a default maximum size of <code class="literal">1%</code>
of the heap.  This can be changed in the <code class="literal">config/elasticsearch.yml</code> file with:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">indices.requests.cache.size: 2%</pre>
</div>
<p>Also, you can use the <code class="literal">indices.requests.cache.expire</code> setting to specify a TTL
for cached results, but there should be no reason to do so.  Remember that
stale results are automatically invalidated when the index is refreshed. This
setting is provided for completeness' sake only.</p>
<h4><a id="_monitoring_cache_usage"></a>Monitoring cache usage<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/indices/request_cache.asciidoc">edit</a></h4>
<p>The size of the cache (in bytes) and the number of evictions can be viewed
by index, with the <a class="xref" href="indices.html#indices-stats" title="Index stats API"><code class="literal">indices-stats</code></a> API:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_stats/request_cache?human</pre>
</div>
<div class="console_widget" data-snippet="snippets/36.console"></div>
<p>or by node with the <a class="xref" href="cluster.html#cluster-nodes-stats" title="Nodes stats API"><code class="literal">nodes-stats</code></a> API:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_nodes/stats/indices/request_cache?human</pre>
</div>
<div class="console_widget" data-snippet="snippets/37.console"></div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="slm-settings"></a>Snapshot lifecycle management settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/slm-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p>These are the settings available for configuring
<a class="xref" href="snapshot-lifecycle-management.html" title="SLM: Manage the snapshot lifecycle">snapshot lifecycle management</a> (SLM).</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_cluster_level_settings_2"></a>Cluster-level settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/slm-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<a id="slm-history-index-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">slm.history_index_enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>, Boolean)
Controls whether SLM records the history of actions taken as part of SLM policies
to the <code class="literal">slm-history-*</code> indices. Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="slm-retention-schedule"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">slm.retention_schedule</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, <a class="xref" href="trigger.html#schedule-cron" title="Watcher cron schedule">cron scheduler value</a>)
Controls when the <a class="xref" href="snapshot-lifecycle-management.html#slm-retention" title="Snapshot retention">retention task</a> runs.
Can be a periodic or absolute time schedule.
Supports all values supported by the <a class="xref" href="trigger.html#schedule-cron" title="Watcher cron schedule">cron scheduler</a>.
Defaults to daily at 1:30am UTC: <code class="literal">0 30 1 * * ?</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="slm-retention-duration"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">slm.retention_duration</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, <a class="xref" href="api-conventions.html#time-units" title="Time units">time value</a>)
Limits how long SLM should spend deleting old snapshots.
Defaults to one hour: <code class="literal">1h</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="repositories-url-allowed"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">repositories.url.allowed_urls</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the <a class="xref" href="snapshots-register-repository.html#snapshots-read-only-repository" title="Read-only URL repository">read-only URL repositories</a> that snapshots can be restored from.
</dd>
</dl>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="transform-settings"></a>Transforms  settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/transform-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p>You do not need to configure any settings to use transforms. It is enabled by
default.</p>
<h4><a id="general-transform-settings"></a>General transforms settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/transform-settings.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">node.roles: [ transform ]</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Set <code class="literal">node.roles</code> to contain <code class="literal">transform</code> to
identify the node as a <em>transform node</em>. If you use the default settings for a
node, it does not have the <code class="literal">transform</code> role.
</p>
<p>If a node doesn&#8217;t have this role, the node cannot run transforms. If you want to
run transforms, there must be at least one transform node in your cluster.</p>
<p>If you use the <code class="literal">node.roles</code> setting, all required roles must be explicitly set.
Consult <a class="xref" href="settings.html#modules-node" title="Node">Node</a> to learn more.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.transform.enabled</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.8.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.8.0. Basic License features should always be enabled
</span>
</span>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) This deprecated setting no longer has any
effect.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.transform.num_transform_failure_retries</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">Dynamic</a>) The number of times that a transform
retries when it experiences a non-fatal error. Once the number of retries is
exhausted, the transform task is marked as <code class="literal">failed</code>. The default value is <code class="literal">10</code>
with a valid minimum of <code class="literal">0</code> and maximum of <code class="literal">100</code>. If a transform is already
running, it has to be restarted to use the changed setting.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-transport"></a>Transport<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/transport.asciidoc">edit</a></h2>
</div></div></div>
<p>REST clients send requests to your Elasticsearch cluster over <a class="xref" href="settings.html#modules-http" title="HTTP">HTTP</a>, but
the node that receives a client request cannot always handle it alone and must
normally pass it on to other nodes for further processing. It does this using
the transport networking layer. The transport layer is used for all internal
communication between nodes within a cluster, all communication with the nodes
of a <a class="xref" href="modules-remote-clusters.html" title="Remote clusters">remote cluster</a>, and also by the
<code class="literal">TransportClient</code> in the Elasticsearch Java API.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="transport-settings"></a>Transport settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/transport.asciidoc">edit</a></h3>
</div></div></div>
<p>The following settings can be configured for the internal transport that
communicates over TCP. These settings also use the common
<a class="xref" href="settings.html#modules-network" title="Network settings">network settings</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">transport.port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A bind port range. Defaults to <code class="literal">9300-9400</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.publish_port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The port that other nodes in the cluster
should use when communicating with this node. Useful when a cluster node
is behind a proxy or firewall and the <code class="literal">transport.port</code> is not directly
addressable from the outside. Defaults to the actual port assigned via
<code class="literal">transport.port</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.bind_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The host address to bind the transport service to. Defaults to
<code class="literal">transport.host</code> (if set) or <code class="literal">network.bind_host</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.publish_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The host address to publish for nodes in the cluster to connect to.
Defaults to <code class="literal">transport.host</code> (if set) or <code class="literal">network.publish_host</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Used to set the <code class="literal">transport.bind_host</code> and the <code class="literal">transport.publish_host</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.connect_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The connect timeout for initiating a new connection (in
time setting format). Defaults to <code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.compress</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">true</code> to enable compression (<code class="literal">DEFLATE</code>) between
all nodes. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.ping_schedule</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Schedule a regular application-level ping message
to ensure that transport connections between nodes are kept alive. Defaults to
<code class="literal">5s</code> in the transport client and <code class="literal">-1</code> (disabled) elsewhere. It is preferable
to correctly configure TCP keep-alives instead of using this feature, because
TCP keep-alives apply to all kinds of long-lived connections and not just to
transport connections.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.no_delay</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enable or disable the <a href="https://en.wikipedia.org/wiki/Nagle%27s_algorithm" class="ulink" target="_top">TCP no delay</a>
setting. Defaults to <code class="literal">network.tcp.no_delay</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.keep_alive</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Configures the <code class="literal">SO_KEEPALIVE</code> option for this socket, which
determines whether it sends TCP keepalive probes.
Defaults to <code class="literal">network.tcp.keep_alive</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.keep_idle</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Configures the <code class="literal">TCP_KEEPIDLE</code> option for this socket, which
determines the time in seconds that a connection must be idle before
starting to send TCP keepalive probes. Defaults to <code class="literal">network.tcp.keep_idle</code> if set,
or the system default otherwise.
This value cannot exceed <code class="literal">300</code> seconds. In cases where the system default
is higher than <code class="literal">300</code>, the value is automatically lowered to <code class="literal">300</code>. Only applicable on
Linux and macOS, and requires Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.keep_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Configures the <code class="literal">TCP_KEEPINTVL</code> option for this socket,
which determines the time in seconds between sending TCP keepalive probes.
Defaults to <code class="literal">network.tcp.keep_interval</code> if set, or the system default otherwise.
This value cannot exceed <code class="literal">300</code> seconds. In cases where the system default is higher than <code class="literal">300</code>,
the value is automatically lowered to <code class="literal">300</code>. Only applicable on Linux and macOS,
and requires Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.keep_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Configures the <code class="literal">TCP_KEEPCNT</code> option for this socket, which
determines the number of unacknowledged TCP keepalive probes that may be
sent on a connection before it is dropped. Defaults to <code class="literal">network.tcp.keep_count</code>
if set, or the system default otherwise. Only applicable on Linux and macOS, and
requires Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.reuse_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Should an address be reused or not. Defaults to <code class="literal">network.tcp.reuse_address</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.send_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The size of the TCP send buffer (specified with <a class="xref" href="api-conventions.html#size-units" title="Unit-less quantities">size units</a>).
Defaults to <code class="literal">network.tcp.send_buffer_size</code>.
</dd>
<dt>
<span class="term">
<code class="literal">transport.tcp.receive_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The size of the TCP receive buffer (specified with <a class="xref" href="api-conventions.html#size-units" title="Unit-less quantities">size units</a>).
Defaults to <code class="literal">network.tcp.receive_buffer_size</code>.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="transport-profiles"></a>Transport profiles<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/transport.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch allows you to bind to multiple ports on different interfaces by
the use of transport profiles. See this example configuration</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">transport.profiles.default.port: 9300-9400
transport.profiles.default.bind_host: 10.0.0.1
transport.profiles.client.port: 9500-9600
transport.profiles.client.bind_host: 192.168.0.1
transport.profiles.dmz.port: 9700-9800
transport.profiles.dmz.bind_host: 172.16.1.2</pre>
</div>
<p>The <code class="literal">default</code> profile is special. It is used as a fallback for any other
profiles, if those do not have a specific configuration setting set, and is how
this node connects to other nodes in the cluster.</p>
<p>The following parameters can be configured on each transport profile, as in the
example above:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">port</code>: The port to which to bind.
</li>
<li class="listitem">
<code class="literal">bind_host</code>: The host to which to bind.
</li>
<li class="listitem">
<code class="literal">publish_host</code>: The host which is published in informational APIs.
</li>
</ul>
</div>
<p>Profiles also support all the other transport settings specified in the
<a class="xref" href="settings.html#transport-settings" title="Transport settings">transport settings</a> section, and use these as defaults.
For example, <code class="literal">transport.profiles.client.tcp.reuse_address</code> can be explicitly
configured, and defaults otherwise to <code class="literal">transport.tcp.reuse_address</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="long-lived-connections"></a>Long-lived idle connections<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/transport.asciidoc">edit</a></h4>
</div></div></div>
<p>A transport connection between two nodes is made up of a number of long-lived
TCP connections, some of which may be idle for an extended period of time.
Nonetheless, Elasticsearch requires these connections to remain open, and it
can disrupt the operation of your cluster if any inter-node connections are
closed by an external influence such as a firewall. It is important to
configure your network to preserve long-lived idle connections between
Elasticsearch nodes, for instance by leaving <code class="literal">tcp.keep_alive</code> enabled and
ensuring that the keepalive interval is shorter than any timeout that might
cause idle connections to be closed, or by setting <code class="literal">transport.ping_schedule</code> if
keepalives cannot be configured. Devices which drop connections when they reach
a certain age are a common source of problems to Elasticsearch clusters, and
must not be used.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="request-compression"></a>Request compression<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/transport.asciidoc">edit</a></h4>
</div></div></div>
<p>By default, the <code class="literal">transport.compress</code> setting is <code class="literal">false</code> and network-level
request compression is disabled between nodes in the cluster. This default
normally makes sense for local cluster communication as compression has a
noticeable CPU cost and local clusters tend to be set up with fast network
connections between nodes.</p>
<p>The <code class="literal">transport.compress</code> setting always configures local cluster request
compression and is the fallback setting for remote cluster request compression.
If you want to configure remote request compression differently than local
request compression, you can set it on a per-remote cluster basis using the
<a class="xref" href="modules-remote-clusters.html#remote-cluster-settings" title="Global remote cluster settings"><code class="literal">cluster.remote.${cluster_alias}.transport.compress</code> setting</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="response-compression"></a>Response compression<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/transport.asciidoc">edit</a></h4>
</div></div></div>
<p>The compression settings do not configure compression for responses. Elasticsearch will
compress a response if the inbound request was compressed&#8212;&#8203;even when compression
is not enabled. Similarly, Elasticsearch will not compress a response if the inbound
request was uncompressed&#8212;&#8203;even when compression is enabled.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="transport-tracer"></a>Transport tracer<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/transport.asciidoc">edit</a></h3>
</div></div></div>
<p>The transport layer has a dedicated tracer logger which, when activated, logs incoming and out going requests. The log can be dynamically activated
by setting the level of the <code class="literal">org.elasticsearch.transport.TransportService.tracer</code> logger to <code class="literal">TRACE</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "transient" : {
      "logger.org.elasticsearch.transport.TransportService.tracer" : "TRACE"
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/38.console"></div>
<p>You can also control which actions will be traced, using a set of include and exclude wildcard patterns. By default every request will be traced
except for fault detection pings:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "transient" : {
      "transport.tracer.include" : "*",
      "transport.tracer.exclude" : "internal:coordination/fault_detection/*"
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/39.console"></div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-threadpool"></a>Thread pools<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/threadpool.asciidoc">edit</a></h2>
</div></div></div>
<p>A node uses several thread pools to manage memory consumption.
Queues associated with many of the thread pools enable pending requests
to be held instead of discarded.</p>
<p>There are several thread pools, but the important ones include:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">generic</code>
</span>
</dt>
<dd>
For generic operations (for example, background node discovery).
Thread pool type is <code class="literal">scaling</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="search-threadpool"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">search</code>
</span>
</dt>
<dd>
For count/search/suggest operations. Thread pool type is
<code class="literal">fixed_auto_queue_size</code> with a size of <code class="literal">int((</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal"> * 3) / 2) + 1</code>, and initial queue_size of
<code class="literal">1000</code>.
</dd>
<dt>
<span class="term">
<a id="search-throttled"></a><code class="literal">search_throttled</code>
</span>
</dt>
<dd>
For count/search/suggest/get operations on <code class="literal">search_throttled indices</code>.
Thread pool type is <code class="literal">fixed_auto_queue_size</code> with a size of <code class="literal">1</code>, and initial
queue_size of <code class="literal">100</code>.
</dd>
<dt>
<span class="term">
<code class="literal">get</code>
</span>
</dt>
<dd>
For get operations. Thread pool type is <code class="literal">fixed</code>
with a size of <a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a>,
queue_size of <code class="literal">1000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">analyze</code>
</span>
</dt>
<dd>
For analyze requests. Thread pool type is <code class="literal">fixed</code> with a size of <code class="literal">1</code>, queue
size of <code class="literal">16</code>.
</dd>
<dt>
<span class="term">
<code class="literal">write</code>
</span>
</dt>
<dd>
For single-document index/delete/update and bulk requests. Thread pool type
is <code class="literal">fixed</code> with a size of <a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a>,
queue_size of <code class="literal">10000</code>. The maximum size for this pool is
<code class="literal">1 + </code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a>.
</dd>
<dt>
<span class="term">
<code class="literal">snapshot</code>
</span>
</dt>
<dd>
For snapshot/restore operations. Thread pool type is <code class="literal">scaling</code> with a
keep-alive of <code class="literal">5m</code> and a max of <code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">warmer</code>
</span>
</dt>
<dd>
For segment warm-up operations. Thread pool type is <code class="literal">scaling</code> with a
keep-alive of <code class="literal">5m</code> and a max of <code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">refresh</code>
</span>
</dt>
<dd>
For refresh operations. Thread pool type is <code class="literal">scaling</code> with a
keep-alive of <code class="literal">5m</code> and a max of <code class="literal">min(10, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">listener</code>
</span>
</dt>
<dd>
Mainly for java client executing of action when listener threaded is set to
<code class="literal">true</code>. Thread pool type is <code class="literal">scaling</code> with a default max of
<code class="literal">min(10, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">fetch_shard_started</code>
</span>
</dt>
<dd>
For listing shard states.
Thread pool type is <code class="literal">scaling</code> with keep-alive of <code class="literal">5m</code> and a default maximum
size of <code class="literal">2 * </code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a>.
</dd>
<dt>
<span class="term">
<code class="literal">fetch_shard_store</code>
</span>
</dt>
<dd>
For listing shard stores.
Thread pool type is <code class="literal">scaling</code> with keep-alive of <code class="literal">5m</code> and a default maximum
size of <code class="literal">2 * </code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a>.
</dd>
<dt>
<span class="term">
<code class="literal">flush</code>
</span>
</dt>
<dd>
For <a class="xref" href="indices.html#indices-flush" title="Flush API">flush</a>, <a class="xref" href="indices.html#indices-synced-flush-api" title="Synced flush API">synced flush</a>, and
<a class="xref" href="index-modules-translog.html" title="Translog">translog</a> <code class="literal">fsync</code> operations. Thread pool type is
<code class="literal">scaling</code> with a keep-alive of <code class="literal">5m</code> and a default maximum size of <code class="literal">min(5, (</code>
<a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">force_merge</code>
</span>
</dt>
<dd>
For <a class="xref" href="indices.html#indices-forcemerge" title="Force merge API">force merge</a> operations.
Thread pool type is <code class="literal">fixed</code> with a size of 1 and an unbounded queue size.
</dd>
<dt>
<span class="term">
<code class="literal">management</code>
</span>
</dt>
<dd>
For cluster management.
Thread pool type is <code class="literal">scaling</code> with a keep-alive of <code class="literal">5m</code> and a default
maximum size of <code class="literal">5</code>.
</dd>
<dt>
<span class="term">
<code class="literal">system_read</code>
</span>
</dt>
<dd>
For read operations on system indices.
Thread pool type is <code class="literal">fixed</code> and a default maximum size of
<code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">system_write</code>
</span>
</dt>
<dd>
For write operations on system indices.
Thread pool type is <code class="literal">fixed</code> and a default maximum size of
<code class="literal">min(5, (</code><a class="xref" href="settings.html#node.processors" title="Allocated processors setting"><code class="literal"># of allocated processors</code></a><code class="literal">) / 2)</code>.
</dd>
</dl>
</div>
<p>Changing a specific thread pool can be done by setting its type-specific
parameters; for example, changing the number of threads in the <code class="literal">write</code> thread
pool:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">thread_pool:
    write:
        size: 30</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="thread-pool-types"></a>Thread pool types<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/threadpool.asciidoc">edit</a></h3>
</div></div></div>
<p>The following are the types of thread pools and their respective parameters:</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="fixed-thread-pool"></a><code class="literal">fixed</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/threadpool.asciidoc">edit</a></h4>
</div></div></div>
<p>The <code class="literal">fixed</code> thread pool holds a fixed size of threads to handle the
requests with a queue (optionally bounded) for pending requests that
have no threads to service them.</p>
<p>The <code class="literal">size</code> parameter controls the number of threads.</p>
<p>The <code class="literal">queue_size</code> allows to control the size of the queue of pending
requests that have no threads to execute them. By default, it is set to
<code class="literal">-1</code> which means its unbounded. When a request comes in and the queue is
full, it will abort the request.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">thread_pool:
    write:
        size: 30
        queue_size: 1000</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="fixed-auto-queue-size"></a><code class="literal">fixed_auto_queue_size</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/threadpool.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>deprecated[7.7.0,The experimental <code class="literal">fixed_auto_queue_size</code> thread pool type is
deprecated and will be removed in 8.0.]</p>
<p>The <code class="literal">fixed_auto_queue_size</code> thread pool holds a fixed size of threads to handle
the requests with a bounded queue for pending requests that have no threads to
service them. It&#8217;s similar to the <code class="literal">fixed</code> threadpool, however, the <code class="literal">queue_size</code>
automatically adjusts according to calculations based on
<a href="https://en.wikipedia.org/wiki/Little%27s_law" class="ulink" target="_top">Little&#8217;s Law</a>. These calculations
will potentially adjust the <code class="literal">queue_size</code> up or down by 50 every time
<code class="literal">auto_queue_frame_size</code> operations have been completed.</p>
<p>The <code class="literal">size</code> parameter controls the number of threads.</p>
<p>The <code class="literal">queue_size</code> allows to control the initial size of the queue of pending
requests that have no threads to execute them.</p>
<p>The <code class="literal">min_queue_size</code> setting controls the minimum amount the <code class="literal">queue_size</code> can be
adjusted to.</p>
<p>The <code class="literal">max_queue_size</code> setting controls the maximum amount the <code class="literal">queue_size</code> can be
adjusted to.</p>
<p>The <code class="literal">auto_queue_frame_size</code> setting controls the number of operations during
which measurement is taken before the queue is adjusted. It should be large
enough that a single operation cannot unduly bias the calculation.</p>
<p>The <code class="literal">target_response_time</code> is a time value setting that indicates the targeted
average response time for tasks in the thread pool queue. If tasks are routinely
above this time, the thread pool queue will be adjusted down so that tasks are
rejected.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">thread_pool:
    search:
        size: 30
        queue_size: 500
        min_queue_size: 10
        max_queue_size: 1000
        auto_queue_frame_size: 2000
        target_response_time: 1s</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="scaling-thread-pool"></a><code class="literal">scaling</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/threadpool.asciidoc">edit</a></h4>
</div></div></div>
<p>The <code class="literal">scaling</code> thread pool holds a dynamic number of threads. This
number is proportional to the workload and varies between the value of
the <code class="literal">core</code> and <code class="literal">max</code> parameters.</p>
<p>The <code class="literal">keep_alive</code> parameter determines how long a thread should be kept
around in the thread pool without it doing any work.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">thread_pool:
    warmer:
        core: 1
        max: 8
        keep_alive: 2m</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="node.processors"></a>Allocated processors setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/modules/threadpool.asciidoc">edit</a></h3>
</div></div></div>
<p>The number of processors is automatically detected, and the thread pool settings
are automatically set based on it. In some cases it can be useful to override
the number of detected processors. This can be done by explicitly setting the
<code class="literal">node.processors</code> setting.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.processors: 2</pre>
</div>
<p>There are a few use-cases for explicitly overriding the <code class="literal">node.processors</code>
setting:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
If you are running multiple instances of Elasticsearch on the same host but want want
Elasticsearch to size its thread pools as if it only has a fraction of the CPU, you
should override the <code class="literal">node.processors</code> setting to the desired fraction, for
example, if you&#8217;re running two instances of Elasticsearch on a 16-core machine, set
<code class="literal">node.processors</code> to 8.  Note that this is an expert-level use case and there&#8217;s
a lot more involved than just setting the <code class="literal">node.processors</code> setting as there are
other considerations like changing the number of garbage collector threads,
pinning processes to cores, and so on.
</li>
<li class="listitem">
Sometimes the number of processors is wrongly detected and in such cases
explicitly setting the <code class="literal">node.processors</code> setting will workaround such issues.
</li>
</ol>
</div>
<p>In order to check the number of processors detected, use the nodes info
API with the <code class="literal">os</code> flag.</p>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="notification-settings"></a>Watcher settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/notification-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p><a id="notification-settings-description"></a>You configure Watcher settings to set up Watcher and send notifications via
<a class="xref" href="settings.html#email-notification-settings" title="Email Notification Settings">email</a>,
<a class="xref" href="settings.html#slack-notification-settings" title="Slack Notification Settings">Slack</a>, and
<a class="xref" href="settings.html#pagerduty-notification-settings" title="PagerDuty Notification Settings">PagerDuty</a>.</p>
<p>All of these settings can be added to the <code class="literal">elasticsearch.yml</code> configuration file,
with the exception of the secure settings, which you add to the Elasticsearch keystore.
For more information about creating and updating the Elasticsearch keystore, see
<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure settings</a>. Dynamic settings can also be updated across a cluster with the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings API</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="general-notification-settings"></a>General Watcher Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/notification-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.watcher.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">false</code> to disable Watcher on the node.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-watcher-encrypt-sensitive-data"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.watcher.encrypt_sensitive_data</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">true</code> to encrypt sensitive data. If this setting is enabled, you
must also specify the <code class="literal">xpack.watcher.encryption_key</code> setting. For more
information, see <a class="xref" href="encrypting-data.html" title="Encrypting sensitive data in Watcher"><em>Encrypting sensitive data in Watcher</em></a>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.watcher.encryption_key</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Specifies the path to a file that contains a key for encrypting sensitive data.
If <code class="literal">xpack.watcher.encrypt_sensitive_data</code> is set to <code class="literal">true</code>, this setting is
required. For more information, see <a class="xref" href="encrypting-data.html" title="Encrypting sensitive data in Watcher"><em>Encrypting sensitive data in Watcher</em></a>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="xpack-watcher-history-cleaner-service"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.watcher.history.cleaner_service.enabled</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">6.3.0</span>]
<span class="Admonishment-detail">
Added in 6.3.0. Default changed to <code class="literal">true</code>.
</span>
</span>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.0.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.0.0. Watcher history indices are now managed by the <code class="literal">watch-history-ilm-policy</code> ILM policy
</span>
</span>
</p>
<p>Set to <code class="literal">true</code> (default) to enable the cleaner service. The cleaner service
removes previous versions of Watcher indices (for example,
<code class="literal">.watcher-history*</code>) when it determines that they are old. The duration of
Watcher indices is determined by the <code class="literal">xpack.monitoring.history.duration</code>
setting, which defaults to 7 days. For more information about that setting,
see <a class="xref" href="settings.html#monitoring-settings" title="Monitoring settings in Elasticsearch">Monitoring settings</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.proxy.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the address of the proxy server to use to connect to HTTP services.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.proxy.port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the port number to use to connect to the proxy server.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.proxy.scheme</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Protocol used to communicate with the proxy server. Valid values are <code class="literal">http</code> and
<code class="literal">https</code>. Defaults to the protocol used in the request.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.default_connection_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum period to wait until abortion of the request, when a
connection is being initiated.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.default_read_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum period of inactivity between two data packets, before the
request is aborted.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.max_response_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the maximum size an HTTP response is allowed to have, defaults to
<code class="literal">10mb</code>, the maximum configurable value is <code class="literal">50mb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.whitelist</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of URLs, that the internal HTTP client is allowed to connect to. This
client is used in the HTTP input, the webhook, the slack, pagerduty,
and jira actions. This setting can be updated dynamically.  It defaults to <code class="literal">*</code>
allowing everything. Note: If you configure this setting and you are using one
of the slack/pagerduty actions, you have to ensure that the
corresponding endpoints are explicitly allowed as well.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ssl-notification-settings"></a>Watcher HTTP TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="configuring-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the verification of certificates.
Controls the verification of certificates.
</p>
<p>Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server&#8217;s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="watcher-tls-ssl-key-trusted-certificate-settings"></a>Watcher HTTP TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate are optional and would be used if the server requires client authentication for PKI
authentication.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pem_encoded_files_4"></a>PEM encoded files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_java_keystore_files_4"></a>Java keystore files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="watcher-pkcs12-files"></a>PKCS#12 files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="watcher-pkcs11-tokens"></a>PKCS#11 tokens<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use a PKCS#11 token that contains the private key,
certificate and certificates that should be trusted.</p>
<p>PKCS#11 token require additional configuration on the JVM level and can be enabled
via the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.http.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS11</code> to indicate that the PKCS#11 token should be used as a keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.http.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When configuring the PKCS#11 token that your JVM is configured to use as
a keystore or a truststore for Elasticsearch, the PIN for the token can be
configured by setting the appropriate value to <code class="literal">ssl.truststore.password</code>
or <code class="literal">ssl.truststore.secure_password</code> in the context that you are configuring.
Since there can only be one PKCS#11 token configured, only one keystore and
truststore will be usable for configuration in Elasticsearch. This in turn means
that only one certificate can be used for TLS both in the transport and the
http layer.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="email-notification-settings"></a>Email Notification Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/notification-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following email notification settings in
<code class="literal">elasticsearch.yml</code>. For more information about sending notifications
via email, see <a class="xref" href="actions.html#configuring-email-actions" title="Configuring email actions">Configuring email actions</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.default_account</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default email account to use.
</p>
<p>If you configure multiple email accounts, you must either configure this setting
or specify the email account to use in the <a class="xref" href="actions.html#actions-email" title="Watcher email action"><code class="literal">email</code></a> action. See
<a class="xref" href="actions.html#configuring-email" title="Configuring email accounts">Configuring email accounts</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.account</code>
</span>
</dt>
<dd>
<p>
Specifies account information for sending notifications via email. You
can specify the following email account attributes:
</p>
<div class="variablelist">
<a id="email-account-attributes"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">profile</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The <a class="xref" href="actions.html#configuring-email" title="Configuring email accounts">email profile</a> to use to build the MIME
messages that are sent from the account. Valid values: <code class="literal">standard</code>, <code class="literal">gmail</code> and
<code class="literal">outlook</code>. Defaults to <code class="literal">standard</code>.
</dd>
<dt>
<span class="term">
<code class="literal">email_defaults.*</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
An optional set of email attributes to use as defaults
for the emails sent from the account. See
<a class="xref" href="actions.html#email-action-attributes" title="Email action attributes">Email action attributes</a> for the supported
attributes.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.auth</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Set to <code class="literal">true</code> to attempt to authenticate the user using the
AUTH command. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The SMTP server to connect to. Required.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The SMTP server port to connect to. Defaults to 25.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.user</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The user name for SMTP. Required.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The password for the specified SMTP user.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.starttls.enable</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Set to <code class="literal">true</code> to enable the use of the <code class="literal">STARTTLS</code>
command (if supported by the server) to switch the connection to a
TLS-protected connection before issuing any login commands. Note that
an appropriate trust store must be configured so that the client will
trust the server&#8217;s certificate. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.starttls.required</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If <code class="literal">true</code>, then <code class="literal">STARTTLS</code> will be required. If that command fails, the
connection will fail. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.ssl.trust</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A list of SMTP server hosts that are assumed trusted and for which
certificate verification is disabled. If set to "*", all hosts are
trusted. If set to a whitespace separated list of hosts, those hosts
are trusted. Otherwise, trust depends on the certificate the server
presents.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The socket read timeout. Default is two minutes.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.connection_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The socket connection timeout. Default is two minutes.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.write_timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The socket write timeout. Default is two minutes.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.local_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A configurable local address when sending emails. Not configured by default.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.local_port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A configurable local port when sending emails. Not configured by default.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.send_partial</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Send an email, despite one of the receiver addresses being invalid.
</dd>
<dt>
<span class="term">
<code class="literal">smtp.wait_on_quit</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If set to false the QUIT command is sent and the connection closed. If set to
true, the QUIT command is sent and a reply is waited for. True by default.
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.html.sanitization.allow</code>
</span>
</dt>
<dd>
<p>
Specifies the HTML elements that are allowed in email notifications. For
more information, see
<a class="xref" href="actions.html#email-html-sanitization" title="Configuring HTML sanitization options">Configuring HTML sanitization options</a>. You can
specify individual HTML elements and the following HTML feature groups:
</p>
<div class="variablelist">
<a id="html-feature-groups"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">_tables</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
All table related elements: <code class="literal">&lt;table&gt;</code>, <code class="literal">&lt;th&gt;</code>, <code class="literal">&lt;tr&gt;</code>, <code class="literal">&lt;td&gt;</code>, <code class="literal">&lt;caption&gt;</code>,
<code class="literal">&lt;col&gt;</code>, <code class="literal">&lt;colgroup&gt;</code>, <code class="literal">&lt;thead&gt;</code>, <code class="literal">&lt;tbody&gt;</code>, and <code class="literal">&lt;tfoot&gt;</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_blocks</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The following block elements: <code class="literal">&lt;p&gt;</code>, <code class="literal">&lt;div&gt;</code>, <code class="literal">&lt;h1&gt;</code>,
<code class="literal">&lt;h2&gt;</code>, <code class="literal">&lt;h3&gt;</code>, <code class="literal">&lt;h4&gt;</code>, <code class="literal">&lt;h5&gt;</code>, <code class="literal">&lt;h6&gt;</code>, <code class="literal">&lt;ul&gt;</code>, <code class="literal">&lt;ol&gt;</code>,
<code class="literal">&lt;li&gt;</code>, and <code class="literal">&lt;blockquote&gt;</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_formatting</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The following inline formatting elements: <code class="literal">&lt;b&gt;</code>, <code class="literal">&lt;i&gt;</code>,
<code class="literal">&lt;s&gt;</code>, <code class="literal">&lt;u&gt;</code>, <code class="literal">&lt;o&gt;</code>, <code class="literal">&lt;sup&gt;</code>, <code class="literal">&lt;sub&gt;</code>, <code class="literal">&lt;ins&gt;</code>, <code class="literal">&lt;del&gt;</code>,
<code class="literal">&lt;strong&gt;</code>, <code class="literal">&lt;strike&gt;</code>, <code class="literal">&lt;tt&gt;</code>, <code class="literal">&lt;code&gt;</code>, <code class="literal">&lt;big&gt;</code>,
<code class="literal">&lt;small&gt;</code>, <code class="literal">&lt;hr&gt;</code>, <code class="literal">&lt;br&gt;</code>, <code class="literal">&lt;span&gt;</code>, and <code class="literal">&lt;em&gt;</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_links</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The <code class="literal">&lt;a&gt;</code> element with an <code class="literal">href</code> attribute that points
to a URL using the following protocols: <code class="literal">http</code>, <code class="literal">https</code>
and <code class="literal">mailto</code>.
</dd>
<dt>
<span class="term">
<code class="literal">_styles</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The <code class="literal">style</code> attribute on all elements. Note that CSS
attributes are also sanitized to prevent XSS attacks.
</dd>
<dt>
<span class="term">
<code class="literal">img</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">img:all</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
All images (external and embedded).
</dd>
<dt>
<span class="term">
<code class="literal">img:embedded</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Only embedded images. Embedded images can only use the
<code class="literal">cid:</code> URL protocol in their <code class="literal">src</code> attribute.
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.html.sanitization.disallow</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the HTML elements that are NOT allowed in email notifications.
You can specify individual HTML elements and <a class="xref" href="settings.html#html-feature-groups">HTML feature groups</a>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.html.sanitization.enabled</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set to <code class="literal">false</code> to completely disable HTML sanitation. Not recommended.
Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ssl-notification-smtp-settings"></a>Watcher Email TLS/SSL settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM&#8217;s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="configuring-security.html#fips-140-compliance" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Controls the verification of certificates.
Controls the verification of certificates.
</p>
<p>Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server&#8217;s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Supported cipher suites vary depending on which version of Java you use. For
example, for version 12 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>, <code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<p>For more information, see Oracle&#8217;s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="watcher-email-tls-ssl-key-trusted-certificate-settings"></a>Watcher Email TLS/SSL key and trusted certificate settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate are optional and would be used if the server requires client authentication for PKI
authentication.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_pem_encoded_files_5"></a>PEM encoded files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.key</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.secure_key_passphrase</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.certificate</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_java_keystore_files_5"></a>Java keystore files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="watcher-email-pkcs12-files"></a>PKCS#12 files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.ssl.truststore.secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>)
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="watcher-email-pkcs11-tokens"></a>PKCS#11 tokens<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/ssl-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch can be configured to use a PKCS#11 token that contains the private key,
certificate and certificates that should be trusted.</p>
<p>PKCS#11 token require additional configuration on the JVM level and can be enabled
via the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.email.keystore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Set this to <code class="literal">PKCS11</code> to indicate that the PKCS#11 token should be used as a keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.notification.email.truststore.type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When configuring the PKCS#11 token that your JVM is configured to use as
a keystore or a truststore for Elasticsearch, the PIN for the token can be
configured by setting the appropriate value to <code class="literal">ssl.truststore.password</code>
or <code class="literal">ssl.truststore.secure_password</code> in the context that you are configuring.
Since there can only be one PKCS#11 token configured, only one keystore and
truststore will be usable for configuration in Elasticsearch. This in turn means
that only one certificate can be used for TLS both in the transport and the
http layer.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="slack-notification-settings"></a>Slack Notification Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/notification-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following Slack notification settings in
<code class="literal">elasticsearch.yml</code>. For more information about sending notifications
via Slack, see <a class="xref" href="actions.html#configuring-slack-actions" title="Configuring Slack actions">Configuring Slack actions</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.slack.default_account</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default Slack account to use.
</p>
<p>If you configure multiple Slack accounts, you must either configure this setting
or specify the Slack account to use in the <a class="xref" href="actions.html#actions-slack" title="Watcher Slack Action"><code class="literal">slack</code></a> action. See
<a class="xref" href="actions.html#configuring-slack" title="Configuring Slack Accounts">Configuring Slack Accounts</a>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="slack-account-attributes"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.slack.account</code>
</span>
</dt>
<dd>
<p>
Specifies account information for sending notifications
via Slack. You can specify the following Slack account attributes:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">secure_url</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The Incoming Webhook URL to use to post messages to Slack. Required.
</dd>
<dt>
<span class="term">
<code class="literal">message_defaults</code>
</span>
</dt>
<dd>
<p>
Default values for
<a class="xref" href="actions.html#slack-action-attributes" title="Slack action attributes">Slack message attributes</a>.
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">from</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The sender name to display in the
Slack message. Defaults to the watch ID.
</dd>
<dt>
<span class="term">
<code class="literal">to</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The default Slack channels or groups you
want to send messages to.
</dd>
<dt>
<span class="term">
<code class="literal">icon</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The icon to display in the Slack messages.
Overrides the incoming webhook&#8217;s configured
icon. Accepts a public URL to an image.
</dd>
<dt>
<span class="term">
<code class="literal">text</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The default message content.
</dd>
<dt>
<span class="term">
<code class="literal">attachment</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default message attachments. Slack message attachments
enable you to create more richly-formatted messages.
Specified as an array as defined in the
<a href="https://api.slack.com/docs/attachments" class="ulink" target="_top">
Slack attachments documentation</a>.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="jira-notification-settings"></a>Jira Notification Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/notification-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following Jira notification settings in
<code class="literal">elasticsearch.yml</code>. For more information about using notifications
to create issues in Jira, see <a class="xref" href="actions.html#configuring-jira-actions" title="Configuring Jira actions">Configuring Jira actions</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.jira.default_account</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default Jira account to use.
</p>
<p>If you configure multiple Jira accounts, you must either configure this setting
or specify the Jira account to use in the <a class="xref" href="actions.html#actions-jira" title="Watcher Jira action"><code class="literal">jira</code></a> action. See
<a class="xref" href="actions.html#configuring-jira" title="Configuring Jira accounts">Configuring Jira accounts</a>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="jira-account-attributes"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.jira.account</code>
</span>
</dt>
<dd>
<p>
Specifies account information for using notifications to create
issues in Jira. You can specify the following Jira account attributes:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_http</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
If <code class="literal">false</code>, Watcher rejects URL settings that use a HTTP protocol. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">secure_url</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The URL of the Jira Software server. Required.
</dd>
<dt>
<span class="term">
<code class="literal">secure_user</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The name of the user to connect to the Jira Software server. Required.
</dd>
<dt>
<span class="term">
<code class="literal">secure_password</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The password of the user to connect to the Jira Software server. Required.
</dd>
<dt>
<span class="term">
<code class="literal">issue_defaults</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default fields values for the issue created in Jira. See
<a class="xref" href="actions.html#jira-action-attributes" title="Jira action attributes">Jira action attributes</a> for more information.
Optional.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="pagerduty-notification-settings"></a>PagerDuty Notification Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/settings/notification-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>You can configure the following PagerDuty notification settings in
<code class="literal">elasticsearch.yml</code>. For more information about sending notifications
via PagerDuty, see <a class="xref" href="actions.html#configuring-pagerduty-actions" title="Configuring PagerDuty actions">Configuring PagerDuty actions</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.pagerduty.default_account</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Default PagerDuty account to use.
</p>
<p>If you configure multiple PagerDuty accounts, you must either configure this
setting or specify the PagerDuty account to use in the
<a class="xref" href="actions.html#actions-pagerduty" title="Watcher PagerDuty action"><code class="literal">pagerduty</code></a> action. See <a class="xref" href="actions.html#configuring-pagerduty" title="Configuring PagerDuty accounts">Configuring PagerDuty accounts</a>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="pagerduty-account-attributes"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.notification.pagerduty.account</code>
</span>
</dt>
<dd>
<p>
Specifies account information for sending notifications via PagerDuty. You can
specify the following PagerDuty account attributes:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A name for the PagerDuty account associated with the API key you
are using to access PagerDuty. Required.
</dd>
<dt>
<span class="term">
<code class="literal">secure_service_api_key</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#secure-settings" title="Secure settings">Secure</a>, <a class="xref" href="settings.html#reloadable-secure-settings" title="Reloadable secure settings">reloadable</a>)
The <a href="https://developer.pagerduty.com/documentation/rest/authentication" class="ulink" target="_top">
PagerDuty API key</a> to use to access PagerDuty. Required.
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">event_defaults</code>
</span>
</dt>
<dd>
<p>
Default values for
<a class="xref" href="actions.html#pagerduty-event-trigger-incident-attributes" title="Pagerduty event trigger incident attributes">PagerDuty event attributes</a>.
Optional.
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">description</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A string that contains the default description for PagerDuty events.
If no default is configured, each PagerDuty action must specify a
<code class="literal">description</code>.
</dd>
<dt>
<span class="term">
<code class="literal">incident_key</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A string that contains the default incident key to use when sending
PagerDuty events.
</dd>
<dt>
<span class="term">
<code class="literal">client</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
A string that specifies the default monitoring client.
</dd>
<dt>
<span class="term">
<code class="literal">client_url</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The URL of the default monitoring client.
</dd>
<dt>
<span class="term">
<code class="literal">event_type</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
The default event type. Valid values: <code class="literal">trigger</code>,<code class="literal">resolve</code>, <code class="literal">acknowledge</code>.
</dd>
<dt>
<span class="term">
<code class="literal">attach_payload</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Whether or not to provide the watch payload as context for
the event by default. Valid values: <code class="literal">true</code>, <code class="literal">false</code>.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="install-elasticsearch.html">« Installing Elasticsearch</a>
</span>
<span class="next">
<a href="important-settings.html">Important Elasticsearch configuration »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
