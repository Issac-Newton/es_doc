<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Index APIs | Elasticsearch Guide | Elastic</title>
<meta class="elastic" name="content" content="Index APIs | Elasticsearch Guide">

<link rel="home" href="index.html" title="Elasticsearch Guide"/>
<link rel="up" href="rest-apis.html" title="REST APIs"/>
<link rel="prev" href="graph-explore-api.html" title="Graph explore API"/>
<link rel="next" href="index-lifecycle-management-api.html" title="Index lifecycle management APIs"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="graph-explore-api.html">« Graph explore API</a>
</span>
<span class="next">
<a href="index-lifecycle-management-api.html">Index lifecycle management APIs »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices"></a>Index APIs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices.asciidoc">edit</a></h2>
</div></div></div>
<p>Index APIs are used to manage individual indices,
index settings, aliases, mappings, and index templates.</p>
<h3><a id="index-management"></a>Index management:<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="indices.html#indices-create-index" title="Create index API">Create index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-delete-index" title="Delete index API">Delete index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-get-index" title="Get index API">Get index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-exists" title="Index exists API">Index exists</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-close" title="Close index API">Close index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-open-close" title="Open index API">Open index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-shrink-index" title="Shrink index API">Shrink index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-split-index" title="Split index API">Split index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-clone-index" title="Clone index API">Clone index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-rollover-index" title="Rollover index API">Rollover index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#freeze-index-api" title="Freeze index API">Freeze index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#unfreeze-index-api" title="Unfreeze index API">Unfreeze index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-resolve-index-api" title="Resolve index API">Resolve index</a>
</li>
</ul>
</div>
<h3><a id="mapping-management"></a>Mapping management:<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="indices.html#indices-put-mapping" title="Put mapping API">Put mapping</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-get-mapping" title="Get mapping API">Get mapping</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-get-field-mapping" title="Get field mapping API">Get field mapping</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-types-exists" title="Type exists API">Type exists</a>
</li>
</ul>
</div>
<h3><a id="alias-management"></a>Alias management:<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="indices.html#indices-add-alias" title="Add index alias API">Add index alias</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-delete-alias" title="Delete index alias API">Delete index alias</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-get-alias" title="Get index alias API">Get index alias</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-alias-exists" title="Index alias exists API">Index alias exists</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>
</li>
</ul>
</div>
<h3><a id="index-settings"></a>Index settings:<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">Update index settings</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-get-settings" title="Get index settings API">Get index settings</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-analyze" title="Analyze API">Analyze</a>
</li>
</ul>
</div>
<h3><a id="index-templates-apis"></a>Index templates:<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices.asciidoc">edit</a></h3>
<p>Index templates automatically apply settings, mappings, and aliases to new indices.
They are most often used to configure rolling indices for time series data to
ensure that each new index has the same configuration as the previous one.
The index template associated with a data stream configures its backing indices.
For more information, see <a class="xref" href="index-templates.html" title="Index templates">Index Templates</a>.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="indices.html#indices-put-template" title="Put index template API">Put index template</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-get-template" title="Get index template API">Get index template</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-delete-template" title="Delete index template API">Delete index template</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-component-template" title="Put component template API">Put component template</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#getting-component-templates" title="Get component template API">Get component template</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-delete-component-template" title="Delete component template API">Delete component template</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-simulate-index" title="Simulate index API">Simulate index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-simulate-template" title="Simulate index template API">Simulate template</a>
</li>
</ul>
</div>
<h3><a id="monitoring"></a>Monitoring:<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="indices.html#indices-stats" title="Index stats API">Index stats</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-segments" title="Index segments API">Index segments</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-recovery" title="Index recovery API">Index recovery</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-shards-stores" title="Index shard stores API">Index shard stores</a>
</li>
</ul>
</div>
<h3><a id="status-management"></a>Status management:<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="indices.html#indices-clearcache" title="Clear cache API">Clear cache</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-refresh" title="Refresh API">Refresh</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-flush" title="Flush API">Flush</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-synced-flush-api" title="Synced flush API">Synced flush</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#indices-forcemerge" title="Force merge API">Force merge</a>
</li>
</ul>
</div>
<h3><a id="dangling-indices-api"></a>Dangling indices:<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="indices.html#dangling-indices-list" title="List dangling indices API">List dangling indices</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#dangling-index-import" title="Import dangling index API">Import dangling index</a>
</li>
<li class="listitem">
<a class="xref" href="indices.html#dangling-index-delete" title="Delete dangling index API">Delete dangling index</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-add-alias"></a>Add index alias API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/add-alias.asciidoc">edit</a></h2>
</div></div></div>

<p>Creates or updates an index alias.</p>
<p>An index alias is a secondary name
used to refer to one or more existing indices.</p>
<p>Most Elasticsearch APIs accept an index alias
in place of an index name.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_alias/alias1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1812.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="add-alias-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/add-alias.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT /&lt;index&gt;/_alias/&lt;alias&gt;</code></p>
<p><code class="literal">POST /&lt;index&gt;/_alias/&lt;alias&gt;</code></p>
<p><code class="literal">PUT /&lt;index&gt;/_aliases/&lt;alias&gt;</code></p>
<p><code class="literal">POST /&lt;index&gt;/_aliases/&lt;alias&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="add-alias-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/add-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for both the index and index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="add-alias-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/add-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, string)
Comma-separated list or wildcard expression of index names
to add to the alias.
</p>
<p>To add all indices in the cluster to the alias,
use a value of <code class="literal">_all</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot add <a class="xref" href="data-streams.html" title="Data streams">data streams</a> to an index alias.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">&lt;alias&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Name of the index alias to create or update.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="add-alias-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/add-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="add-alias-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/add-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">filter</code>
</span>
</dt>
<dd>
<p>
(Required, query object)
<a class="xref" href="compound-queries.html#query-dsl-bool-query" title="Boolean query">Filter query</a>
used to limit the index alias.
</p>
<p>If specified,
the index alias only applies to documents returned by the filter.
<a class="xref" href="compound-queries.html#query-dsl-bool-query" title="Boolean query">Filter query</a>
used to limit the index alias.</p>
<p>If specified,
the index alias only applies to documents returned by the filter.</p>
</dd>
<dt>
<span class="term">
<code class="literal">routing</code>
</span>
</dt>
<dd>
(Optional, string)
Custom <a class="xref" href="mapping-fields.html#mapping-routing-field" title="_routing field">routing value</a>
used to route operations to a specific shard.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="add-alias-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/add-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="alias-adding"></a>Add a time-based alias<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/add-alias.asciidoc">edit</a></h4>
</div></div></div>
<p>The following request creates an alias, <code class="literal">2030</code>,
for the <code class="literal">logs_20302801</code> index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /logs_20302801/_alias/2030</pre>
</div>
<div class="console_widget" data-snippet="snippets/1813.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="add-alias-api-user-ex"></a>Add a user-based alias<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/add-alias.asciidoc">edit</a></h4>
</div></div></div>
<p>First, create an index, <code class="literal">users</code>,
with a mapping for the <code class="literal">user_id</code> field:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /users
{
  "mappings" : {
    "properties" : {
      "user_id" : {"type" : "integer"}
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1814.console"></div>
<p>Then add the index alias for a specific user, <code class="literal">user_12</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /users/_alias/user_12
{
  "routing" : "12",
  "filter" : {
    "term" : {
      "user_id" : 12
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1815.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="alias-index-creation"></a>Add an alias during index creation<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/add-alias.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the <a class="xref" href="indices.html#create-index-aliases" title="Aliases">create index API</a>
to add an index alias during index creation.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /logs_20302801
{
  "mappings": {
    "properties": {
      "year": { "type": "integer" }
    }
  },
  "aliases": {
    "current_day": {},
    "2030": {
      "filter": {
        "term": { "year": 2030 }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1816.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-analyze"></a>Analyze API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h2>
</div></div></div>

<p>Performs <a class="xref" href="analysis.html" title="Text analysis">analysis</a> on a text string
and returns the resulting tokens.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_analyze
{
  "analyzer" : "standard",
  "text" : "Quick Brown Foxes!"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1817.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="analyze-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_analyze</code></p>
<p><code class="literal">POST /_analyze</code></p>
<p><code class="literal">GET /&lt;index&gt;/_analyze</code></p>
<p><code class="literal">POST /&lt;index&gt;/_analyze</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="analyze-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the specified index.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="analyze-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Index used to derive the analyzer.</p>
<p>If specified,
the <code class="literal">analyzer</code> or <code class="literal">&lt;field&gt;</code> parameter overrides this value.</p>
<p>If no analyzer or field are specified,
the analyze API uses the default analyzer for the index.</p>
<p>If no index is specified
or the index does not have a default analyzer,
the analyze API uses the <a class="xref" href="analysis-analyzers.html#analysis-standard-analyzer" title="Standard analyzer">standard analyzer</a>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="analyze-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">analyzer</code>
</span>
</dt>
<dd>
<p>(Optional, string)
The name of the analyzer that should be applied to the provided <code class="literal">text</code>. This could be a
<a class="xref" href="analysis-analyzers.html" title="Built-in analyzer reference">built-in analyzer</a>, or an analyzer that&#8217;s been configured in the index.</p>
<p>If this parameter is not specified,
the analyze API uses the analyzer defined in the field&#8217;s mapping.</p>
<p>If no field is specified,
the analyze API uses the default analyzer for the index.</p>
<p>If no index is specified,
or the index does not have a default analyzer,
the analyze API uses the <a class="xref" href="analysis-analyzers.html#analysis-standard-analyzer" title="Standard analyzer">standard analyzer</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">attributes</code>
</span>
</dt>
<dd>
(Optional, array of strings)
Array of token attributes used to filter the output of the <code class="literal">explain</code> parameter.
</dd>
<dt>
<span class="term">
<code class="literal">char_filter</code>
</span>
</dt>
<dd>
(Optional, array of strings)
Array of character filters used to preprocess characters before the tokenizer.
See <a class="xref" href="analysis-charfilters.html" title="Character filters reference"><em>Character filters reference</em></a> for a list of character filters.
</dd>
<dt>
<span class="term">
<code class="literal">explain</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>, the response includes token attributes and additional details.
Defaults to <code class="literal">false</code>.
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
The format of the additional detail information is labelled as experimental in Lucene and it may change in the future.
</span>
</span>
</dd>
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Field used to derive the analyzer.
To use this parameter,
you must specify an index.</p>
<p>If specified,
the <code class="literal">analyzer</code> parameter overrides this value.</p>
<p>If no field is specified,
the analyze API uses the default analyzer for the index.</p>
<p>If no index is specified
or the index does not have a default analyzer,
the analyze API uses the <a class="xref" href="analysis-analyzers.html#analysis-standard-analyzer" title="Standard analyzer">standard analyzer</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">filter</code>
</span>
</dt>
<dd>
(Optional, Array of strings)
Array of token filters used to apply after the tokenizer.
See <a class="xref" href="analysis-tokenfilters.html" title="Token filter reference"><em>Token filter reference</em></a> for a list of token filters.
</dd>
<dt>
<span class="term">
<code class="literal">normalizer</code>
</span>
</dt>
<dd>
(Optional, string)
Normalizer to use to convert text into a single token.
See <a class="xref" href="analysis-normalizers.html" title="Normalizers"><em>Normalizers</em></a> for a list of normalizers.
</dd>
<dt>
<span class="term">
<code class="literal">text</code>
</span>
</dt>
<dd>
(Required, string or array of strings)
Text to analyze.
If an array of strings is provided, it is analyzed as a multi-value field.
</dd>
<dt>
<span class="term">
<code class="literal">tokenizer</code>
</span>
</dt>
<dd>
(Optional, string)
Tokenizer to use to convert text into tokens.
See <a class="xref" href="analysis-tokenizers.html" title="Tokenizer reference"><em>Tokenizer reference</em></a> for a list of tokenizers.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="analyze-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="analyze-api-no-index-ex"></a>No index specified<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h4>
</div></div></div>
<p>You can apply any of the built-in analyzers to the text string without
specifying an index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_analyze
{
  "analyzer" : "standard",
  "text" : "this is a test"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1818.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="analyze-api-text-array-ex"></a>Array of text strings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h4>
</div></div></div>
<p>If the <code class="literal">text</code> parameter is provided as array of strings, it is analyzed as a multi-value field.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_analyze
{
  "analyzer" : "standard",
  "text" : ["this is a test", "the second text"]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1819.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="analyze-api-custom-analyzer-ex"></a>Custom analyzer<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the analyze API to test a custom transient analyzer built from
tokenizers, token filters, and char filters. Token filters use the <code class="literal">filter</code>
parameter:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_analyze
{
  "tokenizer" : "keyword",
  "filter" : ["lowercase"],
  "text" : "this is a test"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1820.console"></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_analyze
{
  "tokenizer" : "keyword",
  "filter" : ["lowercase"],
  "char_filter" : ["html_strip"],
  "text" : "this is a &lt;b&gt;test&lt;/b&gt;"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1821.console"></div>
<p>Custom tokenizers, token filters, and character filters can be specified in the request body as follows:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_analyze
{
  "tokenizer" : "whitespace",
  "filter" : ["lowercase", {"type": "stop", "stopwords": ["a", "is", "this"]}],
  "text" : "this is a test"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1822.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="analyze-api-specific-index-ex"></a>Specific index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h4>
</div></div></div>
<p>You can also run the analyze API against a specific index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /analyze_sample/_analyze
{
  "text" : "this is a test"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1823.console"></div>
<p>The above will run an analysis on the "this is a test" text, using the
default index analyzer associated with the <code class="literal">analyze_sample</code> index. An <code class="literal">analyzer</code>
can also be provided to use a different analyzer:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /analyze_sample/_analyze
{
  "analyzer" : "whitespace",
  "text" : "this is a test"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1824.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="analyze-api-field-ex"></a>Derive analyzer from a field mapping<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h4>
</div></div></div>
<p>The analyzer can be derived based on a field mapping, for example:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /analyze_sample/_analyze
{
  "field" : "obj1.field1",
  "text" : "this is a test"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1825.console"></div>
<p>Will cause the analysis to happen based on the analyzer configured in the
mapping for <code class="literal">obj1.field1</code> (and if not, the default index analyzer).</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="analyze-api-normalizer-ex"></a>Normalizer<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">normalizer</code> can be provided for keyword field with normalizer associated with the <code class="literal">analyze_sample</code> index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /analyze_sample/_analyze
{
  "normalizer" : "my_normalizer",
  "text" : "BaR"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1826.console"></div>
<p>Or by building a custom transient normalizer out of token filters and char filters.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_analyze
{
  "filter" : ["lowercase"],
  "text" : "BaR"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1827.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="explain-analyze-api"></a>Explain analyze<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h4>
</div></div></div>
<p>If you want to get more advanced details, set <code class="literal">explain</code> to <code class="literal">true</code> (defaults to <code class="literal">false</code>). It will output all token attributes for each token.
You can filter token attributes you want to output by setting <code class="literal">attributes</code> option.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The format of the additional detail information is labelled as experimental in Lucene and it may change in the future.</p>
</div>
</div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_analyze
{
  "tokenizer" : "standard",
  "filter" : ["snowball"],
  "text" : "detailed output",
  "explain" : true,
  "attributes" : ["keyword"] <a id="CO610-1"></a><i class="conum" data-value="1"></i>
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1828.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO610-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Set "keyword" to output "keyword" attribute only</p>
</td>
</tr>
</table>
</div>
<p>The request returns the following result:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "detail" : {
    "custom_analyzer" : true,
    "charfilters" : [ ],
    "tokenizer" : {
      "name" : "standard",
      "tokens" : [ {
        "token" : "detailed",
        "start_offset" : 0,
        "end_offset" : 8,
        "type" : "&lt;ALPHANUM&gt;",
        "position" : 0
      }, {
        "token" : "output",
        "start_offset" : 9,
        "end_offset" : 15,
        "type" : "&lt;ALPHANUM&gt;",
        "position" : 1
      } ]
    },
    "tokenfilters" : [ {
      "name" : "snowball",
      "tokens" : [ {
        "token" : "detail",
        "start_offset" : 0,
        "end_offset" : 8,
        "type" : "&lt;ALPHANUM&gt;",
        "position" : 0,
        "keyword" : false <a id="CO611-1"></a><i class="conum" data-value="1"></i>
      }, {
        "token" : "output",
        "start_offset" : 9,
        "end_offset" : 15,
        "type" : "&lt;ALPHANUM&gt;",
        "position" : 1,
        "keyword" : false <a id="CO611-2"></a><i class="conum" data-value="1"></i>
      } ]
    } ]
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO611-1"><i class="conum" data-value="1"></i></a><a href="#CO611-2"></a></p>
</td>
<td align="left" valign="top">
<p>Output only "keyword" attribute, since specify "attributes" in the request.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="tokens-limit-settings"></a>Setting a token limit<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/analyze.asciidoc">edit</a></h4>
</div></div></div>
<p>Generating excessive amount of tokens may cause a node to run out of memory.
The following setting allows to limit the number of tokens that can be produced:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.analyze.max_token_count</code>
</span>
</dt>
<dd>
The maximum number of tokens that can be produced using <code class="literal">_analyze</code> API.
The default value is <code class="literal">10000</code>. If more than this limit of tokens gets
generated, an error will be thrown. The <code class="literal">_analyze</code> endpoint without a specified
index will always use <code class="literal">10000</code> value as a limit. This setting allows you to control
the limit for a specific index:
</dd>
</dl>
</div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /analyze_sample
{
  "settings" : {
    "index.analyze.max_token_count" : 20000
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1829.console"></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /analyze_sample/_analyze
{
  "text" : "this is a test"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1830.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-clearcache"></a>Clear cache API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clearcache.asciidoc">edit</a></h2>
</div></div></div>

<p>Clears the caches of one or more indices. For data streams, the API clears the
caches of the stream&#8217;s backing indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_cache/clear</pre>
</div>
<div class="console_widget" data-snippet="snippets/1831.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clear-cache-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clearcache.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;target&gt;/_cache/clear</code></p>
<p><code class="literal">POST /_cache/clear</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clear-cache-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clearcache.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data stream, index,
or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clear-cache-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clearcache.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clear-cache-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clearcache.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">fielddata</code>
</span>
</dt>
<dd>
<p>(Optional, Boolean)
If <code class="literal">true</code>,
clears the fields cache.</p>
<p>Use the <code class="literal">fields</code> parameter
to clear the cache of specific fields only.</p>
</dd>
<dt>
<span class="term">
<code class="literal">fields</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Comma-separated list of field names
used to limit the <code class="literal">fielddata</code> parameter.</p>
<p>Defaults to all fields.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This parameter does <span class="strong strong"><strong>not</strong></span> support objects
or field aliases.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">index</code>
</span>
</dt>
<dd>
(Optional, string)
Comma-separated list of index names
used to limit the request.
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">query</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>,
clears the query cache.
</dd>
<dt>
<span class="term">
<code class="literal">request</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>,
clears the request cache.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clear-cache-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clearcache.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="clear-cache-api-specific-ex"></a>Clear a specific cache<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clearcache.asciidoc">edit</a></h4>
</div></div></div>
<p>By default,
the clear cache API clears all caches.
You can clear only specific caches
by setting the following query parameters to <code class="literal">true</code>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">fielddata</code>
</li>
<li class="listitem">
<code class="literal">query</code>
</li>
<li class="listitem">
<code class="literal">request</code>
</li>
</ul>
</div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_cache/clear?fielddata=true  <a id="CO612-1"></a><i class="conum" data-value="1"></i>
POST /my-index-000001/_cache/clear?query=true      <a id="CO612-2"></a><i class="conum" data-value="2"></i>
POST /my-index-000001/_cache/clear?request=true    <a id="CO612-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="console_widget" data-snippet="snippets/1832.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO612-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Clears only the fields cache</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO612-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Clears only the query cache</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO612-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Clears only the request cache</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="clear-cache-api-specific-fields-ex"></a>Clear the cache of specific fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clearcache.asciidoc">edit</a></h4>
</div></div></div>
<p>To only clear the cache of specific fields,
use the <code class="literal">fields</code> query parameter.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_cache/clear?fields=foo,bar   <a id="CO613-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="console_widget" data-snippet="snippets/1833.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO613-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Clear the cache for the <code class="literal">foo</code> and <code class="literal">bar</code> field</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="clear-cache-api-multi-ex"></a>Clear caches for several data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clearcache.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001,my-index-000002/_cache/clear</pre>
</div>
<div class="console_widget" data-snippet="snippets/1834.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="clear-cache-api-all-ex"></a>Clear caches for all data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clearcache.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_cache/clear</pre>
</div>
<div class="console_widget" data-snippet="snippets/1835.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-clone-index"></a>Clone index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h2>
</div></div></div>

<p>Clones an existing index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_clone/cloned-my-index-000001</pre>
</div>
<div class="console_widget" data-snippet="snippets/1836.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clone-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;index&gt;/_clone/&lt;target-index&gt;</code></p>
<p><code class="literal">PUT /&lt;index&gt;/_clone/&lt;target-index&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clone-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the index you want to clone.
</li>
<li class="listitem">
To clone an index, the index must be marked as read-only and have a
<a class="xref" href="cluster.html#cluster-health" title="Cluster health API">cluster health</a> status of <code class="literal">green</code>.
</li>
</ul>
</div>
<p>For example,
the following request prevents write operations on <code class="literal">my_source_index</code>
so it can be cloned.
Metadata changes like deleting the index are still allowed.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my_source_index/_settings
{
  "settings": {
    "index.blocks.write": true
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1837.console"></div>
<p>The current write index on a data stream cannot be cloned. In order to clone
the current write index, the data stream must first be
<a class="xref" href="indices.html#rollover-data-stream-ex" title="Roll over a data stream">rolled over</a> so that a new write index is created
and then the previous write index can be cloned.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clone-index-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the clone index API
to clone an existing index into a new index,
where each original primary shard is cloned
into a new primary shard in the new index.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="cloning-works"></a>How cloning works<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h4>
</div></div></div>
<p>Cloning works as follows:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
First, it creates a new target index with the same definition as the source
index.
</li>
<li class="listitem">
Then it hard-links segments from the source index into the target index. (If
the file system doesn&#8217;t support hard-linking, then all segments are copied
into the new index, which is a much more time consuming process.)
</li>
<li class="listitem">
Finally, it recovers the target index as though it were a closed index which
had just been re-opened.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="clone-index"></a>Clone an index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h4>
</div></div></div>
<p>To clone <code class="literal">my_source_index</code> into a new index called <code class="literal">my_target_index</code>, issue
the following request:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my_source_index/_clone/my_target_index</pre>
</div>
<div class="console_widget" data-snippet="snippets/1838.console"></div>
<p>The above request returns immediately once the target index has been added to
the cluster state&#8201;&#8212;&#8201;it doesn&#8217;t wait for the clone operation to start.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Indices can only be cloned if they meet the following requirements:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The target index must not exist.
</li>
<li class="listitem">
The source index must have the same number of primary shards as the target index.
</li>
<li class="listitem">
The node handling the clone process must have sufficient free disk space to
accommodate a second copy of the existing index.
</li>
</ul>
</div>
</div>
</div>
<p>The <code class="literal">_clone</code> API is similar to the <a class="xref" href="indices.html#indices-create-index" title="Create index API"><code class="literal">create index</code> API</a>
and accepts <code class="literal">settings</code> and <code class="literal">aliases</code> parameters for the target index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my_source_index/_clone/my_target_index
{
  "settings": {
    "index.number_of_shards": 5 <a id="CO614-1"></a><i class="conum" data-value="1"></i>
  },
  "aliases": {
    "my_search_indices": {}
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1839.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO614-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The number of shards in the target index. This must be equal to the
number of shards in the source index.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Mappings may not be specified in the <code class="literal">_clone</code> request. The mappings of
the source index will be used for the target index.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitor-cloning"></a>Monitor the cloning process<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h4>
</div></div></div>
<p>The cloning process can be monitored with the <a class="xref" href="cat.html#cat-recovery" title="cat recovery API"><code class="literal">_cat recovery</code>
API</a>, or the <a class="xref" href="cluster.html#cluster-health" title="Cluster health API"><code class="literal">cluster health</code> API</a> can be used to wait
until all primary shards have been allocated by setting the  <code class="literal">wait_for_status</code>
parameter to <code class="literal">yellow</code>.</p>
<p>The <code class="literal">_clone</code> API returns as soon as the target index has been added to the
cluster state, before any shards have been allocated. At this point, all
shards are in the state <code class="literal">unassigned</code>. If, for any reason, the target index
can&#8217;t be allocated, its primary shard will remain <code class="literal">unassigned</code> until it
can be allocated on that node.</p>
<p>Once the primary shard is allocated, it moves to state <code class="literal">initializing</code>, and the
clone process begins. When the clone operation completes, the shard will
become <code class="literal">active</code>. At that  point, Elasticsearch will try to allocate any
replicas and may decide to relocate the primary shard to another node.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="clone-wait-active-shards"></a>Wait for active shards<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h4>
</div></div></div>
<p>Because the clone operation creates a new index to clone the shards to,
the <a class="xref" href="indices.html#create-index-wait-for-active-shards" title="Wait for active shards">wait for active shards</a> setting
on index creation applies to the clone index action as well.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clone-index-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Name of the source index to clone.
</dd>
<dt>
<span class="term">
<code class="literal">&lt;target-index&gt;</code>
</span>
</dt>
<dd>
<p>(Required, string)
Name of the target index to create.</p>
<p>Index names must meet the following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Lowercase only
</li>
<li class="listitem">
Cannot include <code class="literal">\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, ` ` (space character), <code class="literal">,</code>, <code class="literal">#</code>
</li>
<li class="listitem">
Indices prior to 7.0 could contain a colon (<code class="literal">:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+
</li>
<li class="listitem">
Cannot start with <code class="literal">-</code>, <code class="literal">_</code>, <code class="literal">+</code>
</li>
<li class="listitem">
Cannot be <code class="literal">.</code> or <code class="literal">..</code>
</li>
<li class="listitem">
Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)
</li>
<li class="listitem">
Names starting with <code class="literal">.</code> are deprecated, except for <a class="xref" href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clone-index-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">wait_for_active_shards</code>
</span>
</dt>
<dd>
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code class="literal">all</code> or any positive integer up
to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
<p>See <a class="xref" href="docs.html#index-wait-for-active-shards" title="Active shards">Active shards</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clone-index-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/clone-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>)
Index aliases which include the target index.
See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>)
Configuration options for the target index.
See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-close"></a>Close index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/close.asciidoc">edit</a></h2>
</div></div></div>

<p>Closes an index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_close</pre>
</div>
<div class="console_widget" data-snippet="snippets/1840.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="close-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/close.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;index&gt;/_close</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="close-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/close.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target index or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="close-index-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/close.asciidoc">edit</a></h3>
</div></div></div>
<p>You use the close index API to close open indices.</p>
<p>A closed index is blocked for read/write operations and does not allow
all operations that opened indices allow. It is not possible to index
documents or to search for documents in a closed index. This allows
closed indices to not have to maintain internal data structures for
indexing or searching documents, resulting in a smaller overhead on
the cluster.</p>
<p>When opening or closing an index, the master is responsible for
restarting the index shards to reflect the new state of the index.
The shards will then go through the normal recovery process. The
data of opened/closed indices is automatically replicated by the
cluster to ensure that enough shard copies are safely kept around
at all times.</p>
<p>You can open and close multiple indices. An error is thrown
if the request explicitly refers to a missing index. This behaviour can be
disabled using the <code class="literal">ignore_unavailable=true</code> parameter.</p>
<p>All indices can be opened or closed at once using <code class="literal">_all</code> as the index name
or specifying patterns that identify them all (e.g. <code class="literal">*</code>).</p>
<p>Identifying indices via wildcards or <code class="literal">_all</code> can be disabled by setting the
<code class="literal">action.destructive_requires_name</code> flag in the config file to <code class="literal">true</code>.
This setting can also be changed via the cluster update settings api.</p>
<p>Closed indices consume a significant amount of disk-space which can cause
problems in managed environments. Closing indices can be disabled via the cluster settings
API by setting <code class="literal">cluster.indices.close.enable</code> to <code class="literal">false</code>. The default is <code class="literal">true</code>.</p>
<p>The current write index on a data stream cannot be closed. In order to close
the current write index, the data stream must first be
<a class="xref" href="indices.html#rollover-data-stream-ex" title="Roll over a data stream">rolled over</a> so that a new write index is created
and then the previous write index can be closed.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="close-index-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/close.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.
</p>
<p>To close all indices, use <code class="literal">_all</code> or <code class="literal">*</code>.
To disallow the closing of indices with <code class="literal">_all</code> or wildcard expressions,
change the <code class="literal">action.destructive_requires_name</code> cluster setting to <code class="literal">true</code>.
You can update this setting in the <code class="literal">elasticsearch.yml</code> file
or using the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings</a> API.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="close-index-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/close.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">wait_for_active_shards</code>
</span>
</dt>
<dd>
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code class="literal">all</code> or any positive integer up
to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
<p>See <a class="xref" href="docs.html#index-wait-for-active-shards" title="Active shards">Active shards</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="close-index-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/close.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example shows how to close an index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_close</pre>
</div>
<div class="console_widget" data-snippet="snippets/1841.console"></div>
<p>The API returns following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged": true,
  "shards_acknowledged": true,
  "indices": {
    "my-index-000001": {
      "closed": true
    }
  }
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-create-index"></a>Create index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h2>
</div></div></div>

<p>Creates a new index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001</pre>
</div>
<div class="console_widget" data-snippet="snippets/1842.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-create-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT /&lt;index&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-create-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">create_index</code>
or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target index.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-create-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h3>
</div></div></div>
<p>You can use the create index API to add a new index to an Elasticsearch cluster. When
creating an index, you can specify the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Settings for the index
</li>
<li class="listitem">
Mappings for fields in the index
</li>
<li class="listitem">
Index aliases
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-create-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
<p>(Required, string) Name of the index you wish to create.</p>
<p>Index names must meet the following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Lowercase only
</li>
<li class="listitem">
Cannot include <code class="literal">\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, ` ` (space character), <code class="literal">,</code>, <code class="literal">#</code>
</li>
<li class="listitem">
Indices prior to 7.0 could contain a colon (<code class="literal">:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+
</li>
<li class="listitem">
Cannot start with <code class="literal">-</code>, <code class="literal">_</code>, <code class="literal">+</code>
</li>
<li class="listitem">
Cannot be <code class="literal">.</code> or <code class="literal">..</code>
</li>
<li class="listitem">
Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)
</li>
<li class="listitem">
Names starting with <code class="literal">.</code> are deprecated, except for <a class="xref" href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-create-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">include_type_name</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.0.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.0.0. Mapping types have been deprecated. See <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.
</span>
</span>
(Optional, boolean) If <code class="literal">true</code>, a mapping type is expected in the body of
mappings. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">wait_for_active_shards</code>
</span>
</dt>
<dd>
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code class="literal">all</code> or any positive integer up
to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
<p>See <a class="xref" href="docs.html#index-wait-for-active-shards" title="Active shards">Active shards</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-create-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-create-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="create-index-settings"></a>Index settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h4>
</div></div></div>
<p>Each index created can have specific settings
associated with it, defined in the body:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "settings": {
    "index": {
      "number_of_shards": 3,  <a id="CO615-1"></a><i class="conum" data-value="1"></i>
      "number_of_replicas": 2 <a id="CO615-2"></a><i class="conum" data-value="2"></i>
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1843.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO615-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Default for <code class="literal">number_of_shards</code> is 1</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO615-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Default for <code class="literal">number_of_replicas</code> is 1 (ie one replica for each primary shard)</p>
</td>
</tr>
</table>
</div>
<p>or more simplified</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 2
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1844.console"></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You do not have to explicitly specify <code class="literal">index</code> section inside the
<code class="literal">settings</code> section.</p>
</div>
</div>
<p>For more information regarding all the different index level settings
that can be set when creating an index, please check the
<a class="xref" href="index-modules.html" title="Index modules">index modules</a> section.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="mappings"></a>Mappings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h4>
</div></div></div>
<p>The create index API allows for providing a mapping definition:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /test
{
  "settings": {
    "number_of_shards": 1
  },
  "mappings": {
    "properties": {
      "field1": { "type": "text" }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1845.console"></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Before 7.0.0, the <em>mappings</em> definition used to include a type name. Although specifying
types in requests is now deprecated, a type can still be provided if the request parameter
include_type_name is set. For more details, please see <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="create-index-aliases"></a>Aliases<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h4>
</div></div></div>
<p>The create index API allows also to provide a set of <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">aliases</a>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /test
{
  "aliases": {
    "alias_1": {},
    "alias_2": {
      "filter": {
        "term": { "user.id": "kimchy" }
      },
      "routing": "shard-1"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1846.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="create-index-wait-for-active-shards"></a>Wait for active shards<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/create-index.asciidoc">edit</a></h4>
</div></div></div>
<p>By default, index creation will only return a response to the client when the primary copies of
each shard have been started, or the request times out. The index creation response will indicate
what happened:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged": true,
  "shards_acknowledged": true,
  "index": "test"
}</pre>
</div>
<p><code class="literal">acknowledged</code> indicates whether the index was successfully created in the cluster, while
<code class="literal">shards_acknowledged</code> indicates whether the requisite number of shard copies were started for
each shard in the index before timing out. Note that it is still possible for either
<code class="literal">acknowledged</code> or <code class="literal">shards_acknowledged</code> to be <code class="literal">false</code>, but the index creation was successful.
These values simply indicate whether the operation completed before the timeout. If
<code class="literal">acknowledged</code> is <code class="literal">false</code>, then we timed out before the cluster state was updated with the
newly created index, but it probably will be created sometime soon. If <code class="literal">shards_acknowledged</code>
is <code class="literal">false</code>, then we timed out before the requisite number of shards were started (by default
just the primaries), even if the cluster state was successfully updated to reflect the newly
created index (i.e. <code class="literal">acknowledged=true</code>).</p>
<p>We can change the default of only waiting for the primary shards to start through the index
setting <code class="literal">index.write.wait_for_active_shards</code> (note that changing this setting will also affect
the <code class="literal">wait_for_active_shards</code> value on all subsequent write operations):</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /test
{
  "settings": {
    "index.write.wait_for_active_shards": "2"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1847.console"></div>
<p>or through the request parameter <code class="literal">wait_for_active_shards</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /test?wait_for_active_shards=2</pre>
</div>
<div class="console_widget" data-snippet="snippets/1848.console"></div>
<p>A detailed explanation of <code class="literal">wait_for_active_shards</code> and its possible values can be found
<a class="xref" href="docs.html#index-wait-for-active-shards" title="Active shards">here</a>.</p>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-delete-index"></a>Delete index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index.asciidoc">edit</a></h2>
</div></div></div>

<p>Deletes an existing index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">DELETE /my-index-000001</pre>
</div>
<div class="console_widget" data-snippet="snippets/1849.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">DELETE /&lt;index&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">delete_index</code>
or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target index.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-index-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
<p>(Request, string) Comma-separated list or wildcard expression of indices to
delete.</p>
<p>In this parameter, wildcard expressions match only open, concrete indices. You
cannot delete an index using an <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias</a>.</p>
<p>To delete all indices, use <code class="literal">_all</code> or <code class="literal">*</code> . To disallow the deletion of indices
with <code class="literal">_all</code> or wildcard expressions, change the
<code class="literal">action.destructive_requires_name</code> cluster setting to <code class="literal">true</code>. You can update
this setting in the <code class="literal">elasticsearch.yml</code> file or using the
<a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings</a> API.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot delete the current write index of a data stream. To delete the
index, you must <a class="xref" href="indices.html#rollover-data-stream-ex" title="Roll over a data stream">roll over</a> the data stream so a new
write index is created. You can then use the delete index API to delete the
previous write index.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-index-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-delete-alias"></a>Delete index alias API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-alias.asciidoc">edit</a></h2>
</div></div></div>

<p>Deletes an existing index alias.</p>
<p>An index alias is a secondary name
used to refer to one or more existing indices.</p>
<p>Most Elasticsearch APIs accept an index alias
in place of an index name.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">DELETE /my-index-000001/_alias/alias1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1850.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-alias-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-alias.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">DELETE /&lt;index&gt;/_alias/&lt;alias&gt;</code></p>
<p><code class="literal">DELETE /&lt;index&gt;/_aliases/&lt;alias&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-alias-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for both the index and index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-alias-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, string)
Comma-separated list or wildcard expression of index names
used to limit the request.
</p>
<p>To include all indices in the cluster,
use a value of <code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">&lt;alias&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, string)
Comma-separated list or wildcard expression of index alias names
used to limit the request.
</p>
<p>To delete all aliases,
use a value of <code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-alias-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-delete-component-template"></a>Delete component template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-component-template.asciidoc">edit</a></h2>
</div></div></div>

<p>Deletes an existing component template.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">DELETE _component_template/template_1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1851.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-component-template-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-component-template.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">DELETE /_component_template/&lt;component-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-component-template-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-component-template-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-component-template.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the delete component template API to delete one or more component templates
Component templates are building blocks for constructing <a class="xref" href="index-templates.html" title="Index templates">index templates</a>
that specify index mappings, settings, and aliases.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-component-template-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-component-template.asciidoc">edit</a></h3>
</div></div></div>
<p>The name of the component template to delete. Wildcard (<code class="literal">*</code>)
expressions are supported.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-component-template-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-delete-template"></a>Delete index template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template.asciidoc">edit</a></h2>
</div></div></div>

<p>Deletes an <a class="xref" href="index-templates.html" title="Index templates">index template</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">DELETE /_index_template/my-index-template</pre>
</div>
<div class="console_widget" data-snippet="snippets/1852.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-template-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">DELETE /_index_template/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-template-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-template-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the delete index template API to delete one or more index templates.
Index templates define <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">settings</a>, <a class="xref" href="mapping.html" title="Mapping">mappings</a>,
and <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">aliases</a> that can be applied automatically to new indices.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-template-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template.asciidoc">edit</a></h3>
</div></div></div>
<p>The name of the index template to delete. Wildcard (<code class="literal">*</code>)
expressions are supported.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-template-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-delete-template-v1"></a>Delete index template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template-v1.asciidoc">edit</a></h2>
</div></div></div>

<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This documentation is about <a class="xref" href="indices.html#indices-templates-v1" title="Put index template API">legacy index
templates</a>, which are deprecated and will be replaced by the composable
templates introduced in Elasticsearch 7.8. For information about composable templates,
see <a class="xref" href="index-templates.html" title="Index templates">Index templates</a>.</p>
</div>
</div>
<p>Deletes a legacy index template.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">DELETE /_template/my-legacy-index-template</pre>
</div>
<div class="console_widget" data-snippet="snippets/1853.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-template-api-v1-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">DELETE /_template/&lt;legacy-index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-template-api-v1-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-template-api-v1-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;legacy-index-template&gt;</code>
</span>
</dt>
<dd>
(Required, string)
The name of the legacy index template to delete. Wildcard (<code class="literal">*</code>)
expressions are supported.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-template-api-v1-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/delete-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-flush"></a>Flush API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/flush.asciidoc">edit</a></h2>
</div></div></div>

<p>Flushes one or more data streams or indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_flush</pre>
</div>
<div class="console_widget" data-snippet="snippets/1854.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="flush-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/flush.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;target&gt;/_flush</code></p>
<p><code class="literal">GET /&lt;target&gt;/_flush</code></p>
<p><code class="literal">POST /_flush</code></p>
<p><code class="literal">GET /_flush</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="flush-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/flush.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">maintenance</code>
or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data
stream, index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="flush-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/flush.asciidoc">edit</a></h3>
</div></div></div>
<p>Flushing a data stream or index is the process of making sure that any data that is currently
only stored in the <a class="xref" href="index-modules-translog.html" title="Translog">transaction log</a> is also
permanently stored in the Lucene index. When restarting, Elasticsearch replays any
unflushed operations from the transaction log into the Lucene index to bring it
back into the state that it was in before the restart. Elasticsearch automatically
triggers flushes as needed, using heuristics that trade off the size of the
unflushed transaction log against the cost of performing each flush.</p>
<p>Once each operation has been flushed it is permanently stored in the Lucene
index. This may mean that there is no need to maintain an additional copy of it
in the transaction log, unless <a class="xref" href="index-modules-translog.html#index-modules-translog-retention" title="Translog retention">it is retained
for some other reason</a>. The transaction log is made up of multiple files,
called <em>generations</em>, and Elasticsearch will delete any generation files once they are no
longer needed, freeing up disk space.</p>
<p>It is also possible to trigger a flush on one or more indices using the flush
API, although it is rare for users to need to call this API directly. If you
call the flush API after indexing some documents then a successful response
indicates that Elasticsearch has flushed all the documents that were indexed before the
flush API was called.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="flush-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/flush.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases to flush.
Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To flush all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="flush-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/flush.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">force</code>
</span>
</dt>
<dd>
<p>(Optional, Boolean)
If <code class="literal">true</code>,
the request forces a flush
even if there are no changes to commit to the index.
Defaults to <code class="literal">true</code>.</p>
<p>You can use this parameter
to increment the generation number of the transaction log.</p>
<p>This parameter is considered internal.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">wait_if_ongoing</code>
</span>
</dt>
<dd>
<p>(Optional, Boolean)
If <code class="literal">true</code>,
the flush operation blocks until execution
when another flush operation is running.</p>
<p>If <code class="literal">false</code>,
Elasticsearch returns an error
if you request a flush
when another flush operation is running.</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="flush-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/flush.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="flush-api-specific-ex"></a>Flush a specific data stream or index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/flush.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_flush</pre>
</div>
<div class="console_widget" data-snippet="snippets/1855.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="flush-multi-index"></a>Flush several data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/flush.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001,my-index-000002/_flush</pre>
</div>
<div class="console_widget" data-snippet="snippets/1856.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="flush-api-all-ex"></a>Flush all data streams and indices in a cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/flush.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_flush</pre>
</div>
<div class="console_widget" data-snippet="snippets/1857.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-forcemerge"></a>Force merge API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h2>
</div></div></div>

<p>Forces a <a class="xref" href="index-modules-merge.html" title="Merge">merge</a> on the shards of one or more indices.
For data streams, the API forces a merge on the shards of the stream&#8217;s backing
indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_forcemerge</pre>
</div>
<div class="console_widget" data-snippet="snippets/1858.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="forcemerge-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;target&gt;/_forcemerge</code></p>
<p><code class="literal">POST /_forcemerge</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="forcemerge-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">maintenance</code>
or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data
stream, index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="forcemerge-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the force merge API to force a <a class="xref" href="index-modules-merge.html" title="Merge">merge</a> on the
shards of one or more indices. Merging reduces the number of segments in each
shard by merging some of them together, and also frees up the space used by
deleted documents. Merging normally happens automatically, but sometimes it is
useful to trigger a merge manually.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p><span class="strong strong"><strong>Force merge should only be called against an index after you have
finished writing to it.</strong></span> Force merge can cause very large (&gt;5GB) segments to
be produced, and if you continue to write to such an index then the automatic
merge policy will never consider these segments for future merges until they
mostly consist of deleted documents. This can cause very large segments to
remain in the index which can result in increased disk usage and worse search
performance.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="forcemerge-blocks"></a>Blocks during a force merge<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h4>
</div></div></div>
<p>Calls to this API block until the merge is complete. If the client connection
is lost before completion then the force merge process will continue in the
background. Any new requests to force merge the same indices will also block
until the ongoing force merge is complete.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="forcemerge-multi-index"></a>Force merging multiple indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h4>
</div></div></div>
<p>You can force merge multiple indices with a single request by targeting:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
One or more data streams that contain multiple backing indices
</li>
<li class="listitem">
Multiple indices
</li>
<li class="listitem">
One or more index aliases that point to multiple indices
</li>
<li class="listitem">
All data streams and indices in a cluster
</li>
</ul>
</div>
<p>Multi-index operations are executed one shard at a
time per node. Force merge makes the storage for the shard being merged
temporarily increase, up to double its size in case <code class="literal">max_num_segments</code> parameter
is set to <code class="literal">1</code>, as all segments need to be rewritten into a new one.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="forcemerge-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="forcemerge-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">flush</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>,
Elasticsearch performs a <a class="xref" href="indices.html#indices-flush" title="Flush API">flush</a> on the indices
after the force merge.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">max_num_segments</code>
</span>
</dt>
<dd>
<p>(Optional, integer)
The number of segments to merge to.
To fully merge indices,
set it to <code class="literal">1</code>.</p>
<p>Defaults to checking if a merge needs to execute.
If so, executes it.</p>
</dd>
<dt>
<span class="term">
<code class="literal">only_expunge_deletes</code>
</span>
</dt>
<dd>
<p>(Optional, Boolean)
If <code class="literal">true</code>,
only expunge segments containing document deletions.
Defaults to <code class="literal">false</code>.</p>
<p>In Lucene,
a document is not deleted from a segment;
just marked as deleted.
During a merge,
a new segment is created
that does not contain those document deletions.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This parameter does <span class="strong strong"><strong>not</strong></span> override the
<code class="literal">index.merge.policy.expunge_deletes_allowed</code> setting.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="forcemerge-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="forcemerge-api-specific-ex"></a>Force merge a specific data stream or index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_forcemerge</pre>
</div>
<div class="console_widget" data-snippet="snippets/1859.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="forcemerge-api-multiple-ex"></a>Force merge several data streams or indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001,my-index-000002/_forcemerge</pre>
</div>
<div class="console_widget" data-snippet="snippets/1860.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="forcemerge-api-all-ex"></a>Force merge all indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_forcemerge</pre>
</div>
<div class="console_widget" data-snippet="snippets/1861.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="forcemerge-api-time-based-index-ex"></a>Data streams and time-based indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/forcemerge.asciidoc">edit</a></h4>
</div></div></div>
<p>Force-merging is useful for managing a data stream&#8217;s older backing indices and
other time-based indices, particularly after a
<a class="xref" href="indices.html#indices-rollover-index" title="Rollover index API">rollover</a>.
In these cases,
each index only receives indexing traffic for a certain period of time.
Once an index receive no more writes,
its shards can be force-merged to a single segment.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /.ds-logs-000001/_forcemerge?max_num_segments=1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1862.console"></div>
<p>This can be a good idea because single-segment shards can sometimes use simpler
and more efficient data structures to perform searches.</p>
</div>

</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="freeze-index-api"></a>Freeze index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/freeze.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p>Freezes an index.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="freeze-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/freeze.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;index&gt;/_freeze</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="freeze-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/freeze.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target index or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="freeze-index-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/freeze.asciidoc">edit</a></h3>
</div></div></div>
<p>A frozen index has almost no overhead on the cluster (except for maintaining its
metadata in memory) and is read-only. Read-only indices are blocked for write
operations, such as <a class="xref" href="search.html#indexing" title="Indexing">docs-index_</a> or <a class="xref" href="indices.html#indices-forcemerge" title="Force merge API">force
merges</a>. See <a class="xref" href="frozen-indices.html" title="Frozen indices">Frozen indices</a> and <a class="xref" href="indices.html#unfreeze-index-api" title="Unfreeze index API">Unfreeze index</a>.</p>
<p>The current write index on a data stream cannot be frozen. In order to freeze
the current write index, the data stream must first be
<a class="xref" href="indices.html#rollover-data-stream-ex" title="Roll over a data stream">rolled over</a> so that a new write index is created
and then the previous write index can be frozen.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Freezing an index will close the index and reopen it within the same
API call. This causes primaries to not be allocated for a short amount of time
and causes the cluster to go red until the primaries are allocated again. This
limitation might be removed in the future.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="freeze-index-api-path-parms"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/freeze.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Required, string) Identifier for the index.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="freeze-index-api-examples"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/freeze.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example freezes and unfreezes an index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_freeze
POST /my-index-000001/_unfreeze</pre>
</div>
<div class="console_widget" data-snippet="snippets/1863.console"></div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="getting-component-templates"></a>Get component template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-component-template.asciidoc">edit</a></h2>
</div></div></div>

<p>Retrieves information about one or more component templates.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_component_template/template_1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1864.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-component-template-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-component-template.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_component-template/&lt;component-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-component-template-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-component-template-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;component-template&gt;</code>
</span>
</dt>
<dd>
(Optional, string)
Comma-separated list of component template names used to limit the request.
Wildcard (<code class="literal">*</code>) expressions are supported.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-component-template-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">flat_settings</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, returns settings in flat format. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-component-template-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-component-template-api-wildcard-ex"></a>Get component templates using a wildcard expression<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-component-template.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_component_template/temp*</pre>
</div>
<div class="console_widget" data-snippet="snippets/1865.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-component-template-api-all-ex"></a>Get all component templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-component-template.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_component_template</pre>
</div>
<div class="console_widget" data-snippet="snippets/1866.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-get-field-mapping"></a>Get field mapping API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-field-mapping.asciidoc">edit</a></h2>
</div></div></div>

<p>Retrieves <a class="xref" href="mapping.html" title="Mapping">mapping definitions</a> for one or more fields. For data
streams, the API retrieves field mappings for the stream&#8217;s backing indices.</p>
<p>This API is useful if you don&#8217;t need a <a class="xref" href="indices.html#indices-get-mapping" title="Get mapping API">complete mapping</a>
or if an index mapping contains a large number of fields.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_mapping/field/user</pre>
</div>
<div class="console_widget" data-snippet="snippets/1867.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-field-mapping-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-field-mapping.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_mapping/field/&lt;field&gt;</code></p>
<p><code class="literal">GET /&lt;target&gt;/_mapping/field/&lt;field&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-field-mapping-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-field-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a>
for the target data stream, index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-field-mapping-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-field-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard (<code class="literal">*</code>) expressions are supported.
</p>
<p>To target all indices in a cluster, omit this parameter or use <code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">&lt;field&gt;</code>
</span>
</dt>
<dd>
(Optional, string) Comma-separated list or wildcard expression of fields used to
limit returned information.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-field-mapping-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-field-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">include_type_name</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.0.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.0.0. Mapping types have been deprecated. See <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.
</span>
</span>
(Optional, boolean) If <code class="literal">true</code>, a mapping type is expected in the body of
mappings. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">include_defaults</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the response includes default mapping values.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.8.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.8.0. This parameter is a no-op and field mappings are always retrieved locally
</span>
</span>
(Optional, boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-field-mapping-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-field-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-field-mapping-api-basic-ex"></a>Example with index setup<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-field-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p>You can provide field mappings when creating a new index. The following
<a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a> API request creates the <code class="literal">publications</code>
index with several field mappings.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /publications
{
  "mappings": {
    "properties": {
      "id": { "type": "text" },
      "title": { "type": "text" },
      "abstract": { "type": "text" },
      "author": {
        "properties": {
          "id": { "type": "text" },
          "name": { "type": "text" }
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1868.console"></div>
<p>The following returns the mapping of the field <code class="literal">title</code> only:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET publications/_mapping/field/title</pre>
</div>
<div class="console_widget" data-snippet="snippets/1869.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
   "publications": {
      "mappings": {
          "title": {
             "full_name": "title",
             "mapping": {
                "title": {
                   "type": "text"
                }
             }
          }
       }
   }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-field-mapping-api-specific-fields-ex"></a>Specifying fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-field-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p>The get mapping API allows you to specify a comma-separated list of fields.</p>
<p>For instance to select the <code class="literal">id</code> of the <code class="literal">author</code> field, you must use its full name <code class="literal">author.id</code>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET publications/_mapping/field/author.id,abstract,name</pre>
</div>
<div class="console_widget" data-snippet="snippets/1870.console"></div>
<p>returns:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
   "publications": {
      "mappings": {
        "author.id": {
           "full_name": "author.id",
           "mapping": {
              "id": {
                 "type": "text"
              }
           }
        },
        "abstract": {
           "full_name": "abstract",
           "mapping": {
              "abstract": {
                 "type": "text"
              }
           }
        }
     }
   }
}</pre>
</div>
<p>The get field mapping API also supports wildcard notation.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET publications/_mapping/field/a*</pre>
</div>
<div class="console_widget" data-snippet="snippets/1871.console"></div>
<p>returns:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
   "publications": {
      "mappings": {
         "author.name": {
            "full_name": "author.name",
            "mapping": {
               "name": {
                 "type": "text"
               }
            }
         },
         "abstract": {
            "full_name": "abstract",
            "mapping": {
               "abstract": {
                  "type": "text"
               }
            }
         },
         "author.id": {
            "full_name": "author.id",
            "mapping": {
               "id": {
                  "type": "text"
               }
            }
         }
      }
   }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-field-mapping-api-multi-index-ex"></a>Multiple targets and fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-field-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p>The get field mapping API can be used to get mappings for multiple fields from
multiple data streams or indices with a single request.</p>
<p>The <code class="literal">&lt;target&gt;</code> and <code class="literal">&lt;field&gt;</code> request path parameters both support
comma-separated lists and wildcard expressions.</p>
<p>You can omit the <code class="literal">&lt;target&gt;</code> parameter or use a value of <code class="literal">*</code> or <code class="literal">_all</code> to target
all data streams and indices in a cluster.</p>
<p>Similarly, you can omit the <code class="literal">&lt;field&gt;</code> parameter or use a value of <code class="literal">*</code> to
retrieve mappings for all fields in the targeted data streams or indices.
However, the <code class="literal">&lt;field&gt;</code> parameter does not support the <code class="literal">_all</code> value.</p>
<p>For example, the following request retrieves mappings for the <code class="literal">message</code> field in
any data stream or index named <code class="literal">my-index-000001</code> or <code class="literal">my-index-000002</code>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001,my-index-000002/_mapping/field/message</pre>
</div>
<div class="console_widget" data-snippet="snippets/1872.console"></div>
<p>The following request retrieves mappings for the <code class="literal">message</code> and <code class="literal">user.id</code> fields
in any data stream or index in the cluster.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_all/_mapping/field/message</pre>
</div>
<div class="console_widget" data-snippet="snippets/1873.console"></div>
<p>The following request retrieves mappings for fields with an <code class="literal">id</code> property in any
data stream or index in the cluster.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_all/_mapping/field/*.id</pre>
</div>
<div class="console_widget" data-snippet="snippets/1874.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-get-index"></a>Get index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns information about one or more indices. For data streams, the API
returns information about the stream&#8217;s backing indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001</pre>
</div>
<div class="console_widget" data-snippet="snippets/1875.console"></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Before 7.0.0, the <em>mappings</em> definition used to include a type name. Although mappings
in responses no longer contain a type name by default, you can still request the old format
through the parameter include_type_name. For more details, please see <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /&lt;target&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a>
for the target data stream, index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-index-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-index-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">flat_settings</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, returns settings in flat format. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">include_defaults</code>
</span>
</dt>
<dd>
(Optional, string) If <code class="literal">true</code>, return all default settings in the response.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">include_type_name</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.0.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.0.0. Mapping types have been deprecated. See <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.
</span>
</span>
(Optional, boolean) If <code class="literal">true</code>, a mapping type is expected in the body of
mappings. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">false</code>, requests that target a missing index return an error. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-get-alias"></a>Get index alias API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-alias.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns information about one or more index aliases.</p>
<p>An index alias is a secondary name
used to refer to one or more existing indices.</p>
<p>Most Elasticsearch APIs accept an index alias
in place of an index name.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_alias/alias1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1876.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-alias-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-alias.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_alias</code></p>
<p><code class="literal">GET /_alias/&lt;alias&gt;</code></p>
<p><code class="literal">GET /&lt;index&gt;/_alias/&lt;alias&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-alias-api-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a>
for the index alias. If you specify an index, you must also have
<code class="literal">view_index_metadata</code> or <code class="literal">manage</code> index privilege for the index.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-alias-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;alias&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list or wildcard expression of index alias names
used to limit the request.
</p>
<p>To retrieve information for all index aliases,
use a value of <code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-alias-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">all</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">false</code>, requests that include a missing index in the <code class="literal">&lt;index&gt;</code> argument
return an error. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-alias-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-alias.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-alias-api-all-ex"></a>Get all aliases for an index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-alias.asciidoc">edit</a></h4>
</div></div></div>
<p>You can add index aliases during index creation
using a <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index API</a> request.</p>
<p>The following create index API request creates the <code class="literal">logs_20302801</code> index
with two aliases:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">current_day</code>
</li>
<li class="listitem">
<code class="literal">2030</code>, which only returns documents
in the <code class="literal">logs_20302801</code> index
with a <code class="literal">year</code> field value of <code class="literal">2030</code>
</li>
</ul>
</div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /logs_20302801
{
  "aliases" : {
    "current_day" : {},
    "2030" : {
      "filter" : {
          "term" : {"year" : 2030 }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1877.console"></div>
<p>The following get index alias API request returns all aliases
for the index <code class="literal">logs_20302801</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /logs_20302801/_alias/*</pre>
</div>
<div class="console_widget" data-snippet="snippets/1878.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
 "logs_20302801" : {
   "aliases" : {
    "current_day" : {
    },
     "2030" : {
       "filter" : {
         "term" : {
           "year" : 2030
         }
       }
     }
   }
 }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-alias-api-named-ex"></a>Get a specific alias<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-alias.asciidoc">edit</a></h4>
</div></div></div>
<p>The following index alias API request returns the <code class="literal">2030</code> alias:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_alias/2030</pre>
</div>
<div class="console_widget" data-snippet="snippets/1879.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "logs_20302801" : {
    "aliases" : {
      "2030" : {
        "filter" : {
          "term" : {
            "year" : 2030
          }
        }
      }
    }
  }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-alias-api-wildcard-ex"></a>Get aliases based on a wildcard<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-alias.asciidoc">edit</a></h4>
</div></div></div>
<p>The following index alias API request returns any alias that begin with <code class="literal">20</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_alias/20*</pre>
</div>
<div class="console_widget" data-snippet="snippets/1880.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "logs_20302801" : {
    "aliases" : {
      "2030" : {
        "filter" : {
          "term" : {
            "year" : 2030
          }
        }
      }
    }
  }
}</pre>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-get-settings"></a>Get index settings API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-settings.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns setting information for one or more indices. For data streams, the API
returns setting information for the stream&#8217;s backing indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_settings</pre>
</div>
<div class="console_widget" data-snippet="snippets/1881.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-index-settings-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-settings.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /&lt;target&gt;/_settings</code></p>
<p><code class="literal">GET /&lt;target&gt;/_settings/&lt;setting&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-index-settings-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code>, <code class="literal">monitor</code>, or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index
privilege</a> for the target data stream, index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-index-settings-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">&lt;setting&gt;</code>
</span>
</dt>
<dd>
(Optional, string) Comma-separated list or wildcard expression of setting names
used to limit the request.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-index-settings-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">all</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">flat_settings</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, returns settings in flat format. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">include_defaults</code>
</span>
</dt>
<dd>
(Optional, string) If <code class="literal">true</code>, return all default settings in the response.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-index-settings-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_multiple_data_streams_and_indices"></a>Multiple data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The get settings API can be used to get settings for more than one data stream or index with a
single call. To get settings for all indices in a cluster, you can use <code class="literal">_all</code> or <code class="literal">*</code> for <code class="literal">&lt;target&gt;</code>.
Wildcard expressions are also supported. The following are some examples:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001,my-index-000002/_settings

GET /_all/_settings

GET /log_2099_*/_settings</pre>
</div>
<div class="console_widget" data-snippet="snippets/1882.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_filtering_settings_by_name"></a>Filtering settings by name<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>The settings that are returned can be filtered with wildcard matching
as follows:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /log_2099_-*/_settings/index.number_*</pre>
</div>
<div class="console_widget" data-snippet="snippets/1883.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-get-template"></a>Get index template API <a id="getting-templates"></a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns information about one or more index templates.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_index_template/template_1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1884.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_index_template/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, string)
Comma-separated list of index template names used to limit the request. Wildcard
(<code class="literal">*</code>) expressions are supported.
</p>
<p>To retrieve all index templates, omit this parameter or use a value of <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">flat_settings</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, returns settings in flat format. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">include_type_name</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.0.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.0.0. Mapping types have been deprecated. See <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.
</span>
</span>
(Optional, boolean) If <code class="literal">true</code>, a mapping type is expected in the body of
mappings. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-template-api-wildcard-ex"></a>Get index templates using a wildcard expression<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_index_template/temp*</pre>
</div>
<div class="console_widget" data-snippet="snippets/1885.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-template-api-all-ex"></a>Get all index templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_index_template</pre>
</div>
<div class="console_widget" data-snippet="snippets/1886.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-get-template-v1"></a>Get index template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template-v1.asciidoc">edit</a></h2>
</div></div></div>

<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This documentation is about legacy index templates,
which are deprecated and will be replaced by the composable templates introduced in Elasticsearch 7.8.
For information about composable templates, see <a class="xref" href="index-templates.html" title="Index templates">Index templates</a>.</p>
</div>
</div>
<p>Retrieves information about one or more index templates.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_template/template_1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1887.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-v1-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_template/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-v1-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-v1-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, string)
Comma-separated list of index template names used to limit the request. Wildcard
(<code class="literal">*</code>) expressions are supported.
</p>
<p>To return all index templates, omit this parameter
or use a value of <code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-v1-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">flat_settings</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, returns settings in flat format. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-v1-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-template-v1-api-multiple-ex"></a>Get multiple index templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_template/template_1,template_2</pre>
</div>
<div class="console_widget" data-snippet="snippets/1888.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-template-v1-api-wildcard-ex"></a>Get index templates using a wildcard expression<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_template/temp*</pre>
</div>
<div class="console_widget" data-snippet="snippets/1889.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-template-v1-api-all-ex"></a>Get all index templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_template</pre>
</div>
<div class="console_widget" data-snippet="snippets/1890.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-get-mapping"></a>Get mapping API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-mapping.asciidoc">edit</a></h2>
</div></div></div>

<p>Retrieves <a class="xref" href="mapping.html" title="Mapping">mapping definitions</a> for one or more indices. For data
streams, the API retrieves mappings for the stream&#8217;s backing indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_mapping</pre>
</div>
<div class="console_widget" data-snippet="snippets/1891.console"></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Before 7.0.0, the <em>mappings</em> definition used to include a type name. Although mappings
in responses no longer contain a type name by default, you can still request the old format
through the parameter <code class="literal">include_type_name</code>. For more details, please see <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-mapping-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-mapping.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_mapping</code></p>
<p><code class="literal">GET /&lt;target&gt;/_mapping</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-mapping-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a>
for the target data stream, index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-mapping-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-mapping-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">include_type_name</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.0.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.0.0. Mapping types have been deprecated. See <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.
</span>
</span>
(Optional, boolean) If <code class="literal">true</code>, a mapping type is expected in the body of
mappings. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-mapping-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-mapping-api-multi-ex"></a>Multiple data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/get-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p>The get mapping API can be used to get more than one data stream or index with a
single call. General usage of the API follows the following syntax:
<code class="literal">host:port/&lt;target&gt;/_mapping</code> where <code class="literal">&lt;target&gt;</code> can accept a comma-separated
list of names. To get mappings for all data streams and indices in a cluster, use <code class="literal">_all</code> or <code class="literal">*</code> for <code class="literal">&lt;target&gt;</code>
or omit the <code class="literal">&lt;target&gt;</code> parameter.
The following are some examples:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001,my-index-000002/_mapping</pre>
</div>
<div class="console_widget" data-snippet="snippets/1892.console"></div>
<p>If you want to get mappings of all indices in a cluster, the following
examples are equivalent:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /*/_mapping

GET /_all/_mapping

GET /_mapping</pre>
</div>
<div class="console_widget" data-snippet="snippets/1893.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-alias-exists"></a>Index alias exists API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/alias-exists.asciidoc">edit</a></h2>
</div></div></div>

<p>Checks if an index alias exists.</p>
<p>An index alias is a secondary name
used to refer to one or more existing indices.</p>
<p>Most Elasticsearch APIs accept an index alias
in place of an index name.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">HEAD /_alias/alias1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1894.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="alias-exists-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/alias-exists.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">HEAD /_alias/&lt;alias&gt;</code></p>
<p><code class="literal">HEAD /&lt;index&gt;/_alias/&lt;alias&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="alias-exists-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/alias-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a>
for the index alias. If you specify an index, you must also have
<code class="literal">view_index_metadata</code> or <code class="literal">manage</code> index privilege for the index.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="alias-exists-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/alias-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;alias&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Comma-separated list or wildcard expression of index alias names
used to limit the request.
</dd>
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="alias-exists-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/alias-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">all</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="alias-exists-api-response-codes"></a>Response codes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/alias-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
Indicates all specified index aliases exist.
</dd>
<dt>
<span class="term">
<code class="literal">404</code>
</span>
</dt>
<dd>
Indicates one or more specified index aliases <span class="strong strong"><strong>do not</strong></span> exist.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="alias-exists-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/alias-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">HEAD /_alias/2030
HEAD /_alias/20*
HEAD /logs_20302801/_alias/*</pre>
</div>
<div class="console_widget" data-snippet="snippets/1895.console"></div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-exists"></a>Index exists API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/indices-exists.asciidoc">edit</a></h2>
</div></div></div>

<p>Checks if an index exists.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">HEAD /my-index-000001</pre>
</div>
<div class="console_widget" data-snippet="snippets/1896.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-exists-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/indices-exists.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">HEAD /&lt;target&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-exists-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/indices-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a>
for the target data stream, index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-exists-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/indices-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-exists-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/indices-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">flat_settings</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, returns settings in flat format. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">include_defaults</code>
</span>
</dt>
<dd>
(Optional, string) If <code class="literal">true</code>, return all default settings in the response.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-exists-api-response-codes"></a>Response codes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/indices-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
Indicates all specified indices or index aliases exist.
</dd>
<dt>
<span class="term">
<code class="literal">404</code>
</span>
</dt>
<dd>
Indicates one or more specified indices or index aliases <span class="strong strong"><strong>do not</strong></span> exist.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-recovery"></a>Index recovery API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns information about ongoing and completed shard recoveries for one or more
indices. For data streams, the API returns information for the stream&#8217;s backing
indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_recovery</pre>
</div>
<div class="console_widget" data-snippet="snippets/1897.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-recovery-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /&lt;target&gt;/_recovery</code></p>
<p><code class="literal">GET /_recovery</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-recovery-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">monitor</code> or
<code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data stream,
index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-recovery-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the index recovery API
to get information about ongoing and completed shard recoveries.</p>
<p>Shard recovery is the process
of syncing a replica shard from a primary shard.
Upon completion,
the replica shard is available for search.</p>
<p>Recovery automatically occurs
during the following processes:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Node startup or failure.
This type of recovery is called a <span class="strong strong"><strong>local store recovery</strong></span>.
</li>
<li class="listitem">
<a class="xref" href="glossary.html#glossary-replica-shard">Primary shard replication</a>.
</li>
<li class="listitem">
Relocation of a shard to a different node in the same cluster.
</li>
<li class="listitem">
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/snapshots-restore-snapshot.html" class="ulink" target="_top">Snapshot restoration</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-recovery-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-recovery-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">active_only</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>,
the response only includes ongoing shard recoveries.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">detailed</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>,
the response includes detailed information about shard recoveries.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">index</code>
</span>
</dt>
<dd>
(Optional, string)
Comma-separated list or wildcard expression of index names
used to limit the request.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-recovery-api-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">id</code>
</span>
</dt>
<dd>
(Integer)
ID of the shard.
</dd>
<dt>
<span class="term">
<code class="literal">type</code>
</span>
</dt>
<dd>
<p>(String)
Recovery type.
Returned values include:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">STORE</code>
</span>
</dt>
<dd>
The recovery is related to
a node startup or failure.
This type of recovery is called a local store recovery.
</dd>
<dt>
<span class="term">
<code class="literal">SNAPSHOT</code>
</span>
</dt>
<dd>
The recovery is related to
a <a class="xref" href="snapshots-restore-snapshot.html" title="Restore a snapshot">snapshot restoration</a>.
</dd>
<dt>
<span class="term">
<code class="literal">REPLICA</code>
</span>
</dt>
<dd>
The recovery is related to
a <a class="xref" href="glossary.html#glossary-replica-shard">primary shard replication</a>.
</dd>
<dt>
<span class="term">
<code class="literal">RELOCATING</code>
</span>
</dt>
<dd>
The recovery is related to
the relocation of a shard
to a different node in the same cluster.
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">STAGE</code>
</span>
</dt>
<dd>
<p>(String)
Recovery stage.
Returned values include:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">DONE</code>
</span>
</dt>
<dd>
Complete.
</dd>
<dt>
<span class="term">
<code class="literal">FINALIZE</code>
</span>
</dt>
<dd>
Cleanup.
</dd>
<dt>
<span class="term">
<code class="literal">INDEX</code>
</span>
</dt>
<dd>
Reading index metadata and copying bytes from source to destination.
</dd>
<dt>
<span class="term">
<code class="literal">INIT</code>
</span>
</dt>
<dd>
Recovery has not started.
</dd>
<dt>
<span class="term">
<code class="literal">START</code>
</span>
</dt>
<dd>
Starting the recovery process; opening the index for use.
</dd>
<dt>
<span class="term">
<code class="literal">TRANSLOG</code>
</span>
</dt>
<dd>
Replaying transaction log .
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">primary</code>
</span>
</dt>
<dd>
(Boolean)
If <code class="literal">true</code>,
the shard is a primary shard.
</dd>
<dt>
<span class="term">
<code class="literal">start_time</code>
</span>
</dt>
<dd>
(String)
Timestamp of recovery start.
</dd>
<dt>
<span class="term">
<code class="literal">stop_time</code>
</span>
</dt>
<dd>
(String)
Timestamp of recovery finish.
</dd>
<dt>
<span class="term">
<code class="literal">total_time_in_millis</code>
</span>
</dt>
<dd>
(String)
Total time to recover shard in milliseconds.
</dd>
<dt>
<span class="term">
<code class="literal">source</code>
</span>
</dt>
<dd>
<p>(Object)
Recovery source.
This can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
A repository description if recovery is from a snapshot
</li>
<li class="listitem">
A description of source node
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">target</code>
</span>
</dt>
<dd>
(Object)
Destination node.
</dd>
<dt>
<span class="term">
<code class="literal">index</code>
</span>
</dt>
<dd>
(Object)
Statistics about physical index recovery.
</dd>
<dt>
<span class="term">
<code class="literal">translog</code>
</span>
</dt>
<dd>
(Object)
Statistics about translog recovery.
</dd>
<dt>
<span class="term">
<code class="literal">start</code>
</span>
</dt>
<dd>
(Object)
Statistics about time to open and start the index.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-recovery-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-recovery-api-multi-ex"></a>Get recovery information for several data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET index1,index2/_recovery?human</pre>
</div>
<div class="console_widget" data-snippet="snippets/1898.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-recovery-api-all-ex"></a>Get segment information for all data streams and indices in a cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_recovery?human</pre>
</div>
<div class="console_widget" data-snippet="snippets/1899.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "index1" : {
    "shards" : [ {
      "id" : 0,
      "type" : "SNAPSHOT",
      "stage" : "INDEX",
      "primary" : true,
      "start_time" : "2014-02-24T12:15:59.716",
      "start_time_in_millis": 1393244159716,
      "stop_time" : "0s",
      "stop_time_in_millis" : 0,
      "total_time" : "2.9m",
      "total_time_in_millis" : 175576,
      "source" : {
        "repository" : "my_repository",
        "snapshot" : "my_snapshot",
        "index" : "index1",
        "version" : "{version}",
        "restoreUUID": "PDh1ZAOaRbiGIVtCvZOMww"
      },
      "target" : {
        "id" : "ryqJ5lO5S4-lSFbGntkEkg",
        "host" : "my.fqdn",
        "transport_address" : "my.fqdn",
        "ip" : "10.0.1.7",
        "name" : "my_es_node"
      },
      "index" : {
        "size" : {
          "total" : "75.4mb",
          "total_in_bytes" : 79063092,
          "reused" : "0b",
          "reused_in_bytes" : 0,
          "recovered" : "65.7mb",
          "recovered_in_bytes" : 68891939,
          "percent" : "87.1%"
        },
        "files" : {
          "total" : 73,
          "reused" : 0,
          "recovered" : 69,
          "percent" : "94.5%"
        },
        "total_time" : "0s",
        "total_time_in_millis" : 0,
        "source_throttle_time" : "0s",
        "source_throttle_time_in_millis" : 0,
        "target_throttle_time" : "0s",
        "target_throttle_time_in_millis" : 0
      },
      "translog" : {
        "recovered" : 0,
        "total" : 0,
        "percent" : "100.0%",
        "total_on_start" : 0,
        "total_time" : "0s",
        "total_time_in_millis" : 0,
      },
      "verify_index" : {
        "check_index_time" : "0s",
        "check_index_time_in_millis" : 0,
        "total_time" : "0s",
        "total_time_in_millis" : 0
      }
    } ]
  }
}</pre>
</div>
<p>This response includes information
about a single index recovering a single shard.
The source of the recovery is a snapshot repository
and the target of the recovery is the <code class="literal">my_es_node</code> node.</p>
<p>The response also includes the number
and percentage of files and bytes recovered.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-recovery-api-detailed-ex"></a>Get detailed recovery information<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/recovery.asciidoc">edit</a></h4>
</div></div></div>
<p>To get a list of physical files in recovery,
set the <code class="literal">detailed</code> query parameter to <code class="literal">true</code>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET _recovery?human&amp;detailed=true</pre>
</div>
<div class="console_widget" data-snippet="snippets/1900.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "index1" : {
    "shards" : [ {
      "id" : 0,
      "type" : "STORE",
      "stage" : "DONE",
      "primary" : true,
      "start_time" : "2014-02-24T12:38:06.349",
      "start_time_in_millis" : "1393245486349",
      "stop_time" : "2014-02-24T12:38:08.464",
      "stop_time_in_millis" : "1393245488464",
      "total_time" : "2.1s",
      "total_time_in_millis" : 2115,
      "source" : {
        "id" : "RGMdRc-yQWWKIBM4DGvwqQ",
        "host" : "my.fqdn",
        "transport_address" : "my.fqdn",
        "ip" : "10.0.1.7",
        "name" : "my_es_node"
      },
      "target" : {
        "id" : "RGMdRc-yQWWKIBM4DGvwqQ",
        "host" : "my.fqdn",
        "transport_address" : "my.fqdn",
        "ip" : "10.0.1.7",
        "name" : "my_es_node"
      },
      "index" : {
        "size" : {
          "total" : "24.7mb",
          "total_in_bytes" : 26001617,
          "reused" : "24.7mb",
          "reused_in_bytes" : 26001617,
          "recovered" : "0b",
          "recovered_in_bytes" : 0,
          "percent" : "100.0%"
        },
        "files" : {
          "total" : 26,
          "reused" : 26,
          "recovered" : 0,
          "percent" : "100.0%",
          "details" : [ {
            "name" : "segments.gen",
            "length" : 20,
            "recovered" : 20
          }, {
            "name" : "_0.cfs",
            "length" : 135306,
            "recovered" : 135306
          }, {
            "name" : "segments_2",
            "length" : 251,
            "recovered" : 251
          }
          ]
        },
        "total_time" : "2ms",
        "total_time_in_millis" : 2,
        "source_throttle_time" : "0s",
        "source_throttle_time_in_millis" : 0,
        "target_throttle_time" : "0s",
        "target_throttle_time_in_millis" : 0
      },
      "translog" : {
        "recovered" : 71,
        "total" : 0,
        "percent" : "100.0%",
        "total_on_start" : 0,
        "total_time" : "2.0s",
        "total_time_in_millis" : 2025
      },
      "verify_index" : {
        "check_index_time" : 0,
        "check_index_time_in_millis" : 0,
        "total_time" : "88ms",
        "total_time_in_millis" : 88
      }
    } ]
  }
}</pre>
</div>
<p>The response includes a listing
of any physical files recovered
and their sizes.</p>
<p>The response also includes timings in milliseconds
of the various stages of recovery:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Index retrieval
</li>
<li class="listitem">
Translog replay
</li>
<li class="listitem">
Index start time
</li>
</ul>
</div>
<p>This response indicates the recovery is <code class="literal">done</code>.
All recoveries,
whether ongoing or complete,
are kept in the cluster state
and may be reported on at any time.</p>
<p>To only return information about ongoing recoveries,
set the <code class="literal">active_only</code> query parameter to <code class="literal">true</code>.</p>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-segments"></a>Index segments API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns low-level information about the <a href="https://lucene.apache.org/core/" class="ulink" target="_top">Lucene</a>
segments in index shards. For data streams, the API returns information about
the stream&#8217;s backing indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_segments</pre>
</div>
<div class="console_widget" data-snippet="snippets/1901.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-segments-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /&lt;target&gt;/_segments</code></p>
<p><code class="literal">GET /_segments</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-segments-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">monitor</code> or
<code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data stream,
index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-segments-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-segments-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">verbose</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span>
(Optional, Boolean)
If <code class="literal">true</code>, the response includes detailed information
about Lucene&#8217;s memory usage.
Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-segments-api-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;segment&gt;</code>
</span>
</dt>
<dd>
(String)
Name of the segment, such as <code class="literal">_0</code>. The segment name is derived from
the segment generation and used internally to create file names in the directory
of the shard.
</dd>
<dt>
<span class="term">
<code class="literal">generation</code>
</span>
</dt>
<dd>
(Integer)
Generation number, such as <code class="literal">0</code>. Elasticsearch increments this generation number
for each segment written. Elasticsearch then uses this number to derive the segment name.
Generation number, such as <code class="literal">0</code>. Elasticsearch increments this generation number
for each segment written. Elasticsearch then uses this number to derive the segment name.
</dd>
<dt>
<span class="term">
<code class="literal">num_docs</code>
</span>
</dt>
<dd>
(Integer)
The number of documents as reported by Lucene. This excludes deleted documents
and counts any <a class="xref" href="mapping-types.html#nested" title="Nested field type">nested documents</a> separately from their parents. It
also excludes documents which were indexed recently and do not yet belong to a
segment.
</dd>
<dt>
<span class="term">
<code class="literal">deleted_docs</code>
</span>
</dt>
<dd>
(Integer)
The number of deleted documents as reported by Lucene, which may be higher or
lower than the number of delete operations you have performed. This number
excludes deletes that were performed recently and do not yet belong to a
segment. Deleted documents are cleaned up by the
<a class="xref" href="index-modules-merge.html" title="Merge">automatic merge process</a> if it makes sense to do so.
Also, Elasticsearch creates extra deleted documents to internally track the recent
history of operations on a shard.
</dd>
<dt>
<span class="term">
<code class="literal">size_in_bytes</code>
</span>
</dt>
<dd>
(Integer)
Disk space used by the segment, such as <code class="literal">50kb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">memory_in_bytes</code>
</span>
</dt>
<dd>
<p>
(Integer)
Bytes of segment data stored in memory for efficient search,
such as <code class="literal">1264</code>.
</p>
<p>A value of <code class="literal">-1</code> indicates Elasticsearch was unable to compute this number.</p>
</dd>
<dt>
<span class="term">
<code class="literal">committed</code>
</span>
</dt>
<dd>
<p>
(Boolean)
If <code class="literal">true</code>,
the segments is synced to disk. Segments that are synced can survive a hard reboot.
</p>
<p>If <code class="literal">false</code>,
the data from uncommitted segments is also stored in
the transaction log so that Elasticsearch is able to replay
changes on the next start.</p>
</dd>
<dt>
<span class="term">
<code class="literal">search</code>
</span>
</dt>
<dd>
<p>
(Boolean)
If <code class="literal">true</code>,
the segment is searchable.
</p>
<p>If <code class="literal">false</code>,
the segment has most likely been written to disk
but needs a <a class="xref" href="indices.html#indices-refresh" title="Refresh API">refresh</a> to be searchable.</p>
</dd>
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
(String)
Version of Lucene used to write the segment.
</dd>
<dt>
<span class="term">
<code class="literal">compound</code>
</span>
</dt>
<dd>
(Boolean)
If <code class="literal">true</code>, Lucene merged all files from the segment
into a single file to save file descriptors.
</dd>
<dt>
<span class="term">
<code class="literal">attributes</code>
</span>
</dt>
<dd>
(Object)
Contains information about whether high compression was enabled.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-segments-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_get_segment_information_for_a_specific_data_stream_or_index"></a>Get segment information for a specific data stream or index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /test/_segments</pre>
</div>
<div class="console_widget" data-snippet="snippets/1902.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_get_segment_information_for_several_data_streams_and_indices"></a>Get segment information for several data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /test1,test2/_segments</pre>
</div>
<div class="console_widget" data-snippet="snippets/1903.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_get_segment_information_for_all_data_streams_and_indices_in_a_cluster"></a>Get segment information for all data streams and indices in a cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_segments</pre>
</div>
<div class="console_widget" data-snippet="snippets/1904.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-response">
<pre class="programlisting prettyprint lang-console-response">{
  "_shards": ...
  "indices": {
    "test": {
      "shards": {
        "0": [
          {
            "routing": {
              "state": "STARTED",
              "primary": true,
              "node": "zDC_RorJQCao9xf9pg3Fvw"
            },
            "num_committed_segments": 0,
            "num_search_segments": 1,
            "segments": {
              "_0": {
                "generation": 0,
                "num_docs": 1,
                "deleted_docs": 0,
                "size_in_bytes": 3800,
                "memory_in_bytes": 1410,
                "committed": false,
                "search": true,
                "version": "7.0.0",
                "compound": true,
                "attributes": {
                }
              }
            }
          }
        ]
      }
    }
  }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_verbose_mode"></a>Verbose mode<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/segments.asciidoc">edit</a></h4>
</div></div></div>
<p>To add additional information that can be used for debugging,
use the <code class="literal">verbose</code> flag.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /test/_segments?verbose=true</pre>
</div>
<div class="console_widget" data-snippet="snippets/1905.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-response">
<pre class="programlisting prettyprint lang-console-response">{
  ...
    "_0": {
      ...
      "ram_tree": [
        {
          "description": "postings [PerFieldPostings(format=1)]",
          "size_in_bytes": 2696,
          "children": [
            {
              "description": "format 'Lucene50_0' ...",
              "size_in_bytes": 2608,
              "children" :[ ... ]
            },
            ...
          ]
        },
        ...
      ]

    }
  ...
}</pre>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-shards-stores"></a>Index shard stores API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h2>
</div></div></div>

<p>Retrieves store information
about replica shards in one or more indices.
For data streams, the API retrieves store
information for the stream&#8217;s backing indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_shard_stores</pre>
</div>
<div class="console_widget" data-snippet="snippets/1906.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-shard-stores-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /&lt;target&gt;/_shard_stores</code></p>
<p><code class="literal">GET /_shard_stores</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-shard-stores-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">monitor</code> or
<code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data stream,
index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-shard-stores-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h3>
</div></div></div>
<p>The index shard stores API returns the following information:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The node on which each replica shard exists
</li>
<li class="listitem">
Allocation ID for each replica shard
</li>
<li class="listitem">
Unique ID for each replica shard
</li>
<li class="listitem">
Any errors encountered
while opening the shard index
or from an earlier failure
</li>
</ul>
</div>
<p>By default, the API only returns store information
for primary shards that are unassigned
or have one or more unassigned replica shards.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-shard-stores-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-shard-stores-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">status</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Comma-separated list of shard health statuses
used to limit the request.</p>
<p>Valid values include:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">green</code>
</span>
</dt>
<dd>
The primary shard and all replica shards are assigned.
</dd>
<dt>
<span class="term">
<code class="literal">yellow</code>
</span>
</dt>
<dd>
One or more replica shards are unassigned.
</dd>
<dt>
<span class="term">
<code class="literal">red</code>
</span>
</dt>
<dd>
The primary shard is unassigned.
</dd>
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Return all shards,
regardless of health status.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">yellow,red</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-shard-stores-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-shard-stores-api-single-ex"></a>Get shard store information for a specific data stream or index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /test/_shard_stores</pre>
</div>
<div class="console_widget" data-snippet="snippets/1907.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-shard-stores-api-multi-ex"></a>Get shard store information for several data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /test1,test2/_shard_stores</pre>
</div>
<div class="console_widget" data-snippet="snippets/1908.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-shard-stores-api-all-ex"></a>Get shard store information for all data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_shard_stores</pre>
</div>
<div class="console_widget" data-snippet="snippets/1909.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-shard-stores-api-health-ex"></a>Get shard store information based on cluster health<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shard-stores.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the <code class="literal">status</code> query parameter
to limit returned information based on shard health.</p>
<p>The following request only returns information
for assigned primary and replica shards.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_shard_stores?status=green</pre>
</div>
<div class="console_widget" data-snippet="snippets/1910.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "indices": {
    "my-index-00001": {
      "shards": {
        "0": {                                          <a id="CO616-1"></a><i class="conum" data-value="1"></i>
          "stores": [                                   <a id="CO616-2"></a><i class="conum" data-value="2"></i>
            {
            "sPa3OgxLSYGvQ4oPs-Tajw": {                 <a id="CO616-3"></a><i class="conum" data-value="3"></i>
              "name": "node_t0",
              "ephemeral_id": "9NlXRFGCT1m8tkvYCMK-8A",
              "transport_address": "local[1]",
              "attributes": {}
            },
            "allocation_id": "2iNySv_OQVePRX-yaRH_lQ",  <a id="CO616-4"></a><i class="conum" data-value="4"></i>
            "allocation": "primary|replica|unused"      <a id="CO616-5"></a><i class="conum" data-value="5"></i>
            "store_exception": ...                      <a id="CO616-6"></a><i class="conum" data-value="6"></i>
            }
          ]
        }
      }
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO616-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The key is the corresponding shard id for the store information</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO616-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>A list of store information for all copies of the shard</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO616-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The node information that hosts a copy of the store, the key
is the unique node id.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO616-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The allocation id of the store copy</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO616-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The status of the store copy, whether it is used as a
primary, replica or not used at all</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO616-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>Any exception encountered while opening the shard index or
from earlier engine failure</p>
</td>
</tr>
</table>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-stats"></a>Index stats API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns statistics for one or more indices. For data streams, the API retrieves
statistics for the stream&#8217;s backing indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_stats</pre>
</div>
<div class="console_widget" data-snippet="snippets/1911.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-stats-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /&lt;target&gt;/_stats/&lt;index-metric&gt;</code></p>
<p><code class="literal">GET /&lt;target&gt;/_stats</code></p>
<p><code class="literal">GET /_stats</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-stats-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">monitor</code> or
<code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data stream,
index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-stats-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the index stats API to get high-level aggregation and statistics for one or
more data streams and indices.</p>
<p>By default,
the returned statistics are index-level
with <code class="literal">primaries</code> and <code class="literal">total</code> aggregations.
<code class="literal">primaries</code> are the values for only the primary shards.
<code class="literal">total</code> are the accumulated values for both primary and replica shards.</p>
<p>To get shard-level statistics,
set the <code class="literal">level</code> parameter to <code class="literal">shards</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When moving to another node,
the shard-level statistics for a shard are cleared.
Although the shard
is no longer part of the node,
that node retains any node-level statistics
to which the shard contributed.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-stats-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">&lt;index-metric&gt;</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Comma-separated list of metrics used to limit the request.
Supported metrics are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">_all</code>
</span>
</dt>
<dd>
Return all statistics.
</dd>
<dt>
<span class="term">
<code class="literal">completion</code>
</span>
</dt>
<dd>
<a class="xref" href="search.html#completion-suggester" title="Completion Suggester">Completion suggester</a> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">docs</code>
</span>
</dt>
<dd>
Number of documents and deleted docs, which have not yet merged out.
<a class="xref" href="indices.html#indices-refresh" title="Refresh API">Index refreshes</a> can affect this statistic.
</dd>
<dt>
<span class="term">
<code class="literal">fielddata</code>
</span>
</dt>
<dd>
<a class="xref" href="getting-started-modify-data.html#fielddata" title="fielddata mapping parameter">Fielddata</a> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">flush</code>
</span>
</dt>
<dd>
<a class="xref" href="indices.html#indices-flush" title="Flush API">Flush</a> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">get</code>
</span>
</dt>
<dd>
Get statistics,
including missing stats.
</dd>
<dt>
<span class="term">
<code class="literal">indexing</code>
</span>
</dt>
<dd>
<a class="xref" href="docs.html#docs-index_" title="Index API">Indexing</a> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">merge</code>
</span>
</dt>
<dd>
<a class="xref" href="index-modules-merge.html" title="Merge">Merge</a> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">query_cache</code>
</span>
</dt>
<dd>
<a class="xref" href="settings.html#query-cache" title="Node query cache settings">Query cache</a> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">refresh</code>
</span>
</dt>
<dd>
<a class="xref" href="indices.html#indices-refresh" title="Refresh API">Refresh</a> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">request_cache</code>
</span>
</dt>
<dd>
<a class="xref" href="settings.html#shard-request-cache" title="Shard request cache settings">Shard request cache</a> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">search</code>
</span>
</dt>
<dd>
Search statistics including suggest statistics.
You can include statistics for custom groups
by adding an extra <code class="literal">groups</code> parameter
(search operations can be associated with one or more groups).
The <code class="literal">groups</code> parameter accepts a comma separated list of group names.
Use <code class="literal">_all</code> to return statistics for all groups.
</dd>
<dt>
<span class="term">
<code class="literal">segments</code>
</span>
</dt>
<dd>
<p>
Memory use of all open segments.
</p>
<p>If the <code class="literal">include_segment_file_sizes</code> parameter is <code class="literal">true</code>,
this metric includes the aggregated disk usage
of each Lucene index file.</p>
</dd>
<dt>
<span class="term">
<code class="literal">store</code>
</span>
</dt>
<dd>
Size of the index in <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte units</a>.
</dd>
<dt>
<span class="term">
<code class="literal">suggest</code>
</span>
</dt>
<dd>
<a class="xref" href="search.html#search-suggesters" title="Suggesters">Suggester</a> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">translog</code>
</span>
</dt>
<dd>
<a class="xref" href="index-modules-translog.html" title="Translog">Translog</a> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">warmer</code>
</span>
</dt>
<dd>
<a class="xref" href="redirects.html#indices-warmers" title="Warmers">Warmer</a> statistics.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-stats-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">fields</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Comma-separated list or wildcard expressions of fields
to include in the statistics.</p>
<p>Used as the default list
unless a specific field list is provided
in the <code class="literal">completion_fields</code> or <code class="literal">fielddata_fields</code> parameters.</p>
</dd>
<dt>
<span class="term">
<code class="literal">completion_fields</code>
</span>
</dt>
<dd>
(Optional, string)
Comma-separated list or wildcard expressions of fields
to include in <code class="literal">fielddata</code> and <code class="literal">suggest</code> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">fielddata_fields</code>
</span>
</dt>
<dd>
(Optional, string)
Comma-separated list or wildcard expressions of fields
to include in <code class="literal">fielddata</code> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">forbid_closed_indices</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>, statistics are <span class="strong strong"><strong>not</strong></span> collected from closed indices.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">groups</code>
</span>
</dt>
<dd>
(Optional, string)
Comma-separated list of search groups
to include in the <code class="literal">search</code> statistics.
</dd>
<dt>
<span class="term">
<code class="literal">level</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Indicates whether statistics are aggregated
at the cluster, index, or shard level.</p>
<p>Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">cluster</code>
</li>
<li class="listitem">
<code class="literal">indices</code>
</li>
<li class="listitem">
<code class="literal">shards</code>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">include_segment_file_sizes</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>, the call reports the aggregated disk usage of
each one  of the Lucene index files (only applies if segment stats are
requested). Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">include_unloaded_segments</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the response includes information from segments
that are <span class="strong strong"><strong>not</strong></span> loaded into memory. Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="index-stats-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-stats-api-multiple-ex"></a>Get statistics for multiple data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /index1,index2/_stats</pre>
</div>
<div class="console_widget" data-snippet="snippets/1912.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-stats-api-all-ex"></a>Get statistics for all data streams and indices in a cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_stats</pre>
</div>
<div class="console_widget" data-snippet="snippets/1913.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-stats-api-specific-stats-ex"></a>Get specific statistics<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h4>
</div></div></div>
<p>The following request returns
only the <code class="literal">merge</code> and <code class="literal">refresh</code> statistics
for all indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_stats/merge,refresh</pre>
</div>
<div class="console_widget" data-snippet="snippets/1914.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="index-stats-api-specific-groups-ex"></a>Get statistics for specific search groups<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/stats.asciidoc">edit</a></h4>
</div></div></div>
<p>The following request returns
only search statistics
for the <code class="literal">group1</code> and <code class="literal">group2</code> search groups.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_stats/search?groups=group1,group2</pre>
</div>
<div class="console_widget" data-snippet="snippets/1915.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-template-exists-v1"></a>Index template exists API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/index-template-exists-v1.asciidoc">edit</a></h2>
</div></div></div>

<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This documentation is about <a class="xref" href="indices.html#indices-templates-v1" title="Put index template API">legacy index
templates</a>, which are deprecated and will be replaced by the composable
templates introduced in Elasticsearch 7.8. For information about composable templates,
see <a class="xref" href="index-templates.html" title="Index templates">Index templates</a>.</p>
</div>
</div>
<p>Checks if an <a class="xref" href="indices.html#indices-templates-v1" title="Put index template API">legacy index template</a> exists.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">HEAD /_template/template_1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1916.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="template-exists-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/index-template-exists-v1.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">HEAD /_template/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="template-exists-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/index-template-exists-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="template-exists-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/index-template-exists-v1.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the index template exists API
to determine whether one or more index templates exist.</p>
<p>Index templates define <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">settings</a>, <a class="xref" href="mapping.html" title="Mapping">mappings</a>,
and <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">aliases</a> that can be applied automatically to new indices.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="template-exists-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/index-template-exists-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Comma-separated list of index template names used to limit the request. Wildcard
(<code class="literal">*</code>) expressions are supported.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="template-exists-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/index-template-exists-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">flat_settings</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, returns settings in flat format. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="template-exists-api-response-codes"></a>Response codes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/index-template-exists-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
Indicates all specified index templates exist.
</dd>
<dt>
<span class="term">
<code class="literal">404</code>
</span>
</dt>
<dd>
Indicates one or more specified index templates <span class="strong strong"><strong>do not</strong></span> exist.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-open-close"></a>Open index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/open-close.asciidoc">edit</a></h2>
</div></div></div>

<p>Opens a closed index. For data streams, the API
opens any closed backing indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_open</pre>
</div>
<div class="console_widget" data-snippet="snippets/1917.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/open-close.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;target&gt;/_open</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/open-close.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data stream, index,
or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-index-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/open-close.asciidoc">edit</a></h3>
</div></div></div>
<p>You can use the open index API to re-open closed indices. If the request targets
a data stream, the request re-opens any of the stream&#8217;s closed backing indices.</p>
<p>A closed index is blocked for read/write operations and does not allow
all operations that opened indices allow. It is not possible to index
documents or to search for documents in a closed index. This allows
closed indices to not have to maintain internal data structures for
indexing or searching documents, resulting in a smaller overhead on
the cluster.</p>
<p>When opening or closing an index, the master is responsible for
restarting the index shards to reflect the new state of the index.
The shards will then go through the normal recovery process. The
data of opened/closed indices is automatically replicated by the
cluster to ensure that enough shard copies are safely kept around
at all times.</p>
<p>You can open and close multiple indices. An error is thrown
if the request explicitly refers to a missing index. This behaviour can be
disabled using the <code class="literal">ignore_unavailable=true</code> parameter.</p>
<p>All indices can be opened or closed at once using <code class="literal">_all</code> as the index name
or specifying patterns that identify them all (e.g. <code class="literal">*</code>).</p>
<p>Identifying indices via wildcards or <code class="literal">_all</code> can be disabled by setting the
<code class="literal">action.destructive_requires_name</code> flag in the config file to <code class="literal">true</code>.
This setting can also be changed via the cluster update settings api.</p>
<p>Closed indices consume a significant amount of disk-space which can cause
problems in managed environments. Closing indices can be disabled via the cluster settings
API by setting <code class="literal">cluster.indices.close.enable</code> to <code class="literal">false</code>. The default is <code class="literal">true</code>.</p>
<p>The current write index on a data stream cannot be closed. In order to close
the current write index, the data stream must first be
<a class="xref" href="indices.html#rollover-data-stream-ex" title="Roll over a data stream">rolled over</a> so that a new write index is created
and then the previous write index can be closed.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="open-index-api-wait-for-active-shards"></a>Wait for active shards<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/open-close.asciidoc">edit</a></h4>
</div></div></div>
<p>Because opening or closing an index allocates its shards, the
<a class="xref" href="indices.html#create-index-wait-for-active-shards" title="Wait for active shards"><code class="literal">wait_for_active_shards</code></a> setting on
index creation applies to the <code class="literal">_open</code> and <code class="literal">_close</code> index actions as well.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-index-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/open-close.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list or wildcard (<code class="literal">*</code>) expression of data streams, indices, and
index aliases used to limit the request.
</p>
<p>To target all data streams and indices, use <code class="literal">_all</code> or <code class="literal">*</code>.</p>
<p>To disallow use of <code class="literal">_all</code> or wildcard expressions,
change the <code class="literal">action.destructive_requires_name</code> cluster setting to <code class="literal">true</code>.
You can update this setting in the <code class="literal">elasticsearch.yml</code> file
or using the <a class="xref" href="cluster.html#cluster-update-settings" title="Cluster update settings API">cluster update settings</a> API.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-index-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/open-close.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">closed</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">wait_for_active_shards</code>
</span>
</dt>
<dd>
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code class="literal">all</code> or any positive integer up
to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
<p>See <a class="xref" href="docs.html#index-wait-for-active-shards" title="Active shards">Active shards</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-index-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/open-close.asciidoc">edit</a></h3>
</div></div></div>
<p>The following request re-opens a closed index named <code class="literal">my-index-000001</code>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_open</pre>
</div>
<div class="console_widget" data-snippet="snippets/1918.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged" : true,
  "shards_acknowledged" : true
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-put-template"></a>Put index template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h2>
</div></div></div>

<p>Creates or updates an index template.
Index templates define <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">settings</a>, <a class="xref" href="mapping.html" title="Mapping">mappings</a>,
and <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">aliases</a> that can be applied automatically to new indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_index_template/template_1
{
  "index_patterns" : ["te*"],
  "priority" : 1,
  "template": {
    "settings" : {
      "number_of_shards" : 2
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1919.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT /_index_template/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h3>
</div></div></div>
<p>Elasticsearch applies templates to new indices based on an
wildcard pattern that matches the index name.</p>
<p>Index templates are applied during data stream or index creation.
For data streams, these settings and mappings are applied when the stream&#8217;s backing indices are created.</p>
<p>Settings and mappings specified in a <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a>
request override any settings or mappings specified in an index template.</p>
<p>Changes to index templates do not affect
existing indices, including the existing backing indices of a data stream.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_comments_in_index_templates"></a>Comments in index templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use C-style /* */ block comments in index templates. You can include comments anywhere in
the request body, except before the opening curly bracket.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Name of the index template to create.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">create</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>, this request cannot replace or update existing index templates. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
<p>
(Required, array of strings)
Array of wildcard (<code class="literal">*</code>) expressions
used to match the names of data streams and indices during creation.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch has built-in index templates, each with a priority of <code class="literal">100</code>, for the
following index patterns:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">logs-*-*</code>
</li>
<li class="listitem">
<code class="literal">metrics-*-*</code>
</li>
<li class="listitem">
<code class="literal">synthetics-*-*</code>
</li>
</ul>
</div>
<p><a href="https://www.elastic.co/guide/en/fleet/7.10/fleet-overview.html" class="ulink" target="_top">Elastic Agent</a> uses these templates to create
data streams. If you use the Elastic Agent, assign your index templates a priority
lower than <code class="literal">100</code> to avoid overriding the built-in templates.Otherwise, to avoid
accidentally applying the built-in templates, do one or more of the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
To disable all built-in index and component templates, set
<a class="xref" href="settings.html#stack-templates-enabled"><code class="literal">stack.templates.enabled</code></a> to <code class="literal">false</code> in
<a class="xref" href="settings.html#config-files-location" title="Config files location"><code class="literal">elasticsearch.yml</code></a>.
</li>
<li class="listitem">
Use a non-overlapping index pattern.
</li>
<li class="listitem">
Assign templates with an overlapping pattern a <code class="literal">priority</code> higher than <code class="literal">100</code>.
For example, if you don&#8217;t use the Elastic Agent and want to create a template for the
<code class="literal">logs-*</code> index pattern, assign your template a priority of <code class="literal">200</code>. This ensures
your template is applied instead of the built-in template for <code class="literal">logs-*-*</code>.
</li>
</ul>
</div>
</div>
</div>
</dd>
<dt>
<span class="term">
<span class="xpack"><code class="literal">data_stream</code></span><a class="xpack_tag" href="/subscriptions"></a>
</span>
</dt>
<dd>
<p>
(Optional, object)
Indicates whether the template is used to create data streams and their backing
indices. If so, use an empty object as the argument:<br>
<code class="literal">data_stream: { }</code>.
</p>
<p>Data streams require a matching index template with a <code class="literal">data_stream</code> object.
See <a class="xref" href="set-up-a-data-stream.html#create-a-data-stream-template" title="Create an index template">Create an index template</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
<p>
(Optional, object)
Template to be applied. It may optionally include an <code class="literal">aliases</code>, <code class="literal">mappings</code>, or
<code class="literal">settings</code> configuration.
</p>
<details open>
<summary class="title">Properties of <code class="literal">template</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
<p>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot add data streams to an index alias.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">composed_of</code>
</span>
</dt>
<dd>
(Optional, array of strings)
An ordered list of component template names. Component templates are merged in the order
specified, meaning that the last component template specified has the highest precedence. See
<a class="xref" href="indices.html#multiple-component-templates" title="Composing aliases, mappings, and settings">Composing multiple component templates</a> for an example.
</dd>
<dt>
<span class="term">
<code class="literal">priority</code>
</span>
</dt>
<dd>
(Optional, integer)
Priority to determine index template precedence when a new data stream or index is created. The index template with
the highest priority is chosen. If no priority is specified the template is treated as though it is
of priority 0 (lowest priority).
This number is not automatically generated by Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
(Optional, integer)
Version number used to manage index templates externally.
This number is not automatically generated by Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">_meta</code>
</span>
</dt>
<dd>
(Optional, object)
Optional user metadata about the index template. May have any contents.
This map is not automatically generated by Elasticsearch.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_index_template_with_index_aliases"></a>Index template with index aliases<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h4>
</div></div></div>
<p>You can include <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index aliases</a> in an index template.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _index_template/template_1
{
  "index_patterns" : ["te*"],
  "template": {
    "settings" : {
        "number_of_shards" : 1
    },
    "aliases" : {
        "alias1" : {},
        "alias2" : {
            "filter" : {
                "term" : {"user.id" : "kimchy" }
            },
            "routing" : "shard-1"
        },
        "{index}-alias" : {} <a id="CO617-1"></a><i class="conum" data-value="1"></i>
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1920.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO617-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>the <code class="literal">{index}</code> placeholder in the alias name will be replaced with the
actual index name that the template gets applied to, during index creation.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="multiple-templates"></a>Multiple matching templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h4>
</div></div></div>
<p>If multiple index templates match the name of a new index or data stream,
the template with the highest priority is used. For example:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_index_template/template_1
{
  "index_patterns" : ["t*"],
  "priority" : 0,
  "template": {
    "settings" : {
      "number_of_shards" : 1,
      "number_of_replicas": 0
    },
    "mappings" : {
      "_source" : { "enabled" : false }
    }
  }
}

PUT /_index_template/template_2
{
  "index_patterns" : ["te*"],
  "priority" : 1,
  "template": {
    "settings" : {
      "number_of_shards" : 2
    },
    "mappings" : {
      "_source" : { "enabled" : true }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1921.console"></div>
<p>For indices that start with <code class="literal">te*</code>, <code class="literal">_source</code> will enabled, and the index will have two primary
shards and one replica, because only <code class="literal">template_2</code> will be applied.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Multiple templates with overlapping index patterns at the same priority are not allowed, and
an error will be thrown when attempting to create a template matching an existing index template at
identical priorities.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="versioning-templates"></a>Template versioning<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the <code class="literal">version</code> parameter to add a version number to an index template.
External systems can use these version numbers to simplify template management.</p>
<p>The <code class="literal">version</code> parameter is optional and not automatically generated or used by Elasticsearch.</p>
<p>To unset a <code class="literal">version</code>, replace the template without specifying one.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_index_template/template_1
{
  "index_patterns" : ["foo", "bar"],
  "priority" : 0,
  "template": {
    "settings" : {
        "number_of_shards" : 1
    }
  },
  "version": 123
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1922.console"></div>
<p>To check the <code class="literal">version</code>, you can use the <a class="xref" href="indices.html#indices-get-template" title="Get index template API">get index template</a> API.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="template-metadata"></a>Template metadata<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the <code class="literal">_meta</code> parameter to add arbitrary metadata to an index template.
This user-defined object is stored in the cluster state,
so keeping it short is preferrable.</p>
<p>The <code class="literal">_meta</code> parameter is optional and not automatically generated or used by Elasticsearch.</p>
<p>To unset <code class="literal">_meta</code>, replace the template without specifying one.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_index_template/template_1
{
  "index_patterns": ["foo", "bar"],
  "template": {
    "settings" : {
        "number_of_shards" : 3
    }
  },
  "_meta": {
    "description": "set number of shards to three",
    "serialization": {
      "class": "MyIndexTemplate",
      "id": 17
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1923.console"></div>
<p>To check the <code class="literal">_meta</code>, you can use the <a class="xref" href="indices.html#indices-get-template" title="Get index template API">get index template</a> API.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="data-stream-definition"></a>Data stream definition<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h4>
</div></div></div>
<p>To use an index template for a data stream, the template must include an empty <code class="literal">data_stream</code> object.
Data stream templates are only used for a stream&#8217;s backing indices,
they are not applied to regular indices.
See <a class="xref" href="set-up-a-data-stream.html#create-a-data-stream-template" title="Create an index template">Create an index template</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_index_template/template_1
{
  "index_patterns": ["logs-*"],
  "data_stream": { }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1924.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="multiple-component-templates"></a>Composing aliases, mappings, and settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template.asciidoc">edit</a></h4>
</div></div></div>
<p>When multiple component templates are specified in the <code class="literal">composed_of</code> field for an index template,
they are merged in the order specified, meaning that later component templates override earlier
component templates. Any mappings, settings, or aliases from the parent index template are merged
in next. Finally, any configuration on the index request itself is merged.</p>
<p>In this example, the order of the two component templates changes the number of shards for an
index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_component_template/template_with_2_shards
{
  "template": {
    "settings": {
      "index.number_of_shards": 2
    }
  }
}

PUT /_component_template/template_with_3_shards
{
  "template": {
    "settings": {
      "index.number_of_shards": 3
    }
  }
}

PUT /_index_template/template_1
{
  "index_patterns": ["t*"],
  "composed_of": ["template_with_2_shards", "template_with_3_shards"]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1925.console"></div>
<p>In this case, an index matching <code class="literal">t*</code> will have three primary shards. If the order of composed
templates were reversed, the index would have two primary shards.</p>
<p>Mapping definitions are merged recursively, which means that later mapping components can
introduce new field mappings and update the mapping configuration. If a field mapping is
already contained in an earlier component, its definition will be completely overwritten
by the later one.</p>
<p>This recursive merging strategy applies not only to field mappings, but also root options like
<code class="literal">dynamic_templates</code> and <code class="literal">meta</code>. If an earlier component contains a <code class="literal">dynamic_templates</code> block,
then by default new <code class="literal">dynamic_templates</code> entries are appended onto the end. If an entry already
exists with the same key, then it is overwritten by the new definition.</p>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-templates-v1"></a>Put index template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h2>
</div></div></div>

<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This documentation is about legacy index templates,
which are deprecated and will be replaced by the composable templates introduced in Elasticsearch 7.8.
For information about composable templates, see <a class="xref" href="index-templates.html" title="Index templates">Index templates</a>.</p>
</div>
</div>
<p>Creates or updates an index template.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _template/template_1
{
  "index_patterns": ["te*", "bar*"],
  "settings": {
    "number_of_shards": 1
  },
  "mappings": {
    "_source": {
      "enabled": false
    },
    "properties": {
      "host_name": {
        "type": "keyword"
      },
      "created_at": {
        "type": "date",
        "format": "EEE MMM dd HH:mm:ss Z yyyy"
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1926.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT /_template/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the PUT index template API
to create or update an index template.</p>
<p>Index templates define <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">settings</a> and <a class="xref" href="mapping.html" title="Mapping">mappings</a>
that you can automatically apply when creating new indices.
Elasticsearch applies templates to new indices
based on an index pattern that matches the index name.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Composable templates always take precedence over legacy templates.
If no composable template matches a new index,
matching legacy templates are applied according to their order.</p>
</div>
</div>
<p>Index templates are only applied during index creation.
Changes to index templates do not affect existing indices.
Settings and mappings specified in <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a> API requests
override any settings or mappings specified in an index template.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_comments_in_index_templates_2"></a>Comments in index templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use C-style /* */ block comments in index templates.
You can include comments anywhere in the request body,
except before the opening curly bracket.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="getting-v1"></a>Getting templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<p>See <a class="xref" href="indices.html#indices-get-template-v1" title="Get index template API">Get index template (legacy)</a>.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Name of the index template to create.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">create</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>, this request cannot replace or update existing index templates.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">order</code>
</span>
</dt>
<dd>
<p>
(Optional,integer)
Order in which Elasticsearch applies this template
if index matches multiple templates.
</p>
<p>Templates with lower <code class="literal">order</code> values are merged first.
Templates with higher <code class="literal">order</code> values are merged later,
overriding templates with lower values.</p>
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
(Required, array of strings)
Array of wildcard expressions
used to match the names of indices during creation.
</dd>
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
(Optional, integer)
Version number used to manage index templates externally.
This number is not automatically generated by Elasticsearch.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_index_template_with_index_aliases_2"></a>Index template with index aliases<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<p>You can include <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index aliases</a> in an index template.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _template/template_1
{
  "index_patterns" : ["te*"],
  "settings" : {
    "number_of_shards" : 1
  },
  "aliases" : {
    "alias1" : {},
    "alias2" : {
      "filter" : {
        "term" : {"user.id" : "kimchy" }
      },
      "routing" : "shard-1"
    },
    "{index}-alias" : {} <a id="CO618-1"></a><i class="conum" data-value="1"></i>
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1927.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO618-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>the <code class="literal">{index}</code> placeholder in the alias name will be replaced with the
actual index name that the template gets applied to, during index creation.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="multiple-templates-v1"></a>Indices matching multiple templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<p>Multiple index templates can potentially match an index, in this case,
both the settings and mappings are merged into the final configuration
of the index. The order of the merging can be controlled using the
<code class="literal">order</code> parameter, with lower order being applied first, and higher
orders overriding them. For example:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_template/template_1
{
  "index_patterns" : ["te*"],
  "order" : 0,
  "settings" : {
    "number_of_shards" : 1
  },
  "mappings" : {
    "_source" : { "enabled" : false }
  }
}

PUT /_template/template_2
{
  "index_patterns" : ["tes*"],
  "order" : 1,
  "settings" : {
    "number_of_shards" : 1
  },
  "mappings" : {
    "_source" : { "enabled" : true }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1928.console"></div>
<p>The above will disable storing the <code class="literal">_source</code>, but
for indices that start with <code class="literal">tes*</code>, <code class="literal">_source</code> will still be enabled.
Note, for mappings, the merging is "deep", meaning that specific
object/property based mappings can easily be added/overridden on higher
order templates, with lower order templates providing the basis.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Multiple matching templates with the same order value will
result in a non-deterministic merging order.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="versioning-templates-v1"></a>Template versioning<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the <code class="literal">version</code> parameter
to add an optional version number to an index template.
External systems can use these version numbers
to simplify template management.</p>
<p>The <code class="literal">version</code>	parameter is completely optional
and not automatically generated by Elasticsearch.</p>
<p>To unset a <code class="literal">version</code>,
replace the template without specifying	one.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_template/template_1
{
  "index_patterns" : ["my-index-*"],
  "order" : 0,
  "settings" : {
    "number_of_shards" : 1
  },
  "version": 123
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1929.console"></div>
<p>To check the <code class="literal">version</code>,
you can	use the <a class="xref" href="indices.html#indices-get-template" title="Get index template API">get index template</a> API
with the <a class="xref" href="api-conventions.html#common-options-response-filtering" title="Response Filtering"><code class="literal">filter_path</code></a> query parameter
to return only the version number:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_template/template_1?filter_path=*.version</pre>
</div>
<div class="console_widget" data-snippet="snippets/1930.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "template_1" : {
    "version" : 123
  }
}</pre>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-component-template"></a>Put component template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h2>
</div></div></div>

<p>Creates or updates a component template.
Component templates are building blocks for constructing <a class="xref" href="index-templates.html" title="Index templates">index templates</a>
that specify index <a class="xref" href="mapping.html" title="Mapping">mappings</a>, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">settings</a>,
and <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">aliases</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _component_template/template_1
{
  "template": {
    "settings": {
      "number_of_shards": 1
    },
    "mappings": {
      "_source": {
        "enabled": false
      },
      "properties": {
        "host_name": {
          "type": "keyword"
        },
        "created_at": {
          "type": "date",
          "format": "EEE MMM dd HH:mm:ss Z yyyy"
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1931.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-component-template-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT /_component_template/&lt;component-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-component-template-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-component-template-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h3>
</div></div></div>
<p>An index template can be composed of multiple component templates.
To use a component template, specify it in an index template&#8217;s <code class="literal">composed_of</code> list.
Component templates are only applied to new data streams and indices
as part of a matching index template.</p>
<p>Settings and mappings specified directly in the index template or the <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a>
request override any settings or mappings specified in a component template.</p>
<p>Component templates are only used during index creation. For data streams, this
includes data stream creation and the creation of a stream&#8217;s backing indices.
Changes to component templates do not
affect existing indices, including a stream&#8217;s backing indices.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_comments_in_component_templates"></a>Comments in component templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use C-style /* */ block comments in component templates.
You can include comments anywhere in the request body,
except before the opening curly bracket.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-component-template-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;component-template&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, string)
Name of the component template to create.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch includes the following built-in component templates:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">logs-mappings</code>
</li>
<li class="listitem">
<code class="literal">logs-settings</code>
</li>
<li class="listitem">
<code class="literal">metrics-mappings</code>
</li>
<li class="listitem">
<code class="literal">metrics-settings</code>
</li>
<li class="listitem">
<code class="literal">synthetics-mapping</code>
</li>
<li class="listitem">
<code class="literal">synthetics-settings</code>
</li>
</ul>
</div>
<p><a href="https://www.elastic.co/guide/en/fleet/7.10/fleet-overview.html" class="ulink" target="_top">Elastic Agent</a> uses these templates to configure
backing indices for its data streams. If you use Elastic Agent and want to overwrite
one of these templates, set the <code class="literal">version</code> for your replacement template higher
than the current version.</p>
<p>If you don&#8217;t use Elastic Agent and want to disable all built-in component and index
templates, set <a class="xref" href="settings.html#stack-templates-enabled"><code class="literal">stack.templates.enabled</code></a> to <code class="literal">false</code>
in <a class="xref" href="settings.html#config-files-location" title="Config files location"><code class="literal">elasticsearch.yml</code></a>.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-component-template-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">create</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>, this request cannot replace or update existing component templates.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-component-template-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
(Required, object)
This is the template to be applied, may optionally include a <code class="literal">mappings</code>,
<code class="literal">settings</code>, or <code class="literal">aliases</code> configuration.
</dd>
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
<p>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot add data streams to an index alias.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
(Optional, integer)
Version number used to manage component templates externally.
This number is not automatically generated or incremented by Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">_meta</code>
</span>
</dt>
<dd>
(Optional, object)
Optional user metadata about the component template. May have any contents.
This map is not automatically generated by Elasticsearch.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-component-template-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_component_template_with_index_aliases"></a>Component template with index aliases<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h4>
</div></div></div>
<p>You can include <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index aliases</a> in a component template.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _component_template/template_1
{
  "template": {
    "settings" : {
        "number_of_shards" : 1
    },
    "aliases" : {
        "alias1" : {},
        "alias2" : {
            "filter" : {
                "term" : {"user.id" : "kimchy" }
            },
            "routing" : "shard-1"
        },
        "{index}-alias" : {} <a id="CO619-1"></a><i class="conum" data-value="1"></i>
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1932.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO619-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>the <code class="literal">{index}</code> placeholder in the alias name will be replaced with the
actual index name that the template gets applied to, during index creation.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="applying-component-templates"></a>Applying component templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h4>
</div></div></div>
<p>You cannot directly apply a component template to a data stream or index.
To be applied, a component template must be included in an index template&#8217;s <code class="literal">composed_of</code> list. See <a class="xref" href="index-templates.html" title="Index templates">Index templates</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="component-templates-version"></a>Component template versioning<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the <code class="literal">version</code> parameter to add a version number to a component template.
External systems can use these version numbers to simplify template management.</p>
<p>The <code class="literal">version</code> parameter is optional and not automatically generated or used by Elasticsearch.</p>
<p>To unset a <code class="literal">version</code>, replace the template without specifying one.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_component_template/template_1
{
  "template": {
    "settings" : {
        "number_of_shards" : 1
    }
  },
  "version": 123
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1933.console"></div>
<p>To check the <code class="literal">version</code>, you can use the <a class="xref" href="indices.html#getting-component-templates" title="Get component template API">get component template API</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="component-templates-metadata"></a>Component template metadata<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-component-template.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the <code class="literal">_meta</code> parameter to add arbitrary metadata to a component template.
This user-defined object is stored in the cluster state,
so keeping it short is preferrable.</p>
<p>The <code class="literal">_meta</code> parameter is optional and not automatically generated or used by Elasticsearch.</p>
<p>To unset <code class="literal">_meta</code>, replace the template without specifying one.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_component_template/template_1
{
  "template": {
    "settings" : {
        "number_of_shards" : 1
    }
  },
  "_meta": {
    "description": "set number of shards to one",
    "serialization": {
      "class": "MyComponentTemplate",
      "id": 10
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1934.console"></div>
<p>To check the <code class="literal">_meta</code>, you can use the <a class="xref" href="indices.html#getting-component-templates" title="Get component template API">get component template</a> API.</p>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-put-mapping"></a>Put mapping API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h2>
</div></div></div>

<p>Adds new fields to an existing data stream or index. You can also use the
put mapping API to change the search settings of existing fields.</p>
<p>For data streams, these changes are applied to all backing indices by default.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_mapping
{
  "properties": {
    "email": {
      "type": "keyword"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1935.console"></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Before 7.0.0, the <em>mappings</em> definition used to include a type name.
Although specifying types in requests is now deprecated, a type can still be
provided if the request parameter <code class="literal">include_type_name</code> is set. For more details,
please see <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-mapping-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT /&lt;target&gt;/_mapping</code></p>
<p><code class="literal">PUT /_mapping</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-mapping-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data stream, index,
or index alias.</p>
<p><span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.9</span>]
<span class="Admonishment-detail">
Deprecated in 7.9.
</span>
</span> If the request targets an index or index alias, you can also
update its mapping with the <code class="literal">create</code>, <code class="literal">create_doc</code>, <code class="literal">index</code>, or <code class="literal">write</code> index
privilege.</p>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-mapping-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-mapping-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">false</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">include_type_name</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.0.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.0.0. Mapping types have been deprecated. See <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.
</span>
</span>
(Optional, boolean) If <code class="literal">true</code>, a mapping type is expected in the body of
mappings. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">write_index_only</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>,
the mappings are applied only to the current write index for the target.
Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-mapping-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">properties</code>
</span>
</dt>
<dd>
<p>(Required, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for a field. For new
fields, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field name
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data type</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>For existing fields, see <a class="xref" href="indices.html#updating-field-mappings" title="Change the mapping of an existing field">Change the mapping of an existing field</a>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-mapping-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="put-field-mapping-api-basic-ex"></a>Example with single target<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p>The put mapping API requires an existing data stream or index. The following
<a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a> API request creates the <code class="literal">publications</code>
index with no mapping.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /publications</pre>
</div>
<div class="console_widget" data-snippet="snippets/1936.console"></div>
<p>The following put mapping API request adds <code class="literal">title</code>, a new <a class="xref" href="mapping-types.html#text" title="Text field type"><code class="literal">text</code></a> field,
to the <code class="literal">publications</code> index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /publications/_mapping
{
  "properties": {
    "title":  { "type": "text"}
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1937.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="put-mapping-api-multi-ex"></a>Multiple targets<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p>The PUT mapping API can be applied to multiple data streams or indices with a single request.
For example, you can update mappings for the <code class="literal">my-index-000001</code> and <code class="literal">my-index-000002</code> indices at the same time:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console"># Create the two indices
PUT /my-index-000001
PUT /my-index-000002

# Update both mappings
PUT /my-index-000001,my-index-000002/_mapping
{
  "properties": {
    "user": {
      "properties": {
        "name": {
          "type": "keyword"
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1938.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="add-new-field-to-object"></a>Add new properties to an existing object field<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the put mapping API to add new properties to an existing
<a class="xref" href="mapping-types.html#object" title="Object field type"><code class="literal">object</code></a> field. To see how this works, try the following example.</p>
<p>Use the <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a> API to create an index with the
<code class="literal">name</code> object field and an inner <code class="literal">first</code> text field.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "mappings": {
    "properties": {
      "name": {
        "properties": {
          "first": {
            "type": "text"
          }
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1939.console"></div>
<p>Use the put mapping API to add a new inner <code class="literal">last</code> text field to the <code class="literal">name</code>
field.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_mapping
{
  "properties": {
    "name": {
      "properties": {
        "last": {
          "type": "text"
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1940.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="add-multi-fields-existing-field-ex"></a>Add multi-fields to an existing field<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p><a class="xref" href="mapping-params.html#multi-fields" title="fields">Multi-fields</a> let you index the same field in different ways.
You can use the put mapping API to update the <code class="literal">fields</code> mapping parameter and
enable multi-fields for an existing field.</p>
<p>To see how this works, try the following example.</p>
<p>Use the <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a> API to create an index with the
<code class="literal">city</code> <a class="xref" href="mapping-types.html#text" title="Text field type">text</a> field.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "mappings": {
    "properties": {
      "city": {
        "type": "text"
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1941.console"></div>
<p>While text fields work well for full-text search, <a class="xref" href="mapping-types.html#keyword" title="Keyword type family">keyword</a> fields are
not analyzed and may work better for sorting or aggregations.</p>
<p>Use the put mapping API to enable a multi-field for the <code class="literal">city</code> field. This
request adds the <code class="literal">city.raw</code> keyword multi-field, which can be used for sorting.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_mapping
{
  "properties": {
    "city": {
      "type": "text",
      "fields": {
        "raw": {
          "type": "keyword"
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1942.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="change-existing-mapping-parms"></a>Change supported mapping parameters for an existing field<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p>The documentation for each <a class="xref" href="mapping-params.html" title="Mapping parameters">mapping parameter</a> indicates
whether you can update it for an existing field using the put mapping API. For
example, you can use the put mapping API to update the
<a class="xref" href="mapping-params.html#ignore-above" title="ignore_above"><code class="literal">ignore_above</code></a> parameter.</p>
<p>To see how this works, try the following example.</p>
<p>Use the <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a> API to create an index containing
a <code class="literal">user_id</code> keyword field. The <code class="literal">user_id</code> field has an <code class="literal">ignore_above</code> parameter
value of <code class="literal">20</code>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "mappings": {
    "properties": {
      "user_id": {
        "type": "keyword",
        "ignore_above": 20
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1943.console"></div>
<p>Use the put mapping API to change the <code class="literal">ignore_above</code> parameter value to <code class="literal">100</code>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_mapping
{
  "properties": {
    "user_id": {
      "type": "keyword",
      "ignore_above": 100
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1944.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="updating-field-mappings"></a>Change the mapping of an existing field<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p>Except for supported <a class="xref" href="mapping-params.html" title="Mapping parameters">mapping parameters</a>,
you can&#8217;t change the mapping or field type of an existing field.
Changing an existing field could invalidate data that&#8217;s already indexed.</p>
<p>If you need to change the mapping of a field in a data stream&#8217;s backing indices,
see <a class="xref" href="data-streams-change-mappings-and-settings.html" title="Change mappings and settings for a data stream"><em>Change mappings and settings for a data stream</em></a>.</p>
<p>If you need to change the mapping of a field in other indices,
create a new index with the correct mapping
and <a class="xref" href="docs.html#docs-reindex" title="Reindex API">reindex</a> your data into that index.</p>
<p>To see how you can change the mapping of an existing field in an index,
try the following example.</p>
<p>Use the <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a> API
to create an index
with the <code class="literal">user_id</code> field
with the <a class="xref" href="mapping-types.html#number" title="Numeric field types"><code class="literal">long</code></a> field type.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "mappings" : {
    "properties": {
      "user_id": {
        "type": "long"
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1945.console"></div>
<p>Use the <a class="xref" href="docs.html#docs-index_" title="Index API">index</a> API
to index several documents
with <code class="literal">user_id</code> field values.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_doc?refresh=wait_for
{
  "user_id" : 12345
}

POST /my-index-000001/_doc?refresh=wait_for
{
  "user_id" : 12346
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1946.console"></div>
<p>To change the <code class="literal">user_id</code> field
to the <a class="xref" href="mapping-types.html#keyword" title="Keyword type family"><code class="literal">keyword</code></a> field type,
use the create index API
to create a new index with the correct mapping.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-new-index-000001
{
  "mappings" : {
    "properties": {
      "user_id": {
        "type": "keyword"
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1947.console"></div>
<p>Use the <a class="xref" href="docs.html#docs-reindex" title="Reindex API">reindex</a> API
to copy documents from the old index
to the new one.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_reindex
{
  "source": {
    "index": "my-index-000001"
  },
  "dest": {
    "index": "my-new-index-000001"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1948.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="rename-existing-field"></a>Rename a field<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/put-mapping.asciidoc">edit</a></h4>
</div></div></div>
<p>Renaming a field would invalidate data already indexed under the old field name.
Instead, add an <a class="xref" href="mapping-types.html#alias" title="Alias field type"><code class="literal">alias</code></a> field to create an alternate field name.</p>
<p>For example,
use the <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a> API
to create an index
with the <code class="literal">user_identifier</code> field.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "mappings": {
    "properties": {
      "user_identifier": {
        "type": "keyword"
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1949.console"></div>
<p>Use the put mapping API to add the <code class="literal">user_id</code> field alias
for the existing <code class="literal">user_identifier</code> field.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_mapping
{
  "properties": {
    "user_id": {
      "type": "alias",
      "path": "user_identifier"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1950.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-refresh"></a>Refresh API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/refresh.asciidoc">edit</a></h2>
</div></div></div>

<p>Refreshes one or more indices. For data streams, the API refreshes the stream&#8217;s
backing indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_refresh</pre>
</div>
<div class="console_widget" data-snippet="snippets/1951.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="refresh-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/refresh.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST &lt;target&gt;/_refresh</code></p>
<p><code class="literal">GET &lt;target&gt;/_refresh</code></p>
<p><code class="literal">POST /_refresh</code></p>
<p><code class="literal">GET /_refresh</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="refresh-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/refresh.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">maintenance</code>
or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data
stream, index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="refresh-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/refresh.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the refresh API to explicitly refresh one or more indices.
If the request targets a data stream, it refreshes the stream&#8217;s backing indices.
A <em>refresh</em> makes all operations performed on an index
since the last refresh
available for search.</p>
<p>By default, Elasticsearch periodically refreshes indices every second, but only on
indices that have received one search request or more in the last 30 seconds.
You can change this default interval
using the <a class="xref" href="index-modules.html#index-refresh-interval-setting"><code class="literal">index.refresh_interval</code></a> setting.</p>
<p>Refresh requests are synchronous and do not return a response until the
refresh operation completes.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Refreshes are resource-intensive.
To ensure good cluster performance,
we recommend waiting for Elasticsearch&#8217;s periodic refresh
rather than performing an explicit refresh
when possible.</p>
<p>If your application workflow
indexes documents and then runs a search
to retrieve the indexed document,
we recommend using the <a class="xref" href="docs.html#docs-index_" title="Index API">index API</a>'s
<code class="literal">refresh=wait_for</code> query parameter option.
This option ensures the indexing operation waits
for a periodic refresh
before running the search.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="refresh-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/refresh.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.
</p>
<p>To refresh all indices in the cluster,
omit this parameter
or use a value of <code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="refresh-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/refresh.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="refresh-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/refresh.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="refresh-api-multiple-ex"></a>Refresh several data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/refresh.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001,my-index-000002/_refresh</pre>
</div>
<div class="console_widget" data-snippet="snippets/1952.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="refresh-api-all-ex"></a>Refresh all data streams and indices in a cluster<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/refresh.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_refresh</pre>
</div>
<div class="console_widget" data-snippet="snippets/1953.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-rollover-index"></a>Rollover index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h2>
</div></div></div>

<p>Creates a new index for a rollover target when the target&#8217;s existing index meets
a condition you provide. A rollover target can be either an
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a> or a
<a class="xref" href="data-stream-apis.html#indices-create-data-stream" title="Create data stream API">data stream</a>. When targeting an alias, the alias
is updated to point to the new index. When targeting a data stream, the new
index becomes the data stream&#8217;s write index and its generation is incremented.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /alias1/_rollover/my-index-000002
{
  "conditions": {
    "max_age":   "7d",
    "max_docs":  1000,
    "max_size": "5gb"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1954.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollover-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;rollover-target&gt;/_rollover/&lt;target-index&gt;</code></p>
<p><code class="literal">POST /&lt;rollover-target&gt;/_rollover/</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollover-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the rollover target.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollover-index-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h3>
</div></div></div>
<p>The rollover index API rolls a rollover target to a new index when
the existing index meets a condition you provide. You can use this API to retire
an index that becomes too large or too old.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To roll over an index, a condition must be met <span class="strong strong"><strong>when you call the API</strong></span>.
Elasticsearch does not monitor the index after you receive an API response. To
automatically roll over indices when a condition is met, you can use Elasticsearch&#8217;s
<a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">index lifecycle management (ILM) policies</a>.</p>
</div>
</div>
<p>The rollover index API accepts a rollover target name
and a list of <code class="literal">conditions</code>.</p>
<p>If the specified rollover target is an alias pointing to a single index,
the rollover request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Creates a new index
</li>
<li class="listitem">
Adds the alias to the new index
</li>
<li class="listitem">
Removes the alias from the original index
</li>
</ol>
</div>
<p>If the specified rollover target is an alias pointing to multiple indices,
one of these indices must have <code class="literal">is_write_index</code> set to <code class="literal">true</code>.
In this case, the rollover request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Creates a new index
</li>
<li class="listitem">
Sets <code class="literal">is_write_index</code> to <code class="literal">true</code> for the new index
</li>
<li class="listitem">
Sets <code class="literal">is_write_index</code> to <code class="literal">false</code> for the original index
</li>
</ol>
</div>
<p>If the specified rollover target is a data stream, the rollover request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Creates a new index
</li>
<li class="listitem">
Adds the new index as a backing index and the write index on the data stream
</li>
<li class="listitem">
Increments the <code class="literal">generation</code> attribute of the data stream
</li>
</ol>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="rollover-wait-active-shards"></a>Wait for active shards<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h4>
</div></div></div>
<p>Because the rollover operation creates a new index to rollover to, the
<a class="xref" href="indices.html#create-index-wait-for-active-shards" title="Wait for active shards"><code class="literal">wait_for_active_shards</code></a> setting on
index creation applies to the rollover action.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollover-index-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;rollover-target&gt;</code>
</span>
</dt>
<dd>
(Required*, string)
Name of the existing index alias or data stream on which to
to assign to the target index.	perform the rollover.
</dd>
<dt>
<span class="term">
<code class="literal">&lt;target-index&gt;</code>
</span>
</dt>
<dd>
<p>(Optional*, string)
Name of the target index to create and assign the index alias.</p>
<p>Index names must meet the following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Lowercase only
</li>
<li class="listitem">
Cannot include <code class="literal">\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, ` ` (space character), <code class="literal">,</code>, <code class="literal">#</code>
</li>
<li class="listitem">
Indices prior to 7.0 could contain a colon (<code class="literal">:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+
</li>
<li class="listitem">
Cannot start with <code class="literal">-</code>, <code class="literal">_</code>, <code class="literal">+</code>
</li>
<li class="listitem">
Cannot be <code class="literal">.</code> or <code class="literal">..</code>
</li>
<li class="listitem">
Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)
</li>
<li class="listitem">
Names starting with <code class="literal">.</code> are deprecated, except for <a class="xref" href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins
</li>
</ul>
</div>
<p>*This parameter is not permitted if <code class="literal">rollover-target</code> is a data stream. In
that case, the new index name will be in the form <code class="literal">.ds-&lt;rollover-target&gt;-000001</code>
where the zero-padded number of length 6 is the generation of the data stream.</p>
<p>If <code class="literal">rollover-target</code> is an alias that is assigned to an index name that ends
with <code class="literal">-</code> and a number such as <code class="literal">logs-000001</code>. In this case, the name of the new
index follows the same pattern and increments the number. For example,
<code class="literal">logs-000001</code> increments to <code class="literal">logs-000002</code>. This number is zero-padded with a
length of 6, regardless of the prior index name.</p>
<p>If the existing index for the alias does not match this pattern, this parameter
is required.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollover-index-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">dry_run</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>,
the request checks whether the index matches provided conditions
but does not perform a rollover.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">include_type_name</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.0.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.0.0. Mapping types have been deprecated. See <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.
</span>
</span>
(Optional, boolean) If <code class="literal">true</code>, a mapping type is expected in the body of
mappings. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">wait_for_active_shards</code>
</span>
</dt>
<dd>
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code class="literal">all</code> or any positive integer up
to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
<p>See <a class="xref" href="docs.html#index-wait-for-active-shards" title="Active shards">Active shards</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollover-index-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">conditions</code>
</span>
</dt>
<dd>
<p>(Optional, object)
If supplied, the set of conditions the rollover target&#8217;s existing index must
meet to roll over. If omitted, the rollover will be performed unconditionally.</p>
<p>Parameters include:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">max_age</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Maximum age of the index.
</dd>
<dt>
<span class="term">
<code class="literal">max_docs</code>
</span>
</dt>
<dd>
(Optional, integer)
Maximum number of documents in the index.
Documents added since the last refresh are not included in the document count.
The document count does <span class="strong strong"><strong>not</strong></span> include documents in replica shards.
</dd>
<dt>
<span class="term">
<code class="literal">max_size</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte units</a>)
Maximum index size.
This is the total size of all primary shards in the index.
Replicas are not counted toward the maximum index size.
</dd>
</dl>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To see the current index size, use the <a class="xref" href="cat.html#cat-indices" title="cat indices API">_cat indices</a> API.
The <code class="literal">pri.store.size</code> value shows the combined size of all primary shards.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollover-index-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="rollover-index-basic-ex"></a>Basic example<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /logs-000001 <a id="CO620-1"></a><i class="conum" data-value="1"></i>
{
  "aliases": {
    "logs_write": {}
  }
}

# Add &gt; 1000 documents to logs-000001

POST /logs_write/_rollover <a id="CO620-2"></a><i class="conum" data-value="2"></i>
{
  "conditions": {
    "max_age":   "7d",
    "max_docs":  1000,
    "max_size":  "5gb"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1955.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO620-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Creates an index called <code class="literal">logs-0000001</code> with the alias <code class="literal">logs_write</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO620-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>If the index pointed to by <code class="literal">logs_write</code> was created 7 or more days ago, or
contains 1,000 or more documents, or has an index size at least around 5GB, then the <code class="literal">logs-000002</code> index is created
and the <code class="literal">logs_write</code> alias is updated to point to <code class="literal">logs-000002</code>.</p>
</td>
</tr>
</table>
</div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged": true,
  "shards_acknowledged": true,
  "old_index": "logs-000001",
  "new_index": "logs-000002",
  "rolled_over": true, <a id="CO621-1"></a><i class="conum" data-value="1"></i>
  "dry_run": false, <a id="CO621-2"></a><i class="conum" data-value="2"></i>
  "conditions": { <a id="CO621-3"></a><i class="conum" data-value="3"></i>
    "[max_age: 7d]": false,
    "[max_docs: 1000]": true,
    "[max_size: 5gb]": false,
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO621-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Whether the index was rolled over.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO621-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Whether the rollover was dry run.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO621-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The result of each condition.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="rollover-data-stream-ex"></a>Roll over a data stream<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _index_template/template
{
  "index_patterns": ["my-data-stream*"],
  "data_stream": { }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1956.console"></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_data_stream/my-data-stream <a id="CO622-1"></a><i class="conum" data-value="1"></i>

# Add &gt; 1000 documents to my-data-stream

POST /my-data-stream/_rollover <a id="CO622-2"></a><i class="conum" data-value="2"></i>
{
  "conditions" : {
    "max_age": "7d",
    "max_docs": 1000,
    "max_size": "5gb"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1957.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO622-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Creates a data stream called <code class="literal">my-data-stream</code> with one initial backing index
named <code class="literal">my-data-stream-000001</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO622-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>This request creates a new backing index, <code class="literal">my-data-stream-000002</code>, and adds
it as the write index for <code class="literal">my-data-stream</code> if the current
write index meets at least one of the following conditions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The index was created 7 or more days ago.
</li>
<li class="listitem">
The index has an index size of 5GB or greater.
</li>
<li class="listitem">
The index contains 1,000 or more documents.
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged": true,
  "shards_acknowledged": true,
  "old_index": ".ds-my-data-stream-000001", <a id="CO623-1"></a><i class="conum" data-value="1"></i>
  "new_index": ".ds-my-data-stream-000002", <a id="CO623-2"></a><i class="conum" data-value="2"></i>
  "rolled_over": true, <a id="CO623-3"></a><i class="conum" data-value="3"></i>
  "dry_run": false, <a id="CO623-4"></a><i class="conum" data-value="4"></i>
  "conditions": { <a id="CO623-5"></a><i class="conum" data-value="5"></i>
    "[max_age: 7d]": false,
    "[max_docs: 1000]": true,
    "[max_size: 5gb]": false,
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO623-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The previous write index for the data stream.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO623-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The new write index for the data stream.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO623-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Whether the index was rolled over.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO623-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Whether the rollover was dry run.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO623-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The result of each condition.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="rollover-index-settings-ex"></a>Specify settings for the target index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h4>
</div></div></div>
<p>The settings, mappings, and aliases for the new index are taken from any
matching <a class="xref" href="index-templates.html" title="Index templates">index templates</a>. If the rollover target is an
index alias, you can specify <code class="literal">settings</code>, <code class="literal">mappings</code>, and <code class="literal">aliases</code> in the body
of the request just like the <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index</a> API. Values
specified in the request override any values set in matching index templates.
For example, the following <code class="literal">rollover</code> request overrides the
<code class="literal">index.number_of_shards</code> setting:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /logs-000001
{
  "aliases": {
    "logs_write": {}
  }
}

POST /logs_write/_rollover
{
  "conditions" : {
    "max_age": "7d",
    "max_docs": 1000,
    "max_size": "5gb"
  },
  "settings": {
    "index.number_of_shards": 2
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1958.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="rollover-index-specify-index-ex"></a>Specify a target index name<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h4>
</div></div></div>
<p>If the rollover target is an index alias and the name of the existing index ends
with <code class="literal">-</code> and a number&#8201;&#8212;&#8201;e.g. <code class="literal">logs-000001</code>&#8201;&#8212;&#8201;then the name of the new index
will follow the same pattern, incrementing the number (<code class="literal">logs-000002</code>). The
number is zero-padded with a length of 6, regardless of the old index name.</p>
<p>If the old name doesn&#8217;t match this pattern then you must specify the name for
the new index as follows:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my_alias/_rollover/my_new_index_name
{
  "conditions": {
    "max_age":   "7d",
    "max_docs":  1000,
    "max_size": "5gb"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1959.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_using_date_math_with_the_rollover_api"></a>Use date math with a rollover<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h4>
</div></div></div>
<p>If the rollover target is an index alias, it can be useful to use
<a class="xref" href="api-conventions.html#date-math-index-names" title="Date math support in index names">date math</a> to name the rollover index according to the
date that the index rolled over, e.g. <code class="literal">logstash-2016.02.03</code>.  The rollover API
supports date math, but requires the index name to end with a dash followed by
a number, e.g. <code class="literal">logstash-2016.02.03-1</code> which is incremented every time the
index is rolled over. For instance:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console"># PUT /&lt;logs-{now/d}-1&gt; with URI encoding:
PUT /%3Clogs_%7Bnow%2Fd%7D-1%3E <a id="CO624-1"></a><i class="conum" data-value="1"></i>
{
  "aliases": {
    "logs_write": {}
  }
}

PUT logs_write/_doc/1
{
  "message": "a dummy log"
}

POST logs_write/_refresh

# Wait for a day to pass

POST /logs_write/_rollover <a id="CO624-2"></a><i class="conum" data-value="2"></i>
{
  "conditions": {
    "max_docs":   "1"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1960.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO624-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Creates an index named with today&#8217;s date (e.g.) <code class="literal">logs_2016.10.31-1</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO624-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Rolls over to a new index with today&#8217;s date, e.g. <code class="literal">logs_2016.10.31-000002</code> if run immediately, or <code class="literal">logs-2016.11.01-000002</code> if run after 24 hours</p>
</td>
</tr>
</table>
</div>
<p>These indices can then be referenced as described in the
<a class="xref" href="api-conventions.html#date-math-index-names" title="Date math support in index names">date math documentation</a>.  For example, to search
over indices created in the last three days, you could do the following:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console"># GET /&lt;logs-{now/d}-*&gt;,&lt;logs-{now/d-1d}-*&gt;,&lt;logs-{now/d-2d}-*&gt;/_search
GET /%3Clogs-%7Bnow%2Fd%7D-*%3E%2C%3Clogs-%7Bnow%2Fd-1d%7D-*%3E%2C%3Clogs-%7Bnow%2Fd-2d%7D-*%3E/_search</pre>
</div>
<div class="console_widget" data-snippet="snippets/1961.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="rollover-index-api-dry-run-ex"></a>Dry run<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h4>
</div></div></div>
<p>The rollover API supports <code class="literal">dry_run</code> mode, where request conditions can be
checked without performing the actual rollover.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /logs_write/_rollover?dry_run
{
  "conditions" : {
    "max_age": "7d",
    "max_docs": 1000,
    "max_size": "5gb"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1962.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="indices-rollover-is-write-index"></a>Roll over a write index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/rollover-index.asciidoc">edit</a></h4>
</div></div></div>
<p>If the rollover target is an index alias for  a write index that has <code class="literal">is_write_index</code> explicitly set to <code class="literal">true</code>, it is not
swapped during rollover actions. Since having an alias point to multiple indices is ambiguous in distinguishing
which is the correct write index to roll over, it is not valid to rollover an alias that points to multiple indices.
For this reason, the default behavior is to swap which index is being pointed to by the write-oriented alias. This
was <code class="literal">logs_write</code> in some of the above examples. Since setting <code class="literal">is_write_index</code> enables an alias to point to multiple indices
while also being explicit as to which is the write index that rollover should target, removing the alias from the rolled over
index is not necessary. This simplifies things by allowing for one alias to behave both as the write and read aliases for
indices that are being managed with Rollover.</p>
<p>Look at the behavior of the aliases in the following example where <code class="literal">is_write_index</code> is set on the rolled over index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT my_logs_index-000001
{
  "aliases": {
    "logs": { "is_write_index": true } <a id="CO625-1"></a><i class="conum" data-value="1"></i>
  }
}

PUT logs/_doc/1
{
  "message": "a dummy log"
}

POST logs/_refresh

POST /logs/_rollover
{
  "conditions": {
    "max_docs":   "1"
  }
}

PUT logs/_doc/2 <a id="CO625-2"></a><i class="conum" data-value="2"></i>
{
  "message": "a newer log"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1963.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO625-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>configures <code class="literal">my_logs_index</code> as the write index for the <code class="literal">logs</code> alias</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO625-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>newly indexed documents against the <code class="literal">logs</code> alias will write to the new index</p>
</td>
</tr>
</table>
</div>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "_index" : "my_logs_index-000002",
  "_type" : "_doc",
  "_id" : "2",
  "_version" : 1,
  "result" : "created",
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "_seq_no" : 0,
  "_primary_term" : 1
}</pre>
</div>
<p>After the rollover, the alias metadata for the two indices will have the <code class="literal">is_write_index</code> setting
reflect each index&#8217;s role, with the newly created index as the write index.</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "my_logs_index-000002": {
    "aliases": {
      "logs": { "is_write_index": true }
    }
  },
  "my_logs_index-000001": {
    "aliases": {
      "logs": { "is_write_index" : false }
    }
  }
}</pre>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-shrink-index"></a>Shrink index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h2>
</div></div></div>

<p>Shrinks an existing index into a new index with fewer primary shards.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_shrink/shrunk-my-index-000001</pre>
</div>
<div class="console_widget" data-snippet="snippets/1964.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shrink-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;index&gt;/_shrink/&lt;target-index&gt;</code></p>
<p><code class="literal">PUT /&lt;index&gt;/_shrink/&lt;target-index&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shrink-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the index.
</li>
<li class="listitem">
<p>Before you can shrink an index:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The index must be read-only.
</li>
<li class="listitem">
A copy of every shard in the index must reside on the same node.
</li>
<li class="listitem">
The index must have a <code class="literal">green</code> <a class="xref" href="cluster.html#cluster-health" title="Cluster health API">health status</a>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>To make shard allocation easier, we recommend you also remove the index&#8217;s
replica shards. You can later re-add replica shards as part of the shrink
operation.</p>
<p>You can use the following <a class="xref" href="indices.html#indices-update-settings" title="Update index settings API">update index settings API</a>
request to remove an index&#8217;s replica shards, relocates the index&#8217;s remaining
shards to the same node, and make the index read-only.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my_source_index/_settings
{
  "settings": {
    "index.number_of_replicas": 0,                                <a id="CO626-1"></a><i class="conum" data-value="1"></i>
    "index.routing.allocation.require._name": "shrink_node_name", <a id="CO626-2"></a><i class="conum" data-value="2"></i>
    "index.blocks.write": true                                    <a id="CO626-3"></a><i class="conum" data-value="3"></i>
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1965.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO626-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Removes replica shards for the index.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO626-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Relocates the index&#8217;s shards to the <code class="literal">shrink_node_name</code> node.
See <a class="xref" href="index-modules-allocation.html#shard-allocation-filtering" title="Index-level shard allocation filtering">Index-level shard allocation filtering</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO626-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Prevents write operations to this index. Metadata changes, such as deleting
the index, are still allowed.</p>
</td>
</tr>
</table>
</div>
<p>It can take a while to relocate the source index.  Progress can be tracked
with the <a class="xref" href="cat.html#cat-recovery" title="cat recovery API"><code class="literal">_cat recovery</code> API</a>, or the <a class="xref" href="cluster.html#cluster-health" title="Cluster health API"><code class="literal">cluster health</code> API</a> can be used to wait until all shards have relocated
with the <code class="literal">wait_for_no_relocating_shards</code> parameter.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shrink-index-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h3>
</div></div></div>
<p>The shrink index API allows you to shrink an existing index into a new index
with fewer primary shards. The requested number of primary shards in the target index
must be a factor of the number of shards in the source index. For example an index with
<code class="literal">8</code> primary shards can be shrunk into <code class="literal">4</code>, <code class="literal">2</code> or <code class="literal">1</code> primary shards or an index
with <code class="literal">15</code> primary shards can be shrunk into <code class="literal">5</code>, <code class="literal">3</code> or <code class="literal">1</code>. If the number
of shards in the index is a prime number it can only be shrunk into a single
primary shard. Before shrinking, a (primary or replica) copy of every shard
in the index must be present on the same node.</p>
<p>The current write index on a data stream cannot be shrunk. In order to shrink
the current write index, the data stream must first be
<a class="xref" href="indices.html#rollover-data-stream-ex" title="Roll over a data stream">rolled over</a> so that a new write index is created
and then the previous write index can be shrunk.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="how-shrink-works"></a>How shrinking works<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h4>
</div></div></div>
<p>A shrink operation:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Creates a new target index with the same definition as the source
index, but with a smaller number of primary shards.
</li>
<li class="listitem">
Hard-links segments from the source index into the target index. (If
the file system doesn&#8217;t support hard-linking, then all segments are copied
into the new index, which is a much more time consuming process. Also if using
multiple data paths, shards on different data paths require a full copy of
segment files if they are not on the same disk since hardlinks don’t work across
disks)
</li>
<li class="listitem">
Recovers the target index as though it were a closed index which
had just been re-opened.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_shrinking_an_index"></a>Shrink an index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h4>
</div></div></div>
<p>To shrink <code class="literal">my_source_index</code> into a new index called <code class="literal">my_target_index</code>, issue
the following request:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my_source_index/_shrink/my_target_index
{
  "settings": {
    "index.routing.allocation.require._name": null, <a id="CO627-1"></a><i class="conum" data-value="1"></i>
    "index.blocks.write": null <a id="CO627-2"></a><i class="conum" data-value="2"></i>
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1966.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO627-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Clear the allocation requirement copied from the source index.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO627-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Clear the index write block copied from the source index.</p>
</td>
</tr>
</table>
</div>
<p>The above request returns immediately once the target index has been added to
the cluster state&#8201;&#8212;&#8201;it doesn&#8217;t wait for the shrink operation to start.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Indices can only be shrunk if they satisfy the following requirements:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The target index must not exist.
</li>
<li class="listitem">
The source index must have more primary shards than the target index.
</li>
<li class="listitem">
The number of primary shards in the target index must be a factor of the
number of primary shards in the source index. The source index must have
more primary shards than the target index.
</li>
<li class="listitem">
The index must not contain more than <code class="literal">2,147,483,519</code> documents in total
across all shards that will be shrunk into a single shard on the target index
as this is the maximum number of docs that can fit into a single shard.
</li>
<li class="listitem">
The node handling the shrink process must have sufficient free disk space to
accommodate a second copy of the existing index.
</li>
</ul>
</div>
</div>
</div>
<p>The <code class="literal">_shrink</code> API is similar to the <a class="xref" href="indices.html#indices-create-index" title="Create index API"><code class="literal">create index</code> API</a>
and accepts <code class="literal">settings</code> and <code class="literal">aliases</code> parameters for the target index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my_source_index/_shrink/my_target_index
{
  "settings": {
    "index.number_of_replicas": 1,
    "index.number_of_shards": 1, <a id="CO628-1"></a><i class="conum" data-value="1"></i>
    "index.codec": "best_compression" <a id="CO628-2"></a><i class="conum" data-value="2"></i>
  },
  "aliases": {
    "my_search_indices": {}
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1967.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO628-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The number of shards in the target index. This must be a factor of the
number of shards in the source index.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO628-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Best compression will only take affect when new writes are made to the
index, such as when <a class="xref" href="indices.html#indices-forcemerge" title="Force merge API">force-merging</a> the shard to a single
segment.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Mappings may not be specified in the <code class="literal">_shrink</code> request.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitor-shrink"></a>Monitor the shrink process<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h4>
</div></div></div>
<p>The shrink process can be monitored with the <a class="xref" href="cat.html#cat-recovery" title="cat recovery API"><code class="literal">_cat recovery</code>
API</a>, or the <a class="xref" href="cluster.html#cluster-health" title="Cluster health API"><code class="literal">cluster health</code> API</a> can be used to wait
until all primary shards have been allocated by setting the  <code class="literal">wait_for_status</code>
parameter to <code class="literal">yellow</code>.</p>
<p>The <code class="literal">_shrink</code> API returns as soon as the target index has been added to the
cluster state, before any shards have been allocated. At this point, all
shards are in the state <code class="literal">unassigned</code>. If, for any reason, the target index
can&#8217;t be allocated on the shrink node, its primary shard will remain
<code class="literal">unassigned</code> until it can be allocated on that node.</p>
<p>Once the primary shard is allocated, it moves to state <code class="literal">initializing</code>, and the
shrink process begins. When the shrink operation completes, the shard will
become <code class="literal">active</code>. At that  point, Elasticsearch will try to allocate any
replicas and may decide to relocate the primary shard to another node.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="shrink-wait-active-shards"></a>Wait for active shards<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h4>
</div></div></div>
<p>Because the shrink operation creates a new index to shrink the shards to,
the <a class="xref" href="indices.html#create-index-wait-for-active-shards" title="Wait for active shards">wait for active shards</a> setting
on index creation applies to the shrink index action as well.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shrink-index-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Name of the source index to shrink.
</dd>
<dt>
<span class="term">
<code class="literal">&lt;target-index&gt;</code>
</span>
</dt>
<dd>
<p>(Required, string)
Name of the target index to create.</p>
<p>Index names must meet the following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Lowercase only
</li>
<li class="listitem">
Cannot include <code class="literal">\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, ` ` (space character), <code class="literal">,</code>, <code class="literal">#</code>
</li>
<li class="listitem">
Indices prior to 7.0 could contain a colon (<code class="literal">:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+
</li>
<li class="listitem">
Cannot start with <code class="literal">-</code>, <code class="literal">_</code>, <code class="literal">+</code>
</li>
<li class="listitem">
Cannot be <code class="literal">.</code> or <code class="literal">..</code>
</li>
<li class="listitem">
Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)
</li>
<li class="listitem">
Names starting with <code class="literal">.</code> are deprecated, except for <a class="xref" href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shrink-index-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">wait_for_active_shards</code>
</span>
</dt>
<dd>
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code class="literal">all</code> or any positive integer up
to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
<p>See <a class="xref" href="docs.html#index-wait-for-active-shards" title="Active shards">Active shards</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="shrink-index-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/shrink-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>)
Index aliases which include the target index.
See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>)
Configuration options for the target index.
See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-simulate-index"></a>Simulate index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-index.asciidoc">edit</a></h2>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Returns the index configuration that would be applied to the specified index from an
existing <a class="xref" href="index-templates.html" title="Index templates">index template</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_index_template/_simulate_index/my-index-000001</pre>
</div>
<div class="console_widget" data-snippet="snippets/1968.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-index.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_index_template/_simulate_index/&lt;index&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-index-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Name of the index to simulate.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-index-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-index-api-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overlapping</code>
</span>
</dt>
<dd>
<p>
(array) Any templates that also matched the index but were superseded by a higher-priority template.
Response includes an empty array if there are no overlapping templates.
</p>
<details open>
<summary class="title">Properties of <code class="literal">overlapping</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(string) Name of the superseded template.
</dd>
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
(array) Index patterns that the superseded template applies to.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
<p>
(object)
The settings, mappings, and aliases that would be applied to the index.
</p>
<details open>
<summary class="title">Properties of <code class="literal">template</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
<p>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</p>
<p>Response includes an empty object if no aliases would be applied.</p>
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
<p>Omitted from the response if no mappings would be applied.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
<p>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</p>
<p>Response includes an empty object if no settings would be applied.</p>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-index-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-index.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example shows the configuration that would be applied to <code class="literal">my-index-000001</code> by
an existing template.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_component_template/ct1                    <a id="CO629-1"></a><i class="conum" data-value="1"></i>
{
  "template": {
    "settings": {
      "index.number_of_shards": 2
    }
  }
}

PUT /_component_template/ct2                    <a id="CO629-2"></a><i class="conum" data-value="2"></i>
{
  "template": {
    "settings": {
      "index.number_of_replicas": 0
    },
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        }
      }
    }
  }
}

PUT /_index_template/final-template             <a id="CO629-3"></a><i class="conum" data-value="3"></i>
{
  "index_patterns": ["my-index-*"],
  "composed_of": ["ct1", "ct2"],
  "priority": 5
}

POST /_index_template/_simulate_index/my-index-000001 <a id="CO629-4"></a><i class="conum" data-value="4"></i></pre>
</div>
<div class="console_widget" data-snippet="snippets/1969.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO629-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create a component template (<code class="literal">ct1</code>) that sets the number of shards to 2</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO629-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create a second component template (<code class="literal">ct2</code>) that sets the number of replicas to 0 and defines a mapping</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO629-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create an index template (<code class="literal">final-template</code>) that uses the component templates</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO629-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Show the configuration that would be applied to <code class="literal">my-index-000001</code></p>
</td>
</tr>
</table>
</div>
<p>The response shows the index settings, mappings, and aliases applied by the <code class="literal">final-template</code>:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_shards" : "2",
        "number_of_replicas" : "0"
      }
    },
    "mappings" : {
      "properties" : {
        "@timestamp" : {
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [
    {
      "name" : "template_1",
      "index_patterns" : [
        "my-index-*"
      ]
    }
  ]
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-simulate-template"></a>Simulate index template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-template.asciidoc">edit</a></h2>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Returns the index configuration that would be applied by a particular
<a class="xref" href="index-templates.html" title="Index templates">index template</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_index_template/_simulate/template_1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1970.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_index_template/_simulate/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
(Optional, string)
Name of the index template to simulate.
To test a template configuration before you add it to the cluster,
omit this parameter and specify the template configuration in the request body.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">create</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the template passed in the body is
only used if no existing templates match the same index patterns.
If <code class="literal">false</code>, the simulation uses the template with the highest priority.
Note that the template is not permanently added or updated in either case;
it is only used for the simulation.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">composed_of</code>
</span>
</dt>
<dd>
(Optional, array of strings)
Ordered list of component template names. Component templates are merged in the order
specified, meaning that the last component template specified has the highest precedence.
For an example, see
<a class="xref" href="indices.html#multiple-component-templates" title="Composing aliases, mappings, and settings">Composing multiple component templates</a>.
</dd>
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
(Required, array of strings)
Array of wildcard (<code class="literal">*</code>) expressions
used to match the names of indices during creation.
</dd>
<dt>
<span class="term">
<code class="literal">priority</code>
</span>
</dt>
<dd>
(Optional, integer)
Priority that determines what template is applied if there are multiple templates
that match the name of a new index.
The highest priority template takes precedence. Defaults to <code class="literal">0</code> (lowest priority).
</dd>
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
<p>
(Optional, object)
Template to apply.
</p>
<details open>
<summary class="title">Properties of <code class="literal">template</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
(Optional, integer)
Version number used to manage index templates externally.
This version is not automatically generated by Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">_meta</code>
</span>
</dt>
<dd>
(Optional, object)
User-specified metadata for the index template.
This information is not generated or used by Elasticsearch.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overlapping</code>
</span>
</dt>
<dd>
<p>
(array) Any templates that were superseded by the specified template.
</p>
<details open>
<summary class="title">Properties of <code class="literal">overlapping</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
(array) Index patterns that the superseded template applies to.
</dd>
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(string) Name of the superseded template.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
<p>
(object)
The settings, mappings, and aliases that would be applied to matching indices.
</p>
<details open>
<summary class="title">Properties of <code class="literal">template</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="simulate-existing-template-ex"></a>Simulating an existing template<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-template.asciidoc">edit</a></h4>
</div></div></div>
<p>The following example creates and simulates a composed template:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_component_template/ct1                   <a id="CO630-1"></a><i class="conum" data-value="1"></i>
{
  "template": {
    "settings": {
      "index.number_of_shards": 2
    }
  }
}

PUT /_component_template/ct2                    <a id="CO630-2"></a><i class="conum" data-value="2"></i>
{
  "template": {
    "settings": {
      "index.number_of_replicas": 0
    },
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        }
      }
    }
  }
}

PUT /_index_template/final-template            <a id="CO630-3"></a><i class="conum" data-value="3"></i>
{
  "index_patterns": ["my-index-*"],
  "composed_of": ["ct1", "ct2"],
  "priority": 5
}

POST /_index_template/_simulate/final-template <a id="CO630-4"></a><i class="conum" data-value="4"></i></pre>
</div>
<div class="console_widget" data-snippet="snippets/1971.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO630-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create a component template (<code class="literal">ct1</code>) that sets the number of shards to 2</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO630-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create a component template (<code class="literal">ct2</code>) that sets the number of replicas to 0 and defines a mapping</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO630-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create an index template (<code class="literal">final-template</code>) that uses the component templates</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO630-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Show the configuration applied by the <code class="literal">final-template</code></p>
</td>
</tr>
</table>
</div>
<p>The response shows the index settings, mappings, and aliases applied by the <code class="literal">final-template</code>:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_shards" : "2",  <a id="CO631-1"></a><i class="conum" data-value="1"></i>
        "number_of_replicas" : "0" <a id="CO631-2"></a><i class="conum" data-value="2"></i>
      }
    },
    "mappings" : {                 <a id="CO631-3"></a><i class="conum" data-value="3"></i>
      "properties" : {
        "@timestamp" : {
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [ ]
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO631-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Number of shards from <code class="literal">ct1</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO631-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Number of replicas from <code class="literal">ct2</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO631-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Mappings from <code class="literal">ct1</code></p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="simulate-template-config-ex"></a>Simulating an arbitrary template configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/simulate-template.asciidoc">edit</a></h4>
</div></div></div>
<p>To see what settings will be applied by a template before you add it to the cluster,
you can pass a template configuration in the request body.
The specified template is used for the simulation if it has a higher priority than existing templates.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_index_template/_simulate
{
  "index_patterns": ["my-index-*"],
  "composed_of": ["ct2"],
  "priority": 10,
  "template": {
    "settings": {
      "index.number_of_replicas": 1
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1972.console"></div>
<p>The response shows any overlapping templates with a lower priority.</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_replicas" : "1"
      }
    },
    "mappings" : {
      "properties" : {
        "@timestamp" : {
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [
    {
      "name" : "final-template",
      "index_patterns" : [
        "my-index-*"
      ]
    }
  ]
}</pre>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-split-index"></a>Split index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h2>
</div></div></div>

<p>Splits an existing index into a new index with more primary shards.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_split/split-my-index-000001
{
  "settings": {
    "index.number_of_shards": 2
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1973.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="split-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;index&gt;/_split/&lt;target-index&gt;</code></p>
<p><code class="literal">PUT /&lt;index&gt;/_split/&lt;target-index&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="split-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the index.
</li>
<li class="listitem">
<p>Before you can split an index:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The index must be read-only.
</li>
<li class="listitem">
The <a class="xref" href="cluster.html#cluster-health" title="Cluster health API">cluster health</a> status must be green.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>You can do make an index read-only
with the following request:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my_source_index/_settings
{
  "settings": {
    "index.blocks.write": true <a id="CO632-1"></a><i class="conum" data-value="1"></i>
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1974.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO632-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Prevents write operations to this index while still allowing metadata
changes like deleting the index.</p>
</td>
</tr>
</table>
</div>
<p>The current write index on a data stream cannot be split. In order to split
the current write index, the data stream must first be
<a class="xref" href="indices.html#rollover-data-stream-ex" title="Roll over a data stream">rolled over</a> so that a new write index is created
and then the previous write index can be split.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="split-index-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h3>
</div></div></div>
<p>The split index API allows you to split an existing index into a new index,
where each original primary shard is split into two or more primary shards in
the new index.</p>
<p>The number of times the index can be split (and the number of shards that each
original shard can be split into) is determined by the
<code class="literal">index.number_of_routing_shards</code> setting. The number of routing shards
specifies the hashing space that is used internally to distribute documents
across shards with consistent hashing. For instance, a 5 shard index with
<code class="literal">number_of_routing_shards</code> set to <code class="literal">30</code> (<code class="literal">5 x 2 x 3</code>) could be split by a
factor of <code class="literal">2</code> or <code class="literal">3</code>.  In other words, it could be split as follows:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">5</code> &#8594; <code class="literal">10</code> &#8594; <code class="literal">30</code>  (split by 2, then by 3)
</li>
<li class="listitem">
<code class="literal">5</code> &#8594; <code class="literal">15</code> &#8594; <code class="literal">30</code> (split by 3, then by 2)
</li>
<li class="listitem">
<code class="literal">5</code> &#8594; <code class="literal">30</code> (split by 6)
</li>
</ul>
</div>
<p><code class="literal">index.number_of_routing_shards</code> is a <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">static index
setting</a>. You can only set <code class="literal">index.number_of_routing_shards</code> at index creation
time or on a <a class="xref" href="indices.html#indices-open-close" title="Open index API">closed index</a>.</p>
<details>
<summary class="title"><span class="strong strong"><strong>Index creation example</strong></span></summary>
<div class="content">
<p>The following <a class="xref" href="indices.html#indices-create-index" title="Create index API">create index API</a> creates the
<code class="literal">my-index-000001</code> index with an <code class="literal">index.number_of_routing_shards</code> setting of <code class="literal">30</code>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "settings": {
    "index": {
      "number_of_routing_shards": 30
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1975.console"></div>
</div>
</details>
<p>The <code class="literal">index.number_of_routing_shards</code> setting&#8217;s default value depends
on the number of primary shards in the original index.
The default is designed to allow you to split
by factors of 2 up to a maximum of 1024 shards. However, the original number
of primary shards must taken into account. For instance, an index created
with 5 primary shards could be split into 10, 20, 40, 80, 160, 320, or a
maximum of 640 shards (with a single split action or multiple split actions).</p>
<p>If the original index contains one primary shard (or a multi-shard index has
been <a class="xref" href="indices.html#indices-shrink-index" title="Shrink index API">shrunk</a> down to a single primary shard), then the
index may by split into an arbitrary number of shards greater than 1.  The
properties of the default number of routing shards will then apply to the
newly split index.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="how-split-works"></a>How splitting works<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h4>
</div></div></div>
<p>A split operation:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Creates a new target index with the same definition as the source
index, but with a larger number of primary shards.
</li>
<li class="listitem">
Hard-links segments from the source index into the target index. (If
the file system doesn&#8217;t support hard-linking, then all segments are copied
into the new index, which is a much more time consuming process.)
</li>
<li class="listitem">
Hashes all documents again, after low level files are created, to delete
documents that belong to a different shard.
</li>
<li class="listitem">
Recovers the target index as though it were a closed index which
had just been re-opened.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="incremental-resharding"></a>Why doesn&#8217;t Elasticsearch support incremental resharding?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h4>
</div></div></div>
<p>Going from <code class="literal">N</code> shards to <code class="literal">N+1</code> shards, aka. incremental resharding, is indeed a
feature that is supported by many key-value stores. Adding a new shard and
pushing new data to this new shard only is not an option: this would likely be
an indexing bottleneck, and figuring out which shard a document belongs to
given its <code class="literal">_id</code>, which is necessary for get, delete and update requests, would
become quite complex. This means that we need to rebalance existing data using
a different hashing scheme.</p>
<p>The most common way that key-value stores do this efficiently is by using
consistent hashing. Consistent hashing only requires <code class="literal">1/N</code>-th of the keys to
be relocated when growing the number of shards from <code class="literal">N</code> to <code class="literal">N+1</code>. However
Elasticsearch&#8217;s unit of storage, shards, are Lucene indices. Because of their
search-oriented data structure, taking a significant portion of a Lucene index,
be it only 5% of documents, deleting them and indexing them on another shard
typically comes with a much higher cost than with a key-value store. This cost
is kept reasonable when growing the number of shards by a multiplicative factor
as described in the above section: this allows Elasticsearch to perform the
split locally, which in-turn allows to perform the split at the index level
rather than reindexing documents that need to move, as well as using hard links
for efficient file copying.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Hard links are not supported in Elasticsearch versions &lt; 7.11 for quota aware file systems
(e.g. <code class="literal">xfs</code> used in Elastic Cloud). When Split Index API is run on these quota aware file systems
in earlier versions, it will not be able to reuse segments for efficiency and require copying of
full segment files with disk usage and IO implications.</p>
</div>
</div>
<p>In the case of append-only data, it is possible to get more flexibility by
creating a new index and pushing new data to it, while adding an alias that
covers both the old and the new index for read operations. Assuming that the
old and new indices have respectively <code class="literal">M</code> and <code class="literal">N</code> shards, this has no overhead
compared to searching an index that would have <code class="literal">M+N</code> shards.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="split-index"></a>Split an index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h4>
</div></div></div>
<p>To split <code class="literal">my_source_index</code> into a new index called <code class="literal">my_target_index</code>, issue
the following request:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my_source_index/_split/my_target_index
{
  "settings": {
    "index.number_of_shards": 2
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1976.console"></div>
<p>The above request returns immediately once the target index has been added to
the cluster state&#8201;&#8212;&#8201;it doesn&#8217;t wait for the split operation to start.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Indices can only be split if they satisfy the following requirements:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
the target index must not exist
</li>
<li class="listitem">
The source index must have fewer primary shards than the target index.
</li>
<li class="listitem">
The number of primary shards in the target index must be a multiple of the
number of primary shards in the source index.
</li>
<li class="listitem">
The node handling the split process must have sufficient free disk space to
accommodate a second copy of the existing index.
</li>
</ul>
</div>
</div>
</div>
<p>The <code class="literal">_split</code> API is similar to the <a class="xref" href="indices.html#indices-create-index" title="Create index API"><code class="literal">create index</code> API</a>
and accepts <code class="literal">settings</code> and <code class="literal">aliases</code> parameters for the target index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my_source_index/_split/my_target_index
{
  "settings": {
    "index.number_of_shards": 5 <a id="CO633-1"></a><i class="conum" data-value="1"></i>
  },
  "aliases": {
    "my_search_indices": {}
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1977.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO633-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The number of shards in the target index. This must be a multiple of the
number of shards in the source index.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Mappings may not be specified in the <code class="literal">_split</code> request.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitor-split"></a>Monitor the split process<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h4>
</div></div></div>
<p>The split process can be monitored with the <a class="xref" href="cat.html#cat-recovery" title="cat recovery API"><code class="literal">_cat recovery</code>
API</a>, or the <a class="xref" href="cluster.html#cluster-health" title="Cluster health API"><code class="literal">cluster health</code> API</a> can be used to wait
until all primary shards have been allocated by setting the  <code class="literal">wait_for_status</code>
parameter to <code class="literal">yellow</code>.</p>
<p>The <code class="literal">_split</code> API returns as soon as the target index has been added to the
cluster state, before any shards have been allocated. At this point, all
shards are in the state <code class="literal">unassigned</code>. If, for any reason, the target index
can&#8217;t be allocated, its primary shard will remain <code class="literal">unassigned</code> until it
can be allocated on that node.</p>
<p>Once the primary shard is allocated, it moves to state <code class="literal">initializing</code>, and the
split process begins. When the split operation completes, the shard will
become <code class="literal">active</code>. At that  point, Elasticsearch will try to allocate any
replicas and may decide to relocate the primary shard to another node.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="split-wait-active-shards"></a>Wait for active shards<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h4>
</div></div></div>
<p>Because the split operation creates a new index to split the shards to,
the <a class="xref" href="indices.html#create-index-wait-for-active-shards" title="Wait for active shards">wait for active shards</a> setting
on index creation applies to the split index action as well.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="split-index-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Name of the source index to split.
</dd>
<dt>
<span class="term">
<code class="literal">&lt;target-index&gt;</code>
</span>
</dt>
<dd>
<p>(Required, string)
Name of the target index to create.</p>
<p>Index names must meet the following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Lowercase only
</li>
<li class="listitem">
Cannot include <code class="literal">\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, ` ` (space character), <code class="literal">,</code>, <code class="literal">#</code>
</li>
<li class="listitem">
Indices prior to 7.0 could contain a colon (<code class="literal">:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+
</li>
<li class="listitem">
Cannot start with <code class="literal">-</code>, <code class="literal">_</code>, <code class="literal">+</code>
</li>
<li class="listitem">
Cannot be <code class="literal">.</code> or <code class="literal">..</code>
</li>
<li class="listitem">
Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)
</li>
<li class="listitem">
Names starting with <code class="literal">.</code> are deprecated, except for <a class="xref" href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="split-index-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">wait_for_active_shards</code>
</span>
</dt>
<dd>
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code class="literal">all</code> or any positive integer up
to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
<p>See <a class="xref" href="docs.html#index-wait-for-active-shards" title="Active shards">Active shards</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="split-index-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/split-index.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">alias object</a>)
Index aliases which include the target index.
See <a class="xref" href="indices.html#indices-aliases" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>)
Configuration options for the target index.
See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-synced-flush-api"></a>Synced flush API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h2>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 7.6.</h3>
<p>Synced-flush is deprecated and will be removed in 8.0. Use <a class="xref" href="indices.html#indices-flush" title="Flush API">flush</a> instead. A flush has the same effect as a synced flush on Elasticsearch 7.6 or later.</p>
</div>
</div>
<p>Performs a synced flush on one or more indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_flush/synced</pre>
</div>
<div class="console_widget" data-snippet="snippets/1978.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="synced-flush-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;index&gt;/_flush/synced</code></p>
<p><code class="literal">GET /&lt;index&gt;/_flush/synced</code></p>
<p><code class="literal">POST /_flush/synced</code></p>
<p><code class="literal">GET /_flush/synced</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="synced-flush-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="synced-flush-using-api"></a>Use the synced flush API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h4>
</div></div></div>
<p>Use the synced flush API to manually initiate a synced flush.
This can be useful for a planned cluster restart where
you can stop indexing but don&#8217;t want to wait for 5 minutes until all indices
are marked as inactive and automatically sync-flushed.</p>
<p>You can request a synced flush even if there is ongoing indexing activity, and
Elasticsearch will perform the synced flush on a "best-effort" basis: shards that do not
have any ongoing indexing activity will be successfully sync-flushed, and other
shards will fail to sync-flush. The successfully sync-flushed shards will have
faster recovery times as long as the <code class="literal">sync_id</code> marker is not removed by a
subsequent flush.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="synced-flush-overview"></a>Synced flush overview<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h4>
</div></div></div>
<p>Elasticsearch keeps track of which shards have received indexing activity recently, and
considers shards that have not received any indexing operations for 5 minutes to
be inactive.</p>
<p>When a shard becomes inactive Elasticsearch performs a special kind of flush
known as a <span class="strong strong"><strong>synced flush</strong></span>. A synced flush performs a normal
<a class="xref" href="indices.html#indices-flush" title="Flush API">flush</a> on each replica of the shard, and then adds a marker known
as the <code class="literal">sync_id</code> to each replica to indicate that these copies have identical
Lucene indices. Comparing the <code class="literal">sync_id</code> markers of the two copies is a very
efficient way to check whether they have identical contents.</p>
<p>When allocating shard replicas, Elasticsearch must ensure that each replica contains the
same data as the primary. If the shard copies have been synced-flushed and the
replica shares a <code class="literal">sync_id</code> with the primary then Elasticsearch knows that the two copies
have identical contents. This means there is no need to copy any segment files
from the primary to the replica, which saves a good deal of time during
recoveries and restarts.</p>
<p>This is particularly useful for clusters having lots of indices which are very
rarely updated, such as with time-based indices. Without the synced flush
marker, recovery of this kind of cluster would be much slower.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="synced-flush-sync-id-markers"></a>Check for <code class="literal">sync_id</code> markers<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h4>
</div></div></div>
<p>To check whether a shard has a <code class="literal">sync_id</code> marker or not, look for the <code class="literal">commit</code>
section of the shard stats returned by the <a class="xref" href="indices.html#indices-stats" title="Index stats API">indices stats</a> API:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_stats?filter_path=**.commit&amp;level=shards <a id="CO634-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="console_widget" data-snippet="snippets/1979.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO634-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">filter_path</code> is used to reduce the verbosity of the response, but is entirely optional</p>
</td>
</tr>
</table>
</div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
   "indices": {
      "my-index-000001": {
         "shards": {
            "0": [
               {
                 "commit" : {
                   "id" : "3M3zkw2GHMo2Y4h4/KFKCg==",
                   "generation" : 3,
                   "user_data" : {
                     "translog_uuid" : "hnOG3xFcTDeoI_kvvvOdNA",
                     "history_uuid" : "XP7KDJGiS1a2fHYiFL5TXQ",
                     "local_checkpoint" : "-1",
                     "translog_generation" : "2",
                     "max_seq_no" : "-1",
                     "sync_id" : "AVvFY-071siAOuFGEO9P", <a id="CO635-1"></a><i class="conum" data-value="1"></i>
                     "max_unsafe_auto_id_timestamp" : "-1",
                     "min_retained_seq_no" : "0"
                   },
                   "num_docs" : 0
                 }
               }
            ]
         }
      }
   }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO635-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>the <code class="literal">sync id</code> marker</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">sync_id</code> marker is removed as soon as the shard is flushed again, and
Elasticsearch may trigger an automatic flush of a shard at any time if there are
unflushed operations in the shard&#8217;s translog. In practice this means that one
should consider any indexing operation on an index as having removed its
<code class="literal">sync_id</code> markers.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="synced-flush-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.
</p>
<p>To sync-flush all indices,
omit this parameter
or use a value of <code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="synced-flush-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="synced-flush-api-response-codes"></a>Response codes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
All shards successfully sync-flushed.
</dd>
<dt>
<span class="term">
<code class="literal">409</code>
</span>
</dt>
<dd>
A replica shard failed to sync-flush.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="synced-flush-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="synced-flush-api-specific-ex"></a>Sync-flush a specific index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /kimchy/_flush/synced</pre>
</div>
<div class="console_widget" data-snippet="snippets/1980.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="synced-flush-api-multi-ex"></a>Synch-flush several indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /kimchy,elasticsearch/_flush/synced</pre>
</div>
<div class="console_widget" data-snippet="snippets/1981.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="synced-flush-api-all-ex"></a>Sync-flush all indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/synced-flush.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_flush/synced</pre>
</div>
<div class="console_widget" data-snippet="snippets/1982.console"></div>
<p>The response contains details about how many shards were successfully
sync-flushed and information about any failure.</p>
<p>The following response indicates two shards
and one replica shard
successfully sync-flushed:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
   "_shards": {
      "total": 2,
      "successful": 2,
      "failed": 0
   },
   "my-index-000001": {
      "total": 2,
      "successful": 2,
      "failed": 0
   }
}</pre>
</div>
<p>The following response indicates one shard group failed
due to pending operations:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
   "_shards": {
      "total": 4,
      "successful": 2,
      "failed": 2
   },
   "my-index-000001": {
      "total": 4,
      "successful": 2,
      "failed": 2,
      "failures": [
         {
            "shard": 1,
            "reason": "[2] ongoing operations on primary"
         }
      ]
   }
}</pre>
</div>
<p>Sometimes the failures are specific to a shard replica. The copies that failed
will not be eligible for fast recovery but those that succeeded still will be.
This case is reported as follows:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
   "_shards": {
      "total": 4,
      "successful": 1,
      "failed": 1
   },
   "my-index-000001": {
      "total": 4,
      "successful": 3,
      "failed": 1,
      "failures": [
         {
            "shard": 1,
            "reason": "unexpected error",
            "routing": {
               "state": "STARTED",
               "primary": false,
               "node": "SZNr2J_ORxKTLUCydGX4zA",
               "relocating_node": null,
               "shard": 1,
               "index": "my-index-000001"
            }
         }
      ]
   }
}</pre>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-types-exists"></a>Type exists API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/types-exists.asciidoc">edit</a></h2>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 7.0.0.</h3>
<p>Types are deprecated and are in the process of being removed.  See <a class="xref" href="removal-of-types.html" title="Removal of mapping types"><em>Removal of mapping types</em></a>.</p>
</div>
</div>
<p>Checks if a <a class="xref" href="mapping-fields.html#mapping-type-field" title="_type field">mapping type</a> exists.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">HEAD my-index-000001/_mapping/message</pre>
</div>
<div class="console_widget" data-snippet="snippets/1983.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-types-exists-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/types-exists.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">HEAD /&lt;index&gt;/_mapping/&lt;type&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-types-exists-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/types-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.
</dd>
<dt>
<span class="term">
<code class="literal">&lt;type&gt;</code>
</span>
</dt>
<dd>
(Optional, string)
Comma-separated list or wildcard expression of types
used to limit the request.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-types-exists-api-response-codes"></a>Response codes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/types-exists.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
Indicates all specified mapping types exist.
</dd>
<dt>
<span class="term">
<code class="literal">404</code>
</span>
</dt>
<dd>
Indicates one or more specified mapping types <span class="strong strong"><strong>do not</strong></span> exist.
</dd>
</dl>
</div>
</div>

</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="unfreeze-index-api"></a>Unfreeze index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/unfreeze.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p>Unfreezes an index.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="unfreeze-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/unfreeze.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /&lt;index&gt;/_unfreeze</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="unfreeze-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/unfreeze.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target index or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="unfreeze-index-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/unfreeze.asciidoc">edit</a></h3>
</div></div></div>
<p>When a frozen index is unfrozen, the index goes through the normal recovery
process and becomes writeable again. See <a class="xref" href="frozen-indices.html" title="Frozen indices">Frozen indices</a> and <a class="xref" href="indices.html#freeze-index-api" title="Freeze index API">Freeze index</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Freezing an index will close the index and reopen it within the same
API call. This causes primaries to not be allocated for a short amount of time
and causes the cluster to go red until the primaries are allocated again. This
limitation might be removed in the future.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="unfreeze-index-api-path-parms"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/unfreeze.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index&gt;</code>
</span>
</dt>
<dd>
(Required, string) Identifier for the index.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="unfreeze-index-api-examples"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/apis/unfreeze.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example freezes and unfreezes an index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_freeze
POST /my-index-000001/_unfreeze</pre>
</div>
<div class="console_widget" data-snippet="snippets/1984.console"></div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-aliases"></a>Update index alias API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h2>
</div></div></div>

<p>Adds or removes index aliases.</p>
<p>An index alias is a secondary name
used to refer to one or more existing indices.</p>
<p>Most Elasticsearch APIs accept an index alias
in place of an index name.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions" : [
    { "add" : { "index" : "my-index-000001", "alias" : "alias1" } }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1985.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-aliases-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_aliases</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-aliases-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>If the Elasticsearch security features are enabled, you must have the following
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privileges</a>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
To use the <code class="literal">add</code> or <code class="literal">remove</code> action, you must have the <code class="literal">manage</code> index
privilege for both the index and index alias.
</li>
<li class="listitem">
To use the <code class="literal">remove_index</code> action, you must have the <code class="literal">manage</code> index privilege
for the index.
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-aliases-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h3>
</div></div></div>
<p>APIs in Elasticsearch accept an index name when working against a
specific index, and several indices when applicable. The index aliases
API allows aliasing an index with a name, with all APIs automatically
converting the alias name to the actual index name. An alias can also be
mapped to more than one index, and when specifying it, the alias will
automatically expand to the aliased indices. An alias can also be
associated with a filter that will automatically be applied when
searching, and routing values. An alias cannot have the same name as an index.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-aliases-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-aliases-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">actions</code>
</span>
</dt>
<dd>
<p>(Required, array of actions)
Set of actions to perform.
Valid actions include:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">add</code>
</span>
</dt>
<dd>
Adds an alias to an index.
</dd>
<dt>
<span class="term">
<code class="literal">remove</code>
</span>
</dt>
<dd>
Removes an alias from an index.
</dd>
<dt>
<span class="term">
<code class="literal">remove_index</code>
</span>
</dt>
<dd>
Deletes a concrete index, similar to the <a class="xref" href="indices.html#indices-delete-index" title="Delete index API">delete index
API</a>. Attempts to remove an index alias will fail.
</dd>
</dl>
</div>
<p>You can perform these actions on alias objects.
Valid parameters for alias objects include:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index</code>
</span>
</dt>
<dd>
<p>
(String)
Wildcard expression of index names
used to perform the action.
</p>
<p>If the <code class="literal">indices</code> parameter is not specified,
this parameter is required.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot add <a class="xref" href="data-streams.html" title="Data streams">data streams</a> to an index alias.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">indices</code>
</span>
</dt>
<dd>
<p>
(Array)
Array of index names
used to perform the action.
</p>
<p>If the <code class="literal">index</code> parameter is not specified,
this parameter is required.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot add <a class="xref" href="data-streams.html" title="Data streams">data streams</a> to an index alias.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">alias</code>
</span>
</dt>
<dd>
<p>
(String)
Comma-separated list or wildcard expression of index alias names to
add, remove, or delete.
</p>
<p>If the <code class="literal">aliases</code> parameter is not specified,
this parameter is required for the <code class="literal">add</code> or <code class="literal">remove</code> action.</p>
</dd>
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
<p>
(Array of strings)
Array of index alias names to
add, remove, or delete.
</p>
<p>If the <code class="literal">alias</code> parameter is not specified,
this parameter is required for the <code class="literal">add</code> or <code class="literal">remove</code> action.</p>
</dd>
<dt>
<span class="term">
<code class="literal">filter</code>
</span>
</dt>
<dd>
<p>
(Optional, query object)
<a class="xref" href="compound-queries.html#query-dsl-bool-query" title="Boolean query">Filter query</a>
used to limit the index alias.
</p>
<p>If specified,
the index alias only applies to documents returned by the filter.
<a class="xref" href="compound-queries.html#query-dsl-bool-query" title="Boolean query">Filter query</a>
used to limit the index alias.</p>
<p>If specified,
the index alias only applies to documents returned by the filter.</p>
<p>See <a class="xref" href="indices.html#filtered" title="Filtered aliases">Filtered aliases</a> for an example.</p>
</dd>
<dt>
<span class="term">
<code class="literal">is_hidden</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>, the alias will be excluded from wildcard expressions by default,
unless overriden in the request using the <code class="literal">expand_wildcards</code> parameter,
similar to <a class="xref" href="index-modules.html#index-hidden">hidden indices</a>. This property must be set to the
same value on all indices that share an alias. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">must_exist</code>
</span>
</dt>
<dd>
(Optional, Boolean)
If <code class="literal">true</code>, the alias to remove must exist. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">is_write_index</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">true</code>, assigns the index as an alias&#8217;s write index.
Defaults to <code class="literal">false</code>.
</p>
<p>An alias can have one write index at a time.</p>
<p>See <a class="xref" href="indices.html#aliases-write-index" title="Write index">Write index</a> for an example.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Aliases that do not explicitly set <code class="literal">is_write_index: true</code> for an index, and
only reference one index, will have that referenced index behave as if it is the write index
until an additional index is referenced. At that point, there will be no write index and
writes will be rejected.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">routing</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Custom <a class="xref" href="mapping-fields.html#mapping-routing-field" title="_routing field">routing value</a>
used to route operations to a specific shard.
</p>
<p>See <a class="xref" href="indices.html#aliases-routing" title="Routing">Routing</a> for an example.</p>
</dd>
<dt>
<span class="term">
<code class="literal">index_routing</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Custom <a class="xref" href="mapping-fields.html#mapping-routing-field" title="_routing field">routing value</a> used
for the alias&#8217;s indexing operations.
</p>
<p>See <a class="xref" href="indices.html#aliases-routing" title="Routing">Routing</a> for an example.</p>
</dd>
<dt>
<span class="term">
<code class="literal">search_routing</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Custom <a class="xref" href="mapping-fields.html#mapping-routing-field" title="_routing field">routing value</a> used
for the alias&#8217;s search operations.
</p>
<p>See <a class="xref" href="indices.html#aliases-routing" title="Routing">Routing</a> for an example.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="indices-aliases-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="indices-aliases-api-add-alias-ex"></a>Add an alias<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h4>
</div></div></div>
<p>The following request adds the <code class="literal">alias1</code> alias to the <code class="literal">test1</code> index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions" : [
    { "add" : { "index" : "test1", "alias" : "alias1" } }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1986.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="indices-aliases-api-remove-alias-ex"></a>Remove an alias<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h4>
</div></div></div>
<p>The following request removes the <code class="literal">alias1</code> alias.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions" : [
    { "remove" : { "index" : "test1", "alias" : "alias1" } }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1987.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="indices-aliases-api-rename-alias-ex"></a>Rename an alias<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h4>
</div></div></div>
<p>Renaming an alias is a simple <code class="literal">remove</code> then <code class="literal">add</code> operation within the
same API. This operation is atomic, no need to worry about a short
period of time where the alias does not point to an index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions" : [
    { "remove" : { "index" : "test1", "alias" : "alias1" } },
    { "add" : { "index" : "test1", "alias" : "alias2" } }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1988.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="indices-aliases-api-add-multi-alias-ex"></a>Add an alias to multiple indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h4>
</div></div></div>
<p>Associating an alias with more than one index is simply several <code class="literal">add</code>
actions:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions" : [
    { "add" : { "index" : "test1", "alias" : "alias1" } },
    { "add" : { "index" : "test2", "alias" : "alias1" } }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1989.console"></div>
<p>Multiple indices can be specified for an action with the <code class="literal">indices</code> array syntax:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions" : [
    { "add" : { "indices" : ["test1", "test2"], "alias" : "alias1" } }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1990.console"></div>
<p>To specify multiple aliases in one action, the corresponding <code class="literal">aliases</code> array
syntax exists as well.</p>
<p>For the example above, a glob pattern can also be used to associate an alias to
more than one index that share a common name:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions" : [
    { "add" : { "index" : "test*", "alias" : "all_test_indices" } }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1991.console"></div>
<p>In this case, the alias is a point-in-time alias that will group all
current indices that match, it will not automatically update as new
indices that match this pattern are added/removed.</p>
<p>It is an error to index to an alias which points to more than one index.</p>
<p>It is also possible to swap an index with an alias in one, atomic operation.
This means there will be no point in time where the alias points to no
index in the cluster state. However, as indexing and searches involve multiple
steps, it is possible for the in-flight or queued requests to fail
due to a temporarily non-existent index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT test     <a id="CO636-1"></a><i class="conum" data-value="1"></i>
PUT test_2   <a id="CO636-2"></a><i class="conum" data-value="2"></i>
POST /_aliases
{
  "actions" : [
    { "add":  { "index": "test_2", "alias": "test" } },
    { "remove_index": { "index": "test" } }  <a id="CO636-3"></a><i class="conum" data-value="3"></i>
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1992.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO636-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>An index we&#8217;ve added by mistake</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO636-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The index we should have added</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO636-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">remove_index</code> is just like <a class="xref" href="indices.html#indices-delete-index" title="Delete index API">Delete index</a> and will only remove a concrete index.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="filtered"></a>Filtered aliases<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h4>
</div></div></div>
<p>Aliases with filters provide an easy way to create different "views" of
the same index. The filter can be defined using Query DSL and is applied
to all Search, Count, Delete By Query and More Like This operations with
this alias.</p>
<p>To create a filtered alias, first we need to ensure that the fields already
exist in the mapping:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001
{
  "mappings": {
    "properties": {
      "user": {
        "properties": {
          "id": {
            "type": "keyword"
          }
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1993.console"></div>
<p>Now we can create an alias that uses a filter on field <code class="literal">user.id</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "my-index-000001",
        "alias": "alias2",
        "filter": { "term": { "user.id": "kimchy" } }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1994.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="aliases-routing"></a>Routing<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h4>
</div></div></div>
<p>It is possible to associate routing values with aliases. This feature
can be used together with filtering aliases in order to avoid
unnecessary shard operations.</p>
<p>The following command creates a new alias <code class="literal">alias1</code> that points to index
<code class="literal">test</code>. After <code class="literal">alias1</code> is created, all operations with this alias are
automatically modified to use value <code class="literal">1</code> for routing:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "test",
        "alias": "alias1",
        "routing": "1"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1995.console"></div>
<p>It&#8217;s also possible to specify different routing values for searching
and indexing operations:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "test",
        "alias": "alias2",
        "search_routing": "1,2",
        "index_routing": "2"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1996.console"></div>
<p>As shown in the example above, search routing may contain several values
separated by comma. Index routing can contain only a single value.</p>
<p>If a search operation that uses routing alias also has a routing parameter, an
intersection of both search alias routing and routing specified in the
parameter is used. For example the following command will use "2" as a
routing value:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /alias2/_search?q=user.id:kimchy&amp;routing=2,3</pre>
</div>
<div class="console_widget" data-snippet="snippets/1997.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="aliases-write-index"></a>Write index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/aliases.asciidoc">edit</a></h4>
</div></div></div>
<p>It is possible to associate the index pointed to by an alias as the write index.
When specified, all index and update requests against an alias that point to multiple
indices will attempt to resolve to the one index that is the write index.
Only one index per alias can be assigned to be the write index at a time. If no write index is specified
and there are multiple indices referenced by an alias, then writes will not be allowed.</p>
<p>It is possible to specify an index associated with an alias as a write index using both the aliases API
and index creation API.</p>
<p>Setting an index to be the write index with an alias also affects how the alias is manipulated during
Rollover (see <a class="xref" href="indices.html#indices-rollover-index" title="Rollover index API">Rollover With Write Index</a>).</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "test",
        "alias": "alias1",
        "is_write_index": true
      }
    },
    {
      "add": {
        "index": "test2",
        "alias": "alias1"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1998.console"></div>
<p>In this example, we associate the alias <code class="literal">alias1</code> to both <code class="literal">test</code> and <code class="literal">test2</code>, where
<code class="literal">test</code> will be the index chosen for writing to.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /alias1/_doc/1
{
  "foo": "bar"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1999.console"></div>
<p>The new document that was indexed to <code class="literal">/alias1/_doc/1</code> will be indexed as if it were
<code class="literal">/test/_doc/1</code>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /test/_doc/1</pre>
</div>
<div class="console_widget" data-snippet="snippets/2000.console"></div>
<p>To swap which index is the write index for an alias, the Aliases API can be leveraged to
do an atomic swap. The swap is not dependent on the ordering of the actions.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "test",
        "alias": "alias1",
        "is_write_index": false
      }
    }, {
      "add": {
        "index": "test2",
        "alias": "alias1",
        "is_write_index": true
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2001.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-update-settings"></a>Update index settings API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/update-settings.asciidoc">edit</a></h2>
</div></div></div>

<p>Changes a <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">dynamic index setting</a> in real time.</p>
<p>For data streams, index setting changes are applied to all backing indices by
default.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_settings
{
  "index" : {
    "number_of_replicas" : 2
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2002.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="update-index-settings-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/update-settings.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT /&lt;target&gt;/_settings</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="update-index-settings-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/update-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a> for the target data stream, index,
or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="update-index-settings-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/update-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;target&gt;</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Comma-separated list of data streams, indices, and index aliases used to limit
the request. Wildcard expressions (<code class="literal">*</code>) are supported.
</p>
<p>To target all data streams and indices in a cluster, omit this parameter or use
<code class="literal">_all</code> or <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="update-index-settings-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/update-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="indices.html#indices-aliases" title="Update index alias API">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index
starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">false</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">flat_settings</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, returns settings in flat format. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">preserve_existing</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, existing index settings remain unchanged.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="update-index-settings-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/update-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="update-index-settings-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/update-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="reset-index-setting"></a>Reset an index setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/update-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>To revert a setting to the default value, use <code class="literal">null</code>. For example:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_settings
{
  "index" : {
    "refresh_interval" : null
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2003.console"></div>
<p>The list of per-index settings which can be updated dynamically on live
indices can be found in <a class="xref" href="index-modules.html" title="Index modules">Index modules</a>.
To preserve existing settings from being updated, the <code class="literal">preserve_existing</code>
request parameter can be set to <code class="literal">true</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="bulk"></a>Bulk indexing usage<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/update-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>For example, the update settings API can be used to dynamically change
the index from being more performant for bulk indexing, and then move it
to more real time indexing state. Before the bulk indexing is started,
use:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_settings
{
  "index" : {
    "refresh_interval" : "-1"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2004.console"></div>
<p>(Another optimization option is to start the index without any replicas,
and only later adding them, but that really depends on the use case).</p>
<p>Then, once bulk indexing is done, the settings can be updated (back to
the defaults for example):</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_settings
{
  "index" : {
    "refresh_interval" : "1s"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/2005.console"></div>
<p>And, a force merge should be called:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_forcemerge?max_num_segments=5</pre>
</div>
<div class="console_widget" data-snippet="snippets/2006.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="update-settings-analysis"></a>Update index analysis<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/update-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>You can only define new analyzers on closed indices.</p>
<p>To add an analyzer,
you must close the index,
define the analyzer,
and reopen the index.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot close the write index of a data stream.</p>
<p>To update the analyzer for a data stream&#8217;s write index and future backing
indices, update the analyzer in the <a class="xref" href="set-up-a-data-stream.html#create-a-data-stream-template" title="Create an index template">index
template used by the stream</a>. Then <a class="xref" href="use-a-data-stream.html#manually-roll-over-a-data-stream" title="Manually roll over a data stream">roll over
the data stream</a> to apply the new analyzer to the stream’s write index and
future backing indices. This affects searches and any new data added to the
stream after the rollover. However, it does not affect the data stream&#8217;s backing
indices or their existing data.</p>
<p>To change the analyzer for existing backing indices, you must create a
new data stream and reindex your data into it. See
<a class="xref" href="data-streams-change-mappings-and-settings.html#data-streams-use-reindex-to-change-mappings-settings" title="Use reindex to change mappings or settings">Use reindex to change mappings or settings</a>.</p>
</div>
</div>
<p>For example,
the following commands add the <code class="literal">content</code> analyzer to the <code class="literal">my-index-000001</code> index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_close

PUT /my-index-000001/_settings
{
  "analysis" : {
    "analyzer":{
      "content":{
        "type":"custom",
        "tokenizer":"whitespace"
      }
    }
  }
}

POST /my-index-000001/_open</pre>
</div>
<div class="console_widget" data-snippet="snippets/2007.console"></div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-resolve-index-api"></a>Resolve index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/resolve.asciidoc">edit</a></h2>
</div></div></div>

<p>Resolves the specified name(s) and/or index patterns for indices, index
aliases, and data streams. Multiple patterns and remote clusters are
supported.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_resolve/index/my-index-*</pre>
</div>
<div class="console_widget" data-snippet="snippets/2008.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="resolve-index-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/resolve.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_resolve/index/&lt;name&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="resolve-index-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/resolve.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code> or <code class="literal">manage</code> <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">index privilege</a>
for the target data stream, index, or index alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="resolve-index-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/resolve.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;name&gt;</code>
</span>
</dt>
<dd>
<p>(Required, string) Comma-separated name(s) or index pattern(s) of the
indices, index aliases, and data streams to resolve. Resources on
<a class="xref" href="modules-remote-clusters.html" title="Remote clusters">remote clusters</a> can be specified using the
<code class="literal">&lt;cluster&gt;:&lt;name&gt;</code> syntax.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="resolve-index-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/resolve.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code class="literal">open,hidden</code>. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Expand to open and closed indices, including <a class="xref" href="api-conventions.html#hidden-indices" title="Hidden indices">hidden indices</a>.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Expand only to open indices.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Expand only to closed indices.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Expansion of wildcards will include hidden indices.
Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard expressions are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="resolve-index-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/resolve.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_resolve/index/f*,remoteCluster1:bar*?expand_wildcards=all</pre>
</div>
<div class="console_widget" data-snippet="snippets/2009.console"></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "indices": [                                 <a id="CO637-1"></a><i class="conum" data-value="1"></i>
    {
      "name": "foo_closed",
      "attributes": [
        "closed"
      ]
    },
    {
      "name": "freeze-index",
      "aliases": [
        "f-alias"
      ],
      "attributes": [
        "frozen",
        "open"
      ]
    },
    {
      "name": "remoteCluster1:bar-01",
      "attributes": [
        "open"
      ]
    }
  ],
  "aliases": [                                 <a id="CO637-2"></a><i class="conum" data-value="2"></i>
    {
      "name": "f-alias",
      "indices": [
        "freeze-index",
        "my-index-000001"
      ]
    }
  ],
  "data_streams": [                            <a id="CO637-3"></a><i class="conum" data-value="3"></i>
    {
      "name": "foo",
      "backing_indices": [
        ".ds-foo-000001"
      ],
      "timestamp_field": "@timestamp"
    }
  ]
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO637-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>All indices matching the supplied names or expressions</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO637-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>All aliases matching the supplied names or expressions</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO637-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>All data streams matching the supplied names or expressions</p>
</td>
</tr>
</table>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="dangling-indices-list"></a>List dangling indices API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-indices-list.asciidoc">edit</a></h2>
</div></div></div>

<p>Lists dangling indices.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-indices-list-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-indices-list.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_dangling</pre>
</div>
<div class="console_widget" data-snippet="snippets/2010.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-indices-list-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-indices-list.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-indices-list-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-indices-list.asciidoc">edit</a></h3>
</div></div></div>
<p>If Elasticsearch encounters index data that is absent from the current cluster
state, those indices are considered to be dangling. For example,
this can happen if you delete more than
<code class="literal">cluster.indices.tombstones.size</code> indices while an Elasticsearch node is offline.</p>
<p>Use this API to list dangling indices, which you can then
<a class="xref" href="indices.html#dangling-index-import" title="Import dangling index API">import</a> or <a class="xref" href="indices.html#dangling-index-delete" title="Delete dangling index API">delete</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-indices-list-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-indices-list.asciidoc">edit</a></h3>
</div></div></div>
<p>The API returns the following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "dangling_indices": [
   {
    "index_name": "my-index-000001",
    "index_uuid": "zmM4e0JtBkeUjiHD-MihPQ",
    "creation_date_millis": 1589414451372,
    "node_ids": [
      "pL47UN3dAb2d5RCWP6lQ3e"
    ]
   }
  ]
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="dangling-index-import"></a>Import dangling index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-import.asciidoc">edit</a></h2>
</div></div></div>

<p>Imports a dangling index.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-import-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-import.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_dangling/&lt;index-uuid&gt;?accept_data_loss=true</pre>
</div>
<div class="console_widget" data-snippet="snippets/2011.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-import-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-import.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-import-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-import.asciidoc">edit</a></h3>
</div></div></div>
<p>If Elasticsearch encounters index data that is absent from the current cluster
state, those indices are considered to be dangling. For example,
this can happen if you delete more than
<code class="literal">cluster.indices.tombstones.size</code> indices while an Elasticsearch node is offline.</p>
<p>Import a single index into the cluster by referencing its UUID. Use the
<a class="xref" href="indices.html#dangling-indices-list" title="List dangling indices API">List dangling indices API</a> to locate the UUID of an index.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-import-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-import.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-uuid&gt;</code>
</span>
</dt>
<dd>
(Required, string)
UUID of the index to import, which you can find using the
<a class="xref" href="indices.html#dangling-indices-list" title="List dangling indices API">List dangling indices API</a>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-import-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-import.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">accept_data_loss</code>
</span>
</dt>
<dd>
(Required, Boolean)
This field must be set to <code class="literal">true</code> to import a dangling index. Because Elasticsearch
cannot know where the dangling index data came from or determine which shard
copies are fresh and which are stale, it cannot guarantee that the imported data
represents the latest state of the index when it was last in the cluster.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-import-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-import.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example shows how to import a dangling index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_dangling/zmM4e0JtBkeUjiHD-MihPQ?accept_data_loss=true</pre>
</div>
<div class="console_widget" data-snippet="snippets/2012.console"></div>
<p>The API returns following response:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged" : true
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="dangling-index-delete"></a>Delete dangling index API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-delete.asciidoc">edit</a></h2>
</div></div></div>

<p>Deletes a dangling index.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-delete-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-delete.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">DELETE /_dangling/&lt;index-uuid&gt;?accept_data_loss=true</pre>
</div>
<div class="console_widget" data-snippet="snippets/2013.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-delete-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-delete.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">manage</code>
<a class="xref" href="authorization.html#privileges-list-cluster" title="Cluster privileges">cluster privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-delete-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-delete.asciidoc">edit</a></h3>
</div></div></div>
<p>If Elasticsearch encounters index data that is absent from the current cluster
state, those indices are considered to be dangling. For example,
this can happen if you delete more than
<code class="literal">cluster.indices.tombstones.size</code> indices while an Elasticsearch node is offline.</p>
<p>Deletes a dangling index by referencing its UUID. Use the
<a class="xref" href="indices.html#dangling-indices-list" title="List dangling indices API">List dangling indices API</a> to locate the UUID of an index.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-delete-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-delete.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-uuid&gt;</code>
</span>
</dt>
<dd>
(Required, string)
UUID of the index to delete. You can find this using the
<a class="xref" href="indices.html#dangling-indices-list" title="List dangling indices API">List dangling indices API</a>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="dangling-index-delete-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/indices/dangling-index-delete.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">accept_data_loss</code>
</span>
</dt>
<dd>
(Optional, Boolean)
This field must be set to <code class="literal">true</code> in order to carry out the import, since it will
no longer be possible to recover the data from the dangling index.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="graph-explore-api.html">« Graph explore API</a>
</span>
<span class="next">
<a href="index-lifecycle-management-api.html">Index lifecycle management APIs »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
