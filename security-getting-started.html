<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Tutorial: Getting started with security | Elasticsearch Guide | Elastic</title>
<meta class="elastic" name="content" content="Tutorial: Getting started with security | Elasticsearch Guide">

<link rel="home" href="index.html" title="Elasticsearch Guide"/>
<link rel="up" href="secure-cluster.html" title="Secure a cluster"/>
<link rel="prev" href="ccs-clients-integrations.html" title="Cross cluster search, clients, and integrations"/>
<link rel="next" href="encrypting-internode-communications.html" title="Tutorial: Encrypting communications"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="secure-cluster.html">Secure a cluster</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ccs-clients-integrations.html">« Cross cluster search, clients, and integrations</a>
</span>
<span class="next">
<a href="encrypting-internode-communications.html">Tutorial: Encrypting communications »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="security-getting-started"></a>Tutorial: Getting started with security<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>In this tutorial, you learn how to secure a cluster by configuring users and
roles in Elasticsearch, Kibana, Logstash, and Metricbeat.</p>
<h3><a id="get-started-security-prerequisites"></a>Before you begin<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a></h3>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Install and configure Elasticsearch, Kibana, Logstash, and Metricbeat as described in
<a href="https://www.elastic.co/guide/en/elastic-stack-get-started/7.10/get-started-elastic-stack.html" class="ulink" target="_top">Getting started with the Elastic Stack</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>To complete this tutorial, you must install the default Elasticsearch and
Kibana packages, which include role-based access control (RBAC) and native
authentication security features. When you install these products, they apply
basic licenses with no expiration dates. All of the subsequent steps in this
tutorial assume that you are using a basic license. For more information, see
<a href="https://www.elastic.co/subscriptions" class="ulink" target="_top">https://www.elastic.co/subscriptions</a> and <a href="https://www.elastic.co/guide/en/kibana/7.10/managing-licenses.html" class="ulink" target="_top">License management</a>.</p>
</div>
</div>
</li>
<li class="listitem">
Stop Logstash. The method for starting and stopping Logstash varies depending on whether
you are running it from the command line or running it as a service. For example,
if you are running Logstash from the command line, you can stop it by entering
<code class="literal">Ctrl-C</code>. See <a href="https://www.elastic.co/guide/en/logstash/7.10/shutdown.html" class="ulink" target="_top">Shutting down Logstash</a>.
</li>
<li class="listitem">
Stop Metricbeat. For example, enter <code class="literal">Ctrl-C</code> on the command line where it is
running.
</li>
<li class="listitem">
Launch the Kibana web interface by pointing your browser to port 5601. For
example, <a href="http://127.0.0.1:5601" class="ulink" target="_top">http://127.0.0.1:5601</a>.
</li>
</ol>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="get-started-enable-security"></a>Enable Elasticsearch security features<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>When you use the basic and trial licenses, the Elasticsearch security features are
disabled by default. To enable them:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Stop Kibana. The method for starting and stopping Kibana varies depending on
how you installed it. For example, if you installed Kibana from an archive
distribution (<code class="literal">.tar.gz</code> or <code class="literal">.zip</code>), stop it by entering <code class="literal">Ctrl-C</code> on the command
line. See <a href="https://www.elastic.co/guide/en/kibana/7.10/start-stop.html" class="ulink" target="_top">Starting and stopping Kibana</a>.
</li>
<li class="listitem">
Stop Elasticsearch. For example, if you installed Elasticsearch from an archive distribution,
enter <code class="literal">Ctrl-C</code> on the command line. See
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/stopping-elasticsearch.html" class="ulink" target="_top">Stopping Elasticsearch</a>.
</li>
<li class="listitem">
<p>Add the <code class="literal">xpack.security.enabled</code> setting to the
<code class="literal">ES_PATH_CONF/elasticsearch.yml</code> file.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">ES_PATH_CONF</code> environment variable contains the path for the Elasticsearch
configuration files. If you installed Elasticsearch using archive distributions (<code class="literal">zip</code> or
<code class="literal">tar.gz</code>), it defaults to <code class="literal">ES_HOME/config</code>. If you used package distributions
(Debian or RPM), it defaults to <code class="literal">/etc/elasticsearch</code>. For more information, see
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/settings.html" class="ulink" target="_top">Configuring Elasticsearch</a>.</p>
</div>
</div>
<p>For example, add the following setting:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.enabled: true</pre>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you have a basic or trial license, the default value for this setting is
<code class="literal">false</code>. If you have a gold or higher license, the default value is <code class="literal">true</code>.
Therefore, it is a good idea to explicitly add this setting to avoid confusion
about whether security features are enabled.</p>
</div>
</div>
</li>
<li class="listitem">
<p>Enable single-node discovery in the <code class="literal">ES_PATH_CONF/elasticsearch.yml</code> file.</p>
<p>This tutorial involves a single node cluster, but if you had multiple
nodes, you would enable Elasticsearch security features on every node in the cluster
and configure Transport Layer Security (TLS) for internode-communication, which
is beyond the scope of this tutorial. By enabling single-node discovery, we are
postponing the configuration of TLS. For example, add the following setting:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">discovery.type: single-node</pre>
</div>
<p>For more information, see
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/bootstrap-checks.html#single-node-discovery" class="ulink" target="_top">Single-node discovery</a>.</p>
</li>
</ol>
</div>
<p>When you enable Elasticsearch security features, basic authentication is enabled by
default. To communicate with the cluster, you must specify a username and
password. Unless you <a class="xref" href="setting-up-authentication.html#anonymous-access" title="Enabling anonymous access">enable anonymous access</a>, all requests
that don&#8217;t include a user name and password are rejected.</p>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="get-started-built-in-users"></a>Create passwords for built-in users<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>There are <a class="xref" href="setting-up-authentication.html#built-in-users" title="Built-in users">built-in users</a> that you can use for specific
administrative purposes: <code class="literal">apm_system</code>, <code class="literal">beats_system</code>, <code class="literal">elastic</code>, <code class="literal">kibana_system</code>,
<code class="literal">logstash_system</code>,  and <code class="literal">remote_monitoring_user</code>.</p>
<p>Before you can use them, you must set their passwords:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Restart Elasticsearch. For example, if you installed Elasticsearch with a <code class="literal">.tar.gz</code> package, run
the following command from the Elasticsearch directory:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/elasticsearch</pre>
</div>
<p>See <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/starting-elasticsearch.html" class="ulink" target="_top">Starting Elasticsearch</a>.</p>
</li>
<li class="listitem">
<p>Set the built-in users' passwords.</p>
<p>Run the following command from the Elasticsearch directory:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/elasticsearch-setup-passwords interactive</pre>
</div>
</li>
</ol>
</div>
<p>You need these built-in users in subsequent steps, so choose passwords that you
can remember!</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This tutorial does not use the built-in <code class="literal">apm_system</code>, <code class="literal">logstash_system</code>,
<code class="literal">beats_system</code>, and <code class="literal">remote_monitoring_user</code> users, which are typically
associated with monitoring. For more information, see
<a href="https://www.elastic.co/guide/en/logstash/7.10/ls-security.html#ls-monitoring-user" class="ulink" target="_top">Configuring credentials for Logstash monitoring</a>
and <a href="https://www.elastic.co/guide/en/beats/metricbeat/7.10/monitoring.html" class="ulink" target="_top">Monitoring Metricbeat</a>.</p>
</div>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="get-started-kibana-user"></a>Add the built-in user to Kibana<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>When the Elasticsearch security features are enabled, users must log in to Kibana
with a valid user ID and password.</p>
<p>Kibana also performs some tasks under the covers that require use of the
built-in <code class="literal">kibana_system</code> user.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Configure Kibana to use the built-in <code class="literal">kibana_system</code> user and the password that you
created:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>If you don&#8217;t mind having passwords visible in your configuration file,
uncomment and update the following settings in the <code class="literal">kibana.yml</code> file in your
Kibana directory:</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you installed Kibana using archive distributions (<code class="literal">zip</code> or
<code class="literal">tar.gz</code>), the <code class="literal">kibana.yml</code> configuration file is in <code class="literal">KIBANA_HOME/config</code>. If
you used package distributions (Debian or RPM), it&#8217;s in <code class="literal">/etc/kibana</code>. For more
information, see <a href="https://www.elastic.co/guide/en/kibana/7.10/settings.html" class="ulink" target="_top">Configuring Kibana</a>.</p>
</div>
</div>
<p>For example, add the following settings:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">elasticsearch.username: "kibana_system"
elasticsearch.password: "your_password"</pre>
</div>
<p>Specify the password that you set with the <code class="literal">elasticsearch-setup-passwords</code>
command then save your changes to the file.</p>
</li>
<li class="listitem">
<p>If you prefer not to put your user ID and password in the <code class="literal">kibana.yml</code> file,
store them in a keystore instead. Run the following commands to create the Kibana
keystore and add the secure settings:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/kibana-keystore create
./bin/kibana-keystore add elasticsearch.username
./bin/kibana-keystore add elasticsearch.password</pre>
</div>
<p>When prompted, specify the <code class="literal">kibana_system</code> built-in user and its password for these
setting values.  The settings are automatically applied when you start Kibana.
To learn more, see <a href="https://www.elastic.co/guide/en/kibana/7.10/secure-settings.html" class="ulink" target="_top">Secure settings</a>.</p>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Restart Kibana. For example, if you installed
Kibana with a <code class="literal">.tar.gz</code> package, run the following command from the Kibana
directory:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/kibana</pre>
</div>
<p>See <a href="https://www.elastic.co/guide/en/kibana/7.10/start-stop.html" class="ulink" target="_top">Starting and stopping Kibana</a>.</p>
</li>
</ol>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="get-started-authentication"></a>Configure authentication<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>Now that you&#8217;ve set up the built-in users, you need to decide how you want to
manage all the other users.</p>
<p>The Elastic Stack <em>authenticates</em> users to ensure that they are valid. The
authentication process is handled by <em>realms</em>. You can use one or more built-in
realms, such as the native, file, LDAP, PKI, Active Directory, SAML, or Kerberos
realms. Alternatively, you can create your own custom realms. In this tutorial,
we&#8217;ll use a native realm.</p>
<p>In general, you configure realms by adding <code class="literal">xpack.security.authc.realms</code>
settings in the <code class="literal">elasticsearch.yml</code> file. However, the native realm is available
by default when no other realms are configured. Therefore, you don&#8217;t need to do
any extra configuration steps in this tutorial. You can jump straight to
creating users!</p>
<p>If you want to learn more about authentication and realms, see
<a class="xref" href="setting-up-authentication.html" title="User authentication"><em>User authentication</em></a>.</p>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="get-started-users"></a>Create users<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>Let&#8217;s create two users in the native realm.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to Kibana with the <code class="literal">elastic</code> built-in user.
</li>
<li class="listitem">
<p>Open the menu. Go to <span class="strong strong"><strong>Stack Management &gt; Security &gt; Users</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="security/images/management-builtin-users.jpg" alt="User management screenshot in Kibana">
</div>
</div>
<p>In this example, you can see a list of built-in users.</p>
</li>
<li class="listitem">
<p>Click <span class="strong strong"><strong>Create user</strong></span>. For example, create a user for yourself:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="security/images/create-user.jpg" alt="Creating a user in Kibana">
</div>
</div>
<p>You&#8217;ll notice that when you create a user, you can assign it a role. Don&#8217;t
choose a role yet&#8212;&#8203;we&#8217;ll come back to that in subsequent steps.</p>
</li>
<li class="listitem">
<p>Click <span class="strong strong"><strong>Create user</strong></span> and create a <code class="literal">logstash_internal</code> user.</p>
<p>In <a href="https://www.elastic.co/guide/en/elastic-stack-get-started/7.10/get-started-elastic-stack.html" class="ulink" target="_top">Getting started with the Elastic Stack</a>,
you configured Logstash to listen for Metricbeat
input and to send the events to Elasticsearch.  You therefore need to create a user
that Logstash can use to communicate with Elasticsearch. For example:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="security/images/create-logstash-user.jpg" alt="Creating a Logstash user in Kibana">
</div>
</div>
</li>
</ol>
</div>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="get-started-roles"></a>Assign roles<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>By default, all users can change their own passwords, get information about
themselves, and run the <code class="literal">authenticate</code> API. If you want them to do more than
that, you need to give them one or more <em>roles</em>.</p>
<p>Each role defines a specific set of actions (such as read, create, or delete)
that can be performed on specific secured resources (such as data streams, indices, aliases,
documents, fields, or clusters). To help you get up and running, there are
built-in roles.</p>
<p>Open the menu and go to <span class="strong strong"><strong>Stack Management &gt; Security &gt; Roles</strong></span> to see them:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="security/images/management-roles.jpg" alt="Role management screenshot in Kibana">
</div>
</div>
<p>Select a role to see more information about its privileges. For example, select
the <code class="literal">kibana_system</code> role to see its list of cluster and index privileges. To
learn more, see <a class="xref" href="authorization.html#privileges-list-indices" title="Indices privileges">Indices privileges</a>.</p>
<p>Let&#8217;s assign the <code class="literal">kibana_admin</code> role to your user. Go back to the <span class="strong strong"><strong>Stack
Management &gt; Security &gt; Users</strong></span> page and select your user. Add the <code class="literal">kibana_admin</code>
role and save the change. For example:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="security/images/assign-role.jpg" alt="Assigning a role to a user in Kibana">
</div>
</div>
<p>This user now has administrative access to all features in Kibana.
For more information about granting access to Kibana see
<a href="https://www.elastic.co/guide/en/kibana/7.10/xpack-security-authorization.html" class="ulink" target="_top">Kibana authorization</a>.</p>
<p>If you completed all of the steps in
<a href="https://www.elastic.co/guide/en/elastic-stack-get-started/7.10/get-started-elastic-stack.html" class="ulink" target="_top">Getting started with the Elastic Stack</a>, you should
have Metricbeat data stored in Elasticsearch. Let&#8217;s create two roles that grant
different levels of access to that data.</p>
<p>Go to the <span class="strong strong"><strong>Stack Management &gt; Security &gt; Roles</strong></span> page and click <span class="strong strong"><strong>Create role</strong></span>.</p>
<p>Create a <code class="literal">metricbeat_reader</code> role that has <code class="literal">read</code> and <code class="literal">view_index_metadata</code>
privileges on the <code class="literal">metricbeat-*</code> indices:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="security/images/create-reader-role.jpg" alt="Creating a role in Kibana">
</div>
</div>
<p>Create a <code class="literal">metricbeat_writer</code> role that has <code class="literal">manage_index_templates</code> and <code class="literal">monitor</code>
cluster privileges, as well as <code class="literal">write</code>, <code class="literal">delete</code>, and <code class="literal">create_index</code> privileges
on the <code class="literal">metricbeat-*</code> indices:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="security/images/create-writer-role.jpg" alt="Creating another role in Kibana">
</div>
</div>
<p>Now go back to the <span class="strong strong"><strong>Stack
Management &gt; Security &gt; Users</strong></span> page and assign these roles
to the appropriate users. Assign the <code class="literal">metricbeat_reader</code> role to your personal
user. Assign the <code class="literal">metricbeat_writer</code> role to the <code class="literal">logstash_internal</code> user.</p>
<p>The list of users should now contain all of the built-in users as well as the
two you created. It should also show the appropriate roles for your users:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="security/images/management-users.jpg" alt="User management screenshot in Kibana">
</div>
</div>
<p>If you want to learn more about authorization and roles, see <a class="xref" href="authorization.html" title="User authorization"><em>User authorization</em></a>.</p>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="get-started-logstash-user"></a>Add user information in Logstash<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>In order for Logstash to send data successfully to Elasticsearch, you must configure its
authentication credentials in the Logstash configuration file.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Configure Logstash to use the <code class="literal">logstash_internal</code> user and the password that you
created:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>If you don&#8217;t mind having passwords visible in your configuration file, add
the following <code class="literal">user</code> and <code class="literal">password</code> settings in the <code class="literal">demo-metrics-pipeline.conf</code>
file in your Logstash directory:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">...

output {
  elasticsearch {
    hosts =&gt; "localhost:9200"
    manage_template =&gt; false
    index =&gt; "%{[@metadata][beat]}-%{[@metadata][version]}-%{+YYYY.MM.dd}"
    user =&gt; "logstash_internal" <a id="CO543-1"></a><i class="conum" data-value="1"></i>
    password =&gt; "your_password" <a id="CO543-2"></a><i class="conum" data-value="2"></i>
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO543-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify the <code class="literal">logstash_internal</code> user that you created earlier in this tutorial.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO543-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify the password that you chose for this user ID.</p>
</td>
</tr>
</table>
</div>
</li>
<li class="listitem">
<p>If you prefer not to put your user ID and password in the configuration file,
store them in a keystore instead.</p>
<p>Run the following commands to create the Logstash
keystore and add the secure settings:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">set +o history
export LOGSTASH_KEYSTORE_PASS=mypassword <a id="CO544-1"></a><i class="conum" data-value="1"></i>
set -o history
./bin/logstash-keystore create
./bin/logstash-keystore add ES_USER
./bin/logstash-keystore add ES_PWD</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO544-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>You can optionally protect access to the Logstash keystore by storing a password
in an environment variable called <code class="literal">LOGSTASH_KEYSTORE_PASS</code>. For more information,
see <a href="https://www.elastic.co/guide/en/logstash/7.10/keystore.html#keystore-password" class="ulink" target="_top">Keystore password</a>.</p>
</td>
</tr>
</table>
</div>
<p>When prompted, specify the <code class="literal">logstash_internal</code> user and its password for the
<code class="literal">ES_USER</code> and <code class="literal">ES_PWD</code> values.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The Logstash keystore differs from the Kibana keystore. Whereas the Kibana
keystore enables you to store <code class="literal">kibana.yml</code> settings by name, the Logstash keystore
enables you to create arbitrary names that you can reference in the Logstash
configuration. To learn more, see
<a href="https://www.elastic.co/guide/en/logstash/7.10/keystore.html" class="ulink" target="_top">Secrets keystore for secure settings</a>.</p>
</div>
</div>
<p>You can now use these <code class="literal">ES_USER</code> and <code class="literal">ES_PWD</code> keys in your configuration
file.  For example, add the <code class="literal">user</code> and <code class="literal">password</code> settings in the
<code class="literal">demo-metrics-pipeline.conf</code> file as follows:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">...

output {
  elasticsearch {
    hosts =&gt; "localhost:9200"
    manage_template =&gt; false
    index =&gt; "%{[@metadata][beat]}-%{[@metadata][version]}-%{+YYYY.MM.dd}"
    user =&gt; "${ES_USER}"
    password =&gt; "${ES_PWD}"
  }
}</pre>
</div>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Start Logstash by using the appropriate method for your environment.</p>
<p>For example, to
run Logstash from a command line, go to the Logstash directory and enter the following
command:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/logstash -f demo-metrics-pipeline.conf</pre>
</div>
<p>To start Logstash as a service, see
<a href="https://www.elastic.co/guide/en/logstash/7.10/running-logstash.html" class="ulink" target="_top">Running Logstash as a service on Debian or RPM</a>.</p>
</li>
<li class="listitem">
If you were connecting directly from Metricbeat to Elasticsearch, you would need
to configure authentication credentials for the Elasticsearch output in the Metricbeat
configuration file. In
<a href="https://www.elastic.co/guide/en/elastic-stack-get-started/7.10/get-started-elastic-stack.html" class="ulink" target="_top">Getting started with the Elastic Stack</a>,
however, you configured
Metricbeat to send the data to Logstash for additional parsing, so no extra
settings are required in Metricbeat. For more information, see
<a href="https://www.elastic.co/guide/en/beats/metricbeat/7.10/securing-metricbeat.html" class="ulink" target="_top">Securing Metricbeat</a>.
</li>
<li class="listitem">
<p>Start Metricbeat by using the appropriate method for your environment.</p>
<p>For example, on macOS, run the following command from the Metricbeat directory:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./metricbeat -e</pre>
</div>
<p>For more methods, see <a href="https://www.elastic.co/guide/en/beats/metricbeat/7.10/metricbeat-starting.html" class="ulink" target="_top">Starting Metricbeat</a>.</p>
</li>
</ol>
</div>
<p>Wait a few minutes for new data to be sent from Metricbeat to Logstash and Elasticsearch.</p>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="get-started-verify-users"></a>View system metrics in Kibana<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>Log in to Kibana with the user ID that has <code class="literal">metricbeat_reader</code> and <code class="literal">kibana_user</code>
roles (for example, <code class="literal">jdoe</code>).</p>
<p>These roles enable the user to see the system metrics in Kibana (for example, on
the <span class="strong strong"><strong>Discover</strong></span> page or in the
<a href="http://localhost:5601/app/kibana#/dashboard/Metricbeat-system-overview" class="ulink" target="_top">Metricbeat system overview dashboard</a>).</p>
<h3><a id="gs-security-nextsteps"></a>What&#8217;s next?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/x-pack/docs/en/security/get-started-security.asciidoc">edit</a></h3>
<p>Congratulations! You&#8217;ve successfully set up authentication and authorization by
using the native realm. You learned how to create user IDs and roles that
prevent unauthorized access to the Elastic Stack.</p>
<p>Later, when you&#8217;re ready to increase the number of nodes in your cluster, you&#8217;ll
want to encrypt communications across the Elastic Stack. To learn how, read
<a class="xref" href="encrypting-communications.html" title="Encrypting communications"><em>Encrypting communications</em></a>.</p>
<p>For more detailed information about securing the Elastic Stack, see:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/configuring-security.html" class="ulink" target="_top">Configuring security in Elasticsearch</a>. Encrypt
inter-node communications, set passwords for the built-in users, and manage your
users and roles.
</li>
<li class="listitem">
<a href="https://www.elastic.co/guide/en/kibana/7.10/using-kibana-with-security.html" class="ulink" target="_top">Configuring security in Kibana</a>.
Set the authentication credentials in Kibana and encrypt communications between
the browser and the Kibana server.
</li>
<li class="listitem">
<a href="https://www.elastic.co/guide/en/logstash/7.10/ls-security.html" class="ulink" target="_top">Configuring security in Logstash</a>. Set the
authentication credentials for Logstash and encrypt communications between
Logstash and Elasticsearch.
</li>
<li class="listitem">
Configuring security in the Beats. Configure authentication
credentials and encrypt connections to Elasticsearch. For example, see
<a href="https://www.elastic.co/guide/en/beats/filebeat/7.10/securing-filebeat.html" class="ulink" target="_top">Configure Filebeat to use security features</a>.
</li>
<li class="listitem">
<a href="https://www.elastic.co/guide/en/elasticsearch/hadoop/7.10/security.html" class="ulink" target="_top">Configuring Elasticsearch for Apache Hadoop to use secured transport</a>.
</li>
</ul>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="ccs-clients-integrations.html">« Cross cluster search, clients, and integrations</a>
</span>
<span class="next">
<a href="encrypting-internode-communications.html">Tutorial: Encrypting communications »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
